<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Ubuntuä½¿ç”¨è®°å½•</title>
    <url>/2017/04/16/ubuntu-omg/</url>
    <content><![CDATA[<p>è®°å½•ä¸€æ¬¡Ubuntuåˆå§‹åŒ–æµç¨‹ã€‚</p>
<span id="more"></span>

<h3 id="æ˜¾å¡é©±åŠ¨"><a href="#æ˜¾å¡é©±åŠ¨" class="headerlink" title="æ˜¾å¡é©±åŠ¨"></a>æ˜¾å¡é©±åŠ¨</h3><ul>
<li>æ£€æŸ¥ä½ çš„ç”µè„‘æœ‰å“ªäº›æ˜¾å¡<br>lspci -k | grep -A 2 -i â€œVGAâ€  </li>
<li>æŸ¥çœ‹Ubuntuæ­£åœ¨ä½¿ç”¨å“ªå—æ˜¾å¡<br>System Settings &gt; Details &gt; Overview  </li>
<li>æŸ¥çœ‹å“ªä¸€ä¸ªä¸“æœ‰é©±åŠ¨æ˜¯æ¨èå®‰è£…çš„<br>sudo ubuntu-drivers devices  </li>
<li>å®‰è£…Nvidiaä¸“æœ‰æ˜¾å¡é©±åŠ¨<br>ç»ˆç«¯æ‰§è¡Œsoftware-properties-gtkæ‰“å¼€GUIæˆ–æ‰§è¡Œsudo apt-get install nvidia-375ç›´æ¥å®‰è£…  </li>
<li>åˆ‡æ¢æ˜¾å¡<br>Dashä¸­æ‰“å¼€Nvidia X Server Settingsæˆ–ç»ˆç«¯æ‰§è¡Œå‘½ä»¤nvidia-settingsï¼Œåœ¨PRIME Profilesåˆ‡æ¢  </li>
</ul>
<h3 id="ç³»ç»ŸåŸºç¡€é…ç½®"><a href="#ç³»ç»ŸåŸºç¡€é…ç½®" class="headerlink" title="ç³»ç»ŸåŸºç¡€é…ç½®"></a>ç³»ç»ŸåŸºç¡€é…ç½®</h3><ul>
<li>å¸è½½å¤šä½™çš„è½¯ä»¶<br>sudo apt-get remove libreoffice-common<br>sudo apt-get remove unity-webapps-common<br>sudo apt-get remove totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku landscape-client-ui-install onboard deja-dup imagemagick  </li>
<li>æ¡Œé¢å¸ƒå±€<br>gsettings set org.compiz.unityshell:/org/compiz/profiles/unity/plugins/unityshell/ launcher-minimize-window true<br>gsettings set com.canonical.Unity.Launcher launcher-position Bottom  </li>
<li>æ›´æ¢æº<br>sudo vim /etc/apt/sources.list<br>sudo apt-get update<br>sudo apt-get upgrade  </li>
<li>å®‰è£…åŸºç¡€è½¯ä»¶  <ul>
<li>é€šè¿‡æºç›´æ¥å®‰è£…<br>sudo apt-get install vim<br>sudo apt-get install samba<br>sudo apt-get install chromium<br>sudo apt-get install screenfetch<br>sudo apt-get install git subversion vpnc<br>sudo apt-get install axel uget aria2<br>sudo apt-get install vlc<br>sudo apt-get install okular<br>sudo apt-get install kchmviewer<br>sudo apt-get install mediainfo mediainfo-gui<br>sudo add-apt-repository ppa:webupd8team/sublime-text-3<br>sudo apt-get update<br>sudo apt-get install sublime-text  </li>
<li>å®‰è£…debæ–‡ä»¶<br><a href="https://github.com/geeeeeeeeek/electronic-wechat">å¾®ä¿¡</a><br><a href="https://music.163.com/#/download">ç½‘æ˜“äº‘éŸ³ä¹</a><br>sudo apt-get install libqgsttools-p1 libqt5multimedia5-plugins libqt5multimediawidgets5 libqt5libqgtk2<br>sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb<br><a href="https://pinyin.sogou.com/linux/?r=pinyin">æœç‹—è¾“å…¥æ³•</a><br>sudo apt install libopencc1 fcitx fcitx-libs fcitx-libs-qt fonts-droid-fallback<br>sudo dpkg -i sogoupinyin_2.1.0.0086_amd64.deb<br><a href="https://github.com/LiuLang/bcloud-packages">ç™¾åº¦äº‘ç›˜</a><br>sudo apt-get install gnome-icon-theme-symbolic python3-crypto python3-pyinotify python3-keyring<br>sudo dpkg -i bcloud_3.8.2-1_all.deb<br><a href="https://github.com/getlantern/lantern">è“ç¯</a><br>sudo dpkg -i lantern-installer-beta-64-bit.deb<br><a href="https://www.jianguoyun.com/s/downloads/linux">åšæœäº‘</a><br>sudo apt-get install python-gtk2 python-notify default-jre-headless<br>sudo dpkg -i nautilus_nutstore_amd64.deb<br><a href="https://community.wps.cn/download/">WPS</a><br>sudo dpkg -i wps-office_10.1.0.5672~a21_amd64.deb  </li>
</ul>
</li>
<li><a href="https://wiki.ubuntu.org.cn/Gedit%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81">Geditä¸­æ–‡ä¹±ç </a><br>sudo apt-get install dconf-editor<br>è¿è¡Œdconf-editor<br>å±•å¼€/org/gnome/gedit/preferences/encodings<br>Candidate Encodingsçš„valueé…ç½®ä¸º[â€˜GB18030â€™, â€˜UTF-8â€™, â€˜CURRENTâ€™, â€˜ISO-8859-15â€™, â€˜UTF-16â€™]  </li>
</ul>
<h3 id="Jekyllç¯å¢ƒ"><a href="#Jekyllç¯å¢ƒ" class="headerlink" title="Jekyllç¯å¢ƒ"></a>Jekyllç¯å¢ƒ</h3><ul>
<li>sudo apt-get install ruby ruby-dev  </li>
<li>gem sources â€“remove <a href="https://rubygems.org/">https://rubygems.org/</a>  </li>
<li>gem sources -a <a href="https://ruby.taobao.org/">https://ruby.taobao.org/</a>  </li>
<li>gem sources -l  </li>
<li>sudo gem install jekyll bundler  </li>
<li>bundle install  </li>
<li><a href="https://jekyllcn.com/">build&amp;run</a></li>
</ul>
<h4 id="Append"><a href="#Append" class="headerlink" title="Append:"></a>Append:</h4><ul>
<li> <strong>åœ¨Linux Mint 18.3ä¸Šæ‰§è¡Œsudo gem install jekyllæŠ¥é”™ï¼š</strong></li>
</ul>
<blockquote>
<p>Building native extensions.  This could take a whileâ€¦<br>ERROR:  Error installing jekyll:<br>   ERROR: Failed to build gem native extension.</p>
<p>  current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser<br>/usr/bin/ruby2.3 -r ./siteconf20180226-49726-1ijhpau.rb extconf.rb<br>creating Makefile</p>
<p>current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser<br>make â€œDESTDIR=â€ clean</p>
<p>current directory: /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser<br>make â€œDESTDIR=â€<br>compiling ruby_http_parser.c<br>In file included from /usr/include/ruby-2.3.0/ruby/ruby.h:36:0,<br>                from /usr/include/ruby-2.3.0/ruby.h:33,<br>                from ruby_http_parser.c:1:<br>/usr/include/ruby-2.3.0/ruby/defines.h:26:19: fatal error: stdio.h: No such file or directory<br>compilation terminated.<br>Makefile:239: recipe for target â€˜ruby_http_parser.oâ€™ failed<br>make: *** [ruby_http_parser.o] Error 1</p>
<p>make failed, exit code 2</p>
<p>Gem files will remain installed in /var/lib/gems/2.3.0/gems/http_parser.rb-0.6.0 for inspection.<br>Results logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/http_parser.rb-0.6.0/gem_make.out   </p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼š<br>sudo apt-get install build-essential patch ruby-dev zlib1g-dev liblzma-dev libsqlite3-dev</p>
<ul>
<li><strong>VMware Toolså·¥å…·å®‰è£…å¤±è´¥ï¼Œæ— æ³•å¤åˆ¶ç²˜è´´ï¼ˆå¹³å°ï¼šMint 18.3ï¼ŒVMware 11ï¼‰</strong></li>
</ul>
<blockquote>
<p>Makefile:120: recipe for target â€˜vmhgfs.koâ€™ failed  </p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li><p>Make sure the updates are done:<br>sudo apt-get update</p>
</li>
<li><p>Make sure git is installed<br>sudo apt-get install git</p>
</li>
<li><p>Run the command to get the tools from repository.<br>sudo git clone <a href="https://github.com/rasa/vmware-tools-patches.git">https://github.com/rasa/vmware-tools-patches.git</a></p>
</li>
<li><p>cd to vmware-tools-folder<br>cd vmware-tools-patches</p>
</li>
<li><p>Run the patch<br>sudo ./download-tools.sh</p>
</li>
<li><p>Run the following patch<br>sudo ./untar-and-patch.sh</p>
</li>
<li><p>Run the complie.sh file<br>sudo ./compile.sh<br><a href="https://communities.vmware.com/message/2665867?tstart=0">å‚è€ƒæ­¤è´´</a></p>
</li>
</ol>
<ul>
<li><p><strong>Windowsæ— æ³•è®¿é—®SambaæœåŠ¡å™¨ï¼Œè®¿é—®è¢«æ‹’ç»</strong><br>éœ€è¦åœ¨Sambaä¸­åˆ›å»ºç”¨æˆ·ã€‚Ubuntuç³»ç»Ÿä¸­çš„ç”¨æˆ·ï¼Œå’ŒSambaç”¨æˆ·æ˜¯ä¸¤å›äº‹ï¼Œè¦å°†èµ„æºå…±äº«ç»™ç³»ç»Ÿä¸­çš„æŸä¸ªç”¨æˆ·ï¼Œå¿…é¡»å°†è¯¥ç”¨æˆ·æ·»åŠ åˆ°Sambaä¸­ã€‚<a href="https://blog.sina.com.cn/s/blog_6c9d65a10100oobp.html">å‚è€ƒ</a><br>ç”¨åˆ°çš„å‘½ä»¤ï¼šsmbpasswdã€‚<a href="https://man.linuxde.net/smbpasswd">å‚è€ƒ</a>  </p>
</li>
<li><p><strong>å®‰è£…oh-my-zshæ­¥éª¤</strong></p>
</li>
</ul>
<ol>
<li>sudo apt-get install zsh //å®‰è£…</li>
<li>zsh â€“version //ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ</li>
<li>sudo chsh -s $(which zsh) //è®¾ç½®zshä¸ºé»˜è®¤shell</li>
<li>æ³¨é”€é‡æ–°ç™»å½•</li>
<li>echo $SHELL //ç¡®è®¤zshæ˜¯å¦æ˜¯é»˜è®¤SHELL</li>
<li>ä½¿ç”¨curlæ–¹å¼å®‰è£…oh-my-zshï¼šsudo sh -c â€œ$(curl -fsSL <a href="https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;">https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</a></li>
<li>é…ç½®ï¼švim ~/.zshrc</li>
<li>è‹¥æœ‰ä¸­æ–‡ä¹±ç ï¼Œå†é…ç½®ï¼šexport LANG=zh_CN.UTF-8</li>
<li>ä½¿é…ç½®ç”Ÿæ•ˆï¼šsource ~/.zshrc</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/1970/01/01/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºChromiumçš„ä½¿ç”¨ä¸¤åˆ™</title>
    <url>/2017/08/20/settle-chromium/</url>
    <content><![CDATA[<p>Chromiumåœ¨WIN/Linuxå¹³å°çš„ä¸€ä¸ªé…ç½®ã€‚</p>
<span id="more"></span>

<h4 id="1ã€è§£å†³-Windows-ä¸­-Chromium-â€œç¼ºå°‘-GOOGLE-API-å¯†é’¥â€-å’Œæ— æ³•ç™»é™†è´¦æˆ·çš„é—®é¢˜ï¼ˆè½¬è½½ï¼‰"><a href="#1ã€è§£å†³-Windows-ä¸­-Chromium-â€œç¼ºå°‘-GOOGLE-API-å¯†é’¥â€-å’Œæ— æ³•ç™»é™†è´¦æˆ·çš„é—®é¢˜ï¼ˆè½¬è½½ï¼‰" class="headerlink" title="1ã€è§£å†³ Windows ä¸­ Chromium â€œç¼ºå°‘ GOOGLE API å¯†é’¥â€ å’Œæ— æ³•ç™»é™†è´¦æˆ·çš„é—®é¢˜ï¼ˆè½¬è½½ï¼‰"></a>1ã€è§£å†³ Windows ä¸­ Chromium â€œç¼ºå°‘ GOOGLE API å¯†é’¥â€ å’Œæ— æ³•ç™»é™†è´¦æˆ·çš„é—®é¢˜ï¼ˆè½¬è½½ï¼‰</h4><p>ä¸€æ‰“å¼€ Chromiumï¼Œåœ°å€æ ä¸‹æ–¹å°±æç¤º â€œç¼ºå°‘ Google API å¯†é’¥ï¼Œå› æ­¤ Chromium çš„éƒ¨åˆ†åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨â€ã€‚è¿™ç›´æ¥å¯¼è‡´äº†æ— æ³•åœ¨ Chromium ç™»å½• Google è´¦æˆ·å¹¶åŒæ­¥å„ç§ä¿¡æ¯ã€‚  </p>
<p>æ‰“å¼€ windows çš„ CMD å‘½ä»¤æç¤ºç¬¦ï¼Œä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š </p>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">setx</span> GOOGLE_API_KEY <span class="string">"no"</span></span><br><span class="line">setx GOOGLE_DEFAULT_CLIENT_ID <span class="string">"no"</span></span><br><span class="line">setx GOOGLE_DEFAULT_CLIENT_SECRET <span class="string">"no"</span></span><br></pre></td></tr></tbody></table></figure>

<p>å…¶å®å°±æ˜¯è®¾ç½®è¿™æ ·ä¸‰ä¸ªç¯å¢ƒå˜é‡ï¼Œå€¼å‡ä¸ºâ€œnoâ€ã€‚ç„¶è€Œè¿™æ ·åªæ˜¯æ¶ˆé™¤äº†å“ªè¡Œæç¤ºè€Œå·²ï¼ˆå¯¹äºæ²¡æœ‰ Google è´¦æˆ·çš„â€œè‰¯æ°‘â€ä»¬ï¼Œæˆ–è®¸æœ‰ç”¨ï¼‰ï¼ŒGoogle è´¦æˆ·è¿˜æ˜¯æ— æ³•ç™»å½•ã€‚  </p>
<p>åœ¨ Debian Jessie ä¸º Chromium è®¾ç½® PepperFlashPlayer çš„æ—¶å€™ï¼Œåœ¨ /etc/chromium.d ç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ª apikeys æ–‡ä»¶ã€‚æ‰“å¼€å®ƒï¼Œçœ‹åˆ°é‡Œé¢çš„å†…å®¹å¦‚ä¸‹ï¼š </p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># API keys assigned to Debian by Google for access to their services like sync and gmail.</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOOGLE_API_KEY</span>=â€AIzaSyCkfPOPZXDKNn8hhgu3JrA62wIgC93d44kâ€</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOOGLE_DEFAULT_CLIENT_ID</span>=â€811574891467.apps.googleusercontent.comâ€</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOOGLE_DEFAULT_CLIENT_SECRET</span>=â€kdloedMFGdGla2P1zacGjAQhâ€</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸å°±æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡å—ï¼Ÿäºæ˜¯å°†ä¸Šè¿°æ–‡ç« ä¸­æåˆ°çš„ç¯å¢ƒå˜é‡æŒ‰ç…§è¿™ä¸ª apikeys æ–‡ä»¶ä¸­çš„å€¼è¿›è¡Œè®¾ç½®ï¼Œå³åœ¨ CMD ä¸­æ‰§è¡Œï¼š </p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">setx</span> GOOGLE_API_KEY AIzaSyCkfPOPZXDKNn<span class="number">8</span>hhgu<span class="number">3</span>JrA<span class="number">62</span>wIgC<span class="number">93</span>d<span class="number">44</span>k</span><br><span class="line"><span class="attribute">setx</span> GOOGLE_DEFAULT_CLIENT_ID <span class="number">811574891467</span>.apps.googleusercontent.com</span><br><span class="line"><span class="attribute">setx</span> GOOGLE_DEFAULT_CLIENT_SECRET kdloedMFGdGla<span class="number">2</span>P<span class="number">1</span>zacGjAQh</span><br></pre></td></tr></tbody></table></figure>

<p>å†å°è¯•æ‰“å¼€ Chromiumï¼Œå‘ç°æç¤ºæ¶ˆå¤±äº†ï¼ŒGoogle è´¦æˆ·ä¹Ÿèƒ½ç™»å½•äº†ã€‚</p>
<h4 id="2ã€è§£å†³-Mint-ä¸­-Chromium-å¼¹çª—-â€œEnter-password-for-keyring-â€˜Default-keyringâ€™-to-unlockâ€-çš„é—®é¢˜"><a href="#2ã€è§£å†³-Mint-ä¸­-Chromium-å¼¹çª—-â€œEnter-password-for-keyring-â€˜Default-keyringâ€™-to-unlockâ€-çš„é—®é¢˜" class="headerlink" title="2ã€è§£å†³ Mint ä¸­ Chromium å¼¹çª— â€œEnter password for keyring â€˜Default keyringâ€™ to unlockâ€ çš„é—®é¢˜"></a>2ã€è§£å†³ Mint ä¸­ Chromium å¼¹çª— â€œEnter password for keyring â€˜Default keyringâ€™ to unlockâ€ çš„é—®é¢˜</h4><p>æ¡Œé¢ç‰ˆ Mint ä½¿ç”¨ Chromium ä¼šå¼¹çª—æç¤º â€œEnter password for keyring â€˜Default keyringâ€™ to unlockâ€ ï¼Œè¾“å…¥ Mint å¯†ç å¼¹çª—æ¶ˆå¤±ï¼Œæ€ä¹ˆæ‰èƒ½åœ¨æ¯æ¬¡ä½¿ç”¨ Chromium çš„æ—¶å€™è®©è¿™ä¸ªå¼¹çª—æ¶ˆå¤±ï¼Ÿ  </p>
<p>å…³é—­ Chromium ï¼Œå‘½ä»¤è¡Œä¸‹è¿è¡Œ seahorse ï¼Œæ‰¾åˆ° Passwords -&gt; Default keyring ï¼Œå³é”®é€‰ Change Password ï¼ŒæŠŠæ–°å¯†ç æ”¹ä¸ºç©ºï¼Œé‡å¯ç³»ç»Ÿã€‚  </p>
<p>ç‰ˆæœ¬ï¼šVersion 59.0.3071.109 (Developer Build) Built on Ubuntu , running on LinuxMint 18.2 (32-bit)</p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>google</tag>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>æŠŠæ—¶é—´å½“ä½œæœ‹å‹</title>
    <url>/2017/03/06/be-frd-with-time/</url>
    <content><![CDATA[<p>2æœˆä»½è¯»å®Œäº†ã€ŠæŠŠæ—¶é—´å½“ä½œæœ‹å‹ã€‹è¿™æœ¬ä¹¦ï¼Œç°åœ¨æ‰æ¥è®°å½•ï¼Œæœ‰ç‚¹æ™šäº†ã€‚ä½œè€…ä»å¿ƒæ™ºçš„è§’åº¦è€ƒè™‘é—®é¢˜ï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ã€‚</p>
<span id="more"></span>
<h3 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h3><p>ä¹¦æœ¬çš„ç« èŠ‚ç¼–æ’ï¼š  </p>
<ol start="0">
<li>æ‰€æœ‰äººçš„å›°å¢ƒ</li>
<li>å¿ƒæ™ºçš„åŠ›é‡</li>
<li>å¼€å¯è‡ªå·±çš„å¿ƒæ™º</li>
<li>é€šè¿‡ç®¡ç†è‡ªå·±ä¸æ—¶é—´åšæœ‹å‹</li>
<li>å¼€æ‹“è‡ªå·±çš„å¿ƒæ™º</li>
<li>å°å¿ƒæ‰€è°“â€œæˆåŠŸå­¦â€</li>
<li>æ›´å¤šæ€è€ƒ</li>
<li>ä»æ­¤æ—¶æ­¤åˆ»å¼€å§‹æ”¹å˜</li>
</ol>
<h3 id="å¯ç¤º"><a href="#å¯ç¤º" class="headerlink" title="å¯ç¤º"></a>å¯ç¤º</h3><p>æœ‰ä¸€äº›ç« èŠ‚çš„å…·ä½“å†…å®¹ç°åœ¨çš„æˆ‘æœ‰ç‚¹å¿˜äº†ï¼Œè®°å½•ä¸€ä¸‹å¯¹æˆ‘æ¥è¯´æ¯”è¾ƒé‡è¦çš„è§‚ç‚¹ï¼Œå¸Œæœ›èƒ½æé†’è‡ªå·±ï¼š</p>
<h4 id="1ã€ä½ æ°¸è¿œä¸æ˜¯æœ€ç—›è‹¦çš„"><a href="#1ã€ä½ æ°¸è¿œä¸æ˜¯æœ€ç—›è‹¦çš„" class="headerlink" title="1ã€ä½ æ°¸è¿œä¸æ˜¯æœ€ç—›è‹¦çš„"></a>1ã€ä½ æ°¸è¿œä¸æ˜¯æœ€ç—›è‹¦çš„</h4><p>é’ˆå¯¹è¿™ä¸ªè§‚ç‚¹ä½œè€…ä¸“é—¨æœ‰ä¸¾ä¾‹ï¼Œä»¤äººå°è±¡æ·±åˆ»ã€‚</p>
<h4 id="2ã€åšæŒä¸ç­–ç•¥"><a href="#2ã€åšæŒä¸ç­–ç•¥" class="headerlink" title="2ã€åšæŒä¸ç­–ç•¥"></a>2ã€åšæŒä¸ç­–ç•¥</h4><p>è¿™ä¸ªæˆ‘è§‰å¾—æœ‰ç‚¹éš¾åº¦ï¼ŒæŒ‘æˆ˜å®åœ¨ä¸å°ã€‚æ— è®ºä½ å®šäº†å¤šè¯¦å°½çš„è®¡åˆ’ï¼Œæ€»ä¼šæœ‰æ„å¤–å‘ç”Ÿï¼Œå°½ç®¡ä½œè€…å·²ç»å‘Šè¯‰æˆ‘æŠŠæ„å¤–å½“æˆè®¡åˆ’çš„ä¸€éƒ¨åˆ†ã€‚å°½é‡åƒä½œè€…ä¸€æ ·æŠŠè®¡åˆ’æŒ‰ç…§ä¸€ä¸ªæ˜ŸæœŸä¸€ä¸ªæ˜ŸæœŸçš„å‘¨æœŸæ¥å®Œæˆå§ã€‚</p>
<h4 id="3ã€æ§åˆ¶è‡ªå·±çš„å¤§è„‘"><a href="#3ã€æ§åˆ¶è‡ªå·±çš„å¤§è„‘" class="headerlink" title="3ã€æ§åˆ¶è‡ªå·±çš„å¤§è„‘"></a>3ã€æ§åˆ¶è‡ªå·±çš„å¤§è„‘</h4><p>æ§åˆ¶è‡ªå·±çš„å¤§è„‘ï¼Œè€Œä¸æ˜¯è¢«è‡ªå·±çš„å¤§è„‘æ§åˆ¶ï¼Œè¿™å°±æ˜¯å¿ƒæ™ºåŠ›é‡çš„å¼ºå¤§ä¹‹å¤„ã€‚è¿™æ˜¯æˆ‘è¯»è¿™æœ¬ä¹¦çš„æœ€å¤§æ”¶è·ã€‚æ¯”å¦‚èµ·åºŠï¼Œä¸æƒ³èµ·åºŠæ˜¯å› ä¸ºè‡ªå·±è¢«å¤§è„‘æ§åˆ¶äº†ï¼Œå› ä¸ºç¡è§‰èˆ’æœï¼Œå¤§è„‘æƒ³çš„æ˜¯èˆ’æœï¼Œè¿™ä¸æ˜¯æˆ‘æƒ³çš„ï¼Œæˆ‘æƒ³çš„æ˜¯èµ·åºŠåšäº‹ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜æ˜¯èµ·ä¸æ¥ï¼Ÿå› ä¸ºå¤§è„‘æ§åˆ¶äº†æˆ‘ã€‚æˆ‘æœ‰è¿™æ ·çš„ç»éªŒï¼šç¬¬äºŒå¤©è¦æ˜¯æœ‰é‡è¦çš„äº‹æƒ…å¿…é¡»è¦æŒ‰æ—¶èµ·åºŠçš„ï¼Œä¸´ç¡å‰å¿ƒé‡Œé¢æé†’è‡ªå·±æ˜å¤©å‡ ç‚¹ä¸€å®šè¦èµ·åºŠåšä»€ä¹ˆäº‹æƒ…ï¼Œç¬¬äºŒå¤©å¾€å¾€éƒ½èƒ½å‡†æ—¶èµ·åºŠã€‚å› ä¸ºæˆ‘æ§åˆ¶äº†è‡ªå·±çš„å¤§è„‘ï¼Œæˆ‘å‘Šè¯‰å¤§è„‘å¿…é¡»åšä»€ä¹ˆäº‹æƒ…ï¼Œè¿™ä»¶äº‹æ˜¯å¯¹æˆ‘æœ‰ç›Šçš„ã€‚æ§åˆ¶è‡ªå·±çš„å¤§è„‘ï¼Œå¼€å¯å¿ƒæ™ºå¼ºå¤§åŠ›é‡çš„ç¬¬ä¸€æ­¥ï¼</p>
<h4 id="4ã€è®°å½•å°´å°¬"><a href="#4ã€è®°å½•å°´å°¬" class="headerlink" title="4ã€è®°å½•å°´å°¬"></a>4ã€è®°å½•å°´å°¬</h4><p>æŠŠè‡ªå·±ç”Ÿæ´»æˆ–å·¥ä½œä¸­å°´å°¬çš„äº‹æƒ…è®°å½•ä¸‹æ¥ï¼Œå¶å°”çœ‹ä¸€ä¸‹ï¼Œå¯¹è‡ªå·±åæ¥çš„å¤„äº‹æ€åº¦å’Œæ–¹å¼ï¼Œéƒ½ä¼šæœ‰è­¦ç¤ºçš„ä½œç”¨ã€‚</p>
<h4 id="5ã€æå‰å‡†å¤‡"><a href="#5ã€æå‰å‡†å¤‡" class="headerlink" title="5ã€æå‰å‡†å¤‡"></a>5ã€æå‰å‡†å¤‡</h4><p>è¿™ä¸ªæˆ‘ä¸çŸ¥é“è¯´ä»€ä¹ˆå¥½ï¼Œé“ç†éƒ½æ‡‚ï¼Œå´ä¾ç„¶è¿‡ä¸å¥½è¿™ä¸€ç”Ÿï¼Ÿå¤šå¤šåæ€å§ï¼ä¸ºä»€ä¹ˆæ²¡æœ‰æå‰å‡†å¤‡ï¼Œä¸´æ—¶æŠ±ä½›è„šä¹±é˜µè„šï¼Ÿè¿™ä¸ªåº”è¯¥è¿˜è¦ä»è®¡åˆ’åšèµ·ï¼Œæœ‰è®¡åˆ’æ‰æœ‰å‡†å¤‡ï¼å½“ç„¶ï¼Œè¡ŒåŠ¨æ˜¯å‰æï¼</p>
<h4 id="6ã€æŒ‰æ—¶æ‰“ç›¹ï¼ŒæŒ‰æ—¶æ¸…é†’"><a href="#6ã€æŒ‰æ—¶æ‰“ç›¹ï¼ŒæŒ‰æ—¶æ¸…é†’" class="headerlink" title="6ã€æŒ‰æ—¶æ‰“ç›¹ï¼ŒæŒ‰æ—¶æ¸…é†’"></a>6ã€æŒ‰æ—¶æ‰“ç›¹ï¼ŒæŒ‰æ—¶æ¸…é†’</h4><p>æˆ‘è§‰å¾—æˆ‘å¾ˆéœ€è¦ç¡çœ ï¼Œå¦‚æœè¦åšåˆ°æŒ‰æ—¶æ‰“ç›¹æŒ‰æ—¶æ¸…é†’ï¼Œæ˜¯å¾ˆéœ€è¦ç¯å¢ƒé…åˆçš„ï¼Œè¿™ä¸ªä¸å¥½æ‰§è¡Œã€‚</p>
<h4 id="7ã€é©¬ä¸Šå¼€å§‹æ°¸è¿œéƒ½ä¸è¿Ÿ"><a href="#7ã€é©¬ä¸Šå¼€å§‹æ°¸è¿œéƒ½ä¸è¿Ÿ" class="headerlink" title="7ã€é©¬ä¸Šå¼€å§‹æ°¸è¿œéƒ½ä¸è¿Ÿ"></a>7ã€é©¬ä¸Šå¼€å§‹æ°¸è¿œéƒ½ä¸è¿Ÿ</h4><p>æ˜¯çš„ï¼Œæ‰€ä»¥æˆ‘é©¬ä¸ŠæŠŠè´­ç‰©è½¦æ¸…ç©ºäº†ã€‚å˜»å˜»ï¼Œå¼€ç©ç¬‘ã€‚</p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>reading</tag>
      </tags>
  </entry>
  <entry>
    <title>How to install and initialize Manjaro OS</title>
    <url>/2017/04/03/manjaro-install-and-initial-guide/</url>
    <content><![CDATA[<p>è®°å½•ä¸€æ¬¡Manjaroå®‰è£…æµç¨‹ã€‚</p>
<span id="more"></span>

<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>ä¸€ã€å®‰è£…ç³»ç»Ÿ  </p>
<ol>
<li>df â€“&gt;ç¡®è®¤Uç›˜åç§°å’Œè·¯å¾„  </li>
<li>umount sdb1 â€“&gt;å¸è½½å·²æŒ‚è½½çš„Uç›˜  </li>
<li>dd if=/home/manjaro-xfce-17.0-stable-x86_64.iso of=/dev/sdb â€“&gt;ddå‘½ä»¤ä¸­çš„ç›®æ ‡æ˜¯sdbï¼Œæ²¡æœ‰æ ‡å·  </li>
<li>install boot non-free â€“&gt;å¯¹äºåŒæ˜¾å¡é©±åŠ¨ï¼Œå®‰è£…çš„æ—¶å€™booté€‰æ‹©non-freeï¼Œå¦‚æœboot defaultçš„è¯ï¼Œè£…å¥½ç³»ç»Ÿä»¥åä¹Ÿå¯ä»¥åœ¨è®¾ç½®é‡Œå®‰è£…bumblebee  </li>
</ol>
<h3 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h3><p>äºŒã€ç³»ç»Ÿåˆå§‹é…ç½®  </p>
<ol>
<li>sudo pacman-mirrors -g â€“&gt;æ’åˆ—æº  </li>
<li>sudo pacman-optimize&amp;&amp;sync â€“&gt;åŒæ­¥ï¼Œç¢ç‰‡æ•´ç†ã€‚å›ºæ€ç¡¬ç›˜ä¸èƒ½ç”¨pacman-optimize  </li>
<li>sudo pacman -Syyu â€“&gt;å‡çº§ç³»ç»Ÿ  </li>
<li>sudo nano /etc/pacman.conf â€“&gt;æ·»åŠ ArchLinuxCNæº  </li>
<li>sudo pacman -Syyu â€“&gt;åŒæ­¥  </li>
<li>sudo pacman -S archlinuxcn-keyring â€“&gt;å¯¼å…¥GPG Key  </li>
</ol>
<h3 id="Basic-Tools"><a href="#Basic-Tools" class="headerlink" title="Basic Tools"></a>Basic Tools</h3><p>ä¸‰ã€å®‰è£…åŸºç¡€è½¯ä»¶  </p>
<ol>
<li>sudo pacman -Syu yaourt â€“&gt;Archlinuxçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·æ˜¯Pacmanï¼Œè€Œyaourtå·¥å…·å¯ä»¥å®‰è£…AUR(Archlinuxå®˜æ–¹ä¸æ”¯æŒ)çš„è½¯ä»¶  </li>
<li>yaourt screenfetch â€“&gt;ä¸€ä¸ªèƒ½å¤Ÿåœ¨ç»ˆç«¯æ˜¾ç¤ºç³»ç»Ÿ/ä¸»é¢˜ä¿¡æ¯çš„å‘½ä»¤è¡Œè„šæœ¬  </li>
<li>yaourt vim â€“&gt;æ–‡æœ¬ç¼–è¾‘å·¥å…·  </li>
<li>yaourt lantern â€“&gt;ç§‘å­¦ä¸Šç½‘å·¥å…·  </li>
<li>yaourt sogou â€“&gt;æœç‹—è¾“å…¥æ³•<br> è¿›å…¥fcitx config guiå¼‚å¸¸ï¼Œè¿˜éœ€å®‰è£…fcitx-configtoolï¼›<br> vim ~/.xprofile,æ·»åŠ <br> export GTK_IM_MODULE=fcitx<br> export QT_IM_MODULE=fcitx<br> export XMODIFIERS=â€@im=fcitxâ€<br> æ³¨é”€é‡æ–°ç™»å½•ç³»ç»Ÿ<br> è¿˜æ˜¯ä¸è¡Œï¼Œæ‰§è¡Œfcitx -diagnoseå‘½ä»¤è¯Šæ–­ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„ä¿®å¤  </li>
<li>yaourt uget â€“&gt;Firefoxå¯ä»¥é€šè¿‡æ·»åŠ FlashGotæ’ä»¶æŠŠugetè®¾ç½®ä¸ºå…¶é»˜è®¤ä¸‹è½½ç®¡ç†å™¨  </li>
<li>yaourt qq â€“&gt;å®‰è£…QQ  </li>
<li>yaourt netease â€“&gt;å®‰è£…ç½‘æ˜“äº‘éŸ³ä¹  </li>
<li>yaourt wechat â€“&gt;å®‰è£…å¾®ä¿¡  </li>
<li>å®‰è£…zsh<br>å®‰è£… zsh: sudo pacman -S zsh<br>é…ç½® oh-my-zsh: sh -c â€œ$(curl -fsSL <a href="https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;">https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</a><br>æ›´æ¢é»˜è®¤çš„ shell: chsh -s /bin/zsh<br>é‡å¯  </li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>manjaro</tag>
      </tags>
  </entry>
  <entry>
    <title>EDID</title>
    <url>/2017/09/04/edid/</url>
    <content><![CDATA[<p>(è¿™ç‰¹ä¹ˆå†™çš„å•¥ï¼Ÿ<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>20200910)<br>è¿˜æœ‰ä¸€äº›ä¸€ç›´æ²¡ææ‡‚ï¼Œå…ˆè®°ä¸€éƒ¨åˆ†ä¸‹æ¥ã€‚</p>
<span id="more"></span>

<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>PCï¼šåœ¨ä»»æ„åˆ†è¾¨ç‡ä¸‹ï¼Œè¿æ¥ç”µè„‘ä¸»æœºGeForce GTX750ï¼Œæ˜¾ç¤ºUnsupportedã€‚å¤šæ¬¡å®éªŒã€‚ä¸»æœºé‡å¯åç”»é¢èƒ½æ­£å¸¸å‡ºæ¥ï¼Œä½†ä»ç„¶æ— æ³•è¯»å–EDIDã€‚æµ‹è¯•äº†4å°ä¸»æœºï¼ˆå…¶ä»–3å°æ˜¾å¡å‹å·ä¸ç¡®å®šï¼‰ï¼Œåªæœ‰ä¸€å°æ­£å¸¸ã€‚</p>
<h3 id="ç„¶å"><a href="#ç„¶å" class="headerlink" title="ç„¶å"></a>ç„¶å</h3><p>æœé›†åˆ°ä»¥ä¸‹èµ„è®¯ï¼š</p>
<blockquote>
<ul>
<li>æ˜¾ç¤ºè®¾å¤‡ç”Ÿäº§ç”±äºåˆ‡å‰²æˆæœ¬ç­‰åŸå› éƒ½æ˜¯1366X768ï¼Œè€Œè§†é¢‘è®¯å·éƒ½æ˜¯1360X768</li>
<li>çŸ¥ä¹é—®é¢˜ï¼šã€Šä¸ºä»€ä¹ˆè¯´ 1366 * 768 æ˜¯ã€Œåäººç±»ã€çš„åˆ†è¾¨ç‡ï¼Ÿã€‹<br>å›ç­”1ï¼šè¿™ä¸ªåˆ†è¾¨ç‡ï¼Œæ¨ªå‘ä¸èƒ½è¢«4æ•´é™¤ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ä¸é€‚åˆä½¿ç”¨ã€‚å½±å“æ˜¯ï¼Œè¿™ä¸ªåˆ†è¾¨ç‡å•è¡Œæ‰«æä¸èƒ½32ä½å­—èŠ‚å¯¹é½ã€‚è€Œæˆ‘ä»¬çŸ¥é“ä¸»æµæœºå™¨çš„intæ˜¯32ä½ï¼ˆ64ä½æœºçš„intä¹ŸåŒæ ·æ˜¯32ä½ï¼‰ã€‚è¿™ä¼šå¯¼è‡´ç»å¸¸éœ€è¦ä¸ºå®ƒé¢å¤–ç•™ç©ºã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°åœ¨æŸäº›åœºåˆåªèƒ½ç”¨ 1360 * 768 ä»£æ›¿è¿™ä¸ª1366åˆ†è¾¨ç‡ã€‚<br>å›ç­”2ï¼š16:9å±å¹•æ˜¯æˆæœ¬ç«äº‰çš„äº§ç‰©ï¼šç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°16:9çš„å±å¹•é¢ç§¯è¦æ¯”16ï¼š10çš„å±å¹•å°0.1è‹±å¯¸ã€‚è¿™0.1è‹±å¯¸çœ‹èµ·æ¥ä¸å¤šï¼Œå…¶å®å®ƒçš„é¢ç§¯å¹¶ä¸å°ï¼Œå¤§è§„æ¨¡çš„åˆ‡å‰²æ¯ç‰ˆæ—¶èƒ½å¤šåˆ‡å‡ å—ã€‚å¦‚æœç›¸åŒå°ºå¯¸çš„æ¯ç‰ˆæŒ‰ç…§14.1è‹±å¯¸èƒ½åˆ‡å‡º30å—ï¼Œé‚£ä¹ˆ14.0è‹±å¯¸çš„å±å¹•æˆ–è®¸å°±èƒ½åˆ‡å‡º40å—ã€‚å¦‚æœæ€»æˆæœ¬æ˜¯6ä¸‡å…ƒï¼Œé‚£ä¹ˆ16:10çš„å±å¹•æ˜¯2000å…ƒä¸€å—ï¼Œè€Œ16ï¼š9çš„å±å¹•å°±æ˜¯1500å…ƒä¸€å—ã€‚<br>å›ç­”3ï¼šå› ä¸ºåˆ†è¾¨ç‡å¤ªå°ï¼Œå¼ºè¡Œ16:9ï¼Œä¸ºäº†é¢æ¿åˆ‡å‰²çš„æ›´å¤šï¼Œå¯¼è‡´é«˜åº¦åªæœ‰768ï¼Œç½‘é¡µç«–ç€æ˜¾ç¤ºä¸äº†å¤šå°‘å†…å®¹ã€‚è€Œ16:9ä½œä¸ºçœ‹ç”µå½±çš„æœ€ä½³æ¯”ä¾‹ï¼Œ1366 * 768 åˆè¿œè¾¾ä¸åˆ°1080Pã€‚æœ€ç»ˆä¸ºäº†èµšé’±ï¼Œå¸‚é¢ä¸Šå…¨éƒ½æ˜¯ 1366 * 768ï¼Œå¯¼è‡´å¤§é‡çš„åæ„Ÿã€‚<br>å›ç­”4ï¼š1366 * 768 æ˜¯å¯¹æˆæœ¬å¦¥åçš„äº§ç‰©ï¼Œåœ¨åˆ‡å‰²æ¶²æ™¶æ¿æ—¶æœ€ç»æµã€‚<br>å›ç­”5ï¼šåˆ‡å‰²æ•ˆç‡æœ€é«˜ã€‚æ¯ä¸€ä»£æ¶²æ™¶é¢æ¿éƒ½æœ‰è‡ªå·±æœ€å¤§æ•ˆç‡çš„åˆ†è¾¨ç‡ï¼Œæ¯”ä¾‹ï¼Œä»¥åŠå°ºå¯¸å¤§å°ï¼Œä»¥å°½é‡å‡å°‘æµªè´¹ä¸ºå‰æçš„åˆ‡å‰²ã€‚</li>
<li>æ—©æœŸå¾ˆå¤šæ˜¾å¡é‡Œé¢éƒ½æ²¡æœ‰è®¾ç½® 1366 * 768ï¼Œæ‰€ä»¥æ—©æœŸçš„æ˜¾å¡éƒ½æ²¡æ³•è¯†åˆ« 1366 * 768ï¼Œåªæœ‰ 1360 * 768ã€‚</li>
<li>1366x768 appears most commonly on monitors and laptop displays. Iâ€™ve seen 1360x768 creep its way onto cheap ass TVs though. My older TVâ€™s native resolution, for example, is 1360x768.  Nevertheless, Iâ€™d go for 1360x768 if you wanted 16:9 content, as 1366x768 cannot display anything at a native 16:9 without rounding, while 1360x768 can (at 1360x765; if you check YouTube and it displaying a video when your fullscreen resolution is 1360x768, youâ€™ll see).</li>
<li>At the time the first computer wide-screens became popular, the usual resolution on 4:3 panels was 1024Ã—768 (the XGA display standard). For simplicity and backward compatibility, the XGA resolution was kept as a basis when making the WXGA resolution (so that XGA graphics could be easily displayed on WXGA screens).<br>Just extending the width and keeping the same height was also simpler technically because you would only have to tweak the horizontal refresh rate timing to achieve it. However, the standard aspect ratio for wide displays was 16:9, which is not possible with 768 pixels, so the nearest value was chosen, 1366Ã—768.<br>WXGA can also refer to a 1360Ã—768 resolution (and some others that are less common), which was made to reduce costs in integrated circuits. 1366Ã—768 8-bit pixels would take just above 1-MiB to be stored (1024.5KiB), so that would not fit into an 8-Mbit memory chip and you would have to have a 16-Mbit memory chip just to store a few pixels. That is why something a bit lower that 1366 was chosen. Why 1360? Because you can divide it by 8 (or even 16) which is far simpler to handle when processing graphics (and could bring to optimized algorithms).</li>
<li>1366Ã—768 8-bit pixels is just above 1MiB (by 512 bytes), so it does not fit into an 8Mbit memory chip.<br>1360 is also divisible with both 8 and 16, enabling simplified and optimized algorithms for processing graphics.</li>
</ul>
</blockquote>
<p>æ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼š</p>
<ul>
<li>1366 * 768 æ˜¯ç¡¬ä»¶åˆ†è¾¨ç‡ï¼Œ1360 * 768 æ˜¯VESAè§„å®šçš„æ˜¾ç¤ºæ ‡å‡†,å¦‚è¦è¾“å‡º1366ï¼Œéœ€è¦é©±åŠ¨æˆ–ç‰¹åˆ«çš„è½¯ä»¶æ”¯æŒ</li>
<li>ç¬”è®°æœ¬ç”¨ 1366 * 768ï¼Œåˆ‡å‰²æ•ˆç‡é«˜ï¼ŒèŠ‚çœé¢æ¿æˆæœ¬</li>
<li>1366 * 768 æ›´æ¥è¿‘16:9ï¼Œè€Œ 1360 * 768 åˆ™ä¸º16:10</li>
</ul>
<h3 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h3><ul>
<li>EDIDæœ€ä½³åˆ†è¾¨ç‡æ˜¯åš 1366 * 768 è¿˜æ˜¯ 1360 * 768 ï¼Ÿ â€“ åº”è¯¥è¿˜æ˜¯ 1366 * 768 ï¼Ÿæ¯•ç«Ÿè·Ÿå±åŒ¹é…æ‰æ˜¯æœ€ä½³ï¼Ÿ</li>
<li>å‡ºè´§çš„å±æ˜¯ 1366 * 768ï¼Œå¦‚æœEDIDæœ€ä½³åˆ†è¾¨ç‡åš 1360 * 768ï¼Œèƒ½åšç‚¹å¯¹ç‚¹å—ï¼Ÿ â€“ å³ä½¿ç¬¬ä¸€è¯¦ç»†æ—¶åºæ˜¯ 1360 * 768ï¼Œå¦‚æœTVè½¯ä»¶æœ‰ 1366 * 768 çš„æ”¯æŒï¼Œå°±å¯ä»¥ç‚¹å¯¹ç‚¹ï¼Œæ¯”å¦‚åœ¨ç¬¬äºŒè¯¦ç»†æ—¶åºæ·»åŠ  1366 * 768ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæœ€ä½³åˆ†è¾¨ç‡å†™äº† 1360 * 768ï¼Œå±æ˜¾è¿˜æ˜¯ 1366 * 768ï¼Ÿ â€“ åœ¨Win7æ§åˆ¶é¢æ¿é‡Œçœ‹åˆ°çš„åˆ†è¾¨ç‡æ˜¯ 1360 * 768ï¼Œé€šè¿‡edidw2kå·¥å…·æŠ“å–çš„EDIDä¹Ÿæ˜¯æœ€ä½³åˆ†è¾¨ç‡ 1360 * 768ï¼Œååå±æ˜¾ä¸Šæ˜¯ 1366 * 768ã€‚æ‹¿CVTEçš„æ¿å­åšä¸ªå¯¹æ¯”ï¼Œå‘ç°ä»–ä»¬çš„EDIDå†™çš„æ˜¯ 1366 * 768ï¼Œä½†æ˜¯å±æ˜¾åˆæ˜¯ 1360 * 768ï¼Ÿæœªè§£ä¹‹è°œã€‚</li>
</ul>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>åæ¥ä¹Ÿæ˜¯ç”¨åŒæ ·çš„è½¯ä»¶æµ‹è¯•ï¼Œç”»é¢èƒ½æ­£å¸¸å‡ºæ¥ï¼ŒEDIDä¹Ÿèƒ½è¯»åˆ°ï¼Œä½¿ç”¨ç›¸åŒçš„ä¸»æœºï¼Œç›¸åŒçš„çº¿æï¼Œç›¸åŒçš„è½¯ä»¶ï¼Œç›¸åŒçš„æ¿å¡ã€‚æµ‹è¯•å‰æœ‰åšå·¥å‚å¤ä½ã€‚<br>ä¸ºä»€ä¹ˆæµ‹è¯•é‚£è¾¹ä¼šå‡ºç°é‚£æ ·çš„æƒ…å†µï¼Œæœ¬æ¥çœ‹åˆ°â€œä¸»æœºé‡å¯åç”»é¢èƒ½æ­£å¸¸å‡ºæ¥ï¼Œä½†ä»ç„¶æ— æ³•è¯»å–EDIDã€‚â€ï¼Œè§‰å¾—å¾ˆæœ‰å¯èƒ½æ˜¯ç”µè„‘çš„é—®é¢˜äº†ï¼ˆå› ä¸ºæˆ‘çš„ç¬”è®°æœ¬ä¹Ÿå¾ˆéš¾è¯»ï¼Œå°å¼æœºæ¯”è¾ƒå®¹æ˜“ï¼‰ï¼Œä½†æ˜¯å‡å®Œçº§æ²¡ç”»é¢ï¼Œéœ€è¦é‡å¯æ‰æœ‰ï¼Œè¿™ä¸ªæƒ…å†µè®©äººå›°æƒ‘ã€‚</p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>edid</tag>
      </tags>
  </entry>
  <entry>
    <title>Bitstream or PCMï¼Ÿ</title>
    <url>/2017/09/27/bitstream-or-pcm/</url>
    <content><![CDATA[<p>ç”µè§†ä¸ŠåŒè½´è¾“å‡ºçš„åšæ³•ã€‚  </p>
<span id="more"></span>

<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>USBé€šé“ä¸‹æ’­æ”¾å£°éŸ³æ ¼å¼ä¸ºAACçš„è§†é¢‘æ–‡ä»¶ï¼ŒåŒè½´è¾“å‡ºè®¾ç½®ä¸ºAutoï¼ŒåŠŸæ”¾æ²¡æœ‰å£°éŸ³ï¼Œè®¾ç½®æˆPCMï¼Œæœ‰å£°éŸ³ã€‚</p>
<h3 id="æé—®"><a href="#æé—®" class="headerlink" title="æé—®"></a>æé—®</h3><p>Auto/PCMçš„åšæ³•æ˜¯æ€æ ·çš„ï¼ŸAutoçš„åšæ³•è¿™é‡Œå…¶å®å°±æ˜¯Bitstreamï¼ŒPCMå°±æ˜¯PCMã€‚<br>Bitstreamä¸PCMå·®åˆ«åœ¨å“ªï¼Ÿå¦‚ä½•å–èˆï¼Ÿä¸ºä»€ä¹ˆä¸€ä¸ªæœ‰å£°éŸ³ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Ÿ</p>
<h3 id="è®¨è®ºç²¾é€‰"><a href="#è®¨è®ºç²¾é€‰" class="headerlink" title="è®¨è®ºç²¾é€‰"></a>è®¨è®ºç²¾é€‰</h3><h4 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h4><p>Basically,<br>Bitstream - will send the raw digital audio without processing out of the DVD player so your receiver can process<br>PCM - the player will convert everything to and output as 2 channel PCM<br>So if you want your receiver to process DD and DTS multichannel tracks then you must set the player to Bitstream<br>This PCM/Bitstream option doesnâ€™t effect the players analogue outputs. This is the reason why your analogue outs sounded better than your digital out when its set to PCM.</p>
<h4 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h4><p>If you select PCM the bluray player will do the decoding and send the sound to the amp. Bitstream will send it in raw format and leave the amp to decode it. PCM would be your safest bet so all audio formats work, but maybe select bitstream and see what happensâ€¦</p>
<h4 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h4><p><a href="https://www.lifewire.com/what-is-pcm-1846928">é“¾æ¥1</a> <a href="https://www.lifewire.com/blu-ray-audio-bitstream-vs-pcm-1846396">é“¾æ¥2</a><br>The PCM Option<br>If you set the Blu-ray Disc player to output audio as PCM, the player will perform the audio decoding of all Dolby/Dolby TrueHD and DTS/DTS-HD Master Audio - related soundtracks internally and send the decoded audio signal in uncompressed form to your home theater receiver. As a result, your home theater receiver will not have to perform any additional audio decoding before the audio is sent through the amplifier section and the speakers. With this option, the home theater receiver will display the term â€œPCMâ€ on its front panel display.</p>
<p>The Bitstream Option<br>If you select Bitstream as the HDMI audio output setting for your Blu-ray player, the player will bypass its own internal Dolby and DTS audio decoders and send the undecoded signal to your HDMI-connected home theater receiver.</p>
<p>With this setting, the home theater receiver will do all the audio decoding of the incoming signal. As a result, in this case, the receiver will display Dolby, Dolby TrueHD, DTS, DTS-HD Master Audio, Dolby Atmos, DTS:X, etcâ€¦on its front panel display depending on which type of bitstream signal is being decoded.</p>
<p>NOTE: The Dolby Atmos and DTS:X surround sound formats are only available from a Blu-ray Disc player via the Bitstream setting option. There are no Blu-ray Disc players that can decode these formats internally and to PCM and pass that on to a home theater receiver.</p>
<h4 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h4><p>what is the difference between connecting a dvd player to amp, having the output mode of dvd player set to bitstream and pcm? how difference these setting will influence the output of sound?</p>
<p><strong>Answer 1:</strong><br>Bitstream is digital output to the amp, it means either optical or coaxial output should be connected to the receiver. The digital to analog conversion will be done by the receiver.</p>
<p>PCM is analog output. Analog output should be connected to the receiver. For DTS etc, your player should have a dts decoder and the 5 channel output should be connected to the receiverâ€™s external decoder inputs.</p>
<p><strong>Answer 2:</strong><br>Doors, you information is only partially correct. PCM is not analog, but digital. Let me explain. </p>
<p>There are lots of confusion between PCM/LPCM and bitstream. This confusion is there because the two refer to completely different things - one is a encoding and storage methodology, while the other is just a transport mechanism. </p>
<p>Pulse Code Modulation or PCM is a digital form of representing analog signals. PCM has two step process - one is called Modulation and other is called Demodulation. In Modulation, an analog signal is sampled at regular intervals and quantisized. For each sample, an available value is chosen using an advanced algorithm. This creates a fully discreet digital signal that can be easily stored and processed. In demodulation, the modulation process is reversed and a high frequency analog signal is created. This is them sent though a filter to remove, what we in audio call, jitter. Modulation is what we know as Analog-to-Digital conversion, and demodulation is what we call Digital-to-Analog conversion. Both your audio CD as well as your DVD store digital data that have been created using PCM. </p>
<p>For a long time, because of the small spaces available for storage (CD, DVD, etc) as well narrow bandwidths available for data transmission, digital data has been stored in lossy compressed form for both audio and video. Such compression always have some loss of data. </p>
<p>Using optical or co-axial connections, these compressed digital data is streamed across from one point to another. Since a bit is the most basic form of digital data, this way of transmission is called bitstreaming. Digital data is streamed using synchronous or asynchronous modes. In computer for example, TCP uses asynchronous mode for data transportation. </p>
<p>Most data streams are sent as packets or frames of data and contain the following information:</p>
<ul>
<li>header</li>
<li>error check</li>
<li>audio or video data</li>
<li>ancillary data</li>
</ul>
<p>The header of each packet contains general information such as the CODEC, sampling frequency, number of channels, CRC protection, etc. On the receiving side, the data is validated for accuracy, and once validated, the actual data is processed as needed.</p>
<p>Over the last few years two things have happened. Storage space has increased, and new transmission methodology have been discovered that have a much higher bandwidth. HDMI 1.3, for example, can carry data at a bandwidth of 340 MHz which equals to 10.2 giga bits per second. In addition HDMI also allows multiplexing of multi data streams over a single physical link. A 192 kHz sampling frequency equates to just 6.144 gigabits per second of transmission speeds. </p>
<p>Now suddenly you could store data with lossless compression, and also transmit multiple channels of data from one place to another at very high speed. </p>
<p>LPCM is a term that is loosely used for both encoding and storage, and of decoding and transmission of lossless video/audio data. LPCM sampling resolutions can go up to 24 bits per sample, while PCMâ€™s resolution is a max of 16 bits. LPCM is generally used in conjunction with WAV files in computers (also FLAC, AIFF etc), and with Blu-Ray, TrueHD, DTS-HD </p>
<p>PCM and bitstream is used in conjunction with traditional formats such as 2 channel stereo, Dolby Digital, DTS, etc. </p>
<p>The question is which one should I use? </p>
<p>If you are using coaxial or optical digital connection, you must use bitstream or what some players call RAW. Many DVD players will have PCM set as default. PCM will not send Dolby Digital or DTS as multi channel sound, but as Stereo PCM through these connections,</p>
<p>HD Audio such as TrueHD, DTS HD etc are stored in compressed form and cannot be transmitted as such. A high end DVD player will, thus, extract such sound from the disc, decode it, and mix it into muti channel PCM. This is then transmitted through HDMI 1.1 or higher connections. You have to ensure that your receiver not only has an HDMI input but should also have the ability to handle the multichannel PCM signal. </p>
<p>Cheers  </p>
<h4 id="äº”"><a href="#äº”" class="headerlink" title="äº”"></a>äº”</h4><p><a href="https://www.cnblogs.com/lihaiping/p/LPCM.html">æ‹“å±•1</a> <a href="https://blog.chinaunix.net/uid-9688646-id-1998399.html">æ‹“å±•2</a>  </p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è®¨è®ºéƒ¨åˆ†ï¼Œç½‘å‹çš„å›ç­”å·²ç»éå¸¸æ˜äº†ã€‚  </p>
<ul>
<li>åŒè½´é€‰æ‹©Bitstreamè¾“å‡ºï¼Œåˆ™TVä¸åšdecodeï¼Œç›´æ¥æŠŠraw dataç»™åˆ°åŠŸæ”¾ï¼ŒåŠŸæ”¾ç›´æ¥å¤„ç†rawï¼Œæ¯”å¦‚Dolbyçš„è¯ï¼ŒæŒ‰åŠŸæ”¾é¢æ¿ä¸Šinfoï¼Œåˆ‡åˆ°Audio decoderå°±ä¼šçœ‹åˆ°Dolbyï¼›åŒè½´è¾“å‡ºé€‰æ‹©PCMè¾“å‡ºï¼Œåˆ™TVç»™åˆ°åŠŸæ”¾çš„æ˜¯å·²ç»ç»è¿‡å¤„ç†åå¾—åˆ°çš„PCMï¼ŒåŠŸæ”¾infoæ˜¾ç¤ºçš„æ˜¯PCMã€‚æˆ‘çš„åŠŸæ”¾å‹å·æ˜¯é›…é©¬å“ˆRX377ã€‚</li>
<li>å¯¹äºå¥½ä¸€ç‚¹çš„åŠŸæ”¾ï¼Œé€‰Bitstreamï¼Œå¬è¯´éŸ³æ•ˆå¬èµ·æ¥å¾ˆå¥½ï¼Œå¦åˆ™ä¿é™©èµ·è§ï¼Œé€‰PCMï¼Œå› ä¸ºå¤§å¤šæ•°çš„åŠŸæ”¾éƒ½èƒ½è§£PCMã€‚</li>
<li>åŒè½´è¾“å‡ºè®¾ç½®ä¸ºAutoæ—¶æ²¡å£°éŸ³ï¼Œæ˜¯å› ä¸ºåŠŸæ”¾ä¸æ”¯æŒAACå—ï¼ŸæŸ¥çœ‹<a href="https://www.yamaha.com.cn/images/products/audio-visual/aduio-family/av-receiver/RX-V377/RX-V377.pdf">åŠŸæ”¾è¯´æ˜ä¹¦</a>ï¼Œæ²¡çœ‹æ‡‚æ”¯æŒä¸æ”¯æŒAACã€‚ä½†æ˜¯ç”¨åŠŸæ”¾ç›´æ¥æ’­æ”¾USBé‡Œçš„AACéŸ³ä¹æ–‡ä»¶ï¼ŒAudio Decoderæ˜¾ç¤ºä¸ºAACï¼Œåº”è¯¥èƒ½è¯´æ˜AACæ˜¯æ”¯æŒçš„ã€‚</li>
<li>æ’­æ”¾AACéŸ³æºæ²¡æœ‰å£°éŸ³çš„é—®é¢˜ï¼ŒåŸå‚å¤„ç†å¦‚ä¸‹ï¼š[what]when audio = aac, spdif select AUTO, AV receiver doesnâ€™t outputï¼Œ[why]AV receiver donâ€™t support AAC raw dataï¼Œ[how]when audio = aac, spdif select AUTO, force SPDIF output PCMã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªå¤„ç†æ–¹æ³•è¿˜æœ‰å¾…å•†æ¦·ï¼Œå› ä¸ºAV receiverçœ‹èµ·æ¥æ˜¯æ”¯æŒAACçš„ï¼Œæ‰€ä»¥å½“åŒè½´è¾“å‡ºè®¾ç½®ä¸ºBitstreamæ—¶åŠŸæ”¾æ— å£°éŸ³çš„é—®é¢˜ï¼Œè½¯ä»¶å±‚é¢åº”è¯¥è¿˜æœ‰æ›´åˆç†çš„æ”¹å–„çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯ç®€å•åœ°â€œforce SPDIF output PCMâ€ã€‚å‡ºäºå¯¹æ¯”æ–¹æ¡ˆçš„åšæ³•å‚è€ƒå’Œå‡ºè´§çš„ç´§è¿«æ—¶é—´ï¼Œå°±è¿™ä¹ˆå¤„ç†äº†ï¼</li>
<li>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒåŠŸæ”¾æ’ä¸ŠUç›˜ï¼Œæ’­æ”¾Uç›˜é‡Œé¢çš„éŸ³ä¹çš„æ—¶å€™ï¼ŒåŠŸæ”¾infoå¯æ­£ç¡®è¾“å‡ºéŸ³ä¹çš„éŸ³é¢‘æ ¼å¼ï¼ˆè¯•è¿‡äº†PCMã€AACã€WMAï¼‰ï¼Œä½†æ˜¯è§†é¢‘å´ä¸èƒ½ï¼ˆè¿™é‡Œç”¨TVå¤šåª’ä½“é€šé“æ’­æ”¾è§†é¢‘ï¼ŒåŒè½´è¾“å‡ºåˆ°åŠŸæ”¾ï¼ŒæŠŠåŒè½´è¾“å‡ºè®¾ç½®ä¸ºAutoæ—¶ï¼Œinfoçœ‹åˆ°çš„ä¸œè¥¿é™¤äº†PCMå°±æ˜¯Dolby Digitalï¼Œæˆ‘ç”¨ä¸€ä¸ªéŸ³é¢‘æ ¼å¼ä¸ºwmaçš„è§†é¢‘ï¼ˆè¿™ä¸ªè§†é¢‘æ˜¯ç”¨æ ¼å¼å·¥å‚è½¬ç å¾—åˆ°çš„ï¼Œä½†æ˜¯ç”¨MediaInfoå¯¹æ¯”è¿™ä¸ªè§†é¢‘çš„éŸ³é¢‘å‚æ•°å’Œä¹‹å‰æµ‹è¯•çš„wmaéŸ³ä¹çš„éŸ³é¢‘å‚æ•°ï¼Œæ–‡ä»¶æ ¼å¼/ç¼–ç è®¾ç½®ID/ç¼–ç è®¾ç½®ID/ä¿¡æ¯éƒ½ä¸€è‡´ï¼‰è¯•äº†ï¼Œinfoæ˜¾ç¤ºçš„æ˜¯PCMï¼‰ï¼Œè¿™æ˜¯åŠŸæ”¾æœ¬èº«çš„åšæ³•é—®é¢˜å—ï¼Ÿ</li>
</ul>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>pcm</tag>
        <tag>coax</tag>
        <tag>dolby</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¯æ‰‹åŠ¨å¹é£æœº</title>
    <url>/2018/01/22/lmao/</url>
    <content><![CDATA[<p>ç»å…¸æ®µå­æ”¶é›†ã€‚</p>
<span id="more"></span>

<h4 id="é“¶æ•™æˆ"><a href="#é“¶æ•™æˆ" class="headerlink" title="é“¶æ•™æˆ"></a><a href="https://weibo.com/qiaoyinrong">é“¶æ•™æˆ</a></h4><ul>
<li>æƒ³èµ·å½“å¹´æ±‚å©šçš„ç”»é¢ï¼Œç°åœ¨è¿˜å†å†åœ¨ç›®ï¼Œå½“æ—¶æ˜¯å¥³å‹ç”Ÿæ—¥ï¼Œå¥¹åƒç€è›‹ç³•ï¼Œçªç„¶åƒåˆ°ä¸€ç²’é’»æˆ’ï¼Œéšæœºå®³ç¾åœ°å¯¹æˆ‘è¯´ï¼šâ€œæˆ‘æ„¿æ„å«ç»™ä½ ã€‚â€åæ¥æˆ‘ä»¬å°±ç»“å©šäº†ï¼Œæ¯•ç«Ÿï¼Œæˆ‘æ— æ³•æ‹’ç»ä¸€ä¸ªè‡ªå·±æé’±ä¹°æˆ’æŒ‡è—åœ¨è›‹ç³•é‡Œçš„å¥³å­©</li>
<li>æˆ‘åœ¨ä½›å‰è‹¦è‹¦æ±‚äº†å‡ åƒå¹´ï¼Œåªæƒ³é—®ä½›ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘åœ¨ä½›å‰è‹¦è‹¦æ±‚äº†å‡ åƒå¹´ï¼Ÿ</li>
<li>æˆ‘åœ¨ä½›å‰è‹¦è‹¦æ±‚äº†å‡ åƒå¹´ï¼Œåé¢ä¸€ä¸ªæ’é˜Ÿçš„æ‹æ‹æˆ‘çš„è‚©è†€ï¼šâ€œå“¥ä½ æ±‚å®Œæ²¡ï¼Ÿâ€</li>
<li>â€œä½ å¿…é¡»è¦å¾ˆåŠªåŠ›ï¼Œæ‰èƒ½çœ‹èµ·æ¥æ¯«ä¸è´¹åŠ›ã€‚â€ â€œé‚£æˆ‘ä¸ºä»€ä¹ˆä¸ç›´æ¥æ¯«ä¸è´¹åŠ›å‘¢ï¼Ÿâ€</li>
<li>è¿™äº›å¹´æˆ‘ä¸€ç›´åœ¨é€€æ­¥ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘èƒŒå¯¹ç€ç›®æ ‡ã€‚</li>
<li>è€å¸ˆï¼šä½ ä¸ºä»€ä¹ˆè¿Ÿåˆ°ï¼Ÿæˆ‘ï¼šæ­£ä¹‰éƒ½ä¼šè¿Ÿåˆ°ï¼Œæˆ‘å°±ä¸èƒ½äº†ï¼Ÿ</li>
<li>é¢è¯•å®˜ï¼šâ€œè¯´è¯´ä½ ä¸ºä»€ä¹ˆæ“…é•¿è¿™é¡¹å·¥ä½œï¼Ÿâ€æˆ‘ï¼šâ€œè¯´å®è¯ï¼Œæˆ‘ä¸æ“…é•¿ã€‚â€ â€œé‚£ä½ æ“…é•¿ä»€ä¹ˆï¼Ÿâ€ â€œæ“…é•¿è¯´å®è¯ã€‚â€  </li>
<li>æœ‰ä¸€å¤©æˆ‘æ±‚ä½›äº†ï¼Œå¶ç„¶å‘ç°è¿™ä¸ªä½›æ˜¯å‡çš„ï¼Œæ˜¯ä»¿ä½›ã€‚  </li>
<li>åˆšçœ‹å®Œæ¶ˆæ¯å°±è¢«å¯¹æ–¹æ’¤å›ï¼Œæœ‰ä¸€ç§ä¸å°å¿ƒçœ‹åˆ°å¯¹æ–¹èµ°å…‰çš„æ„Ÿè§‰ï¼Œåªå¥½å‡è£…æ²¡çœ‹åˆ°ã€‚  </li>
<li>æœ‰æ—¶æƒ³æ— æ•…è¯·äººåƒé¥­ï¼Œç»™å¯¹æ–¹ä¸€ç§å›°æƒ‘çš„æ„Ÿè§‰ã€‚  </li>
</ul>
<h4 id="é‚£ä¸ªæ´æ˜¯ä»–çš„å®¶"><a href="#é‚£ä¸ªæ´æ˜¯ä»–çš„å®¶" class="headerlink" title="é‚£ä¸ªæ´æ˜¯ä»–çš„å®¶"></a><a href="https://weibo.com/u/5187109870">é‚£ä¸ªæ´æ˜¯ä»–çš„å®¶</a></h4><ul>
<li>åŠ¨ç‰©å­¦æ ¡å¼€è¯¾ï¼Œå¤§è±¡è¿Ÿåˆ°äº†ã€‚è€å¸ˆç”Ÿæ°”åœ°è¯´ï¼šâ€œä½ ä¸ºä»€ä¹ˆç°åœ¨æ‰æ¥ï¼Ÿå¹²è„†åˆ«æ¥ç®—äº†ã€‚â€å¤§è±¡è¯´ï¼šâ€œçœŸè±¡å¯èƒ½ä¼šè¿Ÿåˆ°ï¼Œä½†æ°¸è¿œä¸ä¼šç¼ºå¸­ã€‚â€</li>
</ul>
<h4 id="å°é©´åƒç«çƒ§"><a href="#å°é©´åƒç«çƒ§" class="headerlink" title="å°é©´åƒç«çƒ§"></a><a href="https://weibo.com/u/1046610712">å°é©´åƒç«çƒ§</a></h4><ul>
<li>æˆ‘æ¬ºè´ŸåŒæ¡Œåè§‰å¾—å¾ˆå¼€å¿ƒï¼Œæ¢ä½æ€è€ƒäº†ä¸€ä¸‹ï¼Œæˆ‘ååˆ°ä»–åé¢ï¼Œæ¬ºè´Ÿä»–ä¸€æ ·å¾ˆå¼€å¿ƒã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>lmao</tag>
      </tags>
  </entry>
  <entry>
    <title>RDA8501è°ƒAQçš„å‡ ç‚¹è®°å½•</title>
    <url>/2017/08/24/rda8501-aq/</url>
    <content><![CDATA[<p>è®°å½•ä¸€æ¬¡è°ƒéŸ³é¢‘ç»å†ï¼Œä½œä¸ºåœ¨å®¢æˆ·ç«¯å·¥ä½œçš„æ€»ç»“ã€‚</p>
<span id="more"></span>

<h2 id="æœ€å¤§å£°éŸ³åŠŸç‡"><a href="#æœ€å¤§å£°éŸ³åŠŸç‡" class="headerlink" title="æœ€å¤§å£°éŸ³åŠŸç‡"></a>æœ€å¤§å£°éŸ³åŠŸç‡</h2><p>æŒ‡éŸ³é‡ä¸º100æ—¶ï¼Œå–‡å­èƒ½æ”¯æŒçš„æœ€å¤§åŠŸç‡ï¼Œä¸åŒçš„æ¿å‹ä½¿ç”¨çš„åŠŸæ”¾ä¸åŒï¼Œå–‡å­ä¸åŒï¼Œæœ€å¤§åŠŸç‡æœ‰å·®åˆ«ã€‚æ¯ä¸ªå®¢æˆ·è¾“å…¥ä¿¡å·æ ‡å‡†ä¸åŒï¼Œä¸€èˆ¬ä½¿ç”¨1KHz/-12dBè¾“å…¥ã€‚</p>
<ul>
<li>Audio -&gt; Power Limiter<br>PLC: Enable/Disableï¼Œç”¨äºAudioè¾“å‡ºæœ€å¤§å€¼é™åˆ¶<br>Sp Attack: å–‡å­è¾“å‡ºæœ€å¤§å€¼<br>Hp Attack: è€³æœºè¾“å‡ºæœ€å¤§å€¼ï¼ˆä»…é™IC  Headphone Outputï¼‰<br>Lo Attack: Line Outè¾“å‡ºæœ€å¤§å€¼</li>
<li>æ¯”å¦‚è°ƒ4Wçš„å–‡å­ï¼š</li>
</ul>
<ol>
<li>æŠŠéŸ³é‡è°ƒè‡³100ï¼›</li>
<li>å…³é—­ Audio -&gt; Power Limit â€“&gt; PLCï¼ˆPLCä¸»è¦èµ·é™åˆ¶åç«¯æ”¾å¤§çš„ä½œç”¨ï¼‰ï¼›</li>
<li>è°ƒFunction â€“&gt; Curve Setting -&gt; Volume Curve -&gt; Vol.Pt.100ï¼Œä½¿åŠŸç‡è¾¾åˆ°4Wï¼›</li>
<li>å¼€å¯PLCï¼Œæµ‹é‡æ­¤åˆ»çš„åŠŸç‡å€¼  ï¼Œè‹¥åŠŸç‡å°äº4Wï¼Œå¢å¤§Audio -&gt; Power Limit â€“&gt; SP Attackå€¼ï¼ˆè¶‹å‘äº0(0dB)ï¼‰ï¼Œç›´åˆ°åŠŸç‡ç­‰äº4Wï¼Œè‹¥åŠŸç‡å¤§äº4Wï¼Œå‡å°SP Attackå€¼ï¼ˆè¶‹å‘äº-240(-30dB)ï¼‰ï¼Œç›´åˆ°åŠŸç‡ç­‰äº4Wï¼›</li>
<li>å¢å¤§Vol.Pt.100ï¼Œæµ‹é‡æ­¤åˆ»çš„åŠŸç‡ï¼Œè‹¥åŠŸç‡ç¨³å®šåœ¨4Wï¼Œåˆ™Vol.Pt.100å’ŒSP Attackå€¼å¯ç¡®å®šï¼Œè®°å½•Vol.Pt.100å€¼å’ŒSP Attackå€¼ï¼Œè‹¥ åŠŸç‡å¤§äº4Wï¼Œè¯´æ˜PLCé™å¹…ä¸å¤Ÿï¼Œç»§ç»­å‡å°SP Attackå€¼ï¼Œç›´åˆ°åŠŸç‡ç­‰äº4W ï¼›</li>
<li>é‡å¤æ­¥éª¤5è¿›è¡Œå¾®è°ƒï¼Œç›´åˆ°æ— è®ºæ€ä¹ˆå¢å¤§Vol.Pt.100å€¼ï¼ŒåŠŸç‡éƒ½èƒ½ç¨³å®šåœ¨4Wã€‚è‹¥æ— æ³•å‡†ç¡®åˆ°4Wï¼Œå¯é€‰æœ€æ¥è¿‘4Wçš„åŠŸç‡ä½œä¸ºæœ€å¤§åŠŸç‡ï¼Œå‡è®¾å¾—åˆ°Vol.Pt.100å€¼ä¸ºAï¼›</li>
<li>å¢å¤§è¾“å…¥ã€‚æ¯”å¦‚æ¢1KHz/-10dBä½œä¸ºè¾“å…¥ï¼Œå¦‚æœæ­¤åˆ»åŠŸç‡å¤§äº4Wï¼Œå‡è®¾åŠŸç‡ä¸ºBï¼ˆB&gt;4Wï¼‰ï¼Œåˆ™ç»§ç»­å‡å°SP Attackå€¼ï¼ˆæŒ‰æœ€å°å•ä½å¾®è°ƒï¼‰åˆ°Cï¼Œé‡çš„æ­¤åˆ»åŠŸç‡ä¸ºDï¼ˆæ­¤æ—¶Dåº”è¯¥å°äºç­‰äº4Wï¼‰ï¼Œåˆ™æŠ˜ä¸­é€‰æ‹©ä¸€ä¸ªæœ€æ¥è¿‘4Wçš„åŠŸç‡å€¼ï¼ˆBæˆ–Dï¼‰ï¼Œå¦‚æœé€‰æ‹©Bå€¼ï¼Œåˆ™æ­¥éª¤6å¾—åˆ°çš„Vol.Pt.100 å’ŒSP Attackä¸ºæœ€ä¼˜è§£ï¼Œå¦‚æœé€‰æ‹© D å€¼ï¼Œæœ‰å¯èƒ½Vol.Pt.100 = Aæ—¶å€™é‡åˆ°çš„åŠŸç‡ä¸Aå‡å°å‡ ä¸ªå•ä½åé‡åˆ°çš„åŠŸç‡ä¸€æ ·ï¼Œè¿™ä¸ªæ—¶å€™è¿˜éœ€å‡å° A å€¼ï¼ˆåŸå› æ˜¯ PLC é™åˆ¶å¾—å¤ªå¤šäº†ï¼‰ï¼›</li>
<li>è®°å½•Vol.Pt.100å€¼ã€subcustomer_setting.hã€‘å’ŒSP Attackã€board_config.hã€‘ã€‚<br><img src="https://i.loli.net/2018/02/27/5a9513cb88b4b.png"></li>
</ol>
<h2 id="éŸ³é‡æ›²çº¿"><a href="#éŸ³é‡æ›²çº¿" class="headerlink" title="éŸ³é‡æ›²çº¿"></a>éŸ³é‡æ›²çº¿</h2><p>  æŒ‡ç”µè§†æœºå„ä¸ªéŸ³é‡ç‚¹çš„åŠŸç‡ï¼Œå› å®¢æˆ·è¦æ±‚è€Œå¼‚ã€‚è¦æ±‚åˆ¶ä½œéŸ³é‡æ›²çº¿ä¸å¯æœ‰æ˜æ˜¾çªå˜ï¼Œå„ä¸ªé€šé“çš„æ›²çº¿å°½é‡æ¥è¿‘ã€‚æ¯ä¸ªå®¢æˆ·è¾“å…¥ä¿¡å·æ ‡å‡†ä¸åŒï¼Œä¸€èˆ¬ä½¿ç”¨1KHz/-12dBè¾“å…¥ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>è°ƒæœ€å¤§åŠŸç‡</li>
<li>ä¾æ¬¡è°ƒFunction â€“&gt; Curve Setting -&gt; Volume Curve -&gt; Vol.Ptå„ä¸ªç‚¹ï¼Œä½¿æ¯ä¸ªéŸ³é‡ç‚¹æµ‹é‡å¾—åˆ°çš„åŠŸç‡åŸºæœ¬æ»¡è¶³å®¢æˆ·è¦æ±‚ï¼Œè°ƒè¯•æ—¶æ³¨æ„Vol.Pt å€¼è·ŸFunction â€“&gt; Curve Setting -&gt; Volume Curve -&gt; OSD Volume Valueå€¼åŒ¹é…ï¼›</li>
<li>è®°å½•æ¯ä¸ªVol.Pt å€¼ã€subcustomer_setting.hã€‘ã€‚</li>
</ol>
<h2 id="é¢‘å“æ›²çº¿"><a href="#é¢‘å“æ›²çº¿" class="headerlink" title="é¢‘å“æ›²çº¿"></a>é¢‘å“æ›²çº¿</h2><p>æŒ‡éŸ³å“ç³»ç»Ÿå¯¹è¾“å…¥ä¿¡å·çš„ååº”å’Œè¾¨åˆ«èƒ½åŠ›ã€‚æ¯”å¦‚ä¸€å°å¥½çš„éŸ³å“ï¼Œä»–çš„é¢‘ç‡å“åº”èŒƒå›´æ˜¯20èµ«å…¹åˆ°20000èµ«å…¹ã€‚é‚£ä¹ˆå½“ä¸€ä¸ªåŒ…å«æœ‰20-20000èµ«å…¹çš„éŸ³é¢‘ä¿¡å·çš„éŸ³ä¹è¿›æ¥ä¹‹åï¼Œå®ƒå°±ä¼šæœ‰è¶³å¤Ÿæ·±çš„ä½é¢‘ä¸‹æ½œå’Œéå¸¸å‡ºè‰²çš„é«˜é¢‘è¡¨ç°ï¼›å‡å¦‚ä½ æŠŠè¿™ä¸ªä¿¡å·è¾“å…¥ç»™ä¸€å°æ¯”è¾ƒçƒ‚çš„éŸ³å“ï¼ˆæˆ‘ä»¬å‡è®¾å®ƒåªæœ‰100-12000çš„é¢‘ç‡å“åº”èŒƒå›´ï¼‰ï¼Œé‚£ä¹ˆæ¯”è¿™ä¸ªèŒƒå›´ä½æˆ–è€…é«˜çš„ä¿¡å·éŸ³å“å°±æ— æ³•å¤„ç†å’Œæ’­æ”¾ï¼Œä½ å°±ä¼šæ„Ÿè§‰è¿™ä¸ªéŸ³ä¹å¾ˆçª„ï¼Œç¼ºä¹è¡¨ç°åŠ›ã€‚å½“ç„¶é¢‘ç‡å“åº”è¿˜æœ‰ä¸€äº›åˆ«çš„å¿…é¡»è¦å‚è€ƒçš„æ ‡å‡†ï¼Œæ¯”å¦‚åœ¨æŸä¸ªé¢‘æ®µï¼Œå“åº”çš„æƒ…å†µå¦‚ä½•ï¼Œè¿™é‡Œç•¥è¿‡ã€‚ï¼ˆç™¾åº¦ï¼‰ã€‚<br>å‚è€ƒMstar V56æ–¹æ¡ˆé¢‘å“æ›²çº¿å›¾ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9515719cdc8.png"><br>ä¸V56ç›¸æ¯”ï¼Œ8501æ–¹æ¡ˆçš„é¢‘å“æ›²çº¿ä½é¢‘æ®µéƒ¨åˆ†ï¼ˆ20Hz~150Hzï¼‰æ²¡æœ‰ä½œæŠ‘åˆ¶ï¼Œå¦‚ä¸èƒ½æ»¡è¶³å®¢æˆ·è¦æ±‚ï¼Œå¯è‡ªè¡Œè°ƒæ•´é¢‘å“æ›²çº¿ã€‚</p>
<p>é¢‘å“æ›²çº¿æ¶‰åŠçš„è°ƒè¯•å†…å®¹æ˜¯Audio -&gt; EQå’ŒAudio -&gt; PEQï¼Œè°ƒé¢‘å“æ›²çº¿ä¸€èˆ¬å…ˆè°ƒEQï¼Œå†é€šè¿‡PEQè¿›è¡Œå¾®è°ƒã€‚</p>
<ul>
<li>EQ ä¸»è¦ä½œç”¨äºç‰¹å®šé¢‘ç‡èŒƒå›´çš„ä¿¡å·å¼ºåº¦ï¼Œå½“éœ€è¦è°ƒèŠ‚é¢‘ç‡èŒƒå›´å†…çš„æ›²çº¿è¶‹åŠ¿æ—¶ï¼Œå¯ä»¥è°ƒEQï¼ŒEQåœ¨å·¥å‚èœå•é‡Œå¯ä¾›è°ƒè¯•çš„é¡¹ç›®æœ‰EQ Bandã€Gainã€Frequencyã€Q Factorã€‚<ul>
<li>EQ Band: ç›®å‰æœ‰7æ®µ</li>
<li>Gain: è®¾ç½®EQ Bandçš„å¢ç›Šï¼ŒèŒƒå›´ -50<del>50ï¼ˆ-12dB</del>12dBï¼‰</li>
<li>Frequency: è°ƒèŠ‚EQ band çš„ä¸­å¿ƒé¢‘ç‡ï¼ŒèŒƒå›´ 20Hz~20KHz</li>
<li>Q Factor: è°ƒèŠ‚EQ band çš„å½±å“é¢‘å®½ 0.1(å®½)~5.0(çª„)</li>
</ul>
</li>
<li>PEQç”¨äºEQ Bandä¸æ»¡è¶³è¦æ±‚æ—¶ï¼Œå¯¹ç‰¹å®šé¢‘ç‡è¿›è¡Œè¡¥å¿ä½¿ç”¨ã€‚<ul>
<li>Center Frequency: è®¾ç½®ä¸­å¿ƒé¢‘ç‡</li>
<li>Q Factor: è°ƒèŠ‚EQ band çš„å½±å“é¢‘å®½ 0.1(å®½)~5.0(çª„)</li>
<li>Gain Step: è®¾ç½®EQ Bandçš„å¢ç›Šï¼ŒèŒƒå›´ -50<del>50ï¼ˆ-12dB</del>12dBï¼‰<br>ã€app_data_setting.cã€subcustomer_setting.cã€‘</li>
</ul>
</li>
</ul>
<h2 id="AVLï¼ˆå³AVCã€è¾“å…¥çµæ•åº¦ï¼‰"><a href="#AVLï¼ˆå³AVCã€è¾“å…¥çµæ•åº¦ï¼‰" class="headerlink" title="AVLï¼ˆå³AVCã€è¾“å…¥çµæ•åº¦ï¼‰"></a>AVLï¼ˆå³AVCã€è¾“å…¥çµæ•åº¦ï¼‰</h2><p>å®¢æˆ·ä¸€èˆ¬æœ‰è¦æ±‚è¾“å…¥å¹…åº¦èŒƒå›´ä¸‹æŠŠå£°éŸ³åŠŸç‡é™å®šåœ¨ç‰¹å®šåŠŸç‡å†…çš„æŒ‡æ ‡ï¼ŒAVLç”¨äºæ§åˆ¶è¾“å…¥ä¿¡å·çš„å¼ºå¼±ï¼ˆé™åˆ¶èŠ¯ç‰‡è¾“å…¥ï¼‰ã€‚</p>
<ul>
<li>AVL Modeï¼šEnableï¼ˆå¼€å¯AVLåŠŸèƒ½ï¼‰ï¼ŒDisableï¼ˆå…³é—­AVLåŠŸèƒ½ï¼‰ï¼›AVLåŠŸèƒ½é»˜è®¤å…³é—­ï¼Œåšè¾“å…¥çµæ•åº¦æµ‹è¯•çš„æ—¶å€™å…ˆæ‰“å¼€AVLåŠŸèƒ½ï¼›Audio -&gt; AVL -&gt; AVL Modeä¸OSD -&gt; SOUNDä¸Šçš„ Auto Volume åŠŸèƒ½ä¸€è‡´</li>
<li>Attack Rateï¼šæ§åˆ¶å‹æŠ‘ä»¥åŠè¿˜åŸé€Ÿåº¦ï¼ˆæ—¶é—´ï¼‰çš„æ¯”ä¾‹</li>
<li>Active Timeï¼šè¶…è¿‡Limite Levelæ—¶ï¼Œæ¯éš”Active Timeè°ƒæ•´ä¸€æ¬¡å¢ç›Šï¼Œæ¯æ¬¡å‡å°0.1dBï¼Œç›´åˆ°é™åˆ°Limite Level</li>
<li>Limiterï¼šå½“è¾“å…¥ä¿¡å·è¶…è¿‡Limite Levelæ—¶å¼€å§‹å‹æŠ‘</li>
<li>Pullup Gainï¼šå½“ä¿¡å·å°äº-12dBæ—¶å€™ï¼Œä¼šä¾ç…§Pullup Gainçš„å®šä¹‰å°†ä¿¡å·æ”¾å¤§ï¼ˆä½†æ˜¯æ”¾å¤§ä¿¡å·å®¹æ˜“å¤±çœŸï¼Œå»ºè®®è®¾ç½®0dBï¼‰<br>ã€app_data_setting.cã€‘</li>
</ul>
<p>ä¸‹å›¾ä¸ºV56æ–¹æ¡ˆAVLæ›²çº¿å›¾ï¼Œè“çº¿ä¸ºDisable AVLæ—¶å€™çš„æ›²çº¿ï¼Œé»„çº¿ä¸ºEnable AVLæ—¶å€™çš„æ›²çº¿ï¼š<br><img src="https://i.loli.net/2018/02/27/5a95159ee5bbe.png"><br>ä¸V56ç›¸æ¯”ï¼Œæµ·å‹¤8501æ–¹æ¡ˆAVLæ›²çº¿æ²¡æœ‰è¿‡é›¶ç‚¹ï¼Œè¾“å…¥ä¸º0æ—¶ï¼Œä»æœ‰3mV~4mVçš„è¾“å‡ºï¼Œç›®å‰æ— è§£ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9515bfe2d90.png"></p>
<h2 id="é«˜ä½éŸ³"><a href="#é«˜ä½éŸ³" class="headerlink" title="é«˜ä½éŸ³"></a>é«˜ä½éŸ³</h2><p>å³OSD -&gt; SOUNDä¸Šçš„Treble/Bassï¼Œä¸åŒå®¢æˆ·å¯¹å£°éŸ³æ¨¡å¼çš„è¦æ±‚å¯èƒ½ä¸åŒï¼Œä¸€èˆ¬æ˜¯å¢ç›ŠèŒƒå›´çš„å·®åˆ«ã€‚ä¸‹å›¾è¾ƒé«˜çš„çº¢çº¿ï¼ˆABçº¿ï¼‰å¯¹åº”Treble=100ï¼ŒBass=100ï¼Œè¾ƒä½çš„çº¢çº¿ï¼ˆCDçº¿ï¼‰å¯¹åº”Treble=0ï¼ŒBass=0ï¼Œå¢ç›ŠèŒƒå›´åœ¨Â±6dB~Â±8dBï¼Œæ¯ä¸€æ ¹çº¿éƒ½æ˜¯Trebleå’ŒBassä½œç”¨å åŠ çš„æ•ˆæœå›¾ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9515e332cbe.png">  </p>
<p>è°ƒè¯•ç‚¹ä¸»è¦æœ‰Aã€Bã€Cã€Då››ä¸ªï¼Œæ ‡å‡†æ˜¯å¢ç›ŠèŒƒå›´ï¼Œå³Aåˆ°Cçš„å¢ç›Šå·®ï¼ŒBåˆ°Dçš„å¢ç›Šå·®ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ol>
<li>å¦‚éœ€ä½¿Aç‚¹å‘ä¸‹ç§»ï¼Œå³éœ€å‡å°Bass=100æ—¶å€™çš„å¢ç›Šï¼ˆTrebleä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡ä½é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Bassï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Trebleçš„å¢ç›Šï¼‰,<br><img src="https://i.loli.net/2018/02/27/5a95166f73d1e.png"><br>å¦‚éœ€ä½¿Aç‚¹å‘ä¸Šç§»ï¼ŒåŒç†ï¼›</li>
<li>å¦‚éœ€ä½¿Cç‚¹å‘ä¸Šç§»ï¼Œå³éœ€å¢å¤§Bass=0æ—¶å€™çš„å¢ç›Šï¼ˆTrebleä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡ä½é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Bassï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Trebleçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f67a2d.png"><br>å¦‚éœ€ä½¿Cç‚¹å‘ä¸‹ç§»ï¼ŒåŒç†ï¼›</li>
<li>å¦‚éœ€ä½¿Bç‚¹å‘ä¸‹ç§»ï¼Œå³éœ€å‡å°Treble=100æ—¶å€™çš„å¢ç›Šï¼ˆBassä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡é«˜é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Trebleï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Bassçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f671a4.png"><br>å¦‚éœ€ä½¿Bç‚¹å‘ä¸Šç§»ï¼ŒåŒç†ï¼›</li>
<li>å¦‚éœ€ä½¿Dç‚¹å‘ä¸Šç§»ï¼Œå³éœ€å¢å¤§Treble=0æ—¶å€™çš„å¢ç›Šï¼ˆBassä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡é«˜é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Trebleï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Bassçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f6ce43.png"><br>å¦‚éœ€ä½¿Dç‚¹å‘ä¸‹ç§»ï¼ŒåŒç†.</li>
</ol>
<p>é«˜ä½éŸ³çš„ä¿®æ”¹å†…å®¹ä¸»è¦æ˜¯Treble/Bassæ›²çº¿è¡¨ã€subcustomer_setting.cã€‘ã€‚</p>
<h2 id="å£°éŸ³æ¨¡å¼"><a href="#å£°éŸ³æ¨¡å¼" class="headerlink" title="å£°éŸ³æ¨¡å¼"></a>å£°éŸ³æ¨¡å¼</h2><p>å³OSD -&gt; SOUNDä¸Šçš„å››ç§éŸ³æ•ˆæ¨¡å¼ï¼Œä¸åŒçš„å£°éŸ³æ¨¡å¼æ˜¯çªå‡ºä¸åŒçš„å£°éŸ³ç‰¹ç‚¹ï¼Œæœ‰çš„çªå‡ºä½éŸ³ï¼Œæœ‰çš„çªå‡ºé«˜éŸ³ï¼Œæœ‰çš„æ˜¯çªå‡ºäººå£°éƒ¨åˆ†ã€‚å‚è€ƒä¸‹å›¾ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9516de46c4f.png"><br>ä¸åŒçš„éŸ³æ•ˆæ¨¡å¼Trebleå€¼å’ŒBasså€¼ä¸åŒï¼Œæ‰€ä»¥å¢ç›Šä¸åŒï¼Œå¯ä»¥ä¿®æ”¹OSD -&gt; SOUNGä¸ŠTreble/Bassçš„é»˜è®¤å€¼ã€app_data_setting.cã€‘ï¼Œåœ¨å®¢æˆ·å¯¹OSD -&gt; SOUNGä¸ŠTreble/Bassçš„é»˜è®¤å€¼æœ‰è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œåªèƒ½è°ƒæ•´Treble/Bassæ›²çº¿ã€subcustomer_setting.cã€‘ã€‚</p>
<h2 id="åˆ†ç¦»åº¦"><a href="#åˆ†ç¦»åº¦" class="headerlink" title="åˆ†ç¦»åº¦"></a>åˆ†ç¦»åº¦</h2><p>é€šé“é—´ä¸²éŸ³åˆ†ç¦»åº¦æµ‹é‡çš„æ˜¯å…¶ä»–é€šé“ä¿æŒè¾“å…¥ä¿¡å·çš„æƒ…å†µä¸‹å¯¹æœ¬é€šé“çš„å½±å“ã€‚<br><img src="https://i.loli.net/2018/02/27/5a9516de2dfc1.png"></p>
<h2 id="å¤±çœŸåº¦"><a href="#å¤±çœŸåº¦" class="headerlink" title="å¤±çœŸåº¦"></a>å¤±çœŸåº¦</h2><p><img src="https://i.loli.net/2018/02/27/5a9516de38c7e.png"></p>
<h2 id="ä¿¡å™ªæ¯”"><a href="#ä¿¡å™ªæ¯”" class="headerlink" title="ä¿¡å™ªæ¯”"></a>ä¿¡å™ªæ¯”</h2><p>ä¿¡å™ªæ¯”æ˜¯ä½œä¸ºè°ƒåˆ¶é¢‘ç‡çš„ 1KHz éŸ³é¢‘ä¿¡å·çš„è¾“å‡ºåŠŸç‡æˆ–ç”µå‹ä¸èƒŒæ™¯å™ªå£°çš„åŠŸç‡æˆ–ç”µå‹ä¹‹æ¯”ï¼Œç”¨åˆ†è´ï¼ˆ dBï¼‰è¡¨ç¤ºã€‚<br><img src="https://i.loli.net/2018/02/27/5a9516de40ee6.png"></p>
<h2 id="å¢ç›Šå·®"><a href="#å¢ç›Šå·®" class="headerlink" title="å¢ç›Šå·®"></a>å¢ç›Šå·®</h2><p>æŒ‡æµ‹é‡æ‰¬å£°å™¨å·¦å³é€šé“ä¿¡å·å¹…åº¦ä¸ç­‰æ€§ã€‚<br><img src="https://i.loli.net/2018/02/27/5a9516de414d7.png"></p>
<h2 id="è€³æœºé¢‘å“-è€³æœºå¤±çœŸ-è€³æœºä¿¡å™ªæ¯”-è€³æœºå¢ç›Šå·®"><a href="#è€³æœºé¢‘å“-è€³æœºå¤±çœŸ-è€³æœºä¿¡å™ªæ¯”-è€³æœºå¢ç›Šå·®" class="headerlink" title="è€³æœºé¢‘å“/è€³æœºå¤±çœŸ/è€³æœºä¿¡å™ªæ¯”/è€³æœºå¢ç›Šå·®"></a>è€³æœºé¢‘å“/è€³æœºå¤±çœŸ/è€³æœºä¿¡å™ªæ¯”/è€³æœºå¢ç›Šå·®</h2><p>æµ·å‹¤8501æ–¹æ¡ˆè€³æœºè·Ÿå–‡å­å…±ç”¨ä¸€è·¯ï¼Œæ‰€ä»¥è€³æœºé¡¹ç›®çš„è¿™å‡ ä¸ªæµ‹è¯•ç»“æœè·Ÿå–‡å­ä¸€æ ·ã€‚</p>
<h2 id="AV-Outé¢‘å“-å¤±çœŸ-ä¿¡å™ªæ¯”-å¢ç›Šå·®"><a href="#AV-Outé¢‘å“-å¤±çœŸ-ä¿¡å™ªæ¯”-å¢ç›Šå·®" class="headerlink" title="AV Outé¢‘å“/å¤±çœŸ/ä¿¡å™ªæ¯”/å¢ç›Šå·®"></a>AV Outé¢‘å“/å¤±çœŸ/ä¿¡å™ªæ¯”/å¢ç›Šå·®</h2><p>æµ·å‹¤8501æ–¹æ¡ˆAV Outè·Ÿå–‡å­/è€³æœºç¡¬ä»¶ä¸Šä¸æ˜¯åŒä¸€è·¯ã€‚ã€‚ã€‚</p>
<h2 id="AV-OutéŸ³é¢‘è¾“å‡ºå¹…åº¦"><a href="#AV-OutéŸ³é¢‘è¾“å‡ºå¹…åº¦" class="headerlink" title="AV OutéŸ³é¢‘è¾“å‡ºå¹…åº¦"></a>AV OutéŸ³é¢‘è¾“å‡ºå¹…åº¦</h2><p>å¸¦AV Outç«¯å­çš„æ¿å¡éœ€è¦æµ‹è¯•è¿™ä¸€é¡¹ç›®ã€‚ã€board_config.cã€‘</p>
<h2 id="å”‡éŸ³åŒæ­¥"><a href="#å”‡éŸ³åŒæ­¥" class="headerlink" title="å”‡éŸ³åŒæ­¥"></a>å”‡éŸ³åŒæ­¥</h2><p>å³å£°éŸ³å›¾åƒåŒæ­¥ï¼ˆAV Syncï¼‰<br>Audio â€“&gt; Misc. -&gt; Lipsyncï¼šè°ƒæ•´ AV Syncï¼ŒèŒƒå›´ä¸º -200ms~200ms<br>ã€app_data_setting.cã€‘</p>
<h2 id="è°æ³¢å¤±çœŸ"><a href="#è°æ³¢å¤±çœŸ" class="headerlink" title="è°æ³¢å¤±çœŸ"></a>è°æ³¢å¤±çœŸ</h2><p>è°æ³¢å¤±çœŸæ˜¯éŸ³é¢‘é€šé“çš„éçº¿æ€§å¼•èµ·çš„æ­£å¼¦æ³¢ä¿¡å·çš„è°æ³¢åˆ†é‡ã€‚<br>ã€‚ã€‚ã€‚</p>
<h2 id="æ€»è°æ³¢å¤±çœŸ"><a href="#æ€»è°æ³¢å¤±çœŸ" class="headerlink" title="æ€»è°æ³¢å¤±çœŸ"></a>æ€»è°æ³¢å¤±çœŸ</h2><p>æ€»è°æ³¢å¤±çœŸæ˜¯è¾“å‡ºä¿¡å·è°æ³¢å¤±çœŸçš„æœ‰æ•ˆå€¼ä¸æ€»è¾“å‡ºä¿¡å·çš„æœ‰æ•ˆå€¼ä¹‹æ¯”ï¼Œç”¨ç™¾åˆ†æ•°è¡¨ç¤ºã€‚<br>ã€‚ã€‚ã€‚</p>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul>
<li>æµ‹é‡å£°éŸ³ç›¸å…³å‚æ•°æ—¶éœ€220Väº¤æµä¾›ç”µï¼›</li>
<li>æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ— ç‰¹æ®Šè¦æ±‚ä¸€èˆ¬æŠŠå£°éŸ³å‚æ•°è®¾ç½®ä¸ºæ ‡å‡†ï¼Œç¯ç»•å£°å…³é—­ï¼Œç›¸å…³éŸ³æ•ˆå¤„ç†åŠŸèƒ½å…³é—­ï¼ˆç‰¹æ®Šæµ‹è¯•é¡¹ç›®é™¤å¤–ï¼‰ï¼Œè¿™ä¸ªåœ¨æµ‹è¯•å‰éœ€è·Ÿæµ‹è¯•äººå‘˜è¿›è¡Œæœ‰æ•ˆæ²Ÿé€šï¼›</li>
<li>AQè°ƒè¯•ä¼˜å…ˆçº§è¯´æ˜ï¼š<ul>
<li>å…ˆè°ƒé¢‘å“ï¼›</li>
<li>é«˜ä½éŸ³&gt; å£°éŸ³æ¨¡å¼ï¼›</li>
<li>æœ€å¤§å£°éŸ³åŠŸç‡ &gt; å£°éŸ³æ›²çº¿ &gt; å¤±çœŸåº¦ï¼›</li>
<li>AVLã€ä¿¡å™ªæ¯”ã€åˆ†ç¦»åº¦ã€å¢ç›Šå·®è¿™å‡ ä¸ªä¸€èˆ¬åœ¨é¢‘å“ä¹‹åã€‚</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸Šæ‰€æœ‰çš„æ›²çº¿å›¾ä»…å‚è€ƒï¼Œå®é™…æ•ˆæœä¼šå› å®¢æˆ·æ ‡å‡†ï¼Œæ¿å¡ï¼ŒåŠŸæ”¾ï¼Œå–‡å­è§„æ ¼ä¸åŒè€Œå­˜åœ¨å·®å¼‚ã€‚</p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>rda</tag>
        <tag>audio</tag>
        <tag>aq</tag>
      </tags>
  </entry>
  <entry>
    <title>éŸ³é¢‘å‚æ•°ç®€å•ä»‹ç»</title>
    <url>/2018/02/28/rda8501-aq-v2/</url>
    <content><![CDATA[<p>é‡å†™8501AQç›¸å…³ï¼Œä½œä¸ºã€ŠRDA8501è°ƒAQçš„å‡ ç‚¹è®°å½•ã€‹çš„è¡¥å……æˆ–ä¿®æ­£ã€‚</p>
<span id="more"></span>

<h3 id="ä¸€ã€é¢‘å“æ›²çº¿"><a href="#ä¸€ã€é¢‘å“æ›²çº¿" class="headerlink" title="ä¸€ã€é¢‘å“æ›²çº¿"></a>ä¸€ã€é¢‘å“æ›²çº¿</h3><ul>
<li>å¯¹é¢‘å“çš„ç†è§£</li>
</ul>
<blockquote>
<p>é¢‘å“æ›²çº¿æ˜¯åœ¨æµ‹è¯•ç”µè·¯ä¸­ï¼Œä½¿ä¿¡å·å‘ç”Ÿå™¨çš„è¾“å‡ºä¿¡å·é¢‘ç‡å‘ç”Ÿè¿ç»­å˜åŒ–ï¼ˆå³é€šå¸¸è¯´çš„â€˜æ‰«é¢‘â€™ï¼‰å¹¶ä¿æŒå¹…åº¦ä¸å˜ï¼Œåœ¨è¾“å‡ºç«¯é€šè¿‡ç¤ºæ³¢å™¨æˆ–è€…å…¶ä»–ä¸€äº›è®°å½•ä»ªå°†æ”¾å¤§å™¨å¯¹äºè¿™ä¸ªè¿ç»­å˜åŒ–ç›¸åº”çš„è¾“å‡ºç”µå¹³è®°å½•ä¸‹æ¥ï¼Œå°±å¯ä»¥åœ¨ä¸€ä¸ªåæ ‡ä¸Šæç»˜å‡ºä¸€ä¸ªç”µå¹³å¯¹åº”é¢‘ç‡çš„æ›²çº¿ã€‚è¿™ä¸ªåæ ‡çš„çºµåæ ‡æ˜¯ç”µå¹³ï¼Œæ¨ªåæ ‡æ˜¯é¢‘ç‡ã€‚çºµåæ ‡çš„å•ä½æ˜¯dBï¼Œæ¨ªåæ ‡çš„å•ä½æ˜¯Hz(æˆ–KHz)ã€‚ä¸ºäº†è®°å½•æ–¹ä¾¿ï¼Œæ¨ªåæ ‡çš„æ ‡å°ºä¸ºå¯¹æ•°å‹çš„ï¼Œçºµåæ ‡åˆ™æ˜¯çº¿æ€§çš„ã€‚çœ‹é¢‘å“æ›²çº¿çš„æ—¶å€™ï¼Œä¸è¦è¢«æ›²çº¿çš„â€˜å¹³æ»‘â€™æˆ–è€…â€˜å´å²–â€™æ‰€è¿·æƒ‘ï¼Œé¦–å…ˆè¦çœ‹çœ‹åæ ‡çš„æ ‡å°ºï¼Œæ”¹å˜æ ‡å°ºçš„å•ä½ä¼šä½¿æ›²çº¿çœ‹èµ·æ¥å·®åˆ«å¾ˆå¤§ã€‚å¦‚æœæŠŠæ ‡å°ºåŠ å¤§10å€ï¼Œä½ å¤§æ¦‚çœ‹åˆ°çš„å·®ä¸å¤šæ˜¯ä¸€æ¡å®Œç¾çš„ç›´çº¿äº†ã€‚</p>
</blockquote>
<blockquote>
<p>é¢‘å“ä¸ºä»€ä¹ˆä¼šå½±å“éŸ³è´¨ï¼Ÿä¸€æ–¹é¢ï¼Œäººè€³æœ‰å¿ƒç†å£°å­¦çš„æ©è”½æ•ˆåº”ï¼Œè¿™ä¸ªæ•ˆåº”ç®€è€Œè¨€ä¹‹å°±æ˜¯ä¸åŒé¢‘ç‡åŠä¸åŒçš„å“åº¦ä¼šç›¸äº’å½±å“ï¼Œä¸€éƒ¨åˆ†å£°éŸ³çš„å åŠ ï¼Œä¼šå¯¼è‡´å¦ä¸€éƒ¨åˆ†å£°éŸ³æ— æ³•å¬è§ã€‚è¡¨ç°åˆ°é‡æ”¾ç³»ç»Ÿï¼Œå¦‚æœé¢‘å“ä¸å¤Ÿå¹³ï¼Œæˆ–è€…ä¸åŒé¢‘ç‡å˜åŒ–å¹…åº¦è¿‡å¤§ï¼Œå°±ä¼šå¯¼è‡´æœ‰éƒ¨åˆ†æœ¬æ¥åº”è¯¥å¬åˆ°çš„å†…å®¹å¬ä¸åˆ°ã€‚è¿™å°±æ˜¯ç»†èŠ‚çš„ä¸¢å¤±ã€‚è¿˜æœ‰ä¸€æ–¹é¢ï¼Œä¸åŒé¢‘ç‡çš„é¢‘å“ä¸åŒï¼Œä¼šå¯¼è‡´å£°éŸ³å‘ˆç°å‡ºéåŸä¹‰çš„è¡¨ç°å½¢å¼ã€‚æ¯”å¦‚ï¼Œä¸€æ®µéŸ³ä¹ï¼Œæœ¬æ¥æ˜¯ç¬›å­å’Œå¤ç­äº¤ç›¸è¾‰æ˜ ç è”ç’§åˆçš„ï¼Œå¦‚æœç¬›å­é‚£ä¸ªé¢‘æ®µé¢‘å“è¿‡é«˜è€Œå¤ç­é‚£ä¸ªé¢‘æ®µé¢‘å“è¾ƒä½ï¼Œå°±ä¼šå¯¼è‡´ä¸å’Œè°çš„æƒ…å†µå‘ç”Ÿã€‚å¾ˆæ¼äººçš„æ„Ÿè§‰å°±ä¼šå‡ºç°ï¼Œæœ¬æ¥å¥½å¬çš„å°±ä¸å†å¥½å¬äº†ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨å®é™…çš„è°ƒéŸ³ä¸­,  é¢‘å“æ›²çº¿è¦æ ¹æ®å–‡å­çš„ç‰¹æ€§è¿›å…¥è°ƒæ•´ä»¥å¼¥è¡¥å–‡å­è‡ªèº«çš„ä¸è¶³,  åœ¨å“ªäº›é¢‘ç‚¹è¦æå‡æˆ–é™ä½å‡ ä¸ªdB,  è¿™å°±è¦è€ƒéªŒéŸ³é¢‘å·¥ç¨‹å¸ˆçš„åŠŸåŠ›ã€‚</p>
</blockquote>
<ul>
<li><p>å·¥å‚èœå•è°ƒè¯•ç‚¹</p>
<ul>
<li>EQ Setting<br>  ä½œç”¨ï¼šé€šè¿‡BandPass Filteræ¥æ”¹å˜ç‰¹å®šé¢‘ç‡èŒƒå›´ä¿¡å·å¼ºåº¦ï¼ˆç›®å‰åˆ†ä¸º7æ®µï¼‰  <ul>
<li>EQ Bandï¼šéœ€è¦æ”¹å˜çš„EQ band  </li>
<li>Gainï¼šè®¾ç½®EQ bandå¢ç›Šï¼ŒèŒƒå›´-50~50ï¼ˆ-12db ~ 12dbï¼‰  </li>
<li>Q Factorï¼šè°ƒæ•´EQ Bandçš„å½±å“é¢‘å®½ï¼ˆ0.1(å®½)~5.0(çª„)ï¼‰ï¼Œé¢„è®¾1.5  </li>
<li>Frequencyï¼šè°ƒæ•´EQ Bandçš„ä¸­å¿ƒé¢‘ç‡ï¼ˆ20HZ~20KHZï¼‰</li>
</ul>
</li>
<li>PEQ Setting<br>  ä½œç”¨ï¼šç”¨äºEQ bandä¸æ»¡è¶³è¦æ±‚æ—¶å€™ï¼Œå¯¹ç‰¹å®šé¢‘ç‡è¿›è¡Œè¡¥å¿ä½¿ç”¨  <ul>
<li>PEQ1ï¼šç”¨äºè®¾ç½®ç¬¬ä¸€ä¸ªé¢‘ç‡è¡¥å¿ç‚¹å‚æ•°  </li>
<li>Center Freqï¼šè®¾ç½®ä¸­å¿ƒé¢‘ç‡  </li>
<li>Q Factoryï¼šåŒä¸ŠEQ Band Settingä¸­Q Factor  </li>
<li>Gain Stepï¼šåŒä¸ŠEQ Band Settingä¸­gain  </li>
<li>PEQ2ï¼šç”¨äºè®¾ç½®ç¬¬äºŒé¢‘ç‡è¡¥å¿ç‚¹å‚æ•°  </li>
<li>PEQ3ï¼šç”¨äºè®¾ç½®ç¬¬ä¸‰é¢‘ç‡è¡¥å¿ç‚¹å‚æ•°</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸¾ä¾‹ï¼šå¦‚å›¾æ˜¯8503P531æ¿å¡æ­è½½RDA3118åŠŸæ”¾ï¼Œè½¯ä»¶ä½¿ç”¨é»˜è®¤è®¾å®šï¼ŒAP 500mVè¾“å…¥ï¼Œå–‡å­åŠŸç‡ä¸º1Wæƒ…å†µä¸‹å¾—åˆ°çš„é¢‘å“æ›²çº¿<br>  <img src="https://i.loli.net/2018/02/28/5a9642c0ab9f2.jpg"></p>
</li>
<li><p>è°ƒå¥½å‚æ•°åæŠŠæ•°å€¼å¡«å……åˆ°ç»“æ„ä½“<strong>g_stSettingDefault_FactoryUser</strong>ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/system_setting/rda_atv/app_data_setting.c</em>ï¼‰å’Œ<strong>g_stAudioSoundModeEqualizerSetting</strong>ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/system_setting/rda_atv/subcustomer_setting.c</em>ï¼‰</p>
</li>
</ul>
<h3 id="äºŒã€æœ€å¤§å£°éŸ³åŠŸç‡"><a href="#äºŒã€æœ€å¤§å£°éŸ³åŠŸç‡" class="headerlink" title="äºŒã€æœ€å¤§å£°éŸ³åŠŸç‡"></a>äºŒã€æœ€å¤§å£°éŸ³åŠŸç‡</h3><p>æŒ‡TVéŸ³é‡ä¸ºæœ€å¤§(100)æ—¶ï¼Œå–‡å­æœ€å¤§åŠŸç‡ã€‚ä¸åŒå®¢æˆ·è¾“å…¥ä¿¡å·æ ‡å‡†æˆ–è®¸ä¸åŒï¼Œä¸€èˆ¬ä½¿ç”¨1KHz/-12dBï¼ˆ500mVï¼‰è¾“å…¥ã€‚<br>æ¯”å¦‚è°ƒä¸€ä¸ª4Wæœ€å¤§å£°éŸ³åŠŸç‡ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä»¤å·¥å‚èœå•Audio-&gt;AVL-&gt;AVL Mode = Disableï¼ŒAudio-&gt;Power Limiter-&gt; Sp Attack = 0ï¼ˆPLCç”¨äºé™åˆ¶åç«¯è¾“å‡ºï¼‰ï¼›</li>
<li>ä»¤å·¥å‚èœå•Function-&gt;Curve Setting-&gt;Volume Curve-&gt;OSD Volume Valueï¼ˆå³TVç³»ç»ŸéŸ³é‡ï¼‰= 100ï¼Œè°ƒFunction-&gt;Curve Setting-&gt;Volume Curve-&gt;Vol.Pt.100ï¼Œä½¿åŠŸç‡è¾¾åˆ°4Wï¼Œè®°å½•æ•°å€¼ç”¨äºå¡«å›éŸ³é‡æ›²çº¿è¡¨ï¼›</li>
<li>è°ƒå¤§è¾“å…¥æºå¹…åº¦æˆ–ç»§ç»­å¢å¤§Vol.Pt.100ï¼Œä½¿è¾“å‡ºå¤§äº4Wï¼›</li>
<li>é™ä½PLC Sp Attackï¼Œä½¿è¾“å‡ºå°äºç­‰äº4Wï¼Œè®°å½•æ•°å€¼è®¾ä¸ºé»˜è®¤å€¼ï¼›</li>
<li>å®Œæˆã€‚éœ€è¦è®°å½•çš„å‚æ•°æ˜¯Sp Attackï¼ˆ<strong>PLC_SP_ATTACK</strong>ï¼š<em>aps/customer/s2tek/hikeen8501/adaptable/board_config.h</em>ï¼‰å’ŒVol.Pt.100ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/subcustomer_setting.h</em>ï¼‰ã€‚</li>
</ol>
<h3 id="ä¸‰ã€éŸ³é‡æ›²çº¿"><a href="#ä¸‰ã€éŸ³é‡æ›²çº¿" class="headerlink" title="ä¸‰ã€éŸ³é‡æ›²çº¿"></a>ä¸‰ã€éŸ³é‡æ›²çº¿</h3><p>è¦æ±‚åˆ¶ä½œçš„éŸ³é‡æ›²çº¿ä¸å¯æœ‰æ˜æ˜¾çªå˜ï¼Œå„ä¸ªé€šé“çš„æ›²çº¿å°½é‡æ¥è¿‘ã€‚<br>æ­¥éª¤ï¼š</p>
<ol>
<li>è°ƒæœ€å¤§å£°éŸ³åŠŸç‡</li>
<li>ä¾æ¬¡è°ƒFunction-&gt;Curve Setting-&gt;Volume Curve-&gt;Vol.Ptå„ä¸ªç‚¹ï¼Œä½¿æ¯ä¸ªéŸ³é‡ç‚¹æµ‹é‡å¾—åˆ°çš„åŠŸç‡åŸºæœ¬æ»¡è¶³å®¢æˆ·è¦æ±‚ï¼Œè°ƒè¯•æ—¶æ³¨æ„Vol.Pt å€¼è·ŸOSD Volume Valueå€¼åŒ¹é…ï¼›</li>
<li>è®°å½•æ•°å€¼å†™å›éŸ³é‡æ›²çº¿è¡¨ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/subcustomer_setting.h</em>ï¼‰</li>
</ol>
<h3 id="å››ã€AVLï¼ˆAVC-è¾“å…¥çµæ•åº¦ï¼‰"><a href="#å››ã€AVLï¼ˆAVC-è¾“å…¥çµæ•åº¦ï¼‰" class="headerlink" title="å››ã€AVLï¼ˆAVC/è¾“å…¥çµæ•åº¦ï¼‰"></a>å››ã€AVLï¼ˆAVC/è¾“å…¥çµæ•åº¦ï¼‰</h3><p>AVLç”¨äºæ§åˆ¶è¾“å…¥ä¿¡å·çš„å¼ºå¼±ï¼ˆé™åˆ¶å‰ç«¯ICè¾“å…¥ï¼‰ã€‚</p>
<ol>
<li>å·¥å‚èœå•å†…å®¹ï¼š  <ul>
<li>AVL Modeï¼šEnableï¼ˆå¼€å¯AVLåŠŸèƒ½ï¼‰ï¼ŒDisableï¼ˆå…³é—­AVLåŠŸèƒ½ï¼‰ï¼›AVLåŠŸèƒ½é»˜è®¤å…³é—­ï¼Œåšè¾“å…¥çµæ•åº¦æµ‹è¯•çš„æ—¶å€™å…ˆæ‰“å¼€AVLåŠŸèƒ½ï¼›Audio -&gt; AVL -&gt; AVL Modeä¸OSD -&gt; SOUNDä¸Šçš„ Auto Volume åŠŸèƒ½ä¸€è‡´  </li>
<li>Attack Rateï¼šæ§åˆ¶å‹æŠ‘ä»¥åŠè¿˜åŸé€Ÿåº¦ï¼ˆæ—¶é—´ï¼‰çš„æ¯”ä¾‹ï¼Œå³å¼€å…³AVLåŠŸèƒ½æ—¶ï¼ŒåŠŸç‡å˜åŒ–çš„å¿«æ…¢  </li>
<li>Active Timeï¼šè¶…è¿‡Limite Levelæ—¶ï¼Œæ¯éš”Active Timeè°ƒæ•´ä¸€æ¬¡å¢ç›Šï¼Œæ¯æ¬¡å‡å°0.1dBï¼Œç›´åˆ°é™åˆ°Limite Level  </li>
<li>Limiterï¼šå½“è¾“å…¥ä¿¡å·è¶…è¿‡Limite Levelæ—¶å¼€å§‹å‹æŠ‘  </li>
<li>Pullup Gainï¼šå½“ä¿¡å·å°äº<strong>AGC_PULL_UP_ACTIVE_LEVEL</strong>çš„æ—¶å€™ï¼Œä¼šä¾ç…§Pullup Gainçš„å®šä¹‰å°†ä¿¡å·æ”¾å¤§ï¼ˆä½†æ˜¯æ”¾å¤§ä¿¡å·å®¹æ˜“å¤±çœŸï¼Œå»ºè®®è®¾ç½®0dBï¼‰ </li>
</ul>
</li>
<li>è°ƒå¥½åè®°å½•æ•°æ®<strong>g_stSettingDefault_FactoryUser</strong>ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/system_setting/rda_atv/app_data_setting.c</em>ï¼‰</li>
</ol>
<h3 id="äº”ã€é«˜ä½éŸ³"><a href="#äº”ã€é«˜ä½éŸ³" class="headerlink" title="äº”ã€é«˜ä½éŸ³"></a>äº”ã€é«˜ä½éŸ³</h3><p>å³OSD -&gt; SOUNDä¸Šçš„Treble/Bassï¼Œå¦‚å›¾ï¼Œå½“Treble=100ï¼ŒBass=100æ—¶å¾—åˆ°çº¢çº¿ABï¼Œå½“ Treble=0ï¼ŒBass=0æ—¶å¾—åˆ°çº¢çº¿CDï¼Œå¢ç›ŠèŒƒå›´åœ¨Â±6dB~Â±8dBï¼Œæ¯ä¸€æ ¹çº¿éƒ½æ˜¯Trebleå’ŒBassä½œç”¨å åŠ çš„æ•ˆæœå›¾ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9515e332cbe.png"><br>è°ƒè¯•ç‚¹ä¸»è¦æœ‰Aã€Bã€Cã€Då››ä¸ªï¼Œæ ‡å‡†æ˜¯å¢ç›ŠèŒƒå›´ï¼Œå³Aåˆ°Cçš„å¢ç›Šå·®ï¼ŒBåˆ°Dçš„å¢ç›Šå·®ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š  </p>
<ol>
<li><p>å¦‚éœ€ä½¿Aç‚¹å‘ä¸‹ç§»ï¼Œå³éœ€å‡å°Bass=100æ—¶å€™çš„å¢ç›Šï¼ˆTrebleä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡ä½é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Bassï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Trebleçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f73d1e.png"><br>å¦‚éœ€ä½¿Aç‚¹å‘ä¸Šç§»ï¼ŒåŒç†ï¼›  </p>
</li>
<li><p>å¦‚éœ€ä½¿Cç‚¹å‘ä¸Šç§»ï¼Œå³éœ€å¢å¤§Bass=0æ—¶å€™çš„å¢ç›Šï¼ˆTrebleä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡ä½é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Bassï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Trebleçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f67a2d.png"><br>å¦‚éœ€ä½¿Cç‚¹å‘ä¸‹ç§»ï¼ŒåŒç†ï¼›  </p>
</li>
<li><p>å¦‚éœ€ä½¿Bç‚¹å‘ä¸‹ç§»ï¼Œå³éœ€å‡å°Treble=100æ—¶å€™çš„å¢ç›Šï¼ˆBassä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡é«˜é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Trebleï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Bassçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f671a4.png"><br>å¦‚éœ€ä½¿Bç‚¹å‘ä¸Šç§»ï¼ŒåŒç†ï¼›  </p>
</li>
<li><p>å¦‚éœ€ä½¿Dç‚¹å‘ä¸Šç§»ï¼Œå³éœ€å¢å¤§Treble=0æ—¶å€™çš„å¢ç›Šï¼ˆBassä¹Ÿæœ‰ä½œç”¨ï¼Œåªä¸è¿‡é«˜é¢‘æ®µä¸»è¦å½±å“çš„æ˜¯Trebleï¼Œæ‰€ä»¥è¿™æ—¶ä¸€èˆ¬ä¸æ”¹åŠ¨Bassçš„å¢ç›Šï¼‰ï¼Œ<br><img src="https://i.loli.net/2018/02/27/5a95166f6ce43.png"><br>å¦‚éœ€ä½¿Dç‚¹å‘ä¸‹ç§»ï¼ŒåŒç†ã€‚  </p>
</li>
</ol>
<p>è°ƒå¥½å‚æ•°åæŠŠæ•°æ®å¡«å…¥<strong>g_arAudioBassTable</strong> å’Œ <strong>g_arAudioTrebleTable</strong>ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/system_setting/rda_atv/subcustomer_setting.c</em>ï¼‰ã€‚</p>
<h3 id="å…­ã€å£°éŸ³æ¨¡å¼"><a href="#å…­ã€å£°éŸ³æ¨¡å¼" class="headerlink" title="å…­ã€å£°éŸ³æ¨¡å¼"></a>å…­ã€å£°éŸ³æ¨¡å¼</h3><p>å³OSD -&gt; SOUNDä¸Šçš„å››ç§éŸ³æ•ˆæ¨¡å¼ï¼Œä¸åŒçš„å£°éŸ³æ¨¡å¼çš„å·®åˆ«æ˜¯é«˜ä½éŸ³çš„è®¾å®šçš„ä¸åŒã€‚ä¸å»ºè®®ä¿®æ”¹OSD -&gt; SOUNGä¸ŠTreble/Bassçš„é»˜è®¤å€¼ï¼Œè€Œæ˜¯é€šè¿‡è°ƒæ•´Bass/Trebleæ›²çº¿æ»¡è¶³å®¢æˆ·éœ€æ±‚ã€‚è°ƒè¯•æ–¹æ³•å‚è€ƒé«˜ä½éŸ³è°ƒè¯•ã€‚<br>å¦‚å›¾æ˜¯8501æŸæ¿å¡çš„å£°éŸ³æ¨¡å¼æ›²çº¿ï¼š<br><img src="https://i.loli.net/2018/02/27/5a9516de46c4f.png"> </p>
<h3 id="ä¸ƒã€å…¶ä»–1"><a href="#ä¸ƒã€å…¶ä»–1" class="headerlink" title="ä¸ƒã€å…¶ä»–1"></a>ä¸ƒã€å…¶ä»–1</h3><ul>
<li><p>åˆ†ç¦»åº¦ï¼šå·¦ã€å³ä¸¤ä¸ªå£°é“ç›¸äº’ä¸²æ‰°çš„ç¨‹åº¦<br><img src="https://i.loli.net/2018/02/27/5a9516de2dfc1.png">  </p>
</li>
<li><p>å¢ç›Šå·®ï¼šå·¦ã€å³ä¸¤ä¸ªå£°é“çš„ä¿¡å·å¢ç›Šä¹‹å·®<br><img src="https://i.loli.net/2018/02/27/5a9516de414d7.png">  </p>
</li>
<li><p>å¤±çœŸåº¦ï¼šè¡¨ç¤ºå–‡å­å¯¹è¾“å…¥ä¿¡å·çš„è¿˜åŸç¨‹åº¦ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¾“å‡ºåŠŸç‡ä¸º 1W æ—¶ï¼Œå¤±çœŸåº¦é¡»å°äºç­‰äº 1%ã€‚è¾“å‡ºåŠŸç‡æœ€å¤§æ—¶é¡»å°äºç­‰äº 7%<br><img src="https://i.loli.net/2018/02/27/5a9516de38c7e.png">  </p>
</li>
<li><p>ä¿¡å™ªæ¯”ï¼šå–‡å­æ’­æ”¾æ—¶ï¼Œæ­£å¸¸å£°éŸ³ä¿¡å·å¼ºåº¦ä¸å™ªå£°ä¿¡å·å¼ºåº¦çš„æ¯”å€¼<br><img src="https://i.loli.net/2018/02/27/5a9516de40ee6.png"></p>
</li>
</ul>
<h3 id="å…«ã€å…¶ä»–2"><a href="#å…«ã€å…¶ä»–2" class="headerlink" title="å…«ã€å…¶ä»–2"></a>å…«ã€å…¶ä»–2</h3><ul>
<li><p>AV OutéŸ³é¢‘è¾“å‡ºå¹…åº¦ï¼šå¸¦AV Outç«¯å­çš„æ¿å¡éœ€è¦æµ‹è¯•è¿™ä¸€é¡¹ç›®ï¼Œä¿®æ”¹<strong>g_arAudioAuxiliaryVolumeOffset</strong>ï¼ˆ<em>aps/customer/s2tek/hikeen8501/adaptable/board_config.c</em>ï¼‰</p>
</li>
<li><p>å”‡éŸ³åŒæ­¥ï¼šå£°éŸ³å›¾åƒåŒæ­¥ï¼ˆAV Syncï¼‰ Audioâ€“&gt;Misc.-&gt;Lipsyncï¼šè°ƒæ•´ AV Syncï¼ŒèŒƒå›´ä¸º -200ms~200msã€‚ä¿®æ”¹<strong>g_stSettingDefault_FactoryUser</strong>ï¼ˆ<em>aps/customer/s2tek/sub_customer/s2tek/s2tek/system_setting/rda_atv/app_data_setting.c</em>ï¼‰</p>
</li>
</ul>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol>
<li>æµ‹é‡å£°éŸ³ç›¸å…³å‚æ•°æ—¶éœ€220Väº¤æµä¾›ç”µï¼›</li>
<li>æ˜ç¡®å„ä¸ªæŒ‡æ ‡çš„æµ‹è¯•æ–¹æ³•å’Œæµ‹è¯•æ ‡å‡†ï¼›æµ‹é‡é¢‘å“å‰å…ˆç¡®è®¤å®¢æˆ·æ˜¯æµ‹ç”µé¢‘å“ï¼ˆæµ‹æ¿å¡çš„ï¼‰è¿˜æ˜¯å£°é¢‘å“ï¼ˆæµ‹æ•´æœºçš„ï¼‰ï¼›</li>
<li>è°ƒè¯•é¡ºåºï¼šé¦–å…ˆè°ƒé¢‘å“ï¼›æœ€å¤§å£°éŸ³åŠŸç‡ &gt; å£°éŸ³æ›²çº¿ &gt; å¤±çœŸåº¦ï¼›é«˜ä½éŸ³&gt; å£°éŸ³æ¨¡å¼ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>rda</tag>
        <tag>audio</tag>
        <tag>aq</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­ä¸ªæ¢¯å­</title>
    <url>/2018/01/03/fanqiang/</url>
    <content><![CDATA[<p>æ²¡æœ‰è°·æ­Œæ˜¯åœ¨å¾ˆä¸æ–¹ä¾¿ï¼Œæœç´¢ï¼Œç©æ¸¸æˆï¼Œå¤‡ä»½ç›¸ç‰‡ã€é€šè®¯å½•ä»€ä¹ˆçš„éƒ½å¾ˆéº»çƒ¦ã€‚</p>
<span id="more"></span>

<h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h3><ul>
<li><p>è´­ä¹°VPS<br>  ç™¾åº¦äº†ä¸€åœˆï¼Œè§‰å¾—æ¯”è¾ƒåˆ’ç®—çš„è¿˜æ˜¯Bandwagonæˆ–è€…Vultrï¼ˆVultrå¯ä»˜æ”¯ä»˜å®ï¼Œæ¬ç“¦å·¥æ²¡äº†è§£ï¼‰ã€‚æˆ‘ç”¨çš„æ˜¯Vultrï¼Œç›´æ¥å……é’±ï¼Œæœ€ä½å……10ç¾å…ƒã€‚æœ€ä½å¥—é¤æ˜¯2.5ç¾å…ƒ/æœˆï¼Œè¿™ä¸ªæ¯”è¾ƒç¼ºè´§ã€‚å¥½åƒæ—¥æœ¬æ–°åŠ å¡çš„ä¸»æœºæ¯”è¾ƒçƒ­é—¨ï¼Œä¸è¿‡ä¹Ÿå¬è¯´å®¹æ˜“è¢«å¢™ã€‚å½“æ—¶ä¹°2.5çš„æ—¶å€™åªæœ‰ç¾å›½NYCå’Œè¿ˆé˜¿å¯†æœ‰å”®ã€‚æˆ‘é€‰äº†ä¸ªè¿ˆé˜¿å¯†çš„ï¼Œè‡³äºä½“éªŒå¦‚ä½•ï¼Ÿå¯¹äºYouTubeæ²¡æœ‰å¤ªå¤§çš„éœ€æ±‚ï¼Œç”¨ä¸€åŠ 3Tè”é€šå¡ï¼ŒShadowsocksAPKæµ‹è¯•ï¼ŒPingå€¼ä¸€èˆ¬250~400msã€‚å¦‚æœä½ ä¹Ÿé€‰æ‹©Vultrï¼Œå¯ä»¥ç‚¹å‡»æˆ‘çš„<a href="https://www.vultr.com/?ref=7243025">é‚€è¯·é“¾æ¥</a>ï¼Œè¿™æ ·å¤§å®¶éƒ½å¯ä»¥å¾—åˆ°10åˆ€çš„ä¼˜æƒ ã€‚</p>
</li>
<li><p>éƒ¨ç½²äº‘ä¸»æœº<br>  é€‰VC2ï¼Œé€‰æœåŠ¡å™¨ï¼Œé€‰ç³»ç»Ÿã€‚æˆ‘é€‰çš„æ˜¯ Ubuntu 16.04 i386ï¼Œå…¶ä»–é»˜è®¤ï¼Œåˆ›å»ºæœåŠ¡å™¨ã€‚è¿™æ ·å°±å¯ä»¥å¾—åˆ°æœåŠ¡å™¨IPï¼Œç”¨æˆ·åå’Œå¯†ç ã€‚</p>
</li>
</ul>
<h3 id="Shadowsocks"><a href="#Shadowsocks" class="headerlink" title="Shadowsocks"></a>Shadowsocks</h3><ul>
<li><p>å®‰è£…ShadowsocksæœåŠ¡ç«¯<br>  å…ˆSSHç™»é™†æœåŠ¡å™¨ï¼Œç„¶åå®‰è£…Shadowsocksã€‚</p>
<figure class="highlight routeros"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install python</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install python-setuptools</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install python-pip</span><br><span class="line">sudo pip install shadowsocks</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é…ç½®Shadowsocks<br>  vim /etc/shadowsocks/config.json</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"ä½ çš„æœåŠ¡å™¨IPåœ°å€"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:ç«¯å£å·,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"ä½ çš„Shadowsockså¯†ç "</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¯åŠ¨Shadowsocks</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">sudo ssserver -c <span class="regexp">/etc/</span>shadowsocks.json -d start</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æŠŠShadowsocksåŠ å…¥å¼€æœºå¯åŠ¨é¡¹<br>  ç¼–è¾‘/etc/rc.localæ–‡ä»¶</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">sudo vim <span class="regexp">/etc/</span>rc.local</span><br></pre></td></tr></tbody></table></figure>
<p>  åœ¨ exit 0 è¿™ä¸€è¡Œçš„ä¸Šè¾¹åŠ å…¥å¦‚ä¸‹å†…å®¹</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>ssserver â€“c <span class="regexp">/etc/</span>shadowsocks.json</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ä¸Šç½‘å†²æµª"><a href="#ä¸Šç½‘å†²æµª" class="headerlink" title="ä¸Šç½‘å†²æµª"></a>ä¸Šç½‘å†²æµª</h2><p>Shadowsocksè½¯ä»¶ä¸‹è½½å®‰è£…ä¸ç™»å½•å³å¯ï¼Œè‡³æ­¤ç¿»å¢™å·¥ä½œåŸºæœ¬å®Œæˆã€‚<br>ä¸‹è½½åœ°å€ï¼š<br><a href="https://github.com/shadowsocks/shadowsocks-android">Android</a><br><a href="https://github.com/shadowsocks/shadowsocks-windows">windows</a></p>
<h2 id="é‡åˆ°è¿‡çš„é—®é¢˜"><a href="#é‡åˆ°è¿‡çš„é—®é¢˜" class="headerlink" title="é‡åˆ°è¿‡çš„é—®é¢˜"></a>é‡åˆ°è¿‡çš„é—®é¢˜</h2><p>æ›¾è¯•è¿‡ç”¨å¾—å¥½å¥½çš„çªç„¶å°±æŒ‚äº†ï¼ŒæœåŠ¡å™¨èƒ½è¿ä¸Šä¹Ÿèƒ½Pingé€šï¼Œæ¢äº†ä¸ªç«¯å£å·é‡å¯å°±è¡Œäº†ã€‚ç«¯å£å†²çªå—ï¼Ÿ</p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>google</tag>
        <tag>vps</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ä¸ªDVBCè‡ªåŠ¨æœå°çš„ç–‘é—®</title>
    <url>/2018/12/18/dvbc-auto-tuning/</url>
    <content><![CDATA[<p>DVBCæœå°è¿‡ç¨‹ä¸­ï¼Œé¢‘ç‚¹ä¹±åºã€‚</p>
<span id="more"></span>

<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>Mantisæäº¤äº†ä¸€æ¡é—®é¢˜ï¼šDVBCæœå°è¿‡ç¨‹ä¸­ï¼Œè¿›åº¦æ¡åœ¨å‰è¿›ï¼Œé¢‘ç‚¹ä¹Ÿåœ¨è·³åŠ¨ï¼Œä½†æ˜¯ä¹±åºï¼Œå¹¶éä»ä½åˆ°é«˜ã€‚<br>å®é™…æƒ…å†µæ˜¯ï¼šç æµæœºæ’­æ”¾ã€Š610.750 Network ID 1536.tsã€‹ç æµï¼Œé¢‘ç‚¹è®¾å®šåˆ°482MHzï¼ŒDVBCæœå°è¿‡ç¨‹ä¸­ï¼Œé¢‘ç‡ä»ä½åˆ°é«˜æœï¼Œä½†æ˜¯æœåˆ°482MHzçš„æ—¶å€™ï¼Œé¢‘ç‡å°±ä¹±äº†ã€‚  </p>
<h3 id="ææ–™"><a href="#ææ–™" class="headerlink" title="ææ–™"></a>ææ–™</h3><p>æˆªå–éƒ¨åˆ†logä¿¡æ¯ï¼š  </p>
<blockquote>
<p>[virtual void CTableScanner::xWorkerThread() 139] CH_SCAN_STATE_BEGIN_FREQ start<br>[virtual void CTableScanner::xWorkerThread() 145] CH_SCAN_STATE_SCANNING start<br>xStageBeginFreq:161:: m_isDeleteAll = 1, m_curFreq = 474000000<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 296] isScanMode = 1, m_curFreq = 474000000, m_curBandwidth = 8000000, tunerId = 0, m_feType = 2, m_modulation = 11,  m_symbolrate = 6900000<br>[bool FrontendLib_SetTuner(UINT32, UINT32, UINT8, RT_FRONTEND_TYPE, RT_MODULATION, RT_SPECTRAL_INVERSION, bool, UINT32, SatelliteInfo *) 156] isScanMode = 1, frequency = 474000000, bandwidth = 8000000, tunerId = 0, feType = 2, modulation = 11,  symbolRate = 6900000<br>[FrontendLib_SetTuner 174] frequency=474000000 bandwidth=8000000 tvSystem=19<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 298] ret = 0<br>[virtual void CTableScanner::xWorkerThread() 166] CH_SCAN_STATE_SCANNING end<br>[virtual void CTableScanner::xWorkerThread() 171] CH_SCAN_STATE_END_FREQ begin<br>[xUpdateChannelMgr:197] freq=474000000, bSave=1, bUpdateCurChIndex=0, bKeepChannel=0, curFrequency=0, modulation=11<br>xUpdateChannelMgr 211 RemoveChannel 474000000<br>[xRemoveChannel:2220]<br>[bool CDvbTableScanner::xGetNitFreqList(bool) 139] errCode = 1900551, freqCount = 0<br>[virtual void CTableScanner::xWorkerThread() 139] CH_SCAN_STATE_BEGIN_FREQ start<br>[virtual void CTableScanner::xWorkerThread() 145] CH_SCAN_STATE_SCANNING start<br>xStageBeginFreq:161:: m_isDeleteAll = 1, m_curFreq = 482000000<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 296] isScanMode = 1, m_curFreq = 482000000, m_curBandwidth = 8000000, tunerId = 0, m_feType = 2, m_modulation = 11,  m_symbolrate = 6900000<br>[bool FrontendLib_SetTuner(UINT32, UINT32, UINT8, RT_FRONTEND_TYPE, RT_MODULATION, RT_SPECTRAL_INVERSION, bool, UINT32, SatelliteInfo *) 156] isScanMode = 1, frequency = 482000000, bandwidth = 8000000, tunerId = 0, feType = 2, modulation = 11,  symbolRate = 6900000<br>[FrontendLib_SetTuner 174] frequency=482000000 bandwidth=8000000 tvSystem=19<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 298] ret = 1<br>virtual void CDtvFreqDetector::xStageBeginFreq()_304 signal LOCKED !!!!!!!!<br>[virtual void CDtvFreqDetector::xStageCheckFrontend() 771] m_curFreq = 482000000, m_curBandwidth = 8000000 m_modulation = 11<br>[virtual void CTableScanner::xWorkerThread() 166] CH_SCAN_STATE_SCANNING end<br>[virtual void CTableScanner::xWorkerThread() 171] CH_SCAN_STATE_END_FREQ begin<br>[xUpdateChannelMgr:197] freq=482000000, bSave=1, bUpdateCurChIndex=0, bKeepChannel=0, curFrequency=0, modulation=11<br>xUpdateChannelMgr 211 RemoveChannel 482000000<br>[xRemoveChannel:2220]<br><strong>[bool CDvbTableScanner::xGetNitFreqList(bool) 139] errCode = 0, freqCount = 39</strong><br><strong>xGetNitFreqList..freq:482750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:458750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:124000000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:466750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:506750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:578750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:386750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:498750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:626750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:650750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:148000000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:714750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:698750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:706750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:762750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:826750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:858750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:642750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:778750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:810750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:834750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:746750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:298750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:602750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:610750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:850750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:140000000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:738750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:530750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:818750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:690750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:164000000, symbolRate:6900000, modulation:9, polarization:0</strong><br><strong>xGetNitFreqList..freq:842750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:666750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:682750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:156000000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:554750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:490750000, symbolRate:6900000, modulation:11, polarization:0</strong><br><strong>xGetNitFreqList..freq:132000000, symbolRate:6900000, modulation:11, polarization:0</strong><br>[Mf_ScanInit 1000] modeEx=0, param=-1, scanMode=7 m_deleteAll=1<br>[xRemoveChannel:2288] m_chVector.m_size=39<br>ScanInitâ€¦.type 2 antennaIndex 0xffffffff typeEx 0 time 304186343<br>[virtual void CTableScanner::xWorkerThread() 139] CH_SCAN_STATE_BEGIN_FREQ start<br>[virtual void CTableScanner::xWorkerThread() 145] CH_SCAN_STATE_SCANNING start<br>xStageBeginFreq:161:: m_isDeleteAll = 1, m_curFreq = 482750000<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 296] isScanMode = 1, m_curFreq = 482750000, m_curBandwidth = 8000000, tunerId = 0, m_feType = 2, m_modulation = 11,  m_symbolrate = 6900000<br>[bool FrontendLib_SetTuner(UINT32, UINT32, UINT8, RT_FRONTEND_TYPE, RT_MODULATION, RT_SPECTRAL_INVERSION, bool, UINT32, SatelliteInfo *) 156] isScanMode = 1, frequency = 482750000, bandwidth = 8000000, tunerId = 0, feType = 2, modulation = 11,  symbolRate = 6900000<br>[FrontendLib_SetTuner 174] frequency=482750000 bandwidth=8000000 tvSystem=19<br>[virtual void CDtvFreqDetector::xStageBeginFreq() 298] ret = 1<br>virtual void CDtvFreqDetector::xStageBeginFreq()_304 signal LOCKED !!!!!!!!<br>[virtual void CDtvFreqDetector::xStageCheckFrontend() 771] m_curFreq = 482750000, m_curBandwidth = 8000000 m_modulation = 11<br>[virtual void CTableScanner::xWorkerThread() 166] CH_SCAN_STATE_SCANNING end<br>[virtual void CTableScanner::xWorkerThread() 171] CH_SCAN_STATE_END_FREQ begin<br>[xUpdateChannelMgr:197] freq=482750000, bSave=1, bUpdateCurChIndex=0, bKeepChannel=0, curFrequency=0, modulation=11<br>bool CDvbSiMgr::xUpdateChannelMgr(__UINT32, INT16, bool, bool, bool, __UINT32, RT_MODULATION) 218 count 6<br>AddChannel:LCN=1,chName=Nederland 1 HD,frequency=482750000<br>AddChannel:LCN=2,chName=Nederland 2 HD,frequency=482750000<br>AddChannel:LCN=3,chName=RTL Lounge,frequency=482750000<br>AddChannel:LCN=4,chName=TVE,frequency=482750000<br>AddChannel:LCN=5,chName=HZN Barker 1,frequency=482750000<br>AddChannel:LCN=6,chName=HZN Barker 2,frequency=482750000<br>bool CDvbSiMgr::xUpdateChannelMgr(__UINT32, INT16, bool, bool, bool, __UINT32, RT_MODULATION) use time 0  </p>
</blockquote>
<p>ä½¿ç”¨ç æµåˆ†æå·¥å…·æŸ¥çœ‹ç æµï¼š<br><img src="https://i.loli.net/2018/12/18/5c18b1955d467.png" alt="NIT">  </p>
<p>ä»£ç ç‰‡æ®µ[RTD2831]ï¼š  </p>
<pre><code class="cpp">bool CDvbTableScanner::xGetNitFreqList(bool bDelete)
{
    int freqCount=0;
    SI_DELIVERY_PARAM *pFreqList = NULL;
    ErrCode errCode;
    int startindex=0;
    bool bDelFollow=false;
    bool bAddCurrent=false;
    bool bIncludeExistTP=false;
    RT_FRONTEND_TYPE feType = m_pFreqScanDetector-&gt;Mf_GetFrontendType();
    SI *siHandle = (SI*)((IDtvMedia*)m_pTvMedia)-&gt;GetDtvFlow()-&gt;GetSiHandle();
    if(feType == RT_FRONTEND_DVB_CABLE &amp;&amp; !m_bRemoveAll)
    {
        bIncludeExistTP=true;
    }

    errCode = SI_GetFreqList(siHandle, &amp;freqCount, &amp;pFreqList, bIncludeExistTP);
    ALOGD("[%s %d] errCode = %lu, freqCount = %d\n", __func__, __LINE__, errCode, freqCount);

    if (errCode != SI_ERR_OK || freqCount==0 || pFreqList == NULL)
    {
        return FALSE; //å¦‚æœfreqCountä¸ºé›¶ï¼Œå°±è¿”å›äº†ã€‚
    }

    if(feType == RT_FRONTEND_DVB_SATELLITE &amp;&amp; m_HomeTp.count!=0)
    {
        bDelete=true;
        if(m_HomeTp.onid!=0)
        {
            bDelete=false;
            for(int i=0;i&lt;freqCount;i++)
            {
                if(pFreqList[i].onid==m_HomeTp.onid)
                {
                    bDelete=true;
                    break;
                }
            }
        }
    }

    if(feType == RT_FRONTEND_DVB_SATELLITE &amp;&amp; bDelete &amp;&amp; m_pFreqList!=NULL)
    {
        bDelFollow=true;
        bDelete=false;
    }

    if(bDelete || m_pFreqList==NULL)
    {
        xFreeTable();
        
        m_pFreqList = (RT_PHY_CHANNEL *)malloc(sizeof(RT_PHY_CHANNEL) * (freqCount+1));
        if(m_pFreqList == 0)
            return false;
        m_freqListSize = freqCount+1;
        memset(m_pFreqList, 0, sizeof(RT_PHY_CHANNEL)* (m_freqListSize));
        m_isMallocedList=true;
        
        if(feType == RT_FRONTEND_DVB_CABLE)
        {
            bAddCurrent=true;
        }
    }
    else
    {
        RT_PHY_CHANNEL *pFreqList;
        int sizeTmp=m_freqListSize;
        pFreqList = (RT_PHY_CHANNEL *)malloc(sizeof(RT_PHY_CHANNEL)* (sizeTmp+freqCount));
        if(pFreqList==NULL)
        {
            return false;
        }
        memcpy(pFreqList, m_pFreqList, sizeof(RT_PHY_CHANNEL)* (sizeTmp));
        xFreeTable();
        m_pFreqList=pFreqList;
        if(bDelFollow)
            startindex=m_curFreqIndex;
        else
            startindex=sizeTmp;
        m_freqListSize=sizeTmp+freqCount;
        m_isMallocedList=true;
    }

    for (int i = 0; i &lt; freqCount &amp;&amp; startindex&lt;m_freqListSize; i++)
    {
        m_pFreqList[startindex].channelNum = startindex;

        m_pFreqList[startindex].frequency = pFreqList[i].frequency;

        switch (pFreqList[startindex].modulation)    // Cable delivery system descriptor, defined in en300468 DVB-SI spec
        {
            case SI_DVB_16_QAM:      // 16QAM,
                m_pFreqList[startindex].modulation = RT_MOD_QAM16;
                break;
            case SI_DVB_32_QAM:      // 32QAM,
                m_pFreqList[startindex].modulation = RT_MOD_QAM32;
                break;
            case SI_DVB_64_QAM:      // 64QAM,
                m_pFreqList[startindex].modulation = RT_MOD_QAM64;
                break;
            case SI_DVB_128_QAM:      // 128QAM,
                m_pFreqList[startindex].modulation = RT_MOD_QAM128;
                break;
                        default:
            case SI_DVB_256_QAM:      // 256QAM,
                m_pFreqList[startindex].modulation = RT_MOD_QAM256;
                break;
        }
        m_pFreqList[startindex].symbolRate = pFreqList[i].symbol_rate;


        if(feType == RT_FRONTEND_DVB_SATELLITE)
        {
            m_pFreqList[startindex].modulation = pFreqList[i].modulation_system == 0 ? RT_MOD_DVB_S : RT_MOD_DVB_S2;
            m_pFreqList[startindex].symbolRate = pFreqList[i].symbol_rate;
        }


        m_pFreqList[startindex].bandwidth = 8000000;
        m_pFreqList[startindex].polarization= pFreqList[i].polarization%2;
        if(bDelete || iSNewTP(m_pFreqList,startindex,&amp;m_pFreqList[startindex]))
        {
            ALOGD("%s..freq:%d, symbolRate:%d, modulation:%d, polarization:%d\n",__FUNCTION__,m_pFreqList[startindex].frequency,m_pFreqList[startindex].symbolRate,
            m_pFreqList[startindex].modulation,m_pFreqList[startindex].polarization);
                startindex++;
        }

        if(bAddCurrent &amp;&amp; startindex&lt;m_freqListSize)
        {
            if(m_curFreq/1000000 == m_pFreqList[startindex].frequency/1000000)
            {
                bAddCurrent=false;
            }
        }
    }

    if(bAddCurrent)
    {
        m_pFreqList[startindex].frequency = m_curFreq;
        m_pFreqList[startindex].bandwidth = m_curBandwidth;
        m_pFreqList[startindex].channelNum = m_curChNum;
        m_pFreqList[startindex].modulation = m_curModulation;
        m_pFreqList[startindex].symbolRate = m_curSymbolRate;
        m_pFreqList[startindex].polarization = m_curPolarization;
        startindex++;
    }

    m_freqListSize=startindex;
    return true;
}

bool CDvbTableScanner::iSNewTP(RT_PHY_CHANNEL *src, int size, RT_PHY_CHANNEL *pTp)
{
    if(pTp-&gt;frequency == 0)
        return FALSE;
    for(int i=0;i&lt;size;i++)
    {
        if(abs((int)src[i].frequency/100000 - (int)pTp-&gt;frequency/100000) &lt; 3)
        {
            if(src[i].symbolRate != pTp-&gt;symbolRate)
                continue;

            if(src[i].polarization != pTp-&gt;polarization)
                continue;

            if(src[i].modulation != pTp-&gt;modulation)
                continue;

            return false;
        }
    }
    return true;
}
</code></pre>
<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>å¯çŸ¥æ˜¯NITçš„åŸå› ï¼Œè‡ªåŠ¨æœå°çš„æ—¶å€™ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®šé¢‘ç‚¹ï¼‰ä¼šä»é¢‘ç‚¹ç”±ä½å¾€é«˜æœå°ï¼Œæœåˆ°å°åï¼Œè§£æNITæ—¶å‘ç°æœ‰FreqListï¼Œå°±å»FreqListé‡Œé¢çš„é¢‘ç‚¹æœã€‚  </p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li>NIT(Network Information Table ç½‘ç»œä¿¡æ¯è¡¨)ã€‚æ­¤DVBåˆ—è¡¨åŒ…å«äº†æœ‰å…³ç½‘ç»œçš„èŒƒå›´ã€è½¬æ¢å™¨ç­‰ä¿¡æ¯ã€‚å®ƒæ€»æ˜¯ä½äºPID 0x0010çš„ä½ç½®ã€‚DVBå®šä¹‰äº†ä¸¤ç§ç±»å‹çš„NITï¼ŒNIT Actualä¸NIT Otherã€‚NIT Actualæ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³æ­£åœ¨è¢«è®¿é—®çš„ç½‘ç»œçš„ç‰©ç†å‚æ•°çš„ä¸€ä¸ªå‘½ä»¤åˆ—è¡¨ã€‚NIT OtheråŒ…å«äº†æœ‰å…³å…¶ä»–ç½‘ç»œçš„ç‰©ç†å‚æ•°ï¼ŒNIT Otheræ˜¯å¯é€‰é¡¹ã€‚  </li>
<li>NITæœç´¢å°±æ˜¯ä»NITè¡¨å¼€å§‹çš„æœç´¢ï¼ŒNITè¡¨ä¸­çš„ç¬¬äºŒä¸ªå¾ªç¯ï¼Œç»™å‡ºäº†å½“å‰ç½‘ç»œä¸­çš„é¢‘ç‚¹ï¼Œè°ƒåˆ¶æ–¹å¼ï¼Œç¬¦å·ç‡ã€‚æœç´¢NITè¡¨çŸ¥é“è¿™äº›æ¶ˆæ¯ä»¥åï¼Œå°†å¾—åˆ°çš„é¢‘ç‚¹åšä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åæŒ¨ä¸ªé”é¢‘ï¼Œåœ¨æ¯ä¸ªé¢‘ç‚¹ä¸‹æœç´¢PAT,PMTï¼Œç„¶åå¾—åˆ°èŠ‚ç›®ï¼Œæœç´¢å®Œæ‰€æœ‰çš„é¢‘ç‚¹ä»¥åï¼Œå½“å‰ç½‘ç»œæ‰€æœ‰çš„èŠ‚ç›®å°±å¾—åˆ°äº†ã€‚  </li>
<li><a href="https://blog.csdn.net/kkdestiny/article/details/12994675">ã€PSI/SIå­¦ä¹ ç³»åˆ—ã€‘2.PSI/SIæ·±å…¥å­¦ä¹ 3â€”â€”SIä¿¡æ¯è§£æ1(NIT,BAT)</a>  </li>
<li><a href="https://blog.csdn.net/rongdeguoqian/article/details/40372097">DVB-SIç†è§£å…¥é—¨</a>  </li>
<li><a href="https://www.xjishu.com/zhuanli/62/200810067838.html">ç°æœ‰æ•°å­—ç”µè§†çš„æœå°æ–¹å¼åŒ…å«ä¸¤å¤§ç±»å…¨é¢‘ç‚¹æœå°å’Œåˆ©ç”¨NIT (Network Information Table,ç½‘ç»œä¿¡æ¯è¡¨)å¿«é€Ÿæœå°ã€‚å‰è€…çš„åšæ³•ä¸æ¨¡æ‹Ÿç”µè§†ç›¸ä¼¼ï¼Œæ ¹æ®é¢‘å‹æ›²çº¿çš„å˜åŒ–å’Œè§£ç å™¨ç›¸å…³æ•°æ®å½“å‰çš„çŠ¶æ€æ”¹å˜æ­¥è¿›ä»ä½é¢‘åˆ°é«˜é¢‘é€æ­¥æ‰«æï¼Œè¿™ç§è¿‡ç¨‹ä¸€èˆ¬ä¼šè¶…è¿‡20åˆ†é’Ÿï¼Œå¹¶ä¸”ç”±äºæ— æ³•åˆ©ç”¨NITè¡¨ï¼Œæ²¡æœ‰èŠ‚ç›®è‡ªåŠ¨æ›´æ–°çš„åŠŸèƒ½ï¼›è€Œåè€…å…ˆæ‰¾åˆ°NITå¹¶ä»NITä¸­æå–Frequency List Descriptor(é¢‘ç‡åˆ—è¡¨æè¿°å­)ï¼Œåˆ©ç”¨é¢‘ç‡åˆ—è¡¨æè¿°å­æ‰€å¸¦çš„é¢‘ç‡ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½åˆ°æ¯ä¸€ä¸ªæœ‰ä¿¡ å·çš„é¢‘ç‡ç‚¹ï¼Œä»è€Œå®Œæˆå¿«é€Ÿæœå°</a></li>
</ul>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>realtek</tag>
        <tag>dvb</tag>
        <tag>dvb-c</tag>
        <tag>dtv</tag>
        <tag>si</tag>
        <tag>scan</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸‹æ­å»ºFTPæœåŠ¡å™¨</title>
    <url>/2018/01/31/ftp-server/</url>
    <content><![CDATA[<p>å‰å‰ååé…äº†å¥½å‡ æ¬¡FTP Serverï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°å¼€å§‹çš„æ ·å­å„ç§ç™¾åº¦è°·æ­Œã€‚å…ˆè®°ä¸€æ¬¡ç•™ç€ä¸‹æ¬¡ç”¨ã€‚</p>
<span id="more"></span>

<p>ç¯å¢ƒï¼šUbuntu 16.04 i386</p>
<h3 id="å®‰è£…è½¯ä»¶å’Œæ·»åŠ ç”¨æˆ·"><a href="#å®‰è£…è½¯ä»¶å’Œæ·»åŠ ç”¨æˆ·" class="headerlink" title="å®‰è£…è½¯ä»¶å’Œæ·»åŠ ç”¨æˆ·"></a>å®‰è£…è½¯ä»¶å’Œæ·»åŠ ç”¨æˆ·</h3><ol>
<li>sudo apt-get install vsftpd //å®‰è£…vsftpd</li>
<li>vsftpd -version //æŸ¥çœ‹vsftpdç‰ˆæœ¬</li>
<li>sudo mkdir /home/ftp_root -p //åˆ›å»ºFTPæœåŠ¡å™¨å·¥ä½œç›®å½•ftp_root //æ³¨æ„ç›®å½•æƒé™</li>
<li>sudo useradd -d /home/ftp_root -s /bin/bash xxx //æ–°å»ºFTPç”¨æˆ·xxx</li>
<li>sudo passwd xxx //ä¸ºæ–°å»ºçš„FTPç”¨æˆ·xxxè®¾ç½®å¯†ç  //å¯ç”¨cat /etc/passwdå¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿç”¨æˆ·</li>
</ol>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ol>
<li>vim /etc/vsftpd.conf  </li>
</ol>
<blockquote>
<p>listen=YES</p>
<p>listen_ipv6=NO</p>
<p>anonymous_enable=YES<br>anon_root=/home/ftp_root/ftp_anonymous</p>
<p>local_enable=YES</p>
<p>write_enable=YES</p>
<p>local_root=/home/ftp_root</p>
<p>local_umask=022</p>
<p>dirmessage_enable=YES</p>
<p>use_localtime=YES</p>
<p>xferlog_enable=YES</p>
<p>connect_from_port_20=YES</p>
<p>xferlog_file=/var/log/vsftpd.log</p>
<p>ftpd_banner=Welcome to blah FTP service.</p>
<p>chroot_local_user=YES<br>chroot_list_enable=YES</p>
<p>chroot_list_file=/etc/vsftpd.chroot_list</p>
<p>secure_chroot_dir=/var/run/vsftpd/empty</p>
<p>#pam_service_name=vsftpd<br>pam_service_name=ftp</p>
<p>rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem<br>rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key<br>ssl_enable=NO</p>
<p>userlist_enable=YES<br>userlist_deny=NO<br>userlist_file=/etc/vsftpd.user_list  </p>
</blockquote>
<ol start="2">
<li>vim /etc/vsftpd.user_list</li>
<li>vim /etc/vsftpd.chroot_list</li>
<li>å…¶ä»–</li>
</ol>
<ul>
<li>é˜²ç«å¢™ï¼šç›´æ¥å…³é—­æˆ–è€…å¼€æ”¾ç«¯å£</li>
<li>SeLinuxï¼šå…³é—­</li>
<li>æ·»åŠ å¼€æœºè‡ªå¯åŠ¨</li>
</ul>
<h3 id="å¯åŠ¨vsftpdæœåŠ¡"><a href="#å¯åŠ¨vsftpdæœåŠ¡" class="headerlink" title="å¯åŠ¨vsftpdæœåŠ¡"></a>å¯åŠ¨vsftpdæœåŠ¡</h3><p>sudo service vsftpd start</p>
<h3 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h3><p>æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚sshã€æµè§ˆå™¨ã€Windowsèµ„æºç®¡ç†å™¨æ·»åŠ FTPç«™ç‚¹ã€FTPå®¢æˆ·ç«¯å·¥å…·ç­‰éƒ½å¯ä»¥ã€‚<br>æˆ‘åœ¨Windowsä¸‹ç”¨å®¢æˆ·ç«¯å·¥å…·FileZillaï¼Œå¥½å¤„æ˜¯æ–‡ä»¶å…±äº«æ–¹ä¾¿çš„åŒæ—¶æ˜¯èƒ½ç›´è§‚çœ‹åˆ°logä¿¡æ¯ã€‚</p>
<h4 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h4><ol>
<li>å¯åŠ¨vsftpdæœåŠ¡åæŸ¥çœ‹çŠ¶æ€ï¼Œå‘ç°å¯åŠ¨å¤±è´¥</li>
</ol>
<blockquote>
<p>Active: failed (Result: exit-code)<br>(code=exited, status=2)  </p>
</blockquote>
<p>åŸå› ï¼šä¸æ˜<br>è§£å†³æ–¹æ³•ï¼šå°† vsftpd.conf é‡Œé¢çš„ listen ä» NO æ”¹æˆ YES  </p>
<ol start="2">
<li>331å’Œ530é”™è¯¯ï¼Œä¸”åŒ¿åç”¨æˆ·èƒ½ç™»é™†ï¼Œä½†æ˜¯ç”¨æˆ·è´¦æˆ·ä¸èƒ½ç™»é™†</li>
</ol>
<blockquote>
<p>331 Please specify the password.<br>530 Logiin incorrect.  </p>
</blockquote>
<p>åŸå› ï¼šâ€œBy default vsFTPd uses the file /etc/pam.d/vsftpd. This file by default requires FTP users to have a shell listed in /etc/shells and requires them not to be listed in /etc/ftpusers. If you check those 2 things your probably find what the problem is.â€<br>è§£å†³æ–¹æ³•ï¼šå°† vsftpd.conf é‡Œé¢çš„ pam_service_name ä» vsftpd æ”¹æˆ ftp  </p>
<ol start="3">
<li>500é”™è¯¯</li>
</ol>
<blockquote>
<p>500 OOPS: cannot change directory  </p>
</blockquote>
<p>åŸå› ï¼šæœªæ˜ï¼Œæƒé™é—®é¢˜ï¼Ÿæ™®é€šç”¨æˆ·ä¸èƒ½è¿›å…¥åˆ° /root ç›®å½•ï¼Ÿ<br>è§£å†³æ–¹æ³•ï¼šä¿®æ”¹ /etc/passwd ï¼ŒæŠŠFTPå·¥ä½œç›®å½•ä» /root/ftp_root æ”¹ä¸º /home/ftp_root  </p>
<ol start="4">
<li>rootç”¨æˆ·èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œä½†æ˜¯xxxç”¨æˆ·ä¸è¡Œ</li>
</ol>
<blockquote>
<p>227 Entering Passive Mode<br>553 Could not create file  </p>
</blockquote>
<p>åŸå› ï¼šæœªæ˜<br>è§£å†³æ–¹æ³•ï¼šæ— è§£</p>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><ol>
<li><a href="https://blog.csdn.net/danson_yang/article/details/65629948">Linux useradd ä¸ adduserçš„åŒºåˆ«ï¼Œ /sbin/nologin ä¸ /bin/bash</a></li>
<li>ä¸»åŠ¨æ¨¡å¼ä¸è¢«åŠ¨æ¨¡å¼</li>
</ol>
<ul>
<li><a href="https://www.cnblogs.com/ShaYeBlog/p/5897303.html">å‚è€ƒé“¾æ¥1</a></li>
<li><a href="https://www.360doc.com/content/14/1225/15/15077656_435676206.shtml">å‚è€ƒé“¾æ¥2</a></li>
<li><a href="https://blog.csdn.net/huanggang028/article/details/41248663">å‚è€ƒé“¾æ¥3</a></li>
<li><a href="https://blog.csdn.net/u010154760/article/details/45458219">å‚è€ƒé“¾æ¥4</a></li>
<li><a href="https://www.cnblogs.com/xiaohh/p/4789813.html">å‚è€ƒé“¾æ¥5</a></li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ftp</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¢å¤–è§£ç ä¹‹Toshibaåè®®ç®€å•è®°å½•</title>
    <url>/2018/08/22/ir-protocol-toshiba/</url>
    <content><![CDATA[<p>ä¹‹å‰ç»™åˆ›ç»´åšçº¢å¤–ç™½å¹³è¡¡è°ƒè¯•çš„å‡ ç‚¹è®°å½•ã€‚  </p>
<span id="more"></span>

<h3 id="éœ€æ±‚èƒŒæ™¯"><a href="#éœ€æ±‚èƒŒæ™¯" class="headerlink" title="éœ€æ±‚èƒŒæ™¯"></a>éœ€æ±‚èƒŒæ™¯</h3><p>å®¢æˆ·å‡ºå¤§è´§å‰éœ€è¦åšç™½å¹³è¡¡è°ƒè¯•ï¼Œä¸Šä¸€å¹´è¿˜æ˜¯ç”¨ä¸²å£æ¥è°ƒè¯•ï¼Œä»Šå¹´å…¨çƒå·¥å‚éƒ½ç”¨çº¢å¤–æ¥è°ƒè¯•äº†ï¼Œæƒ³ä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¦æ”¹ç”¨çº¢å¤–æ¥ä»£æ›¿ä¸²å£ï¼Œæ„Ÿè§‰ç”¨ä¸²å£æ›´å¯é ä¸€ç‚¹ã€‚ä»¥å‰çš„åšæ³•æ˜¯ç›´æ¥ç”¨æµ‹è¯•ä¸»æœºæ¥åˆ°æˆ‘çš„TVå¹³å°ï¼Œæµ‹è¯•ä¸»æœºé€šè¿‡ä¸²å£ç›´æ¥ç»™TVä¸‹å€¼ï¼Œç°åœ¨çš„åšæ³•æ˜¯æµ‹è¯•ä¸»æœºé€šè¿‡ä¸²å£å‘ç»™ä¸€ä¸ªçº¢å¤–å‘å°„å™¨ï¼ˆçœ‹äº†ä¸€ä¸‹æ˜¯ç”¨STM32åšçš„ï¼Œä¸åŒçš„çº¢å¤–åè®®ä½¿ç”¨çš„å‘å°„å™¨è¿˜ä¸ä¸€æ ·ï¼‰ï¼Œå‘å°„å™¨å†æŠŠå€¼é€šè¿‡çº¢å¤–çš„æ–¹å¼å‘ç»™TVã€‚  </p>
<p>ä¸²å£è°ƒè¯•å›¾ä¾‹:<br><img src="https://i.loli.net/2018/08/22/5b7cde4b55468.jpg" alt="ä¸²å£è°ƒè¯•å›¾ä¾‹"><br>çº¢å¤–è°ƒè¯•å›¾ä¾‹:<br><img src="https://i.loli.net/2018/08/22/5b7cde6b27243.jpg" alt="çº¢å¤–è°ƒè¯•å›¾ä¾‹"></p>
<h3 id="è®¾è®¡è§„èŒƒ"><a href="#è®¾è®¡è§„èŒƒ" class="headerlink" title="è®¾è®¡è§„èŒƒ"></a>è®¾è®¡è§„èŒƒ</h3><p><img src="https://i.loli.net/2018/08/22/5b7ce03d4c1d7.jpg" alt="çº¢å¤–ç™½å¹³è¡¡è®¾è®¡è§„èŒƒ"></p>
<h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>ä¸œèŠåè®®é™¤äº†å¼•å¯¼ç å’Œç»“æŸä½ï¼Œä¸€å¸§æ•°æ®åˆšå¥½æ˜¯4ä¸ªå­—èŠ‚ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªå­—èŠ‚å®¢æˆ·ç å’Œä¸¤ä¸ªå­—èŠ‚çš„é”®å€¼ã€‚<br><img src="https://i.loli.net/2018/08/22/5b7cf86885007.jpg" alt="frame"><br>è€Œç›®å‰ä»£ç ä¸­å¯¹äºä¸€å¸§æ•°æ®çš„ç”¨æ³•æ˜¯ï¼Œå®¢æˆ·ç 2ä¸ªå­—èŠ‚æœ‰åˆ©ç”¨åˆ°ï¼Œä½†æ˜¯é”®å€¼åªç”¨äº†ä¸€ä¸ªå­—èŠ‚ï¼Œåç çš„é‚£ä¸ªå­—èŠ‚æ²¡æœ‰åˆ©ç”¨ã€‚åŸå‚çš„è§£é‡Šæ˜¯åç éƒ¨åˆ†åªæ˜¯ç”¨äºéªŒè¯ï¼Œç›®å‰è§„æ ¼æ²¡æœ‰åˆ©ç”¨è¿™éƒ¨åˆ†æ•°æ®ï¼Œä¸€ç›´ä¹Ÿä¸å½±å“é¥æ§å™¨ä½¿ç”¨ã€‚<br>æˆ‘ä»¬åªè¦æŠŠè¿™4ä¸ªå­—èŠ‚çš„å†…å®¹éƒ½è§£å‡ºæ¥ï¼Œå°±å¯ä»¥å®ç°å®¢æˆ·åŠŸèƒ½</p>
<h3 id="è§£ç ç®—æ³•"><a href="#è§£ç ç®—æ³•" class="headerlink" title="è§£ç ç®—æ³•"></a>è§£ç ç®—æ³•</h3><p>å¯¹äºâ€œ{0x0e0e, 0x11, UI_EVENT_MENU}â€è¿™ä¸ªæŒ‰é”®ï¼Œå®¢æˆ·ç ç­‰äº0x0e0eï¼ŒKeycodeç­‰äº0x11eeã€‚æŒ‰ä¸‹æ­¤æŒ‰é”®æ—¶å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ‰“å°ä¿¡æ¯ï¼š  </p>
<blockquote>
<p> [IR]IR_ISR    IR_len:33    reg0C:0x000010ef    reg54:0x0000e0e1<br> [IR]0    IR:00008877    tmpData:00000000    IR_Custom:00007070<br> [IR]1    IR:443b8000    tmp:000011ee    tmp_Custom:00000e0e<br> [IR]1st reg_single_sts received!!<br> [IR]Single Start Address  Address_  Cmd: 0xe,0xe, 0x11,0xee!!<br> [IR]IR_ISR    IR_len:2    reg0C:0x00000003    reg54:0x00000000<br> [IR]0    IR:00000001    tmpData:00000000    IR_Custom:00000000<br> [IR]1    IR:00008000    tmp:00000080    tmp_Custom:00000000<br> [IR]repeat key received!!<br>_APP_GUIOBJ_PopMsg_OnRelease is called<br> [IR]Single_end received!!  </p>
</blockquote>
<p>è€Œä»£ç ä¸­è¡¨ç°å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sisir_toshiba_ParseData</span><span class="params">(UINT8* mmiobase, IR_IOC_IOData* dataBuf)</span></span></span><br><span class="line"><span class="function"></span>{	</span><br><span class="line">	<span class="keyword">volatile</span> UINT32 IR_Data, IR_Custom, IR_bit_len, tmp_data, tmp_Custom, i;</span><br><span class="line">	<span class="keyword">volatile</span> UINT16 tmp_1 = <span class="number">0xffff</span>;</span><br><span class="line">	<span class="keyword">volatile</span> UINT16 tmp_2 = <span class="number">0xffff</span>;</span><br><span class="line">	datBuf = dataBuf;</span><br><span class="line">	IR_Data = irdatas.Value &amp; <span class="number">0xffff</span>;</span><br><span class="line"></span><br><span class="line">	IR_Custom = GetMMIO_DWORD(mmiobase, <span class="number">0x54</span>);	<span class="comment">//read from IR decoder recevied custom code</span></span><br><span class="line"></span><br><span class="line">	IR_Custom = IR_Custom &amp; <span class="number">0x1ffff</span>;</span><br><span class="line"></span><br><span class="line">	IR_bit_len = (GetMMIO_DWORD(mmiobase, <span class="number">0x50</span>) &amp; <span class="number">0x3f00</span>) &gt;&gt; <span class="number">8</span>; <span class="comment">//read from IR decoder recevied bit length</span></span><br><span class="line">	DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]IR_ISR\tIR_len:%d\treg0C:0x%08x\treg54:0x%08x\n"</span>, IR_bit_len, IR_Data, IR_Custom);</span><br><span class="line">	IR_Data = IR_Data &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> ( (IR_Custom &amp; <span class="number">0x1</span> ) == <span class="number">1</span> )</span><br><span class="line">	{</span><br><span class="line">		IR_Data = IR_Data | <span class="number">0x8000</span>;</span><br><span class="line">	}</span><br><span class="line">	IR_Custom = IR_Custom &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	tmp_data = <span class="number">0</span>;</span><br><span class="line">	tmp_Custom = <span class="number">0</span>;</span><br><span class="line">	DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]0\tIR:%08x\ttmpData:%08x\tIR_Custom:%08x\n"</span>, IR_Data, tmp_data, IR_Custom);</span><br><span class="line"><span class="comment">//	for ( i=0;i&lt;7;i++ )</span></span><br><span class="line">	<span class="keyword">for</span> ( i=<span class="number">0</span>;i&lt;<span class="number">15</span>;i++ ) <span class="comment">//fenghl</span></span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">if</span> ( IR_Data &amp; <span class="number">0x8000</span> )</span><br><span class="line">		{</span><br><span class="line">			tmp_data = tmp_data | <span class="number">0x8000</span>;</span><br><span class="line">		}</span><br><span class="line">		tmp_data = tmp_data &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		IR_Data = IR_Data &lt;&lt; <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> ( IR_Data &amp; <span class="number">0x8000</span> )</span><br><span class="line">	{</span><br><span class="line">		tmp_data = tmp_data | <span class="number">0x8000</span>;</span><br><span class="line">	}</span><br><span class="line"><span class="comment">/*****************************/</span></span><br><span class="line">	tmp_1 = tmp_data &gt;&gt; <span class="number">8</span>;</span><br><span class="line">	tmp_2 = tmp_data &lt;&lt; <span class="number">8</span>;</span><br><span class="line">	tmp_data = tmp_1 | tmp_2;</span><br><span class="line">	tmp_data = tmp_data &amp; <span class="number">0xffff</span>;</span><br><span class="line"><span class="comment">/*****************************/</span></span><br><span class="line">	<span class="keyword">for</span> ( i=<span class="number">0</span>;i&lt;<span class="number">15</span>; i++ )</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">if</span> ( IR_Custom &amp; <span class="number">0x8000</span> )</span><br><span class="line">		{</span><br><span class="line">			tmp_Custom = tmp_Custom | <span class="number">0x8000</span>;</span><br><span class="line">		}</span><br><span class="line">		tmp_Custom = tmp_Custom &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		IR_Custom = IR_Custom &lt;&lt; <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> ( IR_Custom &amp; <span class="number">0x8000</span> )</span><br><span class="line">	{</span><br><span class="line">		tmp_Custom = tmp_Custom | <span class="number">0x8000</span>;</span><br><span class="line">	}</span><br><span class="line"><span class="comment">/*****************************/</span></span><br><span class="line">	tmp_1 = tmp_Custom &gt;&gt; <span class="number">8</span>;</span><br><span class="line">	tmp_2 = tmp_Custom &lt;&lt; <span class="number">8</span>;</span><br><span class="line">	tmp_Custom = tmp_1 | tmp_2;</span><br><span class="line">	tmp_Custom = tmp_Custom &amp; <span class="number">0xffff</span>;</span><br><span class="line"><span class="comment">/*****************************/</span></span><br><span class="line">	DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]1\tIR:%08x\ttmp:%08x\ttmp_Custom:%08x\n"</span>, IR_Data, tmp_data, tmp_Custom);</span><br><span class="line">	<span class="comment">//IR_Data = tmp_data;</span></span><br><span class="line">	<span class="keyword">if</span> ( IR_bit_len == <span class="number">33</span>)</span><br><span class="line">	{	<span class="comment">// Single start</span></span><br><span class="line">		<span class="keyword">if</span> ( (singleKey == <span class="number">1</span>) || (rpt_cnt != <span class="number">0</span>) )</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span> ( ir_timer_flag )</span><br><span class="line">			{</span><br><span class="line">				del_timer(&amp;IR_ContiTimer);</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">if</span> ( singleKey == <span class="number">1</span> )</span><br><span class="line">			{</span><br><span class="line">				DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]2nd reg_single_sts received!!\n"</span>);</span><br><span class="line">				datBuf-&gt;Databuf[datBuf-&gt;Length].ContinueKey = SINGLE_KEY_END;	<span class="comment">// single end</span></span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			{</span><br><span class="line">				DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]reg_single_sts received during repeat!!\n"</span>);</span><br><span class="line">				datBuf-&gt;Databuf[datBuf-&gt;Length].ContinueKey = CONTINUE_KEY_START_END;	<span class="comment">// continue end</span></span><br><span class="line">			}</span><br><span class="line">			datBuf-&gt;Databuf[datBuf-&gt;Length].Command = tmp_irCmd;</span><br><span class="line">			datBuf-&gt;Databuf[datBuf-&gt;Length].Command_ = tmp_irCmd_;</span><br><span class="line">			datBuf-&gt;Databuf[datBuf-&gt;Length].Address = tmp_irAddress;</span><br><span class="line">			datBuf-&gt;Databuf[datBuf-&gt;Length].Address_ = tmp_irAddress_;</span><br><span class="line">			datBuf-&gt;Length++;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		{</span><br><span class="line">			DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]1st reg_single_sts received!!\n"</span>);</span><br><span class="line">		}</span><br><span class="line">		tmp_irCmd = dataBuf-&gt;Databuf[dataBuf-&gt;Length].Command = (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(tmp_data &gt;&gt; <span class="number">8</span>);</span><br><span class="line">		tmp_irCmd_ = dataBuf-&gt;Databuf[dataBuf-&gt;Length].Command_ = (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(tmp_data);</span><br><span class="line">		tmp_irAddress = dataBuf-&gt;Databuf[dataBuf-&gt;Length].Address = (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(tmp_Custom &gt;&gt; <span class="number">8</span>);</span><br><span class="line">		tmp_irAddress_ = dataBuf-&gt;Databuf[dataBuf-&gt;Length].Address_ = (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(tmp_Custom);;</span><br><span class="line">		DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]Single Start Address  Address_  Cmd: 0x%x,0x%x, 0x%x,0x%x!!\n"</span>, tmp_irAddress, tmp_irAddress_, tmp_irCmd, tmp_irCmd_);</span><br><span class="line">		dataBuf-&gt;Databuf[dataBuf-&gt;Length].ContinueKey = CONTINUE_KEY_HEAD;</span><br><span class="line">		dataBuf-&gt;Length++;</span><br><span class="line">		singleKey = <span class="number">1</span>;</span><br><span class="line">		rpt_cnt = <span class="number">0</span>;</span><br><span class="line">		init_IR_cont_timer(<span class="number">150</span>);		<span class="comment">// 150 ms</span></span><br><span class="line">		ir_timer_flag = <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> ( IR_bit_len == <span class="number">2</span> )</span><br><span class="line">	{</span><br><span class="line">		DBG_MSG1(DBGCFG_IR, <span class="string">"[IR]repeat key received!!\n"</span>);</span><br><span class="line">		<span class="keyword">if</span> ( ir_timer_flag == <span class="number">1</span> )</span><br><span class="line">		{</span><br><span class="line">			del_timer(&amp;IR_ContiTimer);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span> ( rpt_cnt == <span class="number">0xff</span> )</span><br><span class="line">		{</span><br><span class="line">			rpt_cnt = <span class="number">1</span>;</span><br><span class="line">		}</span><br><span class="line">		rpt_cnt ++;</span><br><span class="line">		<span class="keyword">if</span> ( (rpt_cnt == <span class="number">4</span>) &amp;&amp; (singleKey == <span class="number">1</span>) )</span><br><span class="line">		{</span><br><span class="line">			singleKey = <span class="number">0</span>;</span><br><span class="line">			dataBuf-&gt;Databuf[dataBuf-&gt;Length].Command = tmp_irCmd;</span><br><span class="line">			dataBuf-&gt;Databuf[dataBuf-&gt;Length].Command_ = tmp_irCmd_;</span><br><span class="line">			dataBuf-&gt;Databuf[dataBuf-&gt;Length].Address = tmp_irAddress;</span><br><span class="line">			dataBuf-&gt;Databuf[dataBuf-&gt;Length].Address_= tmp_irAddress_;</span><br><span class="line">			dataBuf-&gt;Databuf[dataBuf-&gt;Length].ContinueKey = CONTINUE_KEY_START;</span><br><span class="line">			dataBuf-&gt;Length++;</span><br><span class="line">			DBG_MSG1(DBGCFG_IR, <span class="string">"[IR][IR]Continue_key_start\n"</span>);</span><br><span class="line">		}</span><br><span class="line">		init_IR_cont_timer(<span class="number">150</span>);		<span class="comment">// 150 ms</span></span><br><span class="line">		ir_timer_flag = <span class="number">1</span>;</span><br><span class="line">	} </span><br><span class="line">}</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">å…¶ä¸­ï¼š  </span><br><span class="line"></span><br><span class="line">```c</span><br><span class="line">irdatas.Value= GetMMIO_DWORD(mmiobase, <span class="number">0x0c</span>);	<span class="comment">//read from IR decoder recevied data</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><ol>
<li>Toshibaå®¢æˆ·ç çš„é«˜8ä½å’Œä½8ä½éƒ½æ˜¯ä¸€æ ·çš„ï¼ŸToshibaä¸€å®šæ˜¯ä¸€æ ·çš„,æˆ–æ˜¯åå‘,ç¡¬ä½“é‚£è¾¹åº”è¯¥ä¼šç›´æ¥è½¬å¥½åå‘çš„,æ‰€ä»¥åˆ°è½¯ä½“è¿™è¾¹æ”¶åˆ°çš„éƒ½ä¼šæ˜¯ä¸€æ ·çš„ã€‚  </li>
<li>æŒ‰é¥æ§å™¨MENUæŒ‰é”®ï¼ˆcustom code: 0x0E0E, data code: 0x11ï¼‰ï¼Œç¤ºæ³¢å™¨æŠ“æ³¢å½¢ï¼š<br><img src="https://i.loli.net/2018/12/06/5c0915a008d22.jpg" alt="UI_EVENT_MENU"><br>å…ˆå‘0x0E(0b00001110)ï¼Œå†å‘0x0E(0b00001110)ï¼Œæ¥ç€å‘0x11(0b00010001)ï¼Œæœ€åå‘0xEE(0b11101110)ï¼Œç”±æ¯ä¸ªå­—èŠ‚çš„ä½ä½å¼€å§‹å‘ï¼Œæ‰€ä»¥ç¤ºæ³¢å™¨ä¸ŠæŒ‰æ—¶é—´ä»æ—©åˆ°æ™šï¼ˆæŒ‰å›¾ä¸Šä»å·¦åˆ°å³ï¼‰è®¡ç®—ï¼Œå¾—åˆ°ï¼š  <blockquote>
<p>01110000 01110000 10001000 01110111  </p>
</blockquote>
</li>
</ol>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>rda</tag>
        <tag>toshiba</tag>
        <tag>remote</tag>
        <tag>ir</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ¬¡SKDç”Ÿäº§å¼‚å¸¸</title>
    <url>/2018/12/08/skw-skd/</url>
    <content><![CDATA[<p>å®¢æˆ·æ‹¿åˆ°æˆ‘ä»¬æ¿å¡ï¼Œç›´æ¥è£…æ•´æœºï¼Œè£…å¥½æ•´æœºåä¸Šç”µå‡çº§ï¼Œæœ‰çš„æ¿å¡å‡çº§åæ— æ³•å¼€æœºã€‚</p>
<span id="more"></span>

<p>ä¸€å…±å¯„å›æ¥19å—æ¿å­ï¼Œå®¢æˆ·åé¦ˆçš„çŠ¶æ€å¦‚ä¸‹ï¼š  </p>
<ul>
<li>æœ‰11ç‰‡æ¿å­æ˜¯å¦‚ä¸‹ä¸¤ç§çŠ¶æ€ï¼š  </li>
</ul>
<ol>
<li>ä¸Šç”µ æŒ‰é”®æŒ‰ä¸€ä¸‹ ç¯é—ªä¸€ä¸‹ ä½†æ˜¯ä¸å¼€æœº â€“&gt; å¥½å¤šæ¿å¡éƒ½è¢«å‡çº§äº†ï¼Œæ­¤ç°è±¡æ— æ³•çœ‹åˆ°  </li>
<li>æŒ‰é”®ç¯ä¸€ç›´æ˜¯çº¢ç¯ æ²¡ååº” ä¸å¼€æœº â€“&gt; ç¡®å®æœ‰è¿™ä¸ªç°è±¡ï¼Œæœ‰ä¸¤ç§ä¸åŒæƒ…å†µ  </li>
</ol>
<ul>
<li>å¦å¤–8ç‰‡æ¿å­çŠ¶æ€å¦‚ä¸‹ï¼š  </li>
</ul>
<ol>
<li>æœ‰4ç‰‡æ˜¯ä¸Šèºé’‰æ—¶æ‰“åå™¨ä»¶ â€“&gt; ç¡¬ä»¶å¤„ç†  </li>
<li>æœ‰1ç‰‡æ˜¯æŒ‡ç¤ºç¯æ’å â€“&gt; ç¡¬ä»¶å¤„ç†  </li>
<li>æœ‰1ç‰‡æœ‰æ—¶å€™èƒ½å¼€æœºï¼Œæœ‰æ—¶å€™ä¸èƒ½å¼€æœºï¼Œè€åŒ–ä¸¤å°æ—¶ä¹‹åï¼Œéƒ½èƒ½å¼€æœºäº† â€“&gt; çœ‹åˆ°çš„ç°è±¡æ˜¯æœ‰æ—¶å€™èƒ½å¼€æœºï¼Œæœ‰æ—¶å€™è¦è‡ªåŠ¨å¼€å¥½å‡ å›æ‰èƒ½å¼€èµ·æ¥ï¼Œåæ¥flashè¢«äººæ¢æ‰ï¼Œæ¢æ‰åéƒ½èƒ½æ­£å¸¸å¼€æœºï¼Œç„¶åæŠŠæ—§çš„flashæ¢å›æ¥ï¼Œä¹Ÿèƒ½æ­£å¸¸å¼€æœºäº†ï¼Œè¿˜ä¸èƒ½æ˜ç™½å‡†ç¡®åŸå› ï¼Œçœ‹ä¹‹å‰çš„logä¿¡æ¯ï¼Œè‡ªåŠ¨å¼€å¥½å‡ å›æ‰èƒ½å¼€èµ·æ¥åƒæ˜¯DRAMæ²¡æœ‰è·‘èµ·æ¥ï¼Œå¯æ˜¯ä»¥å‰æœ‰ç°è±¡çš„æ—¶å€™ï¼Œæ²¡æœ‰é‡åˆ°DRAMç”µå‹å’Œcore powerç”µå‹ï¼Œå°±è¢«æ¢æ‰flashï¼Œç°åœ¨ä¹Ÿæ— æ³•å¤æµ‹ç°è±¡äº†ï¼Œåªèƒ½è®¤ä¸ºæ¿å­ç„Šæ¥æœ‰é—®é¢˜å¯¼è‡´DRAMä¸èƒ½æ­£å¸¸è·‘èµ·æ¥ï¼ˆå¦‚æœå¤–å›´æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘æ›´æ¢ICå°è¯•ï¼‰  </li>
<li>æœ‰1ç‰‡3.3Vå¯¹åœ°çŸ­è·¯ â€“&gt; ï¼Ÿï¼Ÿï¼Ÿ  </li>
<li>æœ‰1ç‰‡æ˜¯ä¸Šç”µä¸å¼€æœºæœ‰1.8V â€“&gt; è¿™é‡Œåº”è¯¥æ˜¯core powerï¼Œè¿™ç‰‡åº”è¯¥å±äº11ç‰‡æ¿é‚£ä¸€ç±»  </li>
</ol>
<p>æ— æ³•å¼€æœºçš„ï¼Œç¡¬ä»¶æ£€æŸ¥éƒ½æ²¡æœ‰å¼‚å¸¸ï¼Œæ¿å¡éƒ½è¢«äººé‡æ–°ç©ºç‰‡å‡çº§æ‰äº†ï¼Œèƒ½ç”¨çš„æ¿å¡ï¼ˆæˆ‘æ‰‹ä¸Šå°±ä¸¤å—ï¼‰ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š  </p>
<ol>
<li>ä¸Šç”µålogä¿¡æ¯æç¤ºâ€œcode is not completeâ€ï¼Œæ­¤ç±»å¯ä»¥é‡æ–°ä¸Šç”µå‡çº§ã€‚  </li>
<li>ä¸Šç”µålogä¿¡æ¯åªæœ‰â€œS2Tek_a35 08/15â€ï¼Œæ­¤ç±»æ˜¯bootåæ‰äº†ï¼Œéœ€è¦è¿›è¡Œç©ºç‰‡å‡çº§ã€‚æŠŠflashæ‹¿ä¸‹æ¥ï¼Œè¯»ä¸€ä¸‹ï¼Œå¾—åˆ°ï¼š  <blockquote>
<p>0x00000000 ~ 0x0000FFF0: å…¨éƒ¨0xFF<br>0x00010000 ~ 0x00377490: æœ‰æ•°æ®<br>0x003774A0 ~ 0x003EAFF0: å…¨éƒ¨0xFF<br>0x003EB000 ~ 0x003EB380: æœ‰æ•°æ®<br>0x003EB390 ~ 0x003EBFF0: å…¨éƒ¨0xFF<br>0x003EC000 ~ 0x003EC270: æœ‰æ•°æ®<br>0x003EC280 ~ 0x003ECFF0: å…¨éƒ¨0xFF<br>0x003ED000: æœ‰æ•°æ®<br>0x003ED010 ~ 0x003EFFE0: å…¨éƒ¨0xFF<br>0x003EFFF0 ~ 0x003F0FF0: æœ‰æ•°æ®<br>0x003F1000 ~ 0x003F1FF0: å…¨éƒ¨0xFF<br>0x003F2000 ~ 0x003FFFF0: æœ‰æ•°æ®  </p>
</blockquote>
</li>
</ol>
<p>æ‰“å¼€å‡ºè´§çš„ROM binï¼Œå‘ç°ï¼š<br><img src="https://i.loli.net/2018/12/08/5c0b623b411de.jpg" alt="0x3774a0"><br>æ ¹æ®flash layoutï¼Œ0x003EB000æ­¤åœ°å€ä»¥ä¸Šæ˜¯Maincodeåˆ†åŒºï¼Œæ•°æ®æ˜¯è¿ç»­çš„ï¼Œä»¥ä¸‹åˆ™æ˜¯æ¨¡å—åˆ†åŒºï¼Œå„æ¨¡å—ä¹‹é—´å¹¶ä¸æ˜¯è¿ç»­çš„ã€‚äºæ˜¯è®¤ä¸ºè¿™æ˜¯ä¸Šç”µå‡çº§è¿‡ç¨‹ä¸­ï¼Œåˆšæ“¦é™¤bootçš„æ—¶å€™å°±æ–­ç”µäº†ï¼Œæ‰€ä»¥åæ¥ä¸Šç”µä¹Ÿæ— æ³•è¿›è¡Œä¸Šç”µå‡çº§ï¼Œæ›´æ— æ³•å¼€æœºäº†ï¼Œæ­¤ç§æƒ…å†µåªèƒ½è¿›è¡Œç©ºç‰‡å‡çº§ã€‚ï¼ˆè‹¥å‡çº§å‰åbootç‰ˆæœ¬ç›¸åŒï¼Œå‡çº§æ˜¯ä¸ä¼šæ“¦é™¤bootçš„ï¼Œè¿™ç§æƒ…å†µå‡çº§è¿‡ç¨‹æ‰ç”µï¼Œé‡æ–°å¼€æœºæ—¶ä¹Ÿèƒ½åšbootå‡çº§ã€‚è‹¥bootæœ¬èº«ä¹Ÿè¦å‡çº§ï¼ŒåŸå…ˆboot codeå·²è¢«æ“¦é™¤è€Œæ–°çš„bootæ²¡èƒ½æ­£å¸¸å†™å…¥å°†ä¼šæ— æ³•å¼€æœºï¼‰  </p>
<p>å¥‡æ€ªçš„åœ°æ–¹åœ¨äºï¼Œ19ç‰‡æ¿å¡ä¸­ï¼Œç»™åŸå‚é€å»3ç‰‡åˆ†æï¼Œæœ‰ä¸€ç‰‡æ˜¯å±äºâ€œcode is not cpmpleteâ€ä½†æ˜¯å¯ä»¥ç»§ç»­ä¸Šç”µå‡çº§çš„æƒ…å†µï¼Œä½†æ˜¯å¦å¤–æœ‰ä¸€ç‰‡ï¼Œè¯»å‡ºæ¥çš„rom binï¼Œ0H<del>3EC000Hæ•°æ®å…¨éƒ¨ä¸ºFFï¼Œéƒ½è¢«æ“¦æ‰äº†ï¼Œ3EC000H</del>3FFFFFHåé¢éƒ¨åˆ†æ®µè½æœ‰æ•°æ®ã€‚è¿™ä¸ªæƒ…å†µçœ‹èµ·æ¥å±äºMENUå‡çº§è€Œä¸å±äºä¸Šç”µå‡çº§ï¼Œå› ä¸ºMENUå‡çº§çš„å‡çº§æ–¹å¼æ˜¯å…¨éƒ¨æ“¦é™¤ä¹‹åå†çƒ§å†™ï¼Œä¸Šç”µå‡çº§åˆ™æ˜¯æ“¦ä¸€ç‚¹å†™ä¸€ç‚¹ï¼Œå¯æ˜¯å®¢æˆ·ç«¯çš„å‡çº§æ–¹å¼æ˜¯ä¸Šç”µå‡çº§ï¼ä¸è¿‡åˆšæ‰é‚£ç‰‡è¢«æ“¦æ‰bootçš„æ¿å¡ä¸èƒ½å®Œå…¨æ˜ç¡®æ˜¯ä¸Šç”µå‡çº§çš„ç»“æœï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯MENUå‡çº§ï¼Œå› ä¸ºå¯èƒ½æ˜¯åˆšåˆšå¥½æ“¦åˆ°bootå°±æ‰ç”µäº†ã€‚å…·ä½“è¿˜å¾—è·Ÿè¸ªä»£ç æ‰èƒ½çŸ¥é“ä¸Šç”µå‡çº§ç©¶ç«Ÿæ˜¯ä¸æ˜¯æ“¦ä¸€ç‚¹å†™ä¸€ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œæ“¦ä¸€ç‚¹å†™ä¸€ç‚¹æ˜¯æ€ä¹ˆä¸ªæ“¦ä¸€ç‚¹å†™ä¸€ç‚¹æ³•å‘¢ï¼Ÿ</p>
<p>æœ€åï¼Œå¼€æœºå¼‚å¸¸çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯flashé‡Œé¢codeè¢«æ“¦æ‰ï¼Œè‡³äºæ€ä¹ˆè¢«æ“¦æ‰ï¼ŒåŸºæœ¬è®¤ä¸ºæ˜¯å‡çº§è¿‡ç¨‹ä¸­æ‰ç”µé€ æˆçš„ï¼ˆå®¢æˆ·äº¦æ‰¿è®¤å·¥å‚ä¼šæœ‰åœç”µæƒ…å†µï¼Œä¹Ÿä¸èƒ½ä¿è¯å·¥äººæ“ä½œæ˜¯å¦è§„èŒƒï¼‰ï¼Œä¸è¿‡é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦æœ‰å…¶ä»–æ“ä½œç¯èŠ‚ä¼šæ“¦æ‰ä»£ç ï¼Ÿåœ¨å‘å®¢æˆ·å·¥å‚å’Œæˆ‘ä»¬å·¥å‚äº†è§£äº†ç”Ÿäº§æµç¨‹åï¼Œæ„Ÿè§‰å¯èƒ½æ€§ä¸å¤§ï¼Œä½†æ˜¯ä¸èƒ½è¯´å®Œå…¨æ²¡æœ‰å¯èƒ½ï¼Œæˆ‘æ²¡æœ‰å®Œå…¨è·Ÿè¸ªæ‰€æœ‰æµç¨‹ï¼Œæ‰€ä»¥å¾ˆéš¾æ²¡æœ‰é—æ¼ï¼ŒæŠ“åˆ°â€œå…ƒå‡¶â€æœ‰ä¸€å®šéš¾åº¦ã€‚è‡³äºä¸è‰¯æ¿å¡è¯»åˆ°çš„flashæ•°æ®ä¸ºå•¥çœ‹èµ·æ¥åƒæ˜¯èœå•å‡çº§ï¼Ÿå…ˆè·Ÿè¸ªä¸€ä¸‹ä¸Šç”µå‡çº§æµç¨‹çœ‹çœ‹å§ï¼</p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­¥å±¥ä¸åœ</title>
    <url>/2019/01/06/tokugawa-ieyasu/</url>
    <content><![CDATA[<p>è¯»å®Œäº†ã€Šå¾·å·å®¶åº·ã€‹ï¼Œæ‘˜æŠ„å‡ ä¸ªå¥å­ï¼ŒçŠ¶æ€å·®çš„æ—¶å€™çœ‹ä¸€çœ‹ã€‚</p>
<span id="more"></span>

<ul>
<li><p>â€œé˜¿ä¹…ï¼Œä½ ä¸€å®šè¦å¿è€ï¼Œè¿™ä¸ªæ—¶ä»£éœ€è¦çš„å°±æ˜¯å¿è€ã€‚äººä»¬å¿…é¡»å…‹åˆ¶å¿ƒä¸­çš„æ¬²æœ›ï¼Œæ‡‚å¾—å¿è®©ã€‚äººç”Ÿåœ¨ä¸–æ— ä¸å¦‚æ­¤ï¼Œè¿™æ˜¯å‘½ä¸­æ³¨å®šçš„ã€‚â€  </p>
</li>
<li><p>â€œåªè¦ä½ å‰ƒäº†å¤´å‘ï¼Œé‚£äº›ä»¥å‰é—­é—¨ä¸è§å®¢çš„äººä¹Ÿä¼šä»¥ç¤¼ä½›çš„åä¹‰è§ä½ â€¦â€¦å“ˆå“ˆï¼Œè¿™ä¹Ÿæ˜¯éšé£çš„ç­–è°‹ã€‚â€  </p>
</li>
<li><p>ä¿¡é•¿æ„å‘³æ·±é•¿åœ°å¾®ç¬‘äº†ï¼Œç¥æ€æ ¹æœ¬ä¸åƒåªæœ‰åå››å²çš„å°‘å¹´ï¼Œâ€œäººç”Ÿä¹‹äº‹æ— ä¸æ˜¯é›…å…´ï¼Œä»Šæ—¥ä¹Ÿä¸ä¾‹å¤–ã€‚ä½ è¿™æ¬¡ç»™æˆ‘å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿâ€  </p>
</li>
<li><p>å¸¸æ€æ­¤ä¸–é—´ï¼Œé£˜é›¶æ— å®šå¤„ã€‚ç›´å¹æ°´ä¸­æœˆï¼Œæµ®ç”Ÿè‹¥æœéœ²ã€‚äººç”Ÿäº”åå¹´ï¼Œå¦‚æ¢¦äº¦å¦‚å¹»ã€‚æœ‰ç”Ÿæ–¯æœ‰æ­»ï¼Œå£®å£«ä½•æ‰€æ†¾ï¼Ÿ  </p>
</li>
<li><p>å¦‚æœåªæœ‰æŸä¸€ä¸ªäººèƒ½å¤Ÿåšåˆ°é«˜ç»è¿œç©ï¼Œé‚£ä¹ˆæ”¿æ²»å’Œæˆ˜æ–—å°†æ— æ³•å±•å¼€â€¦..  </p>
</li>
<li><p>â€œçœŸå¥½ï¼Œèƒ½å¤Ÿæ´»åˆ°ä»Šå¤©ã€‚â€  </p>
</li>
<li><p>â€œæ‰ä»¥è½»å¿ƒäº†å§ï¼â€æµªäººå“ˆå“ˆå¤§ç¬‘ï¼Œâ€œç»ä¸å¯è½»è¨€ä¸»åŠ¨è¿›æ”»ã€‚ä½†å¯¹æ–¹å‘èµ·æ”»å‡»ï¼Œå°±å¿…é¡»æ¼‚äº®åœ°äºˆä»¥åå‡»ã€‚ä½†åˆéœ€åœ¨å‡»é€€æ•Œäººçš„åŒæ—¶ï¼Œä¿è¯è‡ªå·±çš„å®‰å…¨ã€‚ä¸æ”»å‡»å¯¹æ–¹ï¼Œä¹Ÿä¸è¦è¢«å¯¹æ–¹å‡»ä¸­ã€‚è¿™æ‰æ˜¯å¤§å°†ä¹‹å‰‘ã€‚â€  </p>
</li>
<li><p>äººè¦èƒ½å¤Ÿæ‰“é€ è‡ªå·±çš„èº«ä½“ã€‚çŒ¥ççš„èº«ä½“åªèƒ½é™„ç€çŒ¥ççš„çµé­‚ã€‚  </p>
</li>
<li><p>â€œä½œä¸ºå¤§å°†ï¼Œè¦åƒæœéœå’Œå½©äº‘ï¼Œå¼ºç­‹å¥ä½“ï¼›è¦å†…å¿ƒå“­æ³£ï¼Œè„¸ä¸Šå¾®ç¬‘â€  </p>
</li>
<li><p>â€œæ˜¯æˆ‘è¿èƒŒäº†å¿è€çš„èª“è¨€ï¼Œæˆ‘å¤ªå¿ƒæ€¥äº†ã€‚â€  </p>
</li>
<li><p>â€œå‡¡äº‹ä¸å¯æ…Œå¼ ã€‚æ…Œå¼ ä½¿äººç›®ç›²ã€‚â€  </p>
</li>
<li><p>å·²ç»æ¥ä¸´çš„äººç”Ÿä¹‹å†¬æ˜¯äººåŠ›æ— æ³•é˜»æ­¢çš„ã€‚  </p>
</li>
<li><p>â€œä¸èƒ½å‘æ€’ï¼â€  </p>
</li>
<li><p>å†ä¹Ÿæ²¡æœ‰æ¯”å°†äººç”Ÿä½œä¸ºèµŒæ³¨æ›´è®©äººçˆ½å¿«ä¹‹äº‹äº†ã€‚ä¿¡é•¿æœç„¶å¦‚è—¤å‰éƒæ‰€æ–™åœ°è¡ŒåŠ¨ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œè—¤å‰éƒå°±å¯ä»¥å‘æŒ¥è‡ªå·±çš„æ™ºæ…§ï¼Œå»èµ¢å¾—è¿™åœºäººç”Ÿçš„è±ªèµŒã€‚ä»–å°†èµŒæ³¨ä¸‹åœ¨ä¿¡é•¿è¿™åŒ¹çƒˆé©¬èº«ä¸Šï¼Œè€Œè¿™åŒ¹çƒˆé©¬ï¼Œå¤§æ¦‚ä¼šä¸€ç›´é©°éª‹çºµæ¨ªï¼Œç›´åˆ°äººç”Ÿæœ€åä¸€åˆ»ã€‚  </p>
</li>
<li><p>æ­¤äº‹å¹¶éå®Œå…¨å‡ºä¹æ„æ–™ã€‚åªè¦ä¹‰å…ƒä¸æ­»ï¼Œå°±æ— æ³•æ‰“ç ´å½“å‰åŠ¿åŠ›çš„å‡è¡¡ï¼Œé‚£ä»–æ¾å¹³å…ƒåº·å°±åªèƒ½ç»§ç»­åšéªåºœçš„äººè´¨ã€‚ç”šè‡³å¯ä»¥è¯´ï¼Œå…ƒåº·ä¸€ç›´åœ¨ç­‰å¾…ä¹‰å…ƒä¹‹æ­»ã€‚<br>  å…ƒåº·ä¸ç»æ„æŠ¬å¤´æœ›ç€å¤©ç©ºï¼Œä¹Œäº‘æ•£å°½ï¼Œç¹æ˜Ÿé—ªçƒï¼Œä¸€é¢—æµæ˜Ÿå¿½ç„¶å å‘å—æ–¹çš„æµ·é¢ã€‚å¦‚æ­¤è¾½é˜”çš„å¤©åœ°ï¼Œå±…ç„¶æ²¡æœ‰å†ˆå´äººç«‹é”¥ä¹‹åœ°â€“ä»–çœŸåˆ‡åœ°æ„Ÿå—åˆ°äº†å‘½è¿çš„æ®‹é…·ï¼Œä½†å¹¶æœªç»æœ›ã€‚å¤„å¢ƒå¦‚æ­¤é™©æ¶ï¼Œä»–åè€Œæƒ³ç¬‘ã€‚<br>  æœ›ç€å¤©ç©ºä¸­é—ªçƒçš„æ˜Ÿæ˜Ÿï¼Œå…ƒåº·ä¸æ–­åçœå½“å‰ä»–åº”è¯¥æŠ›å¼ƒçš„ä¸œè¥¿ã€‚é¦–å…ˆåº”è¯¥æŠ›å¼ƒçš„ï¼Œæ˜¯è¿™åº§å­¤åŸã€‚è‡³äºå¦»å­å’Œå­©å­ï¼Œä»–å·²ç»æŠ›å¼ƒäº†ã€‚æ—¥å¤œæ€å¿µçš„æ¯äº²ï¼Œä»–å·²ç»è§è¿‡äº†ï¼Œé‚£è§é¢ä¹Ÿå°±å¯ä»¥å½“åšåˆ«ç¦»ã€‚å¯¹å†ˆå´åŸçš„æ‰§è‘—åº”è¯¥æŠ›å¼ƒï¼Œè¿˜æœ‰ï¼Œå†¥å†¥ä¸­æ”¯æ’‘ç€ä»–å¥‹æ–—çš„â€œè¿æ°”â€â€“é‚£æ¨¡ç³Šçš„å¹»å½±ï¼Œç°åœ¨ä¹Ÿåº”å®Œå…¨æŠ›å¼€ã€‚ä¸ï¼Œä»…ä»…æ‰”æ‰è¿™äº›ä¸œè¥¿ï¼Œè¿˜æ— æ³•è¡ŒåŠ¨è‡ªå¦‚ã€‚è¿˜è¦æŠ›å¼ƒä»€ä¹ˆå‘¢ï¼Ÿå…ƒåº·çœ¼å‰çªç„¶æµ®ç°å‡ºé›ªæ–‹ç¦…å¸ˆçš„è„¸ã€‚ä»–ç¬‘äº†ã€‚æœ€ååº”è¯¥æŠ›å¼ƒçš„ï¼Œæ˜¯æˆ‘è‡ªå·±ï¼Œå”¯æœ‰å®Œå…¨æ²¡æœ‰äº†è‡ªå·±ï¼Œæ— é™é™å¯‚çš„â€œæ— â€æ‰èƒ½æ˜¾éœ²å‡ºæ¥â€“é›ªæ–‹é•¿è€ç•™ç»™å…ƒåº·çš„é‚£ä¸ªâ€œæ— â€ï¼Œå¤šå¹´åï¼Œç»ˆäºåˆå›åˆ°å…ƒåº·å¿ƒä¸­ã€‚  </p>
</li>
<li><p>ä½†æ˜¯æ–¼å¤§ä¸æƒ³è¯…å’’äººç”Ÿçš„æ‚²æƒ¨ï¼Œå¥¹ç”šè‡³è¿˜å¸Œæœ›å®½æ•é‚£ä¸€åˆ‡ï¼Œå¸Œæœ›ä¸€åˆ‡èµ°å‘å…‰æ˜ï¼Œå¹¶ä¸€ç›´ä¸ºæ­¤é»˜é»˜ç¥ˆç¥·ã€‚å¥¹è®¤ä¸ºï¼Œå®½æ•ä¸€åˆ‡ï¼Œèƒ½å¤Ÿè®©äººé€æ¸å˜å¾—åšå¼ºå’Œä¼Ÿå¤§ã€‚  </p>
</li>
<li><p>â€œæˆ‘ä»ä»Šä»¥åä¸ä¼šæ€§æ€¥ï¼Œå´ä¹Ÿè¦ä¸€åˆ»ä¸åœã€‚â€  </p>
</li>
<li><p>æ°¸ç¦„åå¹´è…Šæœˆï¼Œå®¶åº·å¾—åˆ°æ••è®¸ï¼Œæ”¹å§“å¾·å·ã€‚  </p>
</li>
<li><p>åå¤©çš„åŠªåŠ›èƒ½æ”¹å˜äººçš„å‘½è¿å—ï¼Ÿéè¦æ”¹å˜é‚£äº›æ— æ³•æ”¹å˜çš„ä¸œè¥¿ï¼Œåˆ°å¤´æ¥åªæ˜¯å¾’åŠ³ï¼›æœ¬å¯ä»¥æ”¹å˜çš„å´ä¸åŠªåŠ›ï¼Œå°±æ˜¯æ‡ˆæ€ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¢å­˜åœ¨å› äººçš„åå¤©åŠªåŠ›è€Œæ”¹å˜çš„å‘½è¿ï¼Œä¹Ÿç¡®å®å­˜åœ¨ç€ç”±å‘½è¿ä¸»å®°çš„äººç”Ÿã€‚ä»¤äººè¿·æƒ‘çš„æ˜¯ï¼Œäººä¸å¯é€†å¤©è€ŒåŠ¨ï¼Œä½†äººçš„æ‰€åŠ¨ï¼Œéƒ½æ˜¯å› ä¸ºå¸Œæœ›é€ƒè„±å®¿å‘½ã€‚  </p>
</li>
<li><p>ä¸‰å·¦å«é—¨å‡ºå»åï¼Œå®¶åº·é•¿å¹ä¸€å£°ï¼Œç¦ä¸ä½å“ˆå“ˆå¤§ç¬‘ï¼Œä½†é©¬ä¸Šè‡ªè´£ï¼šå°”å²‚å¯å¹¸ç¾ä¹ç¥¸ï¼  </p>
</li>
<li><p>â€œå¥³äººéš¾é“å°±è¿™ä¹ˆå®³æ€•ç‹¬å®ˆç©ºæˆ¿å—ï¼Œé˜¿æµ“ï¼Ÿâ€æµ“å¤«äººæ²¡æœ‰å›ç­”ã€‚    </p>
</li>
<li><p>æµ“å§¬å¾ˆæ¸…æ¥šï¼Œå¤§æ¦‚æ˜¯å¹´é¾„é€é•¿çš„ç¼˜æ•…ï¼Œä»åä¸ƒå…«å²å°±å¼€å§‹å’å¹â€œäººç”Ÿäº”åå¹´â€çš„ä¸ˆå¤«ï¼Œå³ä½¿ç‰ºç‰²ç”Ÿå‘½ï¼Œä¹Ÿè¦åœ¨è¿™ä¸ªä¸–ç•Œå»ºç«‹æ–°ç§©åºï¼Œè¿™æ˜¯ä»–çš„å¤§æ‚²æ„¿ã€‚å½“å¥¹ä¸æ˜ç™½ä¸ˆå¤«çš„å¿ƒå¿—æ—¶ï¼Œå¿ƒæƒ…æ˜¯èˆ’ç•…çš„ï¼›æ˜ç™½ä»¥åï¼Œå¥¹å˜å¾—ç—›è‹¦ã€‚  </p>
</li>
<li><p>ç”Ÿéš¾æ­»äº¦éš¾ï¼Œçœ¼é™…ä¹Œäº‘æ¼«ï¼Œè“¦ç„¶å›é¦–é—´ï¼Œå±±ç«¯æ˜æœˆç°ã€‚  </p>
</li>
<li><p>å¯¹ç§€å‰æ¥è¯´ï¼Œæ²¡æœ‰å“ªä¸€æ¬¡æˆ˜å½¹ä¸æ˜¯ä»–å‘½è¿çš„è½¬æŠ˜ç‚¹ã€‚è¿™åªçŒ´å­æ€»æ˜¯æ‹¼å°½å…¨åŠ›åšæ¯ä¸€ä»¶äº‹ã€‚  </p>
</li>
<li><p>â€œå¤ªå¤«ï¼Œå¦‚æœè¯´äººç”Ÿåªæœ‰äº”åè½½ï¼Œæˆ‘æ—©å·²è¶³å¤Ÿäº†ã€‚â€œä¹…æ”¿è„¸ä¸Šæµ®ç°å‡ºç¬‘å®¹ï¼Œâ€æˆ‘çš„ä¸€ç”Ÿæ— æ€¨æ— æ‚”ï¼Œå§‹ç»ˆæŒ‰ç…§è‡ªå·±çš„æ„å¿—è¡Œäº‹ï¼Œä¸æ›¾å¤±èŠ‚ã€‚â€œ  </p>
</li>
<li><p>â€œä¸â€¦â€¦æŸ”å¼±æ­£æ˜¯ä½ çš„åŠ›é‡ã€‚æŸ”å¼±è€Œåˆåšå¼ºçš„äººï¼Œæœ€æ˜“æƒ¹äººå‘ç«ã€‚â€  </p>
</li>
<li><p>å¦‚æœåªè®²ç­–ç•¥ï¼Œä¸è®ºæ„Ÿæƒ…ï¼Œæ‰€ä¸ºå°±ä¸åˆå¤©æ„ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œéšæ—¶å¯èƒ½ä¼šè¢«è‡ªå·±çš„ç­–ç•¥é¢ è¦†ã€‚  </p>
</li>
<li><p>è‡ªåŠ©è€…ï¼Œå¤©åŠ©ä¹‹ã€‚å‘½è¿ä¹‹äº‹ï¼Œæ€èƒ½éšä¾¿è¯•æ¢ï¼Ÿå‘½è¿ä¾¿æ˜¯æ—¶åˆ»å‡†å¤‡ç€ï¼Œä¸æ–­å‰è¿›ï¼Œä¸æ–­å¿è€ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåˆ«æ— ä»–é€”ã€‚  </p>
</li>
<li><p>â€œé¢ä¸´æˆ˜æ–—æ—¶ï¼Œä¸€å®šè¦ç‰¢ç‰¢æ§åˆ¶ä½è‡ªå·±ï¼Œä¸è¦è´¸ç„¶è¿›å‡»ï¼Œè€Œæ˜¯è¦å¿è€ã€ç­‰å¾…ï¼Œç­‰å¾…æˆ˜æœºã€‚åœ¨è¿™æ–¹é¢ï¼Œç”²å·ä¿¡ç„å…¬æœ€æœ‰å¿ƒå¾—ã€‚â€  </p>
</li>
<li><p>â€œä»ä»Šå¾€åï¼Œæ— è®ºä»€ä¹ˆäººï¼Œéƒ½å¾—å­¦ä¼šéšå¿ï¼Œä¸–ä¸Šå†ä¹Ÿæ²¡æœ‰æ¯”éšå¿æ›´å¥½çš„ç›¾ç‰Œäº†ã€‚ä½ æ˜ç™½å—ï¼Ÿå¹¶ä¸æ˜¯ä»€ä¹ˆäººéƒ½èƒ½å¿çš„ã€‚èƒ½å¿äººä¹‹ä¸èƒ½å¿è€…ï¼Œå°†æ¥æ–¹èƒ½æˆå¤§å™¨ã€‚â€  </p>
</li>
<li><p>ä¿¡é•¿åŠ¿å¦‚ç ´ç«¹ï¼Œæ‰©å±•ç€è‡ªå·±çš„åŠ¿åŠ›ã€‚ä¿¡é•¿è¶Šæ‰©å¼ ï¼Œå®¶åº·å°±è¶Šå†…æ•›ï¼Œä¸¤äººä¹‹é—´çš„å·®è·è¶Šæ¥è¶Šå¤§ï¼Œå°±åƒèµ°å‘äº†é˜´é˜³ä¸¤æã€‚  </p>
</li>
<li><p>äººç”Ÿï¼Œç”Ÿæ˜¯é‚£ä¹ˆæ¼«é•¿ï¼Œæ­»å´æ˜¯å¦‚æ­¤è¿…é€Ÿè€Œè„†å¼±ã€‚  </p>
</li>
<li><p>ç§€å‰è¶…å¸¸çš„ç²¾åŠ›ï¼Œæºè‡ªä»–ä»ä¸æŠŠè¾›åŠ³ä½œä¸ºè¾›åŠ³æ¥çœ‹å¾…ï¼Œåœ¨ä»–çš„èƒ¸ä¸­ï¼Œä»æ¥å°±æ— â€œè¾›åŠ³â€ä¹‹è¾ã€‚ä»–å¤œä»¥ç»§æ—¥ï¼Œæ¯è¿›ä¸€æ­¥ï¼Œéƒ½ä¼šæ„Ÿåˆ°æ— æ¯”çš„å¿«ä¹ï¼Œä¹Ÿæ„Ÿåˆ°è«å¤§çš„æ¬£æ…°ã€‚è¿™ç§â€œè¾›åŠ³ä¹‹ä¹â€éä½†ä¸ä¼šä»¤äººç–²åŠ³ï¼Œåªä¼šç£¨ç‚¼äººçš„æ„å¿—ï¼Œé¼“èˆäººçš„ç²¾ç¥ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šæ¥è¯´ï¼Œç§€å‰ä»¿ä½›ä¸€åæ— æˆ‘ä¹‹äººï¼Œè€Œä»–çš„å–œæ‚¦ä¾¿å¦‚ç™»é«˜å›æœ›ä¹‹æƒ…ã€‚åœ¨å››åä¸ƒè½½æ²‰æµ®ä¸­ï¼Œä»–æ·±æ·±åœ°ä½“å‘³åˆ°äº†è¿™ç§â€œè¾›åŠ³ä¹‹ä¹â€çš„åŠŸæ•ˆï¼Œä¸€ç›´å°†å…¶å¥‰ä¸ºåº§å³é“­ã€‚  </p>
</li>
<li><p>å¯èƒ½æ¯ä¸ªäººçš„ä¸€ç”Ÿéƒ½æ˜¯æ— å®¶å¯å½’çš„ï¼Œåªä¸è¿‡æ˜¯è¿›è¡Œç€ä¸€æ¬¡é¥è¿œçš„æ—…ç¨‹ç½¢äº†ã€‚  </p>
</li>
<li><p>â€œéšé£æ— æ•Œäººï¼Œå› ä¸ºä»–æ€»æ˜¯ä»¥å¿ƒæ¢å¿ƒã€‚â€  </p>
</li>
<li><p>â€œæˆ‘æ›¾å—é›ªæ–‹ç¦…å¸ˆä¸¥è®­ã€‚ç¦…å¸ˆè¯´ï¼Œç¢°åˆ°å›°éš¾æ—¶ï¼Œè¦å¿ƒä¸­æ— ç‰©ï¼Œè¿™æ ·ï¼Œé“ç†ä¾¿ä¼šæ˜¾ç°ï¼Œä¾¿èƒ½å¿ƒé¢†ç¥ä¼šäº†ã€‚â€˜æ— â€™ä¾¿å¯é€šç¥æ˜ä¹‹å¿ƒã€‚â€  </p>
</li>
<li><p>æˆ˜äº‹ä¸­ï¼Œé‡åˆ°é˜»ç¢ï¼Œæ¯”æˆ˜è´¥æ›´èƒ½ä½“ç°å¤§å°†æ€§æƒ…ã€‚è¿›é€€æœ‰æ–¹ï¼Œæ‰æ˜¯å¤§å°†ä¹‹æï¼Œä¸€èˆ¬äººå´éš¾ä»¥åšåˆ°ã€‚  </p>
</li>
<li><p>æœ¨é£Ÿä¸Šäººé»˜é»˜å¾…åœ¨ä¸€æ—ã€‚ä»èšä¹ç¬¬åˆ°ä¼è§ï¼Œå†ä»ä¼è§åˆ°é«˜é‡å±±ï¼Œå¯¹äºå…³ç™½ç§€æ¬¡ï¼Œè¿™çŸ­çŸ­çš„æ—…ç¨‹ï¼Œç«Ÿæ˜¯ä»–çš„çœæ‚Ÿä¹‹æ—…ï¼Œç”šè‡³è¿œèƒœä»–äºŒåå…«å¹´çš„è‹¦æ¼äººç”Ÿã€‚å¾‹å·±æ•äººï¼Œå¤šä¹ˆé‡å¤§çš„å‘ç°ï¼Œå¯¹äººå®½å®¹ï¼Œä¾¿ç•…é€šæ— é˜»ï¼›åä¹‹ï¼Œäººç”Ÿå°±ä¼šé™·å…¥æ— å°½çš„é»‘æš—ã€‚â€œæˆ‘ä½›å®—æ—¨ä¾¿æ˜¯å¦‚æ­¤ã€‚å¯¹è‡ªå·±ä¸¥æ ¼è¦æ±‚ï¼Œå¯¹ä»–äººå®½å®å¤§é‡â€¦â€¦åªæœ‰è¿™æ ·ï¼Œäººç”Ÿæ‰ä¼šä¸°å¯Œå¤šå½©ï¼›ä¸æ‡‚å¾—è¿™äº›ï¼Œç”Ÿæ´»ä¾¿è´«ä¹å¯¡æ·¡ã€‚å¦‚ä»Šï¼Œå¤§äººçš„äººç”Ÿå³å°†å˜å¾—ä¸°å¯Œã€‚â€â€œä¸Šäººï¼Œæˆ‘æƒ³åœ¨è¿™é‡Œå‘å¤§æ”¿æ‰€è°¢ç½ªã€‚â€â€œè´«åƒ§ä»¥ä¸ºï¼Œæ­¤ä¹ƒå–„äº‹ã€‚â€  </p>
</li>
<li><p>ä¸–ä¸Šå¹¶éäº‹äº‹éƒ½èƒ½å¦‚äººæ‰€æ„¿ï¼Œè¿™å¹¶éäººçš„è¿‡é”™ã€‚  </p>
</li>
<li><p>éš¾é“å®¶åº·å†å°½åƒè¾›ä¸‡è‹¦ï¼Œéšå¿äº†äº”åä½™å¹´ï¼Œä¹Ÿä¼šåƒæ¾æ°¸ä¹…ç§€å’Œæ˜æ™ºå…‰ç§€é‚£æ ·å¾’åŠ³ä¸€ç”Ÿï¼Ÿ  </p>
</li>
<li><p>äººæ— è®ºå¿ƒèƒ¸æœ‰å¤šå®½å¹¿ï¼Œå´è¿˜æœ‰è§£ä¸å¼€çš„ç»“ã€‚  </p>
</li>
<li><p>è¿™æœçœŸæ˜¯ä¸€åœºæ¬£æ±‚å‡€åœŸçš„æˆ˜äº‹å—ï¼Ÿæ¯å½“å‡ºæˆ˜ï¼Œå®¶åº·æ€»æ˜¯æ‰ªå¿ƒè‡ªé—®ï¼Œè¿™å·²æˆäº†ä»–å‹‡æ°”çš„æºæ³‰ã€‚  </p>
</li>
<li><p>åä¹å²æ—¶å°±å·²ç«‹èµ·çš„æ——å¸œï¼Œä»–èŠ±ç”²ä¹‹å¹´ä¾ç„¶ä¸å€’ã€‚ä¸åŒçš„æ˜¯ï¼Œå½“åˆç«‹ä¸‹è¿™é¢æ——å¸œæ—¶ï¼Œèº«è¾¹åªæœ‰åå‡ ä¸ªäººï¼Œè€Œä»Šä»–æ‹¥æœ‰ä¸‡åƒå¨æ­¦ä¹‹å¸ˆã€‚  </p>
</li>
<li><p>å®¶åº·ç»ˆç”Ÿéšå¿ï¼Œç»ä¸å†’è¿›ï¼Œå§‹ç»ˆç¨³åé’“é±¼å°ï¼Œé™è§‚å¤©ä¸‹åŠ¿ã€‚ä½†ä¸åŠ¨åˆ™å·²ï¼ŒåŠ¨å¿…ä¸­çš„ã€‚  </p>
</li>
<li><p>â€œå¤§å°†æ‚²å“€æ—¶ä¸èƒ½å“­ï¼Œåœ¨è‹¦ç´¯æ—¶è¦å¿è€ï¼Œæœ‰å¥½åƒçš„ä¸œè¥¿æ—¶è¦åˆ†ç»™å®¶è‡£ã€‚æ€æ ·ï¼Œäº”éƒå¤ªä¸¸ï¼Œä½ èƒ½æˆä¸ºå¤§å°†å—ï¼Ÿâ€  </p>
</li>
<li><p>å‘½æ•°ä¸ä¼šçœ·é¡¾ä¸€ä¸ªæ— æ‰€äº‹äº‹ä¹‹äººï¼Œç‰¹æ„ä¸ºä»–å¼€è¾Ÿä¸€æ¡å‡ºäººå¤´åœ°çš„é“è·¯ã€‚  </p>
</li>
<li><p>å»å²æ–°å¹´ï¼Œèƒœé‡æ›¾é—®å®¶åº·ï¼Œèº«ä¸ºæ‰€å¸ä»£ï¼Œä¸ºæ”¿åº”æ³¨æ„ä»€ä¹ˆã€‚å®¶åº·é“ï¼šâ€œäººä¸€ç”Ÿå¦‚è´Ÿé‡è‡´è¿œï¼Œä¸å¯æ€¥èºã€‚ä»¥ä¸è‡ªåœ¨ä¸ºå¯»å¸¸äº‹ï¼Œåˆ™ä¸è§‰ä¸è¶³ã€‚å¿ƒç”Ÿæ¬²æœ›æ—¶ï¼Œå½“æ€å…ˆå‰å›°çª˜ä¹‹æ—¥ã€‚â€è¨€æ¯•ï¼Œå®¶åº·åˆå¾®ç¬‘é“ï¼šâ€å¿è€ä¹ƒé•¿ä¹…æ ¹æœ¬ï¼Œæ„¤æ€’æ˜¯äººç”Ÿå¤§æ•Œã€‚åªçŸ¥èƒœè€Œä¸çŸ¥è´¥ï¼Œè‡ªå®³å…¶èº«ã€‚å¸¸æ€å·±è¿‡ï¼Œå‹¿æ€ªäººéã€‚å‡¡äº‹è¿‡çŠ¹ä¸åŠã€‚â€œ  </p>
</li>
<li><p>å¦‚ä»Šï¼Œå®¶åº·ç»ˆäºç­‰åˆ°äº†å«¡å­™å‡ºç”Ÿã€‚è¿™ä¸ªå­©å„¿çš„ç¥–çˆ¶æ˜¯å¾å¤·å¤§å°†å†›ï¼Œæ‹¥æœ‰ç€æ— ä¸Šçš„æƒåŠ›ã€‚ç„¶è€Œå®¶åº·å†æ€ä¹ˆå¾—æ„ï¼Œä¹Ÿä¸è‡³äºå¿˜å½¢ï¼Œå› ä»Šæ—¥ä¸€åˆ‡éƒ½æ˜¯ä»–è‰°è‹¦å¥‹æ–—æ‰€å¾—ã€‚  </p>
</li>
<li><p>ç”¨äººæ—¶ï¼Œä¸èƒ½è®©äººå¿ƒæ…°ï¼Œäººå®šä¸ä¼šå°½å…¨åŠ›ã€‚  </p>
</li>
<li><p>å®¶åº·çœ‹åˆ°äº‹æƒ…äºå¤©ä¸‹ä¸åˆ©æ—¶ï¼Œè‡ªä¼šæ”¾å¼ƒæ— è°“çš„å¿è€ï¼Œä½†è¡¨é¢ä¸Šå´ä¼šä¸åŠ¨å£°è‰²ã€‚æ­£å› å¦‚æ­¤ï¼Œä¸ç®¡é«˜å°é™¢åœ¨é“æ­‰æ—¶ï¼Œå®¶åº·è£…å¾—å¤šä¹ˆè‹¥æ— å…¶äº‹ï¼Œä»–ä¹Ÿä¸ä¼šå› æ­¤è€Œæ”¹å˜ä¸»æ„ã€‚  </p>
</li>
<li><p>â€æ„å¤–ä¹‹é£å¸¦æ¥çš„å‡‰æ„ï¼Œå¾ˆå®¹æ˜“è®©äººæ˜æ˜æ¬²ç¡ã€‚â€  </p>
</li>
<li><p>â€œçœŸæ­£çš„å¤§å°†æ—¢èƒ½åäºæ¼èˆ¹ï¼Œäº¦èƒ½å¤Ÿå§äºç«å±‹ã€‚â€  </p>
</li>
<li><p>äº‹ä¸å®œè¿Ÿï¼Œæ­£æœˆé‡Œå¯å€Ÿâ€œæ‹œå¹´â€ä¹‹åï¼Œåšè®¸å¤šå¤§äº‹ã€‚  </p>
</li>
<li><p>ç§€å¿ æœç„¶ä¸¥æ ¼æŒ‰ç…§ä¹‰ç†çº¦æŸè‡ªå·±ã€‚  </p>
</li>
<li><p>æ»¡åº§äººé¸¦é›€æ— å£°ã€‚ä¼—äººéƒ½æ„Ÿåˆ°ï¼Œè®¸ä¹…ä¸è§çš„ã€åªæœ‰ä½œæˆ˜è®®äº‹æ—¶æ‰æœ‰çš„æ€æ°”ï¼Œåˆä»å®¶åº·èº«ä¸Šæ•£å‘å‡ºæ¥ã€‚  </p>
</li>
<li><p>â€œäººæœ‰ç—…ï¼Œå¤©çŸ¥å¦ï¼Ÿâ€  </p>
</li>
<li><p>â€œä¸‡ç‰©çš†æœ‰æºï¼Œå¦‚èŠ±æœçš†æœ‰ç§å­ã€‚â€  </p>
</li>
<li><p>è®¸ä¹…ï¼Œå®—çŸ©æ‰æ˜ç™½ï¼Œå®¶åº·å…¬çš„çœ¼ç›æ¸…æ¾ˆå¦‚æ°´ï¼Œè®¸å¯çœ‹åˆ°å†¥ç•Œã€‚  </p>
</li>
<li><p>â€œå…µæ³•ä¸ä¸ºäººä¹‹é“æœ¬æ˜¯ä¸€é€”ã€‚â€  </p>
</li>
<li><p>ç››ä¸–å¤§å’ŒèŠ±ç«æ”¾ï¼Œåƒç§‹ä¸‡ä»£é¢‚æ˜¥é£ã€‚  </p>
</li>
<li><p>â€œæ†äººä¹‹å¿ƒä¸å¯æœ‰ï¼Œå¾‹å·±ä¹‹å¿ƒä¸å¯æ— ã€‚â€  </p>
</li>
<li><p>å®¶åº·å…¶é¢œå¦‚ä½›ï¼Œç¥¥å’Œå®‰å®ã€‚ä»–è¢«ç—…ç—›æŠ˜ç£¨äº†è¿™ä¹ˆä¹…ï¼Œé¼»æ¢å´ä¼¼æ¯”å¹³æ—¥æ›´æ˜¯æŒºæ‹”ã€‚æ‰€è°“å¾€ç”Ÿï¼Œå½“æ˜¯è¿™èˆ¬æ¨¡æ ·ã€‚  </p>
</li>
</ul>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>reading</tag>
      </tags>
  </entry>
  <entry>
    <title>å†’æ³¡æ’åº</title>
    <url>/2019/01/04/bubble-sort/</url>
    <content><![CDATA[<p>å†’æ³¡æ’åºï¼Œæ€è·¯æ˜¯ç›¸é‚»ä¸¤ä¸ªçš„ä¸¤ä¸¤æ¯”è¾ƒã€‚  </p>
<span id="more"></span>

<p>C  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span>(j = length - <span class="number">1</span>; j &gt; i; j--)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(a[j] &lt; a[j<span class="number">-1</span>])</span><br><span class="line">            {</span><br><span class="line">               <span class="keyword">int</span> temp = a[j];</span><br><span class="line">               a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">               a[j<span class="number">-1</span>] = temp;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">    <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    sort(a,length);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>java</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BubbleSort</span> </span>{</span><br><span class="line">  </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> length)</span> </span>{</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) {</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = length -<span class="number">1</span>; j &gt; i; j--) {</span><br><span class="line">				<span class="keyword">if</span>(a[j] &lt; a[j-<span class="number">1</span>]) {</span><br><span class="line">					<span class="keyword">int</span> temp = a[j];</span><br><span class="line">					a[j] = a[j-<span class="number">1</span>];</span><br><span class="line">					a[j-<span class="number">1</span>] = temp;</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">		<span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">		BubbleSort bs = <span class="keyword">new</span> BubbleSort();</span><br><span class="line">		bs.sort(a,a.length);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i:a) {</span><br><span class="line">			System.out.println(i);</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>æ·»åŠ æ‰“å°ä¿¡æ¯ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span>(j = length - <span class="number">1</span>; j &gt; i; j--)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(a[j] &lt; a[j<span class="number">-1</span>])</span><br><span class="line">            {</span><br><span class="line">               <span class="keyword">int</span> temp = a[j];</span><br><span class="line">               a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">               a[j<span class="number">-1</span>] = temp;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">		<span class="keyword">for</span>(s = <span class="number">0</span>; s &lt; length; s++)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[s]);</span><br><span class="line">		}</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">    <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    sort(a,length);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç¼–è¯‘è¿è¡Œï¼Œå¾—åˆ°æœ‰å¦‚ä¸‹æ‰“å°ä¿¡æ¯ï¼š  </p>
<blockquote>
<p>1 4 5 2 7 3 6<br>1 2 4 5 3 7 6<br>1 2 3 4 5 6 7<br>1 2 3 4 5 6 7<br>1 2 3 4 5 6 7<br>1 2 3 4 5 6 7<br>1 2 3 4 5 6 7  </p>
</blockquote>
<p>å‘ç°ä»ç¬¬3è¡Œå¼€å§‹ä¾¿æ˜¯å¤šä½™çš„åŠ¨ä½œï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿå½“å†æ²¡æœ‰ä¸¤ä¸¤äº¤æ¢å‘ç”Ÿæ—¶ï¼Œé€€å‡ºä¾¿æ˜¯ï¼Œè¿™é‡Œä¼˜åŒ–çš„å¤–å±‚çš„å¾ªç¯ã€‚ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		flag = <span class="number">0</span>; <span class="comment">//ä¼˜åŒ–</span></span><br><span class="line">		<span class="keyword">for</span>(j = length - <span class="number">1</span>; j &gt; i; j--)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span>(a[j] &lt; a[j<span class="number">-1</span>])</span><br><span class="line">			{</span><br><span class="line">				<span class="keyword">int</span> temp = a[j];</span><br><span class="line">				a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">				a[j<span class="number">-1</span>] = temp;</span><br><span class="line">				flag = <span class="number">1</span>; <span class="comment">//ä¼˜åŒ–</span></span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span>(flag == <span class="number">0</span>) <span class="comment">//ä¼˜åŒ–</span></span><br><span class="line">			<span class="keyword">return</span>; <span class="comment">//ä¼˜åŒ–</span></span><br><span class="line">		<span class="keyword">for</span>(s = <span class="number">0</span>; s &lt; length; s++)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[s]);</span><br><span class="line">		}</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">	<span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	sort(a,length);</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ˜¯å¦æœ‰æœºä¼šä¼˜åŒ–å†…å±‚å¾ªç¯ï¼Ÿå¯¹äºä¸€ç»„æ•°æ®ï¼Œå¯èƒ½æœ‰ä¸€éƒ¨åˆ†æ•°æ®æ˜¯æœ‰åºçš„ï¼Œæ­¤æ—¶è®°å½•æœ€åä¸€æ¬¡å‘ç”Ÿäº¤æ¢çš„ä½ç½®ï¼Œä¸‹æ¬¡æ¯”è¾ƒå°±ä»å¼€å§‹æ¯”è¾ƒåˆ°åˆšæ‰è®°å½•çš„ä½ç½®ï¼Œå¯å‡å°‘å¤šä½™çš„æ¯”è¾ƒï¼Œå› ä¸ºæ­¤ä½ç½®åé¢çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œåé¢å°±ä¸éœ€è¦æ¯”è¾ƒè¿™äº›å†…å®¹ã€‚<br>ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">for</span>(j = length - <span class="number">1</span>; j &gt; k; j--)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span>(a[j] &lt; a[j<span class="number">-1</span>])</span><br><span class="line">			{</span><br><span class="line">				<span class="keyword">int</span> temp = a[j];</span><br><span class="line">				a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">				a[j<span class="number">-1</span>] = temp;</span><br><span class="line">				pos = j;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		k = pos;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">	<span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	sort(a,length);</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å®Œæ•´cä»£ç ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		flag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(j = length - <span class="number">1</span>; j &gt; k; j--)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span>(a[j] &lt; a[j<span class="number">-1</span>])</span><br><span class="line">			{</span><br><span class="line">				<span class="keyword">int</span> temp = a[j];</span><br><span class="line">				a[j] = a[j<span class="number">-1</span>];</span><br><span class="line">				a[j<span class="number">-1</span>] = temp;</span><br><span class="line">				flag = <span class="number">1</span>;</span><br><span class="line">				pos = j;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span>(flag == <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		k = pos;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>};</span><br><span class="line">	<span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	sort(a,length);</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://blog.csdn.net/hansionz/article/details/80822494">ã€æ’åºã€‘ï¼šå†’æ³¡æ’åºä»¥åŠä¸‰ç§ä¼˜åŒ–</a></p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>java</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>é€‰æ‹©æ’åº</title>
    <url>/2019/01/16/selection-sort/</url>
    <content><![CDATA[<p>é€‰æ‹©æ’åºï¼Œå­—é¢æ„æ€å°±æ˜¯ä¾æ¬¡é€‰å‡ºæœ€å¤§/å°å€¼ã€æ¬¡æœ€å¤§/å°å€¼ã€æ¬¡æ¬¡æœ€å¤§/å°å€¼ã€æ¬¡æ¬¡æ¬¡æœ€å¤§/å°å€¼â€¦â€¦  </p>
<span id="more"></span>

<p>ç›´æ¥è´´ä»£ç ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selection_sort</span><span class="params">(<span class="keyword">int</span> * a,<span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> min = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">    {</span><br><span class="line">	min = i;</span><br><span class="line">	<span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;length;j++)</span><br><span class="line">	{</span><br><span class="line">	    <span class="keyword">if</span>(a[j]&lt;a[min])</span><br><span class="line">	    {</span><br><span class="line">		min = j;</span><br><span class="line">	    }</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(min!=i)</span><br><span class="line">	{</span><br><span class="line">	    temp = a[i];</span><br><span class="line">	    a[i] = a[min];</span><br><span class="line">	    a[min] = temp;</span><br><span class="line">	}</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">8</span>};</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">    length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">    selection_sort(a,length);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">    {</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä¼˜åŒ–æ€è·¯æ˜¯å¯ä»¥åœ¨ä¸€ä¸ªå¾ªç¯é‡Œé¢ä¸ä»…ä»…æ˜¯é€‰å–æœ€å¤§/å°å€¼ï¼Œè€Œæ˜¯åŒæ—¶æŠŠæœ€å¤§å€¼å’Œæœ€å°å€¼å–å‡ºæ¥ã€‚ä¼˜åŒ–ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selection_sort</span><span class="params">(<span class="keyword">int</span> * a, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> min = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> right = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(left=<span class="number">0</span>,right=length<span class="number">-1</span>;left&lt;right;left++,right--)</span><br><span class="line">    {</span><br><span class="line">	min = left;</span><br><span class="line">	max = right;</span><br><span class="line">	<span class="keyword">for</span>(i=left;i&lt;=right;i++)</span><br><span class="line">	{</span><br><span class="line">	    <span class="keyword">if</span>(a[min]&gt;a[i])</span><br><span class="line">		min = i;</span><br><span class="line">	    <span class="keyword">if</span>(a[max]&lt;a[i])</span><br><span class="line">		max = i;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(min!=left)</span><br><span class="line">	{</span><br><span class="line">	    temp = a[left];</span><br><span class="line">	    a[left] = a[min];</span><br><span class="line">	    a[min] = temp;</span><br><span class="line">	    <span class="keyword">if</span>(max==left)  <span class="comment">//why</span></span><br><span class="line">		max = min; <span class="comment">//why</span></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(max!=right)</span><br><span class="line">	{</span><br><span class="line">	    temp = a[right];</span><br><span class="line">	    a[right] = a[max];</span><br><span class="line">	    a[max] = temp;</span><br><span class="line">	}</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> a[] = {<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">8</span>};</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">    length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">    selection_sort(a,length);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">    {</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸€å¼€å§‹æƒ³ä¸é€šäº¤æ¢minå€¼çš„æ—¶å€™ä¸ºä»€ä¹ˆè¦é‡æ–°è·å–maxå€¼ï¼Œç”»ä¸ªå›¾å°±ä¸€ç›®äº†ç„¶äº†ã€‚ </p>
<blockquote>
<p>if(max==left)<br>  max = min;  </p>
</blockquote>
<p><img src="https://i.loli.net/2019/01/17/5c3fe03bb93a5.jpg" alt="selectionSort"><br>å› ä¸ºiæ˜¯ç”±leftåæ ‡éå†åˆ°rightåæ ‡ï¼Œæ‰€ä»¥æœ€å¤§å€¼æœ‰å¯èƒ½è½åœ¨leftçš„åæ ‡ä¸Šï¼Œå½“æœ€å¤§å€¼è½åœ¨leftåæ ‡æ—¶ï¼Œäº¤æ¢æœ€å°å€¼çš„æ—¶å€™ï¼Œ a[left]ä¸a[min]äº¤æ¢äº†ï¼ŒåŸæœ¬æœ€å¤§å€¼æ˜¯a[left]åœ¨leftä½ç½®ï¼Œäº¤æ¢æœ€å°å€¼åè½¬ç§»åˆ°minä½ç½®ï¼Œå³æ­¤åˆ»æœ€å¤§å€¼çš„åæ ‡è½åœ¨minçš„ä½ç½®ï¼Œè€Œä¸æ˜¯åŸæ¥leftçš„ä½ç½®ã€‚</p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>PAL M è¯†åˆ«æˆ NTSC M</title>
    <url>/2019/01/14/PALM/</url>
    <content><![CDATA[<p>æœå°å PAL/M ä¸ºä»€ä¹ˆä¼šè¯†åˆ«æˆ NTSC/M ï¼Ÿ  </p>
<span id="more"></span>

<p>å®¢æˆ·æå‡ºä¸€ä¸ªç–‘é—®ï¼šè‡ªåŠ¨æœå° PAL/M ä¸ºä»€ä¹ˆä¼šè¯†åˆ«æˆ NTSC/M ï¼Ÿ<br>äº‹å®ä¸Šï¼Œè·Ÿæœå°æ–¹å¼æ— å…³ï¼Œæ— è®ºè‡ªåŠ¨è¿˜æ˜¯æ‰‹åŠ¨æœå°ï¼Œç»“æœéƒ½ä¸€æ ·ï¼Œåœ¨AVé€šé“åŒæ ·ã€‚<br>åšå¦‚ä¸‹å®éªŒï¼š<br>54200è®¾å®š PAL M chroma = offï¼ŒATVå›¾åƒæ— é¢œè‰²ï¼Œå±æ˜¾æ˜¯ NTSC M<br>54200è®¾å®š PAL M chroma != offï¼ŒATVå›¾åƒæœ‰é¢œè‰²ï¼Œå±æ˜¾æ˜¯ PAL M<br>54200è®¾å®š NTSC M chroma = offï¼ŒATVå›¾åƒæ— é¢œè‰²ï¼Œå±æ˜¾æ˜¯ NTSC M<br>54200è®¾å®š NTSC M chroma != offï¼ŒATVå›¾åƒæœ‰é¢œè‰²ï¼Œå±æ˜¾æ˜¯ NTSC M  </p>
<p>åˆ¤æ–­åˆ¶å¼çš„åšæ³•æ˜¯å…ˆåˆ¤æ–­æ‰«æçº¿æ•°ï¼ŒPAL/Må’ŒNTSC/Méƒ½æ˜¯525è¡Œï¼Œå¦‚æœæ²¡æœ‰è‰²å‰¯è½½æ³¢ï¼Œå°±é»˜è®¤æ˜¯NTSC/Mäº†ï¼Œå…³é—­chromaï¼Œå°±æ²¡æœ‰äº†è‰²å‰¯è½½æ³¢ä¿¡å·ï¼Œæ‰€ä»¥PAL/Mä¼šè¢«è¯†åˆ«æˆNTSC/Mã€‚</p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>palm</tag>
        <tag>ntscm</tag>
        <tag>atv</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå»¶è¿Ÿæ‰§è¡Œçš„ä¸‰ç§æ–¹å¼</title>
    <url>/2019/01/18/android-delay/</url>
    <content><![CDATA[<p>Androidå»¶è¿Ÿæ‰§è¡Œçš„ä¸‰ç§æ–¹å¼</p>
<span id="more"></span>

<ul>
<li><p>çº¿ç¨‹  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		Thread.sleep(<span class="number">1000</span>); <span class="comment">// ä¼‘çœ 1ç§’</span></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * å»¶æ—¶æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">	}</span><br><span class="line">}).start();</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å»¶æ—¶å™¨</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Timer timer = <span class="keyword">new</span> Timer();</span><br><span class="line">timer.schedule(<span class="keyword">new</span> TimerTask() {</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * å»¶æ—¶æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">	}</span><br><span class="line">},<span class="number">1000</span>); <span class="comment">// å»¶æ—¶1ç§’</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Androidæ¶ˆæ¯å¤„ç†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Handler().postDelayed(<span class="keyword">new</span> Runnable() {</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * å»¶æ—¶æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">	}</span><br><span class="line">},<span class="number">1000</span>); <span class="comment">// å»¶æ—¶1ç§’</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Panelçš„å‡ ä¸ªæ¦‚å¿µ</title>
    <url>/2019/02/12/panel/</url>
    <content><![CDATA[<p>Panelçš„å‡ ä¸ªæ¦‚å¿µã€‚  </p>
<span id="more"></span>


<h2 id="åè¯è§£æ"><a href="#åè¯è§£æ" class="headerlink" title="åè¯è§£æ"></a>åè¯è§£æ</h2><ul>
<li><p>FRC(free run)  </p>
<ul>
<li>ç‰¹æ€§ï¼šDisplayè¾“å‡ºframe rateä¸éœ€è·Ÿinput video frame rateåŒæ­¥ã€‚  </li>
<li>åº”ç”¨ï¼šInput video frame rateå¤ªä½æˆ–å¤ªé«˜ï¼Œpanelæ— æ³•æ”¯æ´frame rateï¼Œpanelåœ¨æŸäº›åº”ç”¨ä¸‹éœ€å¼ºåˆ¶è¾“å‡ºå›ºå®šframe rateç»™TCONã€‚  </li>
</ul>
</li>
<li><p>Frame Sync<br>ä»€ä¹ˆæ˜¯Frame Syncï¼Ÿ<br>ç‹­ä¹‰çš„è¯´ï¼šè®©Output V sync freqä¸Input V sync freqç›¸åŒã€‚<br>ä¾‹å¦‚ï¼šInput V Freq 60Hzï¼ŒOutput V Freqä¹Ÿç­‰äº60Hzã€‚<br>å¹¿ä¹‰çš„è¯´ï¼šè®©Output V sync freqä¸Input V sync freqä¿æŒä¸€å®šæ¯”ä¾‹å…³ç³»ã€‚<br>ä¾‹å¦‚ï¼šInput V Freq 60Hzï¼ŒOutput V Freqç­‰äº120Hzã€‚  </p>
</li>
</ul>
<p>ä¸ºä¿è¯è¾“å…¥å’Œè¾“å‡ºçš„åœºé¢‘ç›¸åŒå°±è¦æ»¡è¶³DCLK/(HtotalÃ—Vtotal) = é‡‡æ ·æ—¶é’Ÿé¢‘ç‡/(è¾“å…¥HtotalÃ—è¾“å…¥Vtotal)ï¼Œä¸ºæ»¡è¶³è¿™ä¸€å…¬å¼ï¼ŒDCLKã€Htotalã€Vtotalä¼šåœ¨å±å¯æ¥æ”¶çš„èŒƒå›´å†…è¿›è¡Œè°ƒæ•´ã€‚ä¸åŒçš„èŠ¯ç‰‡ä¼šé‡‡ç”¨ä¸åŒçš„LOCKæ–¹æ³•ï¼Œå› æ­¤è®¡ç®—æ–¹æ³•ä¼šä¸åŒï¼Œåªæœ‰å»çœ‹ç¨‹åºæ‰èƒ½æ˜ç™½æ˜¯æ€ä¹ˆè®¡ç®—çš„ã€‚</p>
<pre><code>- ç‰¹æ€§ï¼šoutput frame rateåˆšå¥½æ˜¯input frame rateçš„1å€æˆ–2å€ã€‚ä¾‹å¦‚ï¼šInput V Freq 60Hz,Output V Freqä¹Ÿç­‰äº60Hzï¼›Input V Freq 60Hzï¼ŒOutput V Freqç­‰äº120Hzã€‚  
- åº”ç”¨ï¼šç¡®ä¿è¾“å‡ºç”»é¢è·Ÿè¾“å…¥ä¿¡å·ä¸€æ ·æµç•…ã€‚  
- æ§åˆ¶ï¼šç¡®ä¿displayä¸ä¼šæœ‰æ‰frameæˆ–æ˜¯å‡ºç°ä¸è§„å¾‹çš„frame repeatç°è±¡ã€‚  
</code></pre>
<ul>
<li><p>Frame PLL Mode  </p>
<ul>
<li>è¿ä½œæ–¹å¼ï¼šå›ºå®šä½Output H total and V total, ç„¶åICä¼šè‡ªåŠ¨è°ƒæ•´(å¾®è°ƒ)Output clockä¾†ä½¿å¾—Output V Freqæ¥è¿‘Input V Freqã€‚  </li>
<li>ä¼˜ç‚¹ï¼šå›ºå®šVttã€Httï¼Œä¸ä¼šæœ‰short frame/lineçš„é—®é¢˜ï¼›å¯ä»¥åšFRCã€‚  </li>
<li>ç¼ºç‚¹ï¼šéœ€è¦è¾ƒé•¿çš„æ—¶é—´æ¥å®Œæˆframe syncï¼›ä¼šå—åˆ°clockèŒƒå›´çš„é™åˆ¶ã€‚  </li>
</ul>
</li>
<li><p>Frame Lock  </p>
<ul>
<li>frame lockæ˜¯å›ºå®šDclkï¼Œå½“input referenceä¿¡å·æ¥æ—¶ï¼Œå°†Output çš„timing generator resetæ‰ï¼Œå€Ÿç”±è¿™ä¸ªåŠ¨ä½œåˆ°è¾¾inputå’Œoutputä¸€å¼ frameçš„æ—¶é—´ä¸€æ ·é•¿ã€‚  </li>
<li>ä¼˜ç‚¹ï¼šframe syncé€Ÿåº¦å¿«ï¼Œä¸€å¼ frameå°±syncä½ã€‚  </li>
<li>ç¼ºç‚¹ï¼šå› ä¸ºæ˜¯ç”¨inputçš„referenceä¿¡å·ï¼ˆå¯é¢„æœŸä¸å¯controlï¼‰æ¥clear timing generatorï¼Œåœ¨resetæ—¶æœ‰å¯èƒ½ä¸æ˜¯ä¸€å¼ å®Œæ•´çš„frameæˆ–è€…lineï¼Œä¼šæœ‰short frameå’Œshort lineçš„æƒ…å†µï¼Œå› æ­¤ï¼š<br>  1ï¼Œæœ‰äº›panelæ²¡åŠæ³•æ¥æ”¶è¿™ç§timingï¼Œç”»é¢ä¼šé—ªï¼›<br>  2ï¼Œå½“resetç‚¹ä¸æ˜¯åœ¨BlankingåŒºé—´ï¼Œæ¢timingï¼Œ OSDä¼šç ´æ‰ï¼›<br>  3ï¼Œå› ä¸ºæ˜¯æ¯ä¸€å¼ frameéƒ½resetï¼Œæ‰€ä»¥æ²¡åŠæ³•åšFRCã€‚  </li>
</ul>
</li>
</ul>
<p><a href="https://www.doc88.com/p-6911746171453.html">FrameLock(FrameSync)</a>  </p>
<h2 id="Frame-Sync"><a href="#Frame-Sync" class="headerlink" title="Frame Sync"></a>Frame Sync</h2><p>ç›®å‰å¸¸ç”¨çš„Frame Syncæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼šFrame PLL Modeã€Frame Lockã€‚  </p>
<h2 id="RDA-Frame-Sync-æ–¹æ³•"><a href="#RDA-Frame-Sync-æ–¹æ³•" class="headerlink" title="RDA Frame Sync æ–¹æ³•"></a>RDA Frame Sync æ–¹æ³•</h2><p><img src="https://i.loli.net/2019/02/12/5c6293a433a9d.jpg" alt="rda calc frame sync.jpg">  </p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åŒä¸€ç‰ˆè½¯ä»¶åœ¨V320BJ6_Q01è¿™æ¬¾å±ä¸Šæµ‹è¯•æ­£å¸¸ï¼Œåœ¨V320BJ8_Q01è¿™æ¬¾å±ä¸Šæµ‹è¯•ä»»æ„ä¿¡å·éƒ½æœ‰éšæœºæŠ–åŠ¨çš„é—®é¢˜ã€‚ä¸¤æ¬¾å±çš„Timing Specä¸€æ ·ã€‚è°ƒè¯•æ€è·¯æ˜¯è°ƒæ•´è¾“å‡ºClockå€¼ã€‚å°è¯•å¾®è°ƒVtotalæ— æ³•æ”¹å–„ï¼Œæ”¾å¼ƒï¼Œç„¶åå°è¯•å…³å±•é¢‘ï¼Œæµ‹è¯•5å°æœºå™¨2å°æ—¶å†ä¹Ÿæ²¡æœ‰æŠ–åŠ¨çš„é—®é¢˜ï¼Œä½†æ˜¯å¦å¤–ä¸€ä¸ªæŠ–åŠ¨é¢‘ç‡è¾ƒé«˜çš„æœºå™¨ä»å‘ç°æœ‰æŠ–åŠ¨æƒ…å†µï¼Œè¯»å¯„å­˜å™¨å‘ç°åœ¨60Hzä¿¡å·ä¸‹åƒçš„å´æ˜¯50Hzçš„Vtotalï¼Œäºæ˜¯ä¿®æ”¹å±å‚å¼ºåˆ¶60Hzè¾“å‡ºï¼Œæµ‹è¯•æœªè§å¼‚å¸¸ã€‚ç”±äºå®¢æˆ·ä¸åšEMIï¼Œæ‰€ä»¥æ­¤é¢˜æ”¹æ³•æ˜¯å…³é—­å±•é¢‘ï¼Œè‡³äº60Hzä¿¡å·ä¸ºä»€ä¹ˆä¼šåƒ50Hzå€¼ï¼Œæš‚æ—¶æ²¡æœ‰ç»“è®ºã€‚  </p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><a href="https://wenku.baidu.com/view/61565e78e009581b6bd9eba1.html">FPLLå®é™…åº”ç”¨ä»‹ç»</a>  </li>
<li><a href="https://blog.csdn.net/jxgz_leo/article/details/52225462">ç”¨äºé™ä½EMIçš„æ—¶é’Ÿå±•é¢‘æŠ€æœ¯</a>  </li>
<li><a href="https://www.onsemi.cn/pub/Collateral/AND9015-D.PDF">ON Semiconductor</a>  </li>
<li><a href="https://www.cypress.com/file/106246/download">Cypress Semiconductor</a>  </li>
<li><a href="https://blog.csdn.net/cswuhsdaz/article/details/91471437">åˆ†è¾¨ç‡çš„Clockå’Œå±çš„Clock</a></li>
</ol>
<hr>
<h2 id="è‰²å½©åˆ†è¾¨ç‡"><a href="#è‰²å½©åˆ†è¾¨ç‡" class="headerlink" title="è‰²å½©åˆ†è¾¨ç‡"></a>è‰²å½©åˆ†è¾¨ç‡</h2><p>è‰²å½©åˆ†è¾¨è£…æ˜¯æŒ‡æ˜¾ç¤ºå±èƒ½æ˜¾ç¤ºçš„é¢œè‰²æ·±åº¦ï¼Œä¸€èˆ¬ä»¥ä½æ•°æ¥æè¿°ï¼Œå¦‚ï¼š10Bitã€8Bitã€6Bitã€‚è€Œè§„æ ¼ä¹¦æœ‰æ—¶ä¹Ÿä¼šä»¥å¯æ˜¾ç¤ºçš„é¢œè‰²æ•°é‡æ¥æè¿°ï¼Œå¦‚16.7Mã€‚é¢œè‰²æ•°é‡å’Œä½æ•°çš„å…³ç³»æ˜¯ï¼šé¢œè‰²æ•°é‡=2<sup>bits</sup>*2<sup>bits</sup>*2<sup>bits</sup>ã€‚ä»¥8Bitçš„æ˜¾ç¤ºå±ä¸ºä¾‹ï¼Œå¯æ˜¾ç¤ºçš„é¢œè‰²æ•°é‡ä¸ºDisplay Colors=2<sup>8</sup>*2<sup>8</sup>*2<sup>8</sup>=16777216(16.7M)ã€‚é¢œè‰²ä½æ•°çš„è®¾å®šä¼šå½±å“æ˜¾ç¤ºå±å¯¹ç”»é¢ç»†èŠ‚éƒ¨åˆ†çš„æ˜¾ç¤º.è®¾å®šä¸å½“æ—¶ä¼šå‡ºç°ç”»é¢ç»†èŠ‚æ¨¡ç³Šæˆ–å±å¹•äº®åº¦å˜ä½ã€‚  </p>
<h2 id="LVDSæ•°æ®æ ¼å¼"><a href="#LVDSæ•°æ®æ ¼å¼" class="headerlink" title="LVDSæ•°æ®æ ¼å¼"></a>LVDSæ•°æ®æ ¼å¼</h2><p>ä¸¤ç§LVDSæ•°æ®æ ¼å¼ï¼šJEIDAå’ŒVESAã€‚å…·ä½“ä½¿ç”¨å“ªç§æ ¼å¼æ˜¯ç”±å±çš„SELLVDSè¿™ä¸ªè„šå†³å®šçš„ã€‚<br><img src="https://i.loli.net/2019/12/26/PI2hvFEfDxVOC6k.jpg" alt="SELLVDS.jpg">  </p>
<h2 id="Timingå‚æ•°"><a href="#Timingå‚æ•°" class="headerlink" title="Timingå‚æ•°"></a>Timingå‚æ•°</h2><p>éœ€è¦å…³æ³¨çš„å‚æ•°ï¼šDCLKã€è¡ŒåœºTotalã€è¡ŒåœºBlankï¼Œç”µè§†æœºå·¥ä½œæ—¶ï¼ŒDCLKæ˜¯æ ¹æ®ä¿¡å·çš„é¢‘ç‡è€Œå˜åŒ–çš„ï¼ŒDCLK = HTotal x VTotal x ä¿¡å·é¢‘ç‡ã€‚<br>æœ‰çš„Panelä¼šè¯¦ç»†ç»†åˆ†60Hzå’Œ50Hzï¼Œä¸€èˆ¬Dclk = HTotal*VTotal*60ï¼Œæ‰€ä»¥å½“åªç»™å‡ºäº†60Hzçš„VTotalæ—¶ï¼Œå¯ä»¥ç®—å‡º50Hzçš„VTotal=1.2*60Hzçš„VTotalã€‚<br><img src="https://i.loli.net/2019/12/26/9QufyMh3Xltq1p4.jpg" alt="Timing.jpg"><br><img src="https://i.loli.net/2019/12/26/O8qiB9NjzYokQXA.jpg" alt="Timingç»„æˆ.jpg"><br>Total = Display + Blank;<br>Blank = Sync + åè‚© + å‰è‚©;<br><img src="https://i.loli.net/2019/12/27/gi5IajhkrPCyZfV.jpg" alt="aframe.jpg"><br><a href="https://www.cnblogs.com/sky-heaven/p/9040817.html">LCDæ—¶åºä¸­è®¾è®¡åˆ°çš„VSPW/VBPD/VFPD/HSPW/HBPD/HFPDæ€»ç»“ã€è½¬ã€‘</a>  </p>
<h2 id="æ—¶åº"><a href="#æ—¶åº" class="headerlink" title="æ—¶åº"></a>æ—¶åº</h2><p>æ—¶åºéœ€è¦å‚è€ƒå±è§„æ ¼ä¹¦å…·ä½“è°ƒæ•´ã€‚ä¸€èˆ¬æ¥è¯´ï¼š<br>å¼€æœºé¡ºåºï¼šå…ˆå¼€Panelï¼Œå†å¼€LVDSï¼Œæœ€åå¼€Backlightï¼›<br>å…³æœºé¡ºåºï¼šå…ˆå…³Backlightï¼Œå†å…³LVDSï¼Œæœ€åå…³Panelã€‚  </p>
<h2 id="LVDSé©±åŠ¨ç”µæµ"><a href="#LVDSé©±åŠ¨ç”µæµ" class="headerlink" title="LVDSé©±åŠ¨ç”µæµ"></a>LVDSé©±åŠ¨ç”µæµ</h2><p>å› LVDSæ¥å£å®é™…æ˜¯å·®åˆ†ä¿¡å·æ¥å£,è°ƒæ•´å·®åˆ†ä¿¡å·çš„ç”µæµä¼šå½±å“LVDSä¿¡å·è¾“å‡ºçš„å¹…åº¦ã€‚ä¸åŒçš„å±å› ä¸ºåŒ¹é…é˜»æŠ—ç•¥æœ‰å·®å¼‚ï¼ŒåŒæ ·çš„é©±åŠ¨ç”µæµï¼ŒLVDSè¾“å‡ºçš„å¹…åº¦ä¹Ÿä¸ä¸€æ ·ã€‚å½“LVDSçš„è¾“å‡ºå¹…åº¦è¿‡å¤§æˆ–è¿‡å°æ—¶ï¼Œç”»é¢ä¼šå‡ºç°é»‘å±ç­‰ç°è±¡ã€‚<br><img src="https://i.loli.net/2019/12/26/Et3ucUeBDQ8sPyW.jpg" alt="LVDS Interface.jpg"><br><img src="https://i.loli.net/2019/12/26/8SeMj2lmYTq4sax.jpg" alt="LVDS Input Characteristics.jpg"><br><a href="https://blog.csdn.net/github_33678609/article/details/53435286">LVDSåè®®åŠåŸç†åˆ†æ</a>  </p>
<h2 id="çœ¼å›¾"><a href="#çœ¼å›¾" class="headerlink" title="çœ¼å›¾"></a>çœ¼å›¾</h2><p>çœ¼å›¾ï¼šä¸€ç³»åˆ—æ•°å­—ä¿¡å·å åŠ åœ¨ä¸€èµ·è€Œå½¢æˆçš„ï¼Œå› ä¸ºæ•°å­—ä¿¡å·æœ‰é«˜ä½ç”µå¹³çš„å˜åŒ–ã€‚  </p>
<p><code>çœ¼é«˜</code>è¶Šé«˜ï¼Œè¿™ä¸ªä¿¡å·è¶Šå¥½ï¼Œä¸¤æ¡çº¢è‰²æ¨ªçº¿æ˜¯VIHä¸VILã€‚å·¦è¾¹ã€å³è¾¹ç®­å¤´æ˜¯ä¿¡å·01è½¬æ¢çš„æ—¶åˆ»ï¼Œè¿™ä¸¤ä¸ªç®­å¤´è¶Šå®½ï¼Œè¯´æ˜è¶Šæ¥è¿‘åŸä¿¡å·çš„å»ºç«‹æ—¶é—´ï¼Œä¿æŒæ—¶é—´ã€‚è¿™ä¸¤ä¸ªç®­å¤´è¶Šå°ï¼Œè¯´æ˜ä¿¡å·ä¸å®Œæ•´ï¼Œäº§ç”Ÿåå°„ã€å¹²æ‰°ç­‰ã€‚<br>æ•°å­—ä¿¡å·åœ¨é‡‡æ ·å‰åï¼Œéœ€è¦ä¸€å®šçš„å»ºç«‹æ—¶é—´å’Œä¿æŒæ—¶é—´ï¼Œæ•°å­—ä¿¡å·åœ¨è¿™ä¸€æ®µæ—¶é—´å†…åº”ä¿æŒç¨³å®šï¼Œæ‰èƒ½ä¿è¯æ­£ç¡®é‡‡æ ·ã€‚è€Œå¯¹äºç”µå¹³çš„åˆ¤å†³ï¼Œéœ€è¦é«˜ç”µå¹³çš„ç”µå‹å€¼é«˜äºè¾“å…¥é«˜ç”µå¹³VIHï¼Œä½ç”µå¹³çš„ç”µå‹å€¼ä½äºè¾“å…¥ä½ç”µå¹³VILã€‚  </p>
<p><code>çœ¼å®½</code>ï¼šå½“ä¿¡å·å¾ˆå¤šå åŠ åœ¨ä¸€èµ·æ—¶ï¼Œè¿™ä¸ªçœ¼å®½å°±å¾ˆå¥½åœ°åæ˜ äº†è¿™ä¸ªä¿¡å·çš„ç¨³å®šæ—¶é—´ã€‚  </p>
<h2 id="å¸¸è§é—®é¢˜åŠè§£æ³•æ€è·¯"><a href="#å¸¸è§é—®é¢˜åŠè§£æ³•æ€è·¯" class="headerlink" title="å¸¸è§é—®é¢˜åŠè§£æ³•æ€è·¯"></a>å¸¸è§é—®é¢˜åŠè§£æ³•æ€è·¯</h2><h4 id="ç”»é¢é—ªçº¿æˆ–æŠ–åŠ¨"><a href="#ç”»é¢é—ªçº¿æˆ–æŠ–åŠ¨" class="headerlink" title="ç”»é¢é—ªçº¿æˆ–æŠ–åŠ¨"></a>ç”»é¢é—ªçº¿æˆ–æŠ–åŠ¨</h4><p>å±ç”»é¢é—ªäº®çº¿ä¸€èˆ¬ä¼šå‡ºç°åœ¨ç”µè§†å¼€æœºè¿‡ç¨‹ä¸­æˆ–TV è½¬å°ç¬é—´ï¼ŒåŸå› æœ‰å¤šç§ï¼Œæœ€å¸¸è§çš„æ˜¯DCLKè®¾å®šè¶…å‡ºå±å¯æ”¯æŒçš„èŒƒå›´ã€‚å¦å¤–ä¸€ä¸ªåŸå› æ˜¯DCLK é”å®šçš„é€Ÿåº¦å¤ªå¿«ï¼Œä»¥è‡´å±æ¥å—ä¸äº†è¿™ç§æ”¹å˜è€Œå‡ºç°äº®çº¿ã€‚  </p>
<h4 id="ç”»é¢æ°´å°ä¸¥é‡"><a href="#ç”»é¢æ°´å°ä¸¥é‡" class="headerlink" title="ç”»é¢æ°´å°ä¸¥é‡"></a>ç”»é¢æ°´å°ä¸¥é‡</h4><p>ç”»é¢æ°´å°å¤šæ•°æ˜¯å› ä¸ºå±å¯¹å›¾åƒæ•°æ®é¢œè‰²æ·±åº¦å¤„ç†ä¸è¶³ï¼Œä»¥è‡´éå¸¸ç›¸è¿‘é¢œè‰²éƒ½è¢«è®¤æ˜¯åŒä¸€ç§é¢œè‰²ï¼Œåœ¨ç”»é¢ä¸Šå‡ºç°è‰²å—ï¼Œåœ¨è¿‡æ¸¡è‰²ç”»é¢è¾ƒå®¹æ˜“å‡ºç°ã€‚å¯¹äºæ°´å°çš„å¤„ç†ï¼Œé™¤äº†å±ä¾›åº”å•†ä¿®æ”¹T-conè½¯ä»¶å¤–ï¼ŒæœºèŠ¯è½¯ä»¶ä¸€èˆ¬å¯é€šè¿‡è°ƒæ•´Gammaæ›²çº¿çš„é¡¶ç«¯æ¥é™ä½æ°´å°ã€‚å…·ä½“çš„åšæ³•æ˜¯æŠŠGammaçš„æœ€å¤§å€¼å‡å°‘ã€‚é™¤äº†å±æœ¬èº«çš„åŸå› å¤–ï¼Œè½¯ä»¶PQçš„è®¾å®šæœ‰æ—¶ä¹Ÿä¼šäº§ç”Ÿæ°´å°ï¼Œä¾‹å¦‚è°ƒæ•´ç”»è´¨æ—¶æŠŠä¸ªåˆ«é¢œè‰²çš„å¢ç›Šè®¾å®šè¿‡å¤§ï¼Œå†ç»è¿‡ç™½å¹³è¡¡è°ƒæ•´ï¼Œå¤„ç†åçš„é¢œè‰²å·²æå‰è¿›å…¥é¥±å’Œï¼Œä»è€Œå‡ºç°æ°´å°ã€‚  </p>
<h4 id="ç§»åŠ¨ç”»é¢åŠæ°´å¹³ç§»åŠ¨å­—å¹•å‡ºç°åœé¡¿"><a href="#ç§»åŠ¨ç”»é¢åŠæ°´å¹³ç§»åŠ¨å­—å¹•å‡ºç°åœé¡¿" class="headerlink" title="ç§»åŠ¨ç”»é¢åŠæ°´å¹³ç§»åŠ¨å­—å¹•å‡ºç°åœé¡¿"></a>ç§»åŠ¨ç”»é¢åŠæ°´å¹³ç§»åŠ¨å­—å¹•å‡ºç°åœé¡¿</h4><p>ç§»åŠ¨ç”»é¢ä¸æµç•…åœ¨æ’é™¤äº†ç”»é¢æœ¬èº«çš„é—®é¢˜å¤–ï¼ŒDCLKä¸ä¿¡å·æœªå®ç°åŒæ­¥æ˜¯ä¸»è¦åŸå› ã€‚å¦‚V-Totalã€H-Totalå‚æ•°è®¾å®šä¸æ­£ç¡®ï¼Œä½¿å¾—DCLKè¶…å‡ºäº†åŒæ­¥èŒƒå›´ã€‚  </p>
<h4 id="å±å·¥ä½œä¸€æ®µæ—¶é—´åå‡ºç°é»‘å±"><a href="#å±å·¥ä½œä¸€æ®µæ—¶é—´åå‡ºç°é»‘å±" class="headerlink" title="å±å·¥ä½œä¸€æ®µæ—¶é—´åå‡ºç°é»‘å±"></a>å±å·¥ä½œä¸€æ®µæ—¶é—´åå‡ºç°é»‘å±</h4><p>ä¸€ç§æƒ…å†µè¡¨ç°ä¸ºç”µè§†æœ‰å£°éŸ³æ— å›¾åƒï¼ŒèƒŒå…‰ä¹Ÿä¸äº®ã€‚é—®é¢˜çš„åŸå› ä¹‹ä¸€æ˜¯èƒŒå…‰PWMå ç©ºæ¯”æœ€å°å€¼è®¾å®šè¿‡å°ï¼Œä»è€Œä½¿èƒŒå…‰æ¨¡å—è¿›å…¥ä¿æŠ¤çŠ¶æ€ã€‚è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯å‰é¢æåˆ°ä¸ªåˆ«å±çš„Dimmingä¿¡å·åœ¨å±èƒŒå…‰å¯åŠ¨æ—¶éœ€è¦ä¿æŒ100%å ç©ºæ¯”ä¸€æ®µæ—¶é—´æ¥æ¿€å‘èƒŒå…‰ç¯ç®¡ï¼Œå¦‚æœèƒŒå…‰å¯åŠ¨æ—¶ï¼ŒDimmingä¿¡å·çš„å ç©ºæ¯”æ˜¯ç”¨æˆ·è®¾å®šå€¼ï¼Œè€Œä¸”å ç©ºæ¯”è¾ƒå°ï¼ŒèƒŒå…‰ç¯ç®¡å°±æœ‰å¯èƒ½ä¸èƒ½æ­£å¸¸å¯åŠ¨ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯æœ‰å£°éŸ³æ— å›¾åƒä½†èƒŒå…‰æ˜¯äº®çš„ã€‚è¿™ç§æƒ…å†µçš„åŸå› ä¹‹ä¸€æ˜¯å±•é¢‘è®¾ç½®ä¸å½“ï¼Œä¸ªåˆ«å±çš„å±•é¢‘å¹…åº¦è¶…è¿‡2%æ—¶å°±ä¼šå‡ºç°é»‘å±ç°è±¡ï¼Œæ‰€ä»¥è½¯ä»¶è®¾ç½®çš„å±•é¢‘å¹…åº¦ä¸€èˆ¬åœ¨1.4%~2%ä¹‹é—´ã€‚  </p>
<h4 id="èƒŒå…‰ä¸å—æ§"><a href="#èƒŒå…‰ä¸å—æ§" class="headerlink" title="èƒŒå…‰ä¸å—æ§"></a>èƒŒå…‰ä¸å—æ§</h4><p>è¯¥é—®é¢˜çš„è¡¨ç°ä¸ºè°ƒæ•´èƒŒå…‰æ—¶å±å¹•äº®åº¦å˜åŒ–å¾ˆå°‘æˆ–ä¸å˜åŒ–ï¼Œæ’é™¤ç¡¬ä»¶åŸå› ï¼Œæœ€å¯èƒ½çš„åŸå› æ˜¯PWMé¢‘ç‡è®¾ç½®ä¸æ­£ç¡®ã€‚å¦‚ï¼Œå±çš„PWMé¢‘ç‡èŒƒå›´æ˜¯140~160Hzï¼Œå¦‚æœè®¾å®šçš„PWMé¢‘ç‡åœ¨è¿™ä¸ªèŒƒå›´å¤–ï¼Œé‚£å°±æœ‰å¯èƒ½å‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚  </p>
<h4 id="å±å¹•æœ‰æ»šåŠ¨ç»†æ¨ªçº¹"><a href="#å±å¹•æœ‰æ»šåŠ¨ç»†æ¨ªçº¹" class="headerlink" title="å±å¹•æœ‰æ»šåŠ¨ç»†æ¨ªçº¹"></a>å±å¹•æœ‰æ»šåŠ¨ç»†æ¨ªçº¹</h4><p>è¿™ç§ç°è±¡åœ¨çº¯é¢œè‰²çš„ç”»é¢ä¸‹è¾ƒå®¹æ˜“è§‚å¯Ÿåˆ°ã€‚è€Œå¼•èµ·è¯¥é—®é¢˜çš„åŸå› å¤šæ•°æ˜¯å±•é¢‘çš„é¢‘ç‡è®¾ç½®ä¸æ­£ç¡®ï¼Œå¯ä»¥è°ƒæ•´å±•é¢‘çš„é¢‘ç‡çœ‹ç°è±¡æ˜¯å¦æœ‰æ”¹å–„ã€‚å¦‚æœè°ƒæ•´å±•é¢‘çš„é¢‘ç‡æ²¡æœ‰æ”¹å–„ï¼Œå¯ä»¥å…³æ‰å±•é¢‘åŠŸèƒ½æ¥è¿›ä¸€æ­¥ç¡®è®¤ã€‚  </p>
<h4 id="ç”»é¢é—ªå½©ç‚¹"><a href="#ç”»é¢é—ªå½©ç‚¹" class="headerlink" title="ç”»é¢é—ªå½©ç‚¹"></a>ç”»é¢é—ªå½©ç‚¹</h4><p>è¯¥é—®é¢˜è¡¨ç°ä¸ºå›¾åƒåŠUIéƒ½ä¼šé—ªç‚¹ï¼Œå¼•èµ·è¯¥é—®é¢˜çš„åŸå› å¤šæ•°æ˜¯LVDSä¿¡å·çš„çœ¼å›¾ä¸è‰¯ã€‚  </p>
<h2 id="ä»¥ä¸Šå¾ˆå¤šæ¥æºç½‘ç»œæ€»ç»“"><a href="#ä»¥ä¸Šå¾ˆå¤šæ¥æºç½‘ç»œæ€»ç»“" class="headerlink" title="ä»¥ä¸Šå¾ˆå¤šæ¥æºç½‘ç»œæ€»ç»“"></a>ä»¥ä¸Šå¾ˆå¤šæ¥æºç½‘ç»œæ€»ç»“</h2>]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>panel</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•å…‹æœè‡ªæˆ‘æ€€ç–‘ï¼Ÿ</title>
    <url>/2019/01/31/null/</url>
    <content><![CDATA[<p>å®¹æ˜“è‡ªæˆ‘æ€€ç–‘ï¼Œå¦‚ä½•å…‹æœï¼Ÿç½‘å‹çš„å›ç­”ã€‚  </p>
<span id="more"></span>

<h4 id="æ¥è‡ªbgwzhçš„å›ç­”"><a href="#æ¥è‡ªbgwzhçš„å›ç­”" class="headerlink" title="æ¥è‡ªbgwzhçš„å›ç­”"></a>æ¥è‡ªbgwzhçš„å›ç­”</h4><p>å…‹æœæ˜¯ä¸å¯èƒ½å…‹æœçš„ï¼Œè¿™è¾ˆå­éƒ½ä¸è¡Œã€‚è™½ç„¶å…‹æœä¸äº†ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©ä¿®æ­£ã€‚  </p>
<p>ä¿®æ­£çš„è¯ä½ å°±è¦ææ¸…æ¥šä¸ºä»€ä¹ˆä½ ä¼šè‡ªæˆ‘æ€€ç–‘ã€‚å…¶å®è¯´ç™½äº†å¾ˆç®€å•ï¼Œå°±æ˜¯ä½ å¿ƒæ™ºå‚æ•°é…ç½®é—®é¢˜ã€‚  </p>
<p>å› ä¸ºä½ è¿‡å»çš„ç»éªŒï¼Œæ‰€ä»¥ä½ ç»™è‡ªå·±è®¾å®šäº†ä¸€ä¸ªâ€œæ— èƒ½è€…â€æˆ–â€œå¤±è´¥è€…â€çš„ç§°å·ã€‚æ‰€ä»¥æ¯æ¬¡åšäº‹ï¼Œä½ çœ‹çœ‹è‡ªå·±çš„è¿™ä¸ªç§°å·ï¼Œä½ å°±ä¼šå¼€å§‹è‡ªæˆ‘æ€€ç–‘ã€‚å› æ­¤ï¼Œè§£å†³åŠæ³•å°±æ˜¯ç§»é™¤è¿™ä¸ªç§°å·ï¼Œè®©ä½ å¯¹è‡ªå·±æœ‰ä¸€ä¸ªæ­£ç¡®çš„è®¤è¯†ã€‚  </p>
<p>å…·ä½“æ–¹æ³•æ˜¯ï¼Œå›å¿†è¿‡å»æ‰€æœ‰å¤±è´¥çš„ç»éªŒï¼Œç„¶åå»æ€è€ƒè‡ªå·±ä¸ºä»€ä¹ˆå¤±è´¥ã€‚é‚£æ˜¯ä½ èƒ½åŠ›æ¬ ç¼ºè¿˜æ˜¯å¤–ç•Œå› ç´ ã€‚æœ‰äº›é¢†å¯¼å–œæ¬¢è¯´ä¸è¦æ‰¾å€Ÿå£ã€‚è™½ç„¶æœ‰äº›ç¡®å®æ˜¯å€Ÿå£ï¼Œä½†æœ‰äº›ç¡®æ˜¯ç†ç”±ã€‚æ¯”å¦‚è®©ä½ ä¸€å¤©ä¹‹å†…å¼€å‘å‡ºä¸€ä¸ªå®Œå–„çš„ç³»ç»Ÿã€‚ä½ èƒ½åšåˆ°å—ï¼Ÿåšä¸åˆ°ï¼Œä½ çš„ç†ç”±å°±ä¸æ˜¯å€Ÿå£ã€‚ä½ éœ€è¦è¡¡é‡è‡ªå·±çš„èƒ½åŠ›ï¼Œåªæœ‰ä½ è‡ªå·±çŸ¥é“ä½ åˆ°åº•æ˜¯ä¸æ˜¯åœ¨æ‰¾å€Ÿå£ã€‚å› æ­¤å¯¹è‡ªå·±è¯šå®å¾ˆé‡è¦ã€‚å¦‚æœä½ æ€»æ˜¯è‡ªæ¬ºï¼Œä½ å°±ä¼šæ…¢æ…¢å˜å¾—è¶Šéš¾è§‰å¯Ÿè‡ªå·±çœŸå®çš„æƒ…å†µã€‚  </p>
<p>å½“ä½ å¾—å‡ºç»“è®ºä¹‹åï¼Œä¸è¦å»å¼ºåŒ–å¹¶å†åº¦è®¤å¯è‡ªå·±çš„ç§°å·ã€‚ä¸è¦ç”¨å‡ ä¸ªäº‹ä»¶å°±å†³å®šæ‹¥æœ‰æ— é™å¯èƒ½çš„è‡ªå·±ã€‚ä½ æ˜¯ä»€ä¹ˆæ ·çš„ä¸èƒ½ä»ä½ åšè¿‡çš„äº‹ä¸Šå¾—å‡ºç»“è®ºï¼Œé‚£åªèƒ½å¾—å‡ºï¼Œä½ é€‰æ‹©æˆä¸ºäº†é‚£ä¸ªæ ·ï¼Œè¿™ä¸ªç»“è®ºã€‚ä½ å¯ä»¥é€‰æ‹©å¤±è´¥ï¼ŒåŒæ ·å¯ä»¥é€‰æ‹©æˆåŠŸã€‚åªè¦å¸å–å¹¶åˆ©ç”¨å¥½è¿‡å»çš„ç»éªŒã€‚  </p>
<p>æˆ‘ä¸æ¸…æ¥šä½ çš„å…·ä½“æƒ…å†µï¼Œä½ ä¹Ÿå¯èƒ½æ²¡æœ‰å¤±è´¥çš„ç»éªŒï¼Œä¸”å‡ ä¹æ¯ä¸€æ¬¡éƒ½ä¼šæˆåŠŸï¼Œä½†ä½ æ¯æ¬¡è¿˜æ˜¯ä¼šè‡ªæˆ‘æ€€ç–‘ã€‚å¦‚æœä½ æ˜¯è¿™ç§æƒ…å†µï¼Œé‚£å°±æ˜¯ä½ ç«¥å¹´æ—¶ç»™è‡ªå·±è®¾å®šäº†é”™è¯¯çš„è®¤çŸ¥æ‰€è‡´ã€‚è®¤çŸ¥çš„è®¾å®šå¯èƒ½æºäºä½ å®¶äººå¯¹ä½ çš„è¯„åˆ¤ï¼Œä½ æ¥å—äº†ï¼Œå¹¶æŠŠè¿™è¯„ä»·è®¾ç½®ä¸ºè‡ªå·±çš„æ ‡ç­¾ï¼Œäºæ˜¯ä½ å°±ä¼šåœ¨æ¯æ¬¡åšäº‹æ—¶éƒ½ä¼šæ„Ÿå—åˆ°è‡ªæˆ‘æ€€ç–‘ã€‚  </p>
<p>å¦‚æœä½ æ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä½ å°±éœ€è¦æŠŠæ³¨æ„åŠ›æ”¾åœ¨ä½ æˆåŠŸçš„æ¡ˆä¾‹ä¸Šã€‚åŒæ ·çš„ï¼Œå»æ€è€ƒä½ æˆåŠŸçš„åŸå› ï¼Œåªè¦ä½ èƒ½å¾—å‡ºè¿™ä¸ªæˆåŠŸä½ èƒ½åŠ›å¤§äºå·§åˆè¿™ä¸ªç»“è®ºï¼Œé‚£ä½ å°±å®Œæˆäº†ã€‚ä½ ä¸æ˜¯ä¸€ä¸ªâ€œä¸è¡Œâ€çš„ç”·äººï¼Œä½ å¾ˆå¯ä»¥ï¼Œåªæ˜¯ä½ è§‰å¾—è‡ªå·±ä¸è¡Œç½¢äº†ã€‚ä½ ç°åœ¨å·²ä¸åŒå¾€æ—¥ï¼Œä½ å·²ç»é•¿å¤§äº†ï¼Œæ²¡å¿…è¦å†ç”¨ç«¥å¹´æ—¶çš„è‡ªæˆ‘æ ‡ç­¾äº†ã€‚ä½ å¯ä»¥æŠ›å¼€è¿‡å»ï¼Œä¸ºè‡ªå·±é‡æ–°åšè¯ é‡Šã€‚  </p>
<p>@gabon è¿™ä½å…„å¼Ÿè¯´ä»–ä¼šæœ‰ç„¦è™‘ã€‚å…¶å®ç„¦è™‘çš„æœ¬è´¨æ˜¯ææƒ§ï¼Œä½ ææƒ§è‡ªå·±ä¸è¡Œï¼Œä¹Ÿææƒ§å¤±è´¥ã€‚å¦‚ä½•ä¿®æ­£å¯¹è‡ªå·±çš„è®¤è¯†ä¸Šé¢è¯´äº†ï¼Œç°åœ¨è¯´ä¸‹å¦‚ä½•ä¿®æ­£å¯¹å¤±è´¥çš„ææƒ§ã€‚  </p>
<p>ææƒ§å¤±è´¥åªæœ‰ä¸¤ä¸ªåŸå› ï¼Œä¸€æ˜¯ææƒ§å¤±è´¥åè‡ªå·±çš„å½¢è±¡å—æŸï¼Œä¸€æ˜¯ææƒ§å¤±è´¥åè‡ªå·±çš„èº«ä½“å—æŸã€‚å› æ­¤ï¼Œä½ åªéœ€è¦ç†è§£äººéƒ½ä¼šçŠ¯é”™ï¼Œå¹¶æ”¯æŒè¿™ä¸ªè®¤çŸ¥ï¼Œä½ å°±å¯ä»¥å…äºå®³æ€•è‡ªå·±å½¢è±¡çš„å—æŸã€‚ä½ æ— éœ€åšä¸€ä¸ªå®Œç¾æ— ç¼ºä¹‹äººã€‚ä½ ä¹Ÿåšä¸åˆ°ã€‚  </p>
<p>è‡³äºèº«ä½“å—æŸçš„æ‹…å¿ƒå°±æ›´å¥½è¯´äº†ï¼Œä½ åªè¦åé—®è‡ªå·±ï¼Œå¤±è´¥äº†ï¼Œä½ ä¼šæ­»å—ï¼Ÿä½ ä¸ä¼šæ­»ï¼Œä¹Ÿæ²¡é‚£ä¹ˆå®¹æ˜“æ­»ã€‚ä½ å–œæ¬¢è€ƒè™‘å¾ˆå¤šï¼Œç»™è‡ªå·±æœªæ¥ä»¥ä¿éšœã€‚ç„¶è€Œç”Ÿå‘½æ— å¸¸ï¼Œè®¡åˆ’æ°¸è¿œèµ¶ä¸ä¸Šå˜åŒ–ã€‚ä½ ç»™è‡ªå·±è®¾æƒ³çš„ä¿éšœï¼Œè¯´ä¸å®šæ˜å¤©å°±ä¼šè¢«å…¬å¸è£å‘˜æ‰€æ‰“ç ´ã€‚è¦é€‚å½“çš„äº«å—å†’é™©ï¼Œä½ æ‰èƒ½æ´»çš„å®‰å¿ƒã€‚  </p>
<p><strong>ä¸€å®šè¦æŠŠè½¦åˆ°å±±å‰å¿…æœ‰è·¯ä¸å¤©æ— ç»äººä¹‹è·¯å¥‰ä¸ºä½ çš„åº§å³é“­ï¼Œä½ æ‰èƒ½å®‰ä½äºå½“ä¸‹ï¼Œä¸å¿µè¿‡å»ï¼Œä¸æƒ§æœªæ¥ã€‚åªæœ‰ç°åœ¨æ˜¯çœŸå®çš„ï¼Œæœªæ¥çš„æƒ…å†µä½ æ— æ³•é¢„æµ‹ï¼Œä¹Ÿæ— éœ€é¢„æµ‹ã€‚åªè¦åœ¨å½“ä¸‹æŠŠäº‹æƒ…åšå¥½å°±è¡Œäº†ï¼Œæœªæ¥è‡ªä¼šä»¥å®ƒè¯¥æ˜¯çš„æ ·å­è€Œæ¥ã€‚ä½ åªéœ€è¦æ¥å—å³å¯ã€‚äººä¸æ˜¯æ¥è¿™æ— å¸¸çš„ä¸–ç•Œä½“éªŒæ°¸æ’ä¸å®‰å®šçš„ï¼Œè€Œæ˜¯æ¥è¿™ä½“éªŒå˜åŒ–ä¸ç²¾å½©çš„ã€‚æŒ‰è¿™ä¸ªæ€æƒ³æ¥å¯¹å¾…ç”Ÿæ´»å§ï¼Œä½ å¿…ä¼šä½“éªŒåˆ°ç”Ÿå‘½çš„ç¾å¥½ã€‚</strong>  </p>
<p>ä»¥ä¸Šã€‚  </p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>ego</tag>
        <tag>life</tag>
        <tag>live</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸Œå°”æ’åº</title>
    <url>/2019/02/13/shell-sort/</url>
    <content><![CDATA[<p>å¸Œå°”æ’åºï¼Œå®è´¨æ˜¯åˆ†ç»„æ’å…¥æ’åºã€‚  </p>
<span id="more"></span>


<p>ä»£ç æœ‰ç‚¹éš¾æ‡‚ï¼Œéœ€è¦æ‰‹åŠ¨æ¼”ç®—æ‰æ›´å¥½ç†è§£ã€‚  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> gap = length / <span class="number">2</span>; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = gap; i &lt; length; i++)</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; a[j] &gt; a[j + gap]; j -= gap)</span><br><span class="line">                        {</span><br><span class="line">                                <span class="keyword">int</span> temp = a[j];</span><br><span class="line">                                a[j] = a[j+gap];</span><br><span class="line">                                a[j+gap] = temp;</span><br><span class="line">                        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">        <span class="keyword">int</span> a[] = {<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>};</span><br><span class="line">        <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">        sort(a,length);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ol>
<li><a href="https://www.itcodemonkey.com/article/3286.html">å›¾è§£å¸Œå°”æ’åº</a>  </li>
<li><a href="https://blog.csdn.net/MoreWindows/article/details/6668714">ç™½è¯ç»å…¸ç®—æ³•ç³»åˆ—ä¹‹ä¸‰ å¸Œå°”æ’åºçš„å®ç°</a></li>
</ol>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’å…¥æ’åº</title>
    <url>/2019/02/08/insertion-sort/</url>
    <content><![CDATA[<p>å¦‚ä½•å»ç†è§£æ’å…¥æ’åºï¼Ÿæˆ‘çš„æ–¹æ³•æ˜¯ï¼šå·²çŸ¥é€‰æ‹©æ’åºçš„æ€è·¯æ˜¯é€‰å‡ºç‰¹å®šå…ƒç´ å»ç»„æˆæ–°çš„åºåˆ—ï¼Œå¯¹äºæ’å…¥æ’åºè€Œè¨€ï¼Œæ˜¯è¦æŠŠå…ƒç´ æ’å…¥åˆ°æœ‰åºåºåˆ—ã€‚  </p>
<span id="more"></span>


<p>ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">        <span class="comment">//ç›´æ¥æ’å…¥æ’åºï¼Œäº§ç”Ÿä»å°åˆ°å¤§çš„åºåˆ—</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;length;i++)</span><br><span class="line">        {   </span><br><span class="line">                <span class="keyword">if</span>(a[i]&lt;a[i<span class="number">-1</span>]) <span class="comment">//è¿™ä¸ªæ¡ä»¶æ˜¯è¦åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦è¦æ’å…¥åˆ°æœ‰åºåºåˆ—</span></span><br><span class="line">                {   </span><br><span class="line">                        t = a[i]; <span class="comment">//æŠŠè¦æ’å…¥çš„å€¼å…ˆä¿å­˜å‡ºæ¥</span></span><br><span class="line">                        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=<span class="number">0</span>&amp;&amp;a[j]&gt;t;j--)</span><br><span class="line">                        {   </span><br><span class="line">                                a[j+<span class="number">1</span>] = a[j]; <span class="comment">//æŠŠå…ƒç´ å¾€åæŒªï¼Œç›´åˆ°æ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®</span></span><br><span class="line">                        }   </span><br><span class="line">                        a[j+<span class="number">1</span>] = t; <span class="comment">//ç»ˆäºæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®äº†ï¼Œèµ‹å€¼</span></span><br><span class="line">                }   </span><br><span class="line">        }   </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">        <span class="keyword">int</span> a[] = {<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>};</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">        sort(a,length);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        {   </span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">        }   </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä»¥ä¸Šä¸ºç›´æ¥æ’å…¥æ’åºï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå°è¯•ç”¨äºŒåˆ†æ’å…¥æ’åºï¼Œå¯ä»¥å‡å°æ¯”è¾ƒæ¬¡æ•°ã€‚å› ä¸ºç›¸å¯¹äºç›´æ¥æ’å…¥æ’åºï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹æ‰¾æ’å…¥ä½ç½®è€Œè¨€ï¼ŒäºŒåˆ†æ’å…¥æ’åºçš„åšæ³•æ˜¯å…ˆé€šè¿‡æ¯”è¾ƒæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®ï¼Œç„¶åæŒªå…ƒç´ ï¼Œè¿™é‡ŒäºŒåˆ†æ³•æ‰¾ä½ç½®ä¼šè¾ƒå¿«ã€‚<br>äºŒåˆ†æ’å…¥æ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{   </span><br><span class="line">        <span class="comment">//äºŒåˆ†æ’å…¥æ’åº                    </span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;length;i++)</span><br><span class="line">        {</span><br><span class="line">                <span class="keyword">if</span>(a[i]&lt;a[i<span class="number">-1</span>])</span><br><span class="line">                {</span><br><span class="line">                        t = a[i];</span><br><span class="line">                        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">int</span> right = i<span class="number">-1</span>;</span><br><span class="line">                        <span class="keyword">while</span>(left&lt;=right)</span><br><span class="line">                        {</span><br><span class="line">                                <span class="keyword">int</span> mid = (left+right)/<span class="number">2</span>;</span><br><span class="line">                                <span class="keyword">if</span>(t&lt;a[mid])</span><br><span class="line">                                {</span><br><span class="line">                                        right = mid<span class="number">-1</span>;</span><br><span class="line">                                }</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                {</span><br><span class="line">                                        left = mid+<span class="number">1</span>;</span><br><span class="line">                                }</span><br><span class="line">                        }</span><br><span class="line">                        <span class="keyword">for</span>(j=i<span class="number">-1</span>;j&gt;=left;j--)</span><br><span class="line">                        {</span><br><span class="line">                                a[j+<span class="number">1</span>] = a[j];</span><br><span class="line">                        }</span><br><span class="line">                        a[left] = t;</span><br><span class="line">                }</span><br><span class="line">        }</span><br><span class="line">}   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{   </span><br><span class="line">        <span class="keyword">int</span> a[] = {<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>};</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">        sort(a,length);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>å½’å¹¶æ’åº</title>
    <url>/2019/02/14/merge-sort/</url>
    <content><![CDATA[<p>å½’å¹¶æ’åºï¼Œæ˜¯æŒ‡å°†ä¸¤ä¸ªæœ‰åºåºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—çš„æ“ä½œã€‚ä¸¤ä¸ªæœ‰åºåºåˆ—å¦‚ä½•è·å¾—ï¼Ÿé€šè¿‡ä»ä¸Šåˆ°ä¸‹é€’å½’åˆ†è§£åºåˆ—ï¼Œå½“å…ƒç´ ä¸º1æ—¶å°±æ˜¯æœ‰åºåºåˆ—ã€‚æ¥ç€ä»ä¸‹åˆ°ä¸Šåˆå¹¶åºåˆ—ï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚  </p>
<span id="more"></span>

<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆå¹¶æ•°ç»„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param arrays</span></span><br><span class="line"><span class="comment"> * @param L      æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param M      æŒ‡å‘æ•°ç»„åˆ†éš”çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param R      æŒ‡å‘æ•°ç»„æœ€åçš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> arrays[], <span class="keyword">int</span> L, <span class="keyword">int</span> M, <span class="keyword">int</span> R)</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> lengthLeft = M - L;</span><br><span class="line">	<span class="keyword">int</span> lengthRight = R - M + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å·¦è¾¹çš„æ•°ç»„çš„å¤§å°</span></span><br><span class="line">	<span class="keyword">int</span> leftArray[lengthLeft];</span><br><span class="line">	<span class="built_in">memset</span>(leftArray,<span class="number">0</span>,lengthLeft*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å³è¾¹çš„æ•°ç»„å¤§å°</span></span><br><span class="line">	<span class="keyword">int</span> rightArray[lengthRight];</span><br><span class="line">	<span class="built_in">memset</span>(rightArray,<span class="number">0</span>,lengthRight*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¾€è¿™ä¸¤ä¸ªæ•°ç»„å¡«å……æ•°æ®</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; M; i++) {</span><br><span class="line">		leftArray[i - L] = arrays[i];</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = M; i &lt;= R; i++) {</span><br><span class="line">		rightArray[i - M] = arrays[i];</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//arraysæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">	<span class="keyword">int</span> k = L;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ¯”è¾ƒè¿™ä¸¤ä¸ªæ•°ç»„çš„å€¼ï¼Œå“ªä¸ªå°ï¼Œå°±å¾€æ•°ç»„ä¸Šæ”¾</span></span><br><span class="line">	<span class="keyword">while</span> (i &lt; lengthLeft &amp;&amp; j &lt; lengthRight) {</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è°æ¯”è¾ƒå°ï¼Œè°å°†å…ƒç´ æ”¾å…¥å¤§æ•°ç»„ä¸­,ç§»åŠ¨æŒ‡é’ˆï¼Œç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ª</span></span><br><span class="line">		<span class="keyword">if</span> (leftArray[i] &lt; rightArray[j]) {</span><br><span class="line">			arrays[k++] = leftArray[i++];</span><br><span class="line">		} <span class="keyword">else</span> {</span><br><span class="line">			arrays[k++] = rightArray[j++];</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¦‚æœå·¦è¾¹çš„æ•°ç»„è¿˜æ²¡æ¯”è¾ƒå®Œï¼Œå³è¾¹çš„æ•°éƒ½å·²ç»å®Œäº†ï¼Œé‚£ä¹ˆå°†å·¦è¾¹çš„æ•°æŠ„åˆ°å¤§æ•°ç»„ä¸­(å‰©ä¸‹çš„éƒ½æ˜¯å¤§æ•°å­—)</span></span><br><span class="line">	<span class="keyword">while</span> (i &lt; lengthLeft) {</span><br><span class="line">		arrays[k++] = leftArray[i++];</span><br><span class="line">	}</span><br><span class="line">	<span class="comment">//å¦‚æœå³è¾¹çš„æ•°ç»„è¿˜æ²¡æ¯”è¾ƒå®Œï¼Œå·¦è¾¹çš„æ•°éƒ½å·²ç»å®Œäº†ï¼Œé‚£ä¹ˆå°†å³è¾¹çš„æ•°æŠ„åˆ°å¤§æ•°ç»„ä¸­(å‰©ä¸‹çš„éƒ½æ˜¯å¤§æ•°å­—)</span></span><br><span class="line">	<span class="keyword">while</span> (j &lt; lengthRight) {</span><br><span class="line">		arrays[k++] = rightArray[j++];</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½’å¹¶æ’åº</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param arrays</span></span><br><span class="line"><span class="comment"> * @param L      æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param R      æŒ‡å‘æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> arrays[], <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£å°±ä¸ç”¨æ’åºäº†</span></span><br><span class="line">	<span class="keyword">if</span> (L == R) {</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å–ä¸­é—´çš„æ•°ï¼Œè¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">		<span class="keyword">int</span> M = (L + R) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å·¦è¾¹çš„æ•°ä¸æ–­è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">		mergeSort(arrays, L, M);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//å³è¾¹çš„æ•°ä¸æ–­è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">		mergeSort(arrays, M + <span class="number">1</span>, R);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//åˆå¹¶</span></span><br><span class="line">		merge(arrays, L, M + <span class="number">1</span>, R);</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[] = {<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>};</span><br><span class="line">	<span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">	mergeSort(a,<span class="number">0</span>,length<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">	{   </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">	}   </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ol>
<li><a href="https://juejin.im/post/5ab4c7566fb9a028cb2d9126">å½’å¹¶æ’åºå°±è¿™ä¹ˆç®€å•</a>  </li>
</ol>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±‰è¯ºå¡”</title>
    <url>/2019/02/16/hanoi-tower/</url>
    <content><![CDATA[<p>é€’å½’å®ç°æ±‰è¯ºå¡”é—®é¢˜ã€‚  </p>
<span id="more"></span>


<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">moveOne</span><span class="params">(<span class="keyword">int</span> diskNum, <span class="keyword">char</span> init, <span class="keyword">char</span> dest)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"move disk %d from %c to %c\n"</span>,diskNum,init,dest);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> diskNum, <span class="keyword">char</span> init, <span class="keyword">char</span> temp, <span class="keyword">char</span> dest)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">if</span>(diskNum == <span class="number">1</span>)</span><br><span class="line">	{</span><br><span class="line">		moveOne(diskNum, init, dest);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	{</span><br><span class="line">		move(diskNum<span class="number">-1</span>, init, dest, temp);</span><br><span class="line">		moveOne(diskNum, init, dest);</span><br><span class="line">		move(diskNum<span class="number">-1</span>, temp, init, dest);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	move(<span class="number">3</span>,<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è¾“å‡ºå¦‚ä¸‹ï¼š  </p>
<blockquote>
<p>move disk 1 from A to C<br>move disk 2 from A to B<br>move disk 1 from C to B<br>move disk 3 from A to C<br>move disk 1 from B to A<br>move disk 2 from B to C<br>move disk 1 from A to C  </p>
</blockquote>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>hanoi</tag>
      </tags>
  </entry>
  <entry>
    <title>æŸ¥æ‰¾ç®—æ³•</title>
    <url>/2019/02/15/search/</url>
    <content><![CDATA[<p>æŸ¥æ‰¾ç®—æ³•ã€‚<br><img src="https://i.loli.net/2019/02/15/5c663799023fb.png">  </p>
<span id="more"></span>


<p>ä¾‹ç¨‹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LinearSearch</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length, <span class="keyword">int</span> keyValue)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// çº¿æ€§æŸ¥æ‰¾ï¼Œä¸€èˆ¬å½“åºåˆ—æ— åºæ—¶ä½¿ç”¨</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">if</span>(a[i] == keyValue)</span><br><span class="line">			<span class="keyword">return</span> i;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BinarySearch</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length, <span class="keyword">int</span> keyValue)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// æŠ˜åŠæŸ¥æ‰¾ï¼Œé€‚ç”¨äºæœ‰åºåºåˆ—</span></span><br><span class="line">	<span class="keyword">int</span> L = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> R = length - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(L &lt;= R)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">int</span> M = (L+R)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(a[M] &gt; keyValue)</span><br><span class="line">			R = M - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[M] &lt; keyValue)</span><br><span class="line">			L = M + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> M;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">OMGSearch</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length, <span class="keyword">int</span> keyValue)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// æ’å€¼æŸ¥æ‰¾ï¼Œé€‚ç”¨äºå…ƒç´ åˆ†å¸ƒå‡åŒ€çš„æœ‰åºåºåˆ—ï¼Œå› å…¶æŒ‰ç…§çº¿æ€§æ¯”ä¾‹æ¥ç¡®å®šMå€¼</span></span><br><span class="line">	<span class="keyword">int</span> L = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> R = length - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(L &lt;= R)</span><br><span class="line">	{</span><br><span class="line">		<span class="comment">// Må€¼æ ¹æ®å¦‚ä¸‹æ•°å­¦æ–¹ç¨‹è·å¾—ï¼š</span></span><br><span class="line">		<span class="comment">// (keyValue - a[L]) : (M - L) = (a[R] - a[L]) : (R - L)</span></span><br><span class="line">		<span class="keyword">int</span> M = (keyValue - a[L]) * (R - L) / (a[R] - a[L]) + L;</span><br><span class="line">		<span class="keyword">if</span>(a[M] &gt; keyValue)</span><br><span class="line">			R = M - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[M] &lt; keyValue)</span><br><span class="line">			L = M + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> M;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_size = <span class="number">20</span>; <span class="comment">// æ–æ³¢é‚£å¥‘æ•°ç»„çš„é•¿åº¦ </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fibonacci</span><span class="params">(<span class="keyword">int</span> F[])</span>  </span></span><br><span class="line"><span class="function"></span>{  </span><br><span class="line">	<span class="comment">// æ„é€ ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°ç»„</span></span><br><span class="line">	F[<span class="number">0</span>] = <span class="number">0</span>;  </span><br><span class="line">	F[<span class="number">1</span>] = <span class="number">1</span>;  </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; max_size; i++)  </span><br><span class="line">		F[i] = F[i<span class="number">-1</span>] + F[i<span class="number">-2</span>];  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FibonacciSearch</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> length, <span class="keyword">int</span> keyValue)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// æ–æ³¢é‚£å¥‘æŸ¥æ‰¾</span></span><br><span class="line">	<span class="keyword">int</span> L = <span class="number">0</span>;  </span><br><span class="line">	<span class="keyword">int</span> R = length - <span class="number">1</span>;  </span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> F[max_size];  </span><br><span class="line">	Fibonacci(F); <span class="comment">// æ„é€ ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°ç»„F   </span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;  </span><br><span class="line">	<span class="keyword">while</span>(length &gt; F[k]) <span class="comment">// è®¡ç®—lengthä½äºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä½ç½®  </span></span><br><span class="line">		k++;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> temp[F[k]<span class="number">-1</span>]; <span class="comment">// å°†æ•°ç»„aæ‰©å±•åˆ°F[k]-1çš„é•¿åº¦  </span></span><br><span class="line">	<span class="built_in">memcpy</span>(temp,a,length*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));  </span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = length; i &lt; F[k]<span class="number">-1</span>; i++)  </span><br><span class="line">		temp[i] = a[length<span class="number">-1</span>];  </span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(L &lt;= R)  </span><br><span class="line">	{  </span><br><span class="line">		<span class="keyword">int</span> M = L + F[k<span class="number">-1</span>] - <span class="number">1</span>; <span class="comment">//</span></span><br><span class="line">		<span class="keyword">if</span>(keyValue &lt; temp[M])  </span><br><span class="line">		{  </span><br><span class="line">			R = M - <span class="number">1</span>;  </span><br><span class="line">			k -= <span class="number">1</span>;  </span><br><span class="line">		}  </span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(keyValue &gt; temp[M])  </span><br><span class="line">		{  </span><br><span class="line">			L = M + <span class="number">1</span>;  </span><br><span class="line">			k -= <span class="number">2</span>;  </span><br><span class="line">		}  </span><br><span class="line">		<span class="keyword">else</span>  </span><br><span class="line">		{  </span><br><span class="line">			<span class="keyword">if</span>(M &lt; length)  </span><br><span class="line">				<span class="keyword">return</span> M; <span class="comment">// è‹¥ç›¸ç­‰åˆ™è¯´æ˜Må³ä¸ºæŸ¥æ‰¾åˆ°çš„ä½ç½®  </span></span><br><span class="line">			<span class="keyword">else</span>  </span><br><span class="line">				<span class="keyword">return</span> length<span class="number">-1</span>; <span class="comment">// è‹¥M&gt;=lengthåˆ™è¯´æ˜æ˜¯æ‰©å±•çš„æ•°å€¼,è¿”å›length-1  </span></span><br><span class="line">		}  </span><br><span class="line">	}    </span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[] = {<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">70</span>,<span class="number">100</span>};</span><br><span class="line">	<span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">	<span class="keyword">int</span> keyValue = <span class="number">25</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"LinearSearch Result: %d at %d\n"</span>,keyValue,LinearSearch(a,length,keyValue));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"BinarySearch Result: %d at %d\n"</span>,keyValue,BinarySearch(a,length,keyValue));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"OMGSearch Result: %d at %d\n"</span>,keyValue,OMGSearch(a,length,keyValue));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"FibonacciSearch Result: %d at %d\n"</span>,keyValue,FibonacciSearch(a,length,keyValue));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title>callback function in c example</title>
    <url>/2019/03/16/callback/</url>
    <content><![CDATA[<p>ç½‘ä¸ŠæŸ¥åˆ°çš„å¾ˆå¥½çš„è§£é‡Šï¼š    </p>
<blockquote>
<p>å›è°ƒå‡½æ•°æ˜¯æŒ‡ä½¿ç”¨è€…è‡ªå·±å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°è¿™ä¸ªå‡½æ•°çš„ç¨‹åºå†…å®¹ï¼Œç„¶åæŠŠè¿™ä¸ªå‡½æ•°ï¼ˆå…¥å£åœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ å…¥åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°ä¸­ï¼Œç”±åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°åœ¨è¿è¡Œæ—¶æ¥è°ƒç”¨çš„å‡½æ•°ã€‚å‡½æ•°æ˜¯ä½ å®ç°çš„ï¼Œä½†ç”±åˆ«äººï¼ˆæˆ–ç³»ç»Ÿï¼‰çš„å‡½æ•°åœ¨è¿è¡Œæ—¶é€šè¿‡å‚æ•°ä¼ é€’çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å›è°ƒå‡½æ•°ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”±åˆ«äººçš„å‡½æ•°è¿è¡ŒæœŸé—´æ¥å›è°ƒä½ å®ç°çš„å‡½æ•°ã€‚  </p>
</blockquote>
<span id="more"></span>


<p>è‡³å°‘åœ¨åº”ç”¨ä¹‹é—´å¼‚æ­¥æ¶ˆæ¯ä¼ é€’ã€é©±åŠ¨å±‚ä¸åº”ç”¨å±‚ä¹‹é—´çš„é€šä¿¡ä¸Šæœ‰å¥‡æ•ˆã€‚ä»£ç ä¸­å¾ˆå¤šæ¨¡å—çš„å®ç°éƒ½ä½¿ç”¨å›è°ƒåšæ³•ï¼ˆä»£ç å†™å¾—è¿˜çœŸç»•ï¼Œçœ‹äº†å¥½ä¸€ä¼š<span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼‰ï¼Œåæ¥åœ¨æ·»åŠ Uart/IRå·¥å‚è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå•é”®é€šè¿‡æŒ‰é”®é¢æ¿å®ç°7é”®åŠŸèƒ½ä¸Šä¹Ÿå‚è€ƒäº†ã€‚<br>æ€è·¯æ˜¯å…ˆå®ç°å›è°ƒå‡½æ•°åŠŸèƒ½ï¼Œç„¶åæŠŠå›è°ƒå‡½æ•°èµ‹ç»™ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ˆæ³¨å†Œå›è°ƒå‡½æ•°ï¼‰ï¼Œæœ€åä½¿ç”¨è¿™ä¸ªå‡½æ•°æŒ‡é’ˆå³å¯ã€‚ä¾‹å­ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*callbackFunc)</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">callbackFunc pCallbackFunc = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">registerCallbackFunc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	pCallbackFunc = &amp;add;</span><br><span class="line">	<span class="comment">//pCallbackFunc = add; //ok</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">int</span> b = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line">	registerCallbackFunc();</span><br><span class="line">	c = (*pCallbackFunc)(a,b);</span><br><span class="line">	<span class="comment">//c = pCallbackFunc(a,b); //ok</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"c = %d\n"</span>,c);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ol>
<li><a href="https://www.geeksforgeeks.org/callbacks-in-c/">Callbacks in C</a>  </li>
<li><a href="https://stackoverflow.com/questions/142789/what-is-a-callback-in-c-and-how-are-they-implemented">What is a â€œcallbackâ€ in C and how are they implemented?</a>  </li>
<li><a href="https://segmentfault.com/a/1190000008293902">ä¸€æ–‡ææ‡‚Cè¯­è¨€å›è°ƒå‡½æ•°</a>  </li>
</ol>
]]></content>
      <categories>
        <category>Coding</category>
      </categories>
      <tags>
        <tag>callback</tag>
        <tag>coding</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ¥å£å›è°ƒ</title>
    <url>/2019/03/18/callback-2/</url>
    <content><![CDATA[<blockquote>
<p>Androidä¸­çš„å›è°ƒï¼Œéµå¾ªçš„åŸºæœ¬æ€æƒ³æ˜¯Javaä¸­çš„å›è°ƒå‡½æ•°ã€‚<br>å›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœä½ çš„å‡½æ•°çš„æŒ‡é’ˆ(åœ°å€)ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨ä¸ºè°ƒç”¨å®ƒæ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™æ˜¯å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„æ—¶é—´æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ–æ¡ä»¶è¿›è¡Œå“åº”ã€‚<br>Javaä¸­æ²¡æœ‰æŒ‡é’ˆçš„æ¦‚å¿µï¼Œé€šè¿‡æ¥å£å’Œå†…éƒ¨ç±»çš„æ–¹å¼å®ç°å›è°ƒçš„åŠŸèƒ½ã€‚  </p>
</blockquote>
<span id="more"></span>


<p>ä¸¾ä¸ªæ —å­ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š  </p>
<p>æ–‡ä»¶Interface.javaï¼Œæ¥å£å®šä¹‰ç±»ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interface</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iPrintf</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ–‡ä»¶App.javaï¼Œæ¥å£çš„å®ç°ç±»1ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">implements</span> <span class="title">Interface</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iPrintf</span><span class="params">()</span> </span>{</span><br><span class="line">		System.out.println(<span class="string">"impl: printf"</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ–‡ä»¶App2.javaï¼Œæ¥å£çš„å®ç°ç±»2ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App2</span> <span class="keyword">implements</span> <span class="title">Interface</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iPrintf</span><span class="params">()</span> </span>{</span><br><span class="line">		System.out.println(<span class="string">"impl: printf 2"</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ–‡ä»¶Sys.javaï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ç±»ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sys</span> </span>{</span><br><span class="line">	<span class="comment">//å®šä¹‰å›è°ƒæ¥å£çš„æˆå‘˜å˜é‡</span></span><br><span class="line">	<span class="keyword">private</span> Interface mInterface;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è®¾ç½®å›è°ƒæ¥å£å¯¹è±¡æˆå‘˜å˜é‡</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCallback</span><span class="params">(Interface mInterface)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.mInterface = mInterface;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//è°ƒç”¨å›è°ƒæ¥å£å¯¹è±¡ä¸­çš„æ–¹æ³•</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doCallback</span><span class="params">()</span> </span>{</span><br><span class="line">		mInterface.iPrintf();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ–‡ä»¶Test.javaï¼Œæµ‹è¯•ç±»ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>{</span><br><span class="line">		Sys mSys = <span class="keyword">new</span> Sys();</span><br><span class="line">		App mApp = <span class="keyword">new</span> App();</span><br><span class="line">		App2 mApp2 = <span class="keyword">new</span> App2();</span><br><span class="line">		mSys.setCallback(mApp); <span class="comment">//é€šè¿‡å½¢å‚ä¼ é€’æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">		mSys.doCallback();</span><br><span class="line">		mSys.setCallback(mApp2); <span class="comment">//é€šè¿‡å½¢å‚ä¼ é€’æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">		mSys.doCallback();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ol>
<li><a href="https://blog.csdn.net/linshijun33/article/details/48183925">Androidæ¥å£å›è°ƒï¼Œæœ€ç®€å•çš„ç†è§£æ–¹å¼</a>  </li>
<li><a href="https://www.imooc.com/article/20224">Android å›è°ƒæ–¹æ³•çš„å®ç°</a>  </li>
</ol>
]]></content>
      <categories>
        <category>Coding</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>callback</tag>
        <tag>interface</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitä½¿ç”¨</title>
    <url>/2019/05/10/git/</url>
    <content><![CDATA[<p>é€ŸæŸ¥ã€‚  </p>
<span id="more"></span>


<h2 id="Gitä½¿ç”¨"><a href="#Gitä½¿ç”¨" class="headerlink" title="Gitä½¿ç”¨"></a>Gitä½¿ç”¨</h2><ul>
<li><p>æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼š  </p>
<blockquote>
<p>git add  </p>
</blockquote>
</li>
<li><p>æäº¤ä¿®æ”¹ï¼ŒæŠŠæš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼š  </p>
<blockquote>
<p>git commit  </p>
</blockquote>
</li>
<li><p>ä¸‹è½½è¿œç¨‹åˆ†æ”¯<code>rtk_base</code>çš„ä»£ç ï¼Œå¹¶æŠŠæ ¹æ–‡ä»¶å¤¹å‘½åä¸º<code>rtk_code_base</code>ï¼š  </p>
<blockquote>
<p>git clone -b rtk_base <a href="http://123.45.6.78:9999/Hlkffm_Bndroid/2951_hlkffm_0402.git">http://123.45.6.78:9999/Hlkffm_Bndroid/2951_hlkffm_0402.git</a> rtk_code_base  </p>
</blockquote>
</li>
<li><p>å•è¡Œæ˜¾ç¤ºgitè®°å½•ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬å·å’Œcommit logï¼š  </p>
<blockquote>
<p>git log --pretty=oneline  </p>
</blockquote>
</li>
<li><p>æ˜¾ç¤º1ä¸ªcommitï¼š  </p>
<blockquote>
<p>git log -1  </p>
</blockquote>
<p>  å¦‚æœæƒ³æ˜¾ç¤º5ä¸ªï¼Œå°±-5ï¼Œä¸æŒ‡å®šçš„è¯ï¼Œä¼šä»è¯¥commitä¸€ç›´å¾€åæ˜¾ç¤º</p>
</li>
<li><p>æŸ¥çœ‹ä¸€æ®µæ—¶é—´åŒºé—´çš„æäº¤ä¿¡æ¯ï¼š  </p>
<blockquote>
<p>git log --oneline --since=â€2019-11-18 00:00:00â€ --until=â€2019-12-01 00:00:00â€  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹å…·ä½“æŸä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŒ…æ‹¬ä¿®æ”¹çš„ä½œè€…ã€æ—¶é—´ã€æ–‡ä»¶ç­‰ï¼Œä»¥åŠâ€œshows number of added and deleted linesâ€ï¼š    </p>
<blockquote>
<p>git show 7f7c809c1f537a3ffff57667d41424e1cff8cad1 --numstat  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹æŸè¡Œä»£ç æäº¤è®°å½•ï¼š  </p>
<p>  æŸ¥çœ‹index.jsæ–‡ä»¶ä¸­ç¬¬38è¡Œçš„æäº¤ä¿®æ”¹è®°å½•ï¼š  </p>
<blockquote>
<p>git blame -L 38,38 src/component/BarCode/index.js</p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹æŸä¸ªæ–‡ä»¶ä¸­æŸä¸ªå‡½æ•°çš„æäº¤è®°å½•ï¼š  </p>
<blockquote>
<p>git log -L :FunctionName:FilePath</p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•ï¼š  </p>
<p>  é¦–å…ˆåˆ‡æ¢åˆ°è¦æŸ¥çœ‹çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•  </p>
<blockquote>
<p>cd kernel/android/pie/vendor/realtek/app/HikeenMediaBrowser/app/src/main/java/com/hikeen/mediabrowser/activity/  </p>
</blockquote>
<p>  åˆ—å‡ºæ–‡ä»¶çš„æ‰€æœ‰æ”¹åŠ¨å†å²  </p>
<blockquote>
<p>git log --pretty=oneline PhotoPlayerActivity.java  </p>
</blockquote>
<p>  æ˜¾ç¤ºè¯¥æ–‡ä»¶æ¯æ¬¡æäº¤çš„diff  </p>
<blockquote>
<p>git log -p PhotoPlayerActivity.java  </p>
</blockquote>
<p>  æŸ¥çœ‹æŸä¸ªæäº¤ä¸­çš„æŸä¸ªæ–‡ä»¶çš„å˜åŒ–  </p>
<blockquote>
<p>git show 4a771319a90dad7d654dbd7ece50cd9add0fef30 PhotoPlayerActivity.java  </p>
</blockquote>
</li>
<li><p>HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œåœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´åˆ‡æ¢ï¼š  </p>
<blockquote>
<p>git reset --hard commit_id    </p>
</blockquote>
</li>
<li><p>åœ¨ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´åˆ›å»ºDiffï¼š  </p>
<blockquote>
<p>git diff [æ—§ç‰ˆæœ¬ Commit ID] [æ–°ç‰ˆæœ¬ Commit ID] &gt; [Diffæ–‡ä»¶å]  </p>
</blockquote>
<p>  eg:  </p>
<blockquote>
<p>git diff 5af260f2e3974e0d043a42f397b2d9165e6b4d3f e4c3cbd7700e5230e6b053cf3e231bced23f4edc &gt; patch.diff  </p>
</blockquote>
</li>
<li><p>åº”ç”¨Diffï¼š  </p>
<p>  æ£€æŸ¥Diffæ–‡ä»¶  </p>
<blockquote>
<p>git apply --stat patch.diff  </p>
</blockquote>
<p>  æ£€æŸ¥Diffæ–‡ä»¶æ˜¯å¦èƒ½æ­£å¸¸æ‰“å…¥  </p>
<blockquote>
<p>git apply --check patch.diff  </p>
</blockquote>
<p>  æ‰“å…¥Diff  </p>
<blockquote>
<p>git apply patch.diff  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹å‘½ä»¤å†å²ï¼š  </p>
<blockquote>
<p>git reflog  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«ï¼š  </p>
<blockquote>
<p>git diff HEAD -- readme.txt  </p>
</blockquote>
</li>
<li><p>ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼š  </p>
<blockquote>
<p>git checkout -- readme.txt</p>
</blockquote>
<p>  æŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š  </p>
<ol>
<li>readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›  </li>
<li>readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚<br>æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚  </li>
</ol>
</li>
<li><p>æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰(unstage)ï¼š  </p>
<blockquote>
<p>git reset HEAD &lt;file&gt;  </p>
</blockquote>
</li>
<li><p>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯:  </p>
<blockquote>
<p>git merge &lt;name&gt;  </p>
</blockquote>
</li>
<li><p>æ¸…ç†æ‰æœ¬åœ°ä¸å—ç‰ˆæœ¬åº“æ§åˆ¶çš„æ–‡ä»¶:  </p>
<blockquote>
<p>git clean -f  </p>
</blockquote>
</li>
<li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/900388704535136">stashåº”ç”¨åœºæ™¯ - å¤„ç†ä¸´æ—¶ä»»åŠ¡å‰éœ€è¦ä¿å­˜å·¥ä½œç°åœº</a>  </p>
</li>
<li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/900375748016320">å¤šäººåä½œ</a>  </p>
</li>
<li><p>rebase  </p>
</li>
<li><p>æ ‡ç­¾    </p>
</li>
<li><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/898732837407424">é…ç½®åˆ«å</a>  </p>
</li>
<li><p>å¼€å‘æ­¥éª¤  </p>
<ol>
<li>åˆ‡æ¢åˆ°æœ€æ–°çš„developåˆ†æ”¯  <blockquote>
<p>git fetch origin;git checkout origin/develop;git branch -D develop;git checkout -b develop  </p>
</blockquote>
</li>
<li>æ–°å»ºä¸€ä¸ªè‡ªå·±çš„ä¸´æ—¶å¼€å‘åˆ†æ”¯  <blockquote>
<p>git checkout -b user_01  </p>
</blockquote>
</li>
<li>æ·»åŠ ä¿®æ”¹  <blockquote>
<p>git add path/file  </p>
</blockquote>
</li>
<li>æäº¤ä¿®æ”¹ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªgit_ID:0deaddead  <blockquote>
<p>git commit -m â€œâ€â€â€  </p>
</blockquote>
</li>
<li>åˆ‡æ¢åˆ°æœ€æ–°çš„developåˆ†æ”¯  <blockquote>
<p>git fetch origin;git checkout origin/develop;git branch -D develop;git checkout -b develop  </p>
</blockquote>
</li>
<li>æ‹‰å–åˆšæ‰çš„æäº¤ï¼Œåˆ°æœ€æ–°çš„developåˆ†æ”¯  <blockquote>
<p>git cherry-pick 0deaddead  </p>
</blockquote>
</li>
<li>æ¨é€åˆ°æœåŠ¡å™¨  <blockquote>
<p>git push origin develop:develop  </p>
</blockquote>
</li>
<li>åˆ é™¤è‡ªå·±ä¸´æ—¶çš„å¼€å‘åˆ†æ”¯  <blockquote>
<p>git branch -D user_01  </p>
</blockquote>
</li>
</ol>
</li>
</ul>
<ul>
<li>gitä¸åŒcodeï¼Œä¿®æ”¹ç›¸åŒè·¯å¾„ç›¸åŒçš„æ–‡ä»¶ï¼Œç›´æ¥æŠ“å–çš„ä¿®æ”¹æ–‡ä»¶çš„æ–¹æ³•ï¼š    ä¾‹å¦‚ï¼Œè°·æ­ŒTVæŠ“å–æ­Œè°·TVä¸Šçš„æ–‡ä»¶ï¼Œåœ¨è°·æ­ŒTV codeæ‰§è¡Œï¼š  <ol>
<li>git remote add gegu <a href="mailto:git@123.45.6.78">git@123.45.6.78</a>:Android_RD/gegu_tv.git  </li>
<li>git remount -v  </li>
<li>git fetch gegu  </li>
<li>git pull  </li>
<li>git cherry-pick xxxxxxx(geguä¸Šçš„gitid)  </li>
<li>git push origin develop  </li>
</ol>
</li>
</ul>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="https://git-scm.com/docs/git-show">git show</a>  </li>
<li><a href="https://www.git-scm.com/docs/git-log#Documentation/git-log.txt--Lltstartgtltendgtltfilegt">git log</a>  </li>
<li><a href="https://github.com/k88hudson/git-flight-rules/blob/master/README.md">git-flight-rules</a>  </li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>2851</title>
    <url>/2019/05/11/2851/</url>
    <content><![CDATA[<p>é€ŸæŸ¥ã€‚  </p>
<span id="more"></span>


<h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><p>è¿›å…¥åˆ°codeçš„Androidç‰ˆæœ¬ç›®å½•ï¼Œâ€œpieâ€æ˜¯Android 9  </p>
<blockquote>
<p>cd kernel/android/pie  </p>
</blockquote>
<p>åˆå§‹åŒ–ç¼–è¯‘ç¯å¢ƒ  </p>
<blockquote>
<p>source build/envsetup.sh  </p>
</blockquote>
<p>é€‰æ‹©æ¿å‹  </p>
<blockquote>
<p>lunch  </p>
</blockquote>
<p>è¿›å…¥åˆ°APKç›®å½•  </p>
<blockquote>
<p>cd vendor/realtek/app/HikeenMediaBrowser  </p>
</blockquote>
<p>ç¼–è¯‘  </p>
<blockquote>
<p>mm<br>åœ¨<code>kernel/android/pie/frameworks/base/services</code>ç›®å½•ä¸‹çš„ä¸œè¥¿ï¼Œéœ€è¦åˆ°è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œ<code>mm</code>ï¼Œ<code>eng</code>ç‰ˆæœ¬ä¼šç”Ÿæˆ<code>services.jar</code>,<code>user-debug</code>ä¼šç”Ÿæˆ<code>services.jar``services.jar.prof``oat/arm/services.art``oat/arm/services.odex``oat/arm/services.vdex</code>  </p>
</blockquote>
<p>ç¼–è¯‘kernelæ¨¡å—  </p>
<blockquote>
<p>make -C kernel/linux/linux-4.14/ CROSS_COMPILE=../../../kernel/system/tmp/toolchain/asdk-6.4.1-a55-EL-4.4-g2.26-a32nut-170810/bin/asdk-linux- modules  </p>
</blockquote>
<h3 id="æŒ‚è½½åˆ†åŒº"><a href="#æŒ‚è½½åˆ†åŒº" class="headerlink" title="æŒ‚è½½åˆ†åŒº"></a>æŒ‚è½½åˆ†åŒº</h3><blockquote>
<p>mount -o rw,remount /<br>mount -o rw,remount /vendor  </p>
</blockquote>
<h3 id="æ›´æ–°API"><a href="#æ›´æ–°API" class="headerlink" title="æ›´æ–°API"></a>æ›´æ–°API</h3><blockquote>
<p>cd kernel/android/pie<br>source build/envsetup.sh<br>lunch<br>make update-api  </p>
</blockquote>
<h3 id="Androidåˆ†åŒºæŸ¥çœ‹"><a href="#Androidåˆ†åŒºæŸ¥çœ‹" class="headerlink" title="Androidåˆ†åŒºæŸ¥çœ‹"></a>Androidåˆ†åŒºæŸ¥çœ‹</h3><ul>
<li><p>æŸ¥çœ‹åˆ†åŒºæ•°  </p>
<blockquote>
<p>cat /proc/partitions  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹åˆ†åŒºåå­—  </p>
<blockquote>
<p>ls -l /dev/block/by-name/  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹åˆ†åŒºæŒ‚è½½ç‚¹  </p>
<blockquote>
<p>cat /proc/mounts  </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ  </p>
<blockquote>
<p>df -h  </p>
</blockquote>
</li>
</ul>
<h3 id="dumpsys"><a href="#dumpsys" class="headerlink" title="dumpsys"></a>dumpsys</h3><p>dumpsys -l //æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡åç§°ï¼Œæ¥ç€å°±å¯ä»¥é€šè¿‡dumpsys + nameæŸ¥çœ‹æŸä¸ªæœåŠ¡çš„å…·ä½“ä¿¡æ¯<br>dumpsys activity //æŸ¥è¯¢AMSæœåŠ¡ç›¸å…³ä¿¡æ¯<br>dumpsys window //æŸ¥è¯¢WMSæœåŠ¡ç›¸å…³ä¿¡æ¯<br>dumpsys cpuinfo //æŸ¥è¯¢CPUæƒ…å†µ<br>dumpsys meminfo //æŸ¥è¯¢å†…å­˜æƒ…å†µ<br>dumpsys input //æŸ¥è¯¢linux eventä¸android keyeventçš„æ˜ å°„  </p>
<p>dumpsys activity a packagename //è·å–æŸä¸ªåº”ç”¨çš„Activityä¿¡æ¯<br>dumpsys activity s packagename //è·å–æŸä¸ªåº”ç”¨çš„Serviceä¿¡æ¯<br>dumpsys activity b packagename //è·å–æŸä¸ªåº”ç”¨çš„Broadcastä¿¡æ¯<br>dumpsys activity prov packagename //è·å–æŸä¸ªåº”ç”¨çš„Providerä¿¡æ¯<br>dumpsys activity p packagename //æŸ¥è¯¢æŸä¸ªåº”ç”¨çš„è¿›ç¨‹çŠ¶æ€  </p>
<p>dumpsys activity top //å½“å‰ç•Œé¢appçŠ¶æ€<br>dumpsys activity oom //æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€  </p>
<p>dumpsys usb dump-descriptors -dump-list //æŸ¥çœ‹USBæè¿°ç¬¦çŠ¶æ€</p>
<p>dumpsys activity | grep Focuse<br>cd kernel/android/nougat/packages/apps/<br>find -name â€œAndroidManifest.xmlâ€  | xargs grep -wnr â€œcom.android.tv.settingsâ€<br>ls kernel/android/nougat/packages/apps/TvSettings/Settings  </p>
<h3 id="ADBä½¿ç”¨"><a href="#ADBä½¿ç”¨" class="headerlink" title="ADBä½¿ç”¨"></a>ADBä½¿ç”¨</h3><p>å•æ¿è®¾ç½®ï¼š<br>setprop service.adb.tcp.port 5555<br>start adbd<br>ifconfig  </p>
<p>PCæœºè®¾ç½®ï¼š<br>ipconfigç¡®è®¤IPæ˜¯å¦è·Ÿå•æ¿åœ¨åŒä¸€ä¸ªç½‘æ®µä¸Š<br>Pingå•æ¿çš„IP<br>è¿æ¥ï¼šadb connect 192.168.1.105:5555<br>adb shell<br>adb kill-server #ç»ˆæ­¢adbæœåŠ¡è¿›ç¨‹  </p>
<h3 id="logcat"><a href="#logcat" class="headerlink" title="logcat"></a>logcat</h3><p>å¸¸ç”¨åŠŸèƒ½ï¼š<br>logcat -c //æ¸…ç©ºæ‰€æœ‰çš„æ—¥å¿—ç¼“å­˜ä¿¡æ¯<br>logcat -G 10M //è®¾ç½®ç¼“å­˜åŒºå¤§å°ä¸º10M<br>logcat -s MainActivity //è®¾ç½®è¾“å‡ºæ—¥å¿—çš„æ ‡ç­¾ï¼Œåªæ˜¾ç¤ºMainActivityæ ‡ç­¾çš„æ—¥å¿—<br>logcat -v time //è®¾ç½®æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œlogå¸¦æœ‰æ—¥æœŸ<br>logcat | grep &lt;è¿‡æ»¤å†…å®¹&gt; //æ ¹æ®å†…å®¹è¿‡æ»¤log<br>logcat CRYPTO:S //Sè¡¨ç¤ºä¸ºä¸è¾“å‡ºè¯¥æ ‡ç­¾çš„æ—¥å¿—<br>logcat | grep -vE â€œCRYPTOâ€ //æ»¤æ‰CRYPTO  </p>
<p>åº”ç”¨ï¼š<br>å¦‚ä½•æŸ¥çœ‹æŒ‡å®šåº”ç”¨çš„æ—¥å¿—ï¼Ÿä»¥åŒ…åä¸ºcom.realtek.dtvçš„åº”ç”¨ä¸ºä¾‹ï¼š  </p>
<ol>
<li>æŸ¥çœ‹åº”ç”¨è¿›ç¨‹å·<br>ps | grep com.realtek.dtv<br>è·å¾—ä¿¡æ¯ï¼Œå¯çŸ¥è¯¥åº”ç”¨çš„PIDä¸º1069ï¼š  <blockquote>
<p> 1069 1000       0:05 com.realtek.dtv<br> 2909 2000       0:00 grep com.realtek.dtv  </p>
</blockquote>
</li>
<li>è¿‡æ»¤è¯¥åº”ç”¨çš„æ—¥å¿—<br>logcat -c;logcat | grep 1069  </li>
</ol>
<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><p>åº”ç”¨å®‰è£…ï¼š<br>pm install /storage/udisk/sda1/.apk<br>pm uninstall com.test.selftest  ï¼ˆåŒ…åï¼‰ </p>
<p>ç¼–è¾‘æ¡†ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥ä¿¡æ¯ï¼š<br>input text 12345678  </p>
<p>bootcodeæŒ‡ä»¤çƒ§å½•:<br>usb start;<br>fatload usb 0:1 0x1500000 dvrboot.rescue.exe.bin;<br>go 0x1500000  </p>
<p>å‡çº§å†…æ ¸ï¼š<br>swuu vmlinux.pkg  </p>
<p>æ‰“å¼€KERNELæ‰“å°ä¿¡æ¯ï¼š<br>echo 7 4 1 7 &gt; /proc/sys/kernel/printk  </p>
<p>å…³é—­KERNELæ‰“å°ä¿¡æ¯ï¼š<br>echo 0 4 1 7 &gt; /proc/sys/kernel/printk  </p>
<p>æ‰“å¼€demodæ‰“å°ä¿¡æ¯ï¼š<br>echo â€œlog_onoff=1â€ &gt; /proc/rtkdemod/dbg  </p>
<p>å¼€bootcodeæ‰“å°ï¼š<br>ç¼–è¾‘bootcode/uboot/include/configs/rtd285o_common.h  </p>
<p>å¿«é€Ÿæ‰“å¼€ä¸€ä¸ªåº”ç”¨ï¼š<br>am start com.android.tv.settings/com.android.tv.settings.MainSettings  </p>
<p>è°ƒè¯•IRä¿¡æ¯ï¼š<br>rtd irda set_decode_dbg_en 1  </p>
<p>é€‰æ‹©IRåè®®ï¼š<br>rtd irda set_protocol 1  </p>
<p>å¿«é€Ÿå¤ä½ï¼š<br>am broadcast -a android.intent.action.MASTER_CLEAR  </p>
<p>è¾“å…¥è™šæ‹Ÿé”®ï¼š<br>input keyevent 26 //keycode_power  </p>
<p>æŸ¥çœ‹inputè®¾å¤‡çš„å±æ€§ï¼š<br>cat /proc/bus/input/devices  </p>
<p>ç¼–è¯‘å·®åˆ†åŒ…ï¼š<br>./build/tools/releasetools/ota_from_target_files -i ota_target_files_old.zip ota_target_files.zip update.zip  </p>
<p>å‡çº§OTAï¼š<br>touch /cache/recovery/command;<br>echo â€œâ€“update_package=/data/update.zipâ€ &gt; /cache/recovery/command;<br>echo â€œâ€“wipe_dataâ€ &gt;&gt; /cache/recovery/command;<br>sync;<br>reboot<br>æŒ‰ä½TAB  </p>
<p>æ‰“åŒ…ç³»ç»Ÿlogä¿¡æ¯ï¼š<br>tar cvf /mnt/media_rw/sda1/log.tar /tmp/var/log/ /data/anr/ /data/tombstones/;sync;</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>mmç¼–è¯‘å‡ºæ¥çš„è½¯ä»¶æ— æ³•å®‰è£…ï¼š<br>ä¸ç”Ÿæˆ<code>odex</code>ï¼Œåªç”Ÿæˆ<code>apk</code>ï¼Œå°±å¯ä»¥å®‰è£…äº†ã€‚<br>æŠŠ<code>Android.mk</code>çš„<code>LOCAL_DEX_PREOPT </code>è®¾å®šä¸º<code>false</code>ã€‚  </p>
<h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>æŒ‚åœ¨soçš„é—®é¢˜ï¼Œä¸€èˆ¬å¯ä»¥çœ‹<code>tombstones</code>æ–‡ä»¶ï¼Œæˆ–è€…ç”¨<code>addr2line</code>å·¥å…·å®šä½ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">addr2line -f -C -e libhbbtv_jni.so 0000381b</span><br></pre></td></tr></tbody></table></figure>
<p><code>-f</code>æ˜¾ç¤ºå‡½æ•°åç§°<br><code>-C</code>æ˜¾ç¤ºå‡½æ•°å‚æ•°  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>realtek</tag>
        <tag>android</tag>
        <tag>2851</tag>
      </tags>
  </entry>
  <entry>
    <title>[è½¬è½½]Android System Serverå¤§çº²ä¹‹LightsService</title>
    <url>/2019/03/19/lights-service/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»åŠŸèƒ½æœºä»¥æ¥ï¼Œæ‰‹æœºç­‰è®¾å¤‡å°±é…å¤‡äº†Ledé—ªå…‰ç¯ï¼Œå½“æœ‰æœªæ¥ç”µè¯ã€æœªè¯»çŸ­ä¿¡å’Œé€šçŸ¥ç­‰ç­‰ï¼ŒLedå°±ä¼šé—ªçƒã€‚å’ŒæŒ¯åŠ¨å™¨ç±»ä¼¼ï¼Œéƒ½æ˜¯ç»™ç”¨æˆ·ä¸€ç§äººæœºäº¤äº’çš„åé¦ˆï¼Œå“ªæ€•è¿™ç§äººæœºäº¤äº’æ˜¯é‚£ä¹ˆçš„ç®€å•ã€‚æ—¢ç„¶å®ƒæ˜¯ä¸€ä¸ªLedï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç¡¬ä»¶ï¼ŒAndroidç³»ç»Ÿä¸Šå±‚é©±åŠ¨è¿™ä¸ªç¡¬ä»¶çš„æœåŠ¡å°±æ˜¯LightsServiceï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªæ–‡ç« ä¹Ÿæ˜¯æè¿°ä¸€ä¸ªè½¯ç¡¬ä»¶ç»“åˆçš„åŠŸèƒ½ã€‚ä½†æ˜¯ä¸Šå±‚APPä¸èƒ½ç›´æ¥é©±åŠ¨Ledç¡¬ä»¶ï¼ŒLightsServiceæ˜¯ç³»ç»Ÿæ‰€ä½¿ç”¨ã€‚    </p>
<span id="more"></span>


<p>æ—¢ç„¶æ˜¯è½¯ç¡¬ç»“åˆçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆåœ¨Androidç³»ç»Ÿé‡Œï¼Œä»ä¸Šåˆ°ä¸‹å®ç°è¿™ä¸ªåŠŸèƒ½çš„æ¶æ„å¦‚ä¸‹ï¼š<br><img src="https://i.loli.net/2019/03/19/5c90af777f197.png" alt="FamilyYuan.png">  </p>
<h2 id="LightsServiceåˆå§‹åŒ–"><a href="#LightsServiceåˆå§‹åŒ–" class="headerlink" title="LightsServiceåˆå§‹åŒ–"></a>LightsServiceåˆå§‹åŒ–</h2><p>å›é¡¾ã€Š<a href="https://blog.csdn.net/myfriend0/article/details/55098173">Androidç³»ç»Ÿä¹‹System Serverå¤§çº²</a>ã€‹ä¸€æ–‡ï¼ŒLightsServiceåœ¨frameworks/base/services/java/com/android/server/SystemServer.javaä¸­çš„å¯åŠ¨è¿‡ç¨‹æ˜¯ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemServer</span> </span>{</span><br><span class="line">        <span class="comment">// Manages LEDs and display backlight so we need it to bring up the display.</span></span><br><span class="line">        mSystemServiceManager.startService(LightsService.class);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒLightsServiceæ˜¯é€šè¿‡SystemServiceManager.startService()çš„æ–¹å¼å¯åŠ¨ï¼Œåœ¨ã€Š<a href="https://blog.csdn.net/myfriend0/article/details/55098173">Androidç³»ç»Ÿä¹‹System Serverå¤§çº²</a>ã€‹ä¸€æ–‡ä¸­æåˆ°çš„Androidç³»ç»Ÿçš„å„ç§æœåŠ¡çš„å¯åŠ¨æ–¹å¼å¯çŸ¥ï¼ŒLightsServiceæ˜¯ç»§æ‰¿äº†SystemServiceï¼ŒLightsServiceå¯åŠ¨åä¼šå›è°ƒonStart()æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>{</span><br><span class="line">        publishLocalService(LightsManager.class, mService);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šè¿°ä»£ç åœ¨frameworks/base/services/core/java/com/android/server/lights/LightsService.javaä¸­ã€‚<br>åœ¨ã€Š<a href="https://blog.csdn.net/myfriend0/article/details/55098173">Androidç³»ç»Ÿä¹‹System Serverå¤§çº²</a>ã€‹ä¸€æ–‡ä¸­æåˆ°ï¼ŒpublishLocalService()çš„ä½œç”¨ï¼Œè¿™é‡Œæ˜¯æŠŠmServiceæ¨è¿›LocalServicesä¸­ï¼Œæ‰€ä»¥å¤–éƒ¨å¼•ç”¨LightsServiceæ—¶ï¼Œå®é™…æ˜¯æ‹¿åˆ°mServiceè¿™ä¸ªå¯¹è±¡ã€‚mServiceçš„ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LightsManager mService = <span class="keyword">new</span> LightsManager() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Light <span class="title">getLight</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">            <span class="keyword">if</span> (id &lt; LIGHT_ID_COUNT) {</span><br><span class="line">                <span class="keyword">return</span> mLights[id];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>mServiceçš„å®è´¨æ˜¯ä¸€ä¸ªLightsManagerï¼ŒLightsManageråªæä¾›ä¸€ä¸ªæ–¹æ³•getLight(int id)ï¼Œä»æ•°ç»„mLightsä¸­åŒ¹é…ä¸€ä¸ªè¿”å›å€¼ï¼Œè¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿçœ‹mLights[]çš„æœ¬è´¨ï¼Œå¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> LightImpl mLights[] = <span class="keyword">new</span> LightImpl[LightsManager.LIGHT_ID_COUNT];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>mLights[]çš„å®è´¨ä¸€ä¸ªLightImplçš„æ•°ç»„ï¼Œæ‰€ä»¥LightsManagerçš„getLight(int id)è¿”å›çš„æ˜¯ä¸€ä¸ªLightImplçš„å®ä¾‹ï¼ŒLightImplçš„ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LightImpl</span> <span class="keyword">extends</span> <span class="title">Light</span> </span>{</span><br><span class="line"></span><br><span class="line">        ......</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlashing</span><span class="params">(<span class="keyword">int</span> color, <span class="keyword">int</span> mode, <span class="keyword">int</span> onMS, <span class="keyword">int</span> offMS)</span> </span>{</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">                setLightLocked(color, mode, onMS, offMS, BRIGHTNESS_MODE_USER);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">       ......</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>LightImplå®é™…æ˜¯Lightçš„å­ç±»ï¼Œè€ŒLightå®è´¨æ˜¯ä¸€ä¸ªledç¡¬ä»¶çš„æŠ½è±¡ï¼Œé‚£ä¹ˆä¸€ä¸ªledå°±è¢«æŠ½è±¡æˆä¸€ä¸ªLightå¯¹è±¡ã€‚å› æ­¤ï¼Œè¦æ§åˆ¶ledï¼Œåªè¦æ‹¿åˆ°ledçš„æŠ½è±¡å¯¹è±¡Lightå³å¯å®ç°é©±åŠ¨ledã€‚  </p>
<p>å›å¤´å†çœ‹çœ‹LightsServiceçš„åˆå§‹åŒ–ï¼ŒLightsServiceçš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LightsService</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line"></span><br><span class="line">        mNativePointer = init_native();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; LightsManager.LIGHT_ID_COUNT; i++) {</span><br><span class="line">            mLights[i] = <span class="keyword">new</span> LightImpl(i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šæ–‡æåˆ°çš„LightImplæ•°ç»„mLightså°±æ˜¯åœ¨LightsServiceä¸­è¢«åˆå§‹åŒ–äº†ï¼Œè¿™é‡Œä¼šæ ¹æ®LightsManager.LIGHT_ID_COUNTçš„æ€»æ•°å¾ªç¯ç”ŸæˆLightImplçš„å®ä¾‹ä¿å­˜åœ¨mLightsæ•°ç»„ä¸­ã€‚è¿™é‡Œçš„LightsManager.LIGHT_ID_COUNTçš„å€¼æ˜¯8ï¼Œä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">LightsManager</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_BACKLIGHT = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_KEYBOARD = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_BUTTONS = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_BATTERY = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_NOTIFICATIONS = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_ATTENTION = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_BLUETOOTH = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_WIFI = <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_ID_COUNT = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Light <span class="title">getLight</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä»LIGHT_ID_BACKLIGHTåˆ°LIGHT_ID_WIFIå…±8ä¸ªï¼Œè¿™é‡Œæ˜¯å¦è¡¨ç¤º8ä¸ªledå‘¢ï¼Œåæ–‡åœ¨è®ºè¿°æ¸…æ¥šã€‚å›åˆ°LightsServiceçš„æ„é€ æ–¹æ³•ï¼Œè°ƒç”¨äº†init_native()æ–¹æ³•ï¼Œå½“ç„¶ï¼Œç†Ÿæ‚‰Androidæ¶æ„çš„éƒ½æ¸…æ¥šï¼Œå…¶å®ƒç¡¬ä»¶çš„æœåŠ¡å’ŒLightsServiceä¸€æ ·ï¼Œéƒ½æœ‰è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ã€‚ç›®çš„å°±æ˜¯LightsServiceå¯åŠ¨æ—¶ï¼Œè°ƒç”¨init_native()åˆå§‹åŒ–ç¡¬ä»¶ï¼Œä¹Ÿå°±æ˜¯è½¯ç¡¬ä»¶çš„é€šé“åœ¨init_native()è¿™ä¸ªæ–¹æ³•ä¸­æ‰“é€šã€‚init_native()æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œå¯¹åº”çš„JNIæ¥å£æ˜¯ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> jlong <span class="title">init_native</span><span class="params">(JNIEnv* <span class="comment">/* env */</span>, jobject <span class="comment">/* clazz */</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> err;</span><br><span class="line">    hw_module_t* <span class="keyword">module</span>;</span><br><span class="line">    Devices* devices;</span><br><span class="line"></span><br><span class="line">    devices = (Devices*)malloc(sizeof(Devices));</span><br><span class="line"></span><br><span class="line">    err = hw_get_module(LIGHTS_HARDWARE_MODULE_ID, (hw_module_t <span class="keyword">const</span>**)&amp;<span class="keyword">module</span>);</span><br><span class="line">    <span class="keyword">if</span> (err == <span class="number">0</span>) {</span><br><span class="line">        ......</span><br><span class="line">        devices-&gt;lights[LIGHT_INDEX_NOTIFICATIONS]</span><br><span class="line">                = get_device(<span class="keyword">module</span>, LIGHT_ID_NOTIFICATIONS);</span><br><span class="line">        ......</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        memset(devices, <span class="number">0</span>, sizeof(Devices));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (jlong)devices;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/jni/com_android_server_lights_LightsService.cppä¸­ã€‚  </p>
<p>init_native()ä¸­é¦–å…ˆè°ƒç”¨äº†hw_get_module()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ‰“å¼€ç¡¬ä»¶è®¾å¤‡ï¼Œè¿™ä¸ªæ˜¯å‡½æ•°çš„å®ç°è¿‡ç¨‹åœ¨hardware/libhardware/hardware.cä¸­ï¼Œå¯¹Android HALç†Ÿæ‚‰çš„è¯»è€…ï¼Œåº”è¯¥å¾ˆç†Ÿæ‚‰è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ¬æ–‡ä¹Ÿä¸å¾€ä¸‹èµ˜è¿°è¿™ä¸ªè¿‡ç¨‹äº†ã€‚ç„¶åé€šè¿‡è°ƒç”¨get_device()å‡½æ•°å–å¾—è¿”å›å€¼èµ‹å€¼Devicesçš„å˜é‡lightsï¼Œget_device()çš„ä¸€ä¸ªå‚æ•°æ˜¯LIGHT_ID_NOTIFICATIONSï¼Œè¿™å’Œä¸Šæ–‡ä¸­LightsManagerçš„8ä¸ªled idæ˜¯å¯¹åº”çš„ã€‚Devicesçš„å˜é‡lightsçš„å®è´¨æ˜¯ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">struct Devices {</span><br><span class="line">    light_device_t* lights[LIGHT_COUNT];</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>light_device_tå®šä¹‰åœ¨hardware/libhardware/include/hardware/lights.hæ–‡ä»¶ä¸­ã€‚å›åˆ°init_native()å‡½æ•°ï¼Œæ¥ç€çœ‹get_device()è¿™ä¸ªå‡½æ•°ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> light_device_t* get_device(hw_module_t* <span class="keyword">module</span>, <span class="keyword">char</span> <span class="keyword">const</span>* name)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">int</span> err;</span><br><span class="line">    hw_device_t* device;</span><br><span class="line">    err = <span class="keyword">module</span>-&gt;methods-&gt;open(<span class="keyword">module</span>, name, &amp;device);</span><br><span class="line">    <span class="keyword">if</span> (err == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span> (light_device_t*)device;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> NULL;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>é€šè¿‡module-&gt;methods-&gt;open()æ‰“å¼€ç¡¬ä»¶è®¾å¤‡ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬æ–‡å°±ä¸å†èµ˜è¿°äº†ã€‚æ‰“å¼€è®¾å¤‡é€šé“åï¼Œå–å¾—light_device_tï¼Œä¿å­˜åœ¨Devicesçš„æ•°ç»„lightsä¸­ï¼Œè¿™å’ŒLightsServiceä¸Šæ–‡ä¸­çš„LightImplçš„æ•°ç»„mLightsä¹Ÿæ˜¯å¯¹åº”çš„å…³ç³»ã€‚  </p>
<h2 id="é€šè¿‡LightsServiceå¯åŠ¨Led"><a href="#é€šè¿‡LightsServiceå¯åŠ¨Led" class="headerlink" title="é€šè¿‡LightsServiceå¯åŠ¨Led"></a>é€šè¿‡LightsServiceå¯åŠ¨Led</h2><p>APPè™½ç„¶ä¸èƒ½ç›´æ¥é©±åŠ¨ledï¼Œä½†æ˜¯ledä¸€èˆ¬ä¹Ÿæ˜¯ä¸ºAndroidçš„Notificationæ‰€ä½¿ç”¨ï¼Œæ‰€ä»¥APPå‘èµ·ä¸€ä¸ªé€šçŸ¥ï¼Œledä¹Ÿä¼šé—ªçƒã€‚æœ¬æ–‡å°±ä»Androidçš„notificationå…¥æ‰‹ï¼Œåˆ†æé©±åŠ¨ledçš„è¿‡ç¨‹ã€‚  </p>
<p>APPåˆ›å»ºNotificationæ—¶ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•æŒ‡å®šè¿™ä¸ªnotificationéœ€è¦ledï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Builder <span class="title">setLights</span><span class="params">(<span class="meta">@ColorInt</span> <span class="keyword">int</span> argb, <span class="keyword">int</span> onMs, <span class="keyword">int</span> offMs)</span> </span>{</span><br><span class="line">    mN.ledARGB = argb;</span><br><span class="line">    mN.ledOnMS = onMs;</span><br><span class="line">    mN.ledOffMS = offMs;</span><br><span class="line">    <span class="keyword">if</span> (onMs != <span class="number">0</span> || offMs != <span class="number">0</span>) {</span><br><span class="line">        mN.flags |= FLAG_SHOW_LIGHTS;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æœ¬æ–‡æš‚æ—¶ä¸å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œè¿‡å¤šçš„é˜è¿°ï¼Œä¼šåœ¨ä»¥åçš„æ–‡ç« ä¸­å†è¯¦ç»†ä»‹ç»Androidçš„notificationæœºåˆ¶ã€‚å½“ç„¶APPå¦‚æœä¸è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆAndroidç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºAPPçš„notificationé€‰å–é»˜è®¤å€¼ã€‚  </p>
<p>APPçš„notificationé€šçŸ¥åˆ°Androidç³»ç»Ÿä»¥åï¼Œå°±ä¼šé©±åŠ¨ledé—ªçƒèµ·æ¥ã€‚åœ¨ä¸Šæ–‡LightsServiceçš„åˆå§‹åŒ–ä¸­æåˆ°ï¼Œledç¡¬ä»¶å·²ç»æŠ½è±¡æˆä¸€ä¸ªLightå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¾¿æ˜¯LightImplï¼Œè·å–åˆ°LightImplçš„å®ä¾‹ï¼Œä¾¿å¯é©±åŠ¨ledã€‚Androidçš„notificationè·å–LightImplçš„ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotificationManagerService</span> <span class="keyword">extends</span> <span class="title">SystemService</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> LightsManager lights = getLocalService(LightsManager.class);</span><br><span class="line">    mNotificationLight = lights.getLight(LightsManager.LIGHT_ID_NOTIFICATIONS);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªç±»å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.javaä¸­ã€‚  </p>
<p>åœ¨ä¸Šæ–‡LightsServiceçš„åˆå§‹åŒ–ä¸­å¯çŸ¥ï¼ŒLightsServiceè¢«æ¨è¿›åˆ°LocalServiceä¸­ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡getLocalService()è·å–åˆ°LightsManagerï¼Œç„¶åå†é€šè¿‡getLight()æ–¹æ³•ï¼Œè·å–åˆ°LightImplçš„å®ä¾‹ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨ä¸Šæ–‡LightsServiceçš„åˆå§‹åŒ–ä¸­å·²ç»é˜è¿°çš„å¾ˆæ˜ç™½ã€‚è·å–åˆ°äº†LightImplï¼Œé€šè¿‡ä»€ä¹ˆæ¥å£é©±åŠ¨ledå‘¢ï¼Ÿå…ˆçœ‹çœ‹LightImplçš„ç»“æ„ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Light</span> </span>{</span><br><span class="line">    ......</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setBrightness</span><span class="params">(<span class="keyword">int</span> brightness)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setBrightness</span><span class="params">(<span class="keyword">int</span> brightness, <span class="keyword">int</span> brightnessMode)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">int</span> color)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setFlashing</span><span class="params">(<span class="keyword">int</span> color, <span class="keyword">int</span> mode, <span class="keyword">int</span> onMS, <span class="keyword">int</span> offMS)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">pulse</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">pulse</span><span class="params">(<span class="keyword">int</span> color, <span class="keyword">int</span> onMS)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªç±»å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/lights/Light.javaä¸­ã€‚  </p>
<p>å¦‚ä¸Šé¢çš„ä»£ç ï¼ŒLightImplæä¾›setBrightness()è®¾ç½®äº®åº¦ã€setColorè®¾ç½®é¢œè‰²ã€setFlashingå¯åŠ¨ledç­‰7ä¸ªæ–¹æ³•ã€‚å› æ­¤ï¼ŒAnroid notificationé©±åŠ¨ledçš„ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">mNotificationLight.setFlashing(ledARGB, Light.LIGHT_FLASH_TIMED,ledOnMS, ledOffMS);</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.javaä¸­ã€‚<br>setFlashing()æ¥æ”¶å››ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå½“ç„¶æ˜¯é¢œè‰²ï¼Œç±»å‹æ˜¯rgbï¼›ç¬¬äºŒå‚æ•°æ˜¯modeï¼Œæ•°å€¼åˆ†åˆ«æ˜¯å¯ä»¥æ˜¯ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_FLASH_NONE = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_FLASH_TIMED = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LIGHT_FLASH_HARDWARE = <span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™äº›å˜é‡å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/lights/Light.javaä¸­ã€‚<br>ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªæ˜¯ä¸€å¯¹ç›¸åçš„å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºledé—ªçƒæ—¶äº®çš„æ—¶é—´ï¼Œledé—ªçƒæ—¶ç­çš„æ—¶é—´ã€‚æ¥ç€çœ‹setFlashing()çš„å®ç°ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LightImpl</span> <span class="keyword">extends</span> <span class="title">Light</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlashing</span><span class="params">(<span class="keyword">int</span> color, <span class="keyword">int</span> mode, <span class="keyword">int</span> onMS, <span class="keyword">int</span> offMS)</span> </span>{</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">            setLightLocked(color, mode, onMS, offMS, BRIGHTNESS_MODE_USER);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/lights/LightsService.javaä¸­ã€‚<br>ç›´æ¥è°ƒç”¨äº†setLightLocked()ï¼Œä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LightImpl</span> <span class="keyword">extends</span> <span class="title">Light</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setLightLocked</span><span class="params">(<span class="keyword">int</span> color, <span class="keyword">int</span> mode, <span class="keyword">int</span> onMS, <span class="keyword">int</span> offMS, <span class="keyword">int</span> brightnessMode)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (!mLocked &amp;&amp; (color != mColor || mode != mMode || onMS != mOnMS || offMS != mOffMS ||</span><br><span class="line">            mBrightnessMode != brightnessMode)) {</span><br><span class="line">        <span class="keyword">if</span> (DEBUG) Slog.v(TAG, <span class="string">"setLight #"</span> + mId + <span class="string">": color=#"</span></span><br><span class="line">                + Integer.toHexString(color) + <span class="string">": brightnessMode="</span> + brightnessMode);</span><br><span class="line">        mLastColor = mColor;</span><br><span class="line">        mColor = color;</span><br><span class="line">        mMode = mode;</span><br><span class="line">        mOnMS = onMS;</span><br><span class="line">        mOffMS = offMS;</span><br><span class="line">        mLastBrightnessMode = mBrightnessMode;</span><br><span class="line">        mBrightnessMode = brightnessMode;</span><br><span class="line">        Trace.traceBegin(Trace.TRACE_TAG_POWER, <span class="string">"setLight("</span> + mId + <span class="string">", 0x"</span></span><br><span class="line">                + Integer.toHexString(color) + <span class="string">")"</span>);</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            setLight_native(mNativePointer, mId, color, mode, onMS, offMS, brightnessMode);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            Trace.traceEnd(Trace.TRACE_TAG_POWER);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/java/com/android/server/lights/LightsService.javaä¸­ã€‚  </p>
<p>å¯¹å‚æ•°æ•´ç†ä¸€éåï¼Œè°ƒç”¨äº†JNIæ–¹æ³•setLight_native()ï¼Œè¿™é‡Œçš„ç¬¬äºŒä¸ªå‚æ•°ä¾¿æ˜¯LightsManager.LIGHT_ID_NOTIFICATIONS = 4ï¼›ç»§ç»­å¾€ä¸‹çœ‹setLight_native()ï¼š  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setLight_native</span><span class="params">(JNIEnv* <span class="comment">/* env */</span>, jobject <span class="comment">/* clazz */</span>, jlong ptr,</span></span></span><br><span class="line"><span class="params"><span class="function">        jint light, jint colorARGB, jint flashMode, jint onMS, jint offMS, jint brightnessMode)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Devices* devices = (Devices*)ptr;</span><br><span class="line">    <span class="keyword">light_state_t</span> state;</span><br><span class="line">    ......</span><br><span class="line">    state.brightnessMode = brightnessMode;</span><br><span class="line"></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">ALOGD_IF_SLOW</span>(<span class="number">50</span>, <span class="string">"Excessive delay setting light"</span>);</span><br><span class="line">        devices-&gt;lights[light]-&gt;<span class="built_in">set_light</span>(devices-&gt;lights[light], &amp;state);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨æ–‡ä»¶frameworks/base/services/core/jni/com_android_server_lights_LightsService.cppä¸­ã€‚  </p>
<p>set_light()çš„å®šä¹‰æ˜¯åœ¨æ–‡ä»¶hardware/libhardware/include/hardware/lights.hä¸­ï¼Œå…·ä½“å®ç°ï¼Œå°±å› ledçš„ç¡¬ä»¶å‚å•†ä¸åŒè€Œä¸åŒäº†ï¼Œè¿™é‡Œä»¥æŸä¸ªledçš„å‚å•†ä¸ºä¾‹ï¼š  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">open_lights</span><span class="params">(<span class="keyword">const</span> struct <span class="keyword">hw_module_t</span> *<span class="keyword">module</span>, <span class="keyword">char</span> <span class="keyword">const</span> *name,</span></span></span><br><span class="line"><span class="params"><span class="function">               struct <span class="keyword">hw_device_t</span> **device)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dragon_lights</span> *<span class="title">lights</span>;</span></span><br><span class="line">    ......</span><br><span class="line">    lights-&gt;base.set_light = set_light_backlight;</span><br><span class="line"></span><br><span class="line">    *device = (struct <span class="keyword">hw_device_t</span> *)lights;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åœ¨ledé€šé“åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œset_light()å‡½æ•°å®é™…è°ƒç”¨çš„æ˜¯set_light_backlightå‡½æ•°ï¼Œset_light_backlightå‡½æ•°å¦‚ä¸‹ï¼š  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">set_light_backlight</span><span class="params">(struct <span class="keyword">light_device_t</span> *dev,</span></span></span><br><span class="line"><span class="params"><span class="function">                   struct <span class="keyword">light_state_t</span> <span class="keyword">const</span> *state)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dragon_lights</span> *<span class="title">lights</span> =</span> <span class="built_in">to_dragon_lights</span>(dev);</span><br><span class="line">    <span class="keyword">int</span> err, brightness_idx;</span><br><span class="line">    <span class="keyword">int</span> brightness = <span class="built_in">rgb_to_brightness</span>(state);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (brightness &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// Get the bin number for brightness (0 to kNumBrightnessLevels - 1)</span></span><br><span class="line">        brightness_idx = (brightness - <span class="number">1</span>) * kNumBrightnessLevels / <span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get brightness level</span></span><br><span class="line">        brightness = kBrightnessLevels[brightness_idx];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;lights-&gt;lock);</span><br><span class="line">    err = <span class="built_in">write_brightness</span>(lights, brightness);</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;lights-&gt;lock);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> err;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è·Ÿè¸ªåˆ°è¿™é‡Œï¼Œæœ¬æ–‡ä¹Ÿå°±ä¸å¾€ä¸‹è·Ÿè¸ªäº†ï¼Œè¿™äº›ä»£ç éƒ½ä¼šå› ledå‚å•†ä¸åŒè€Œä¸åŒã€‚é©±åŠ¨ledçš„è¿‡ç¨‹å°±åˆ°æ­¤ç»“æŸã€‚  </p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡é˜è¿°äº†LightsServiceçš„ä½œç”¨ï¼Œä»æ‰“å¼€ç¡¬ä»¶é€šé“å’Œé©±åŠ¨ç¡¬ä»¶ledé—ªçƒèµ·æ¥çš„è¿‡ç¨‹ï¼Œè™½ç„¶APPæ˜¯ä¸å¯ä»¥ç›´æ¥é©±åŠ¨ledï¼Œä½†æ˜¯ledå‡ ä¹éƒ½æ˜¯ä¸ºandroid notificationæ‰€ç”¨ï¼Œæ‰€ä»¥ï¼ŒAPPå‘å¸ƒçš„notificationä¹Ÿå¯ä»¥ä½¿ç”¨ledï¼Œé€šçŸ¥ç”¨æˆ·æœ‰æ–°çš„çŠ¶æ€ã€‚å¯¹äºä¸Šæ–‡æåˆ°çš„ledé¢œè‰²ï¼Œå¯¹äºå¾ˆå¤šè®¾å¤‡ï¼Œæ˜¯ä¸æ”¯æŒè®¾ç½®é¢œè‰²äº†çš„ï¼Œè®¾ç½®äº†ä¹Ÿåªèƒ½æ˜¯ä¸€ç§é¢œè‰²ï¼Œæ‰€ä»¥åœ¨è¿™äº›è®¾å¤‡ä¸Šï¼Œå¯ä»¥è¯´æ˜¯å¤§å¤šæ•°è®¾å¤‡ï¼Œè¿™ä¸ªåŠŸèƒ½åŸºæœ¬å°±æ²¡æœ‰ä»»ä½•ç”¨å¤„ã€‚å¦å¤–ï¼Œå› ledç¡¬ä»¶çš„ä¸åŒï¼Œæ–‡ç« ä¸­æåˆ°çš„8ä¸ªled idï¼Œå¯èƒ½æœ‰ï¼Œå¯èƒ½æ²¡æœ‰ã€‚  </p>
<hr>
<ol>
<li><span class="github-emoji"><span>ğŸ‘‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <a href="https://blog.csdn.net/myfriend0/article/details/56482594">åŸæ–‡é“¾æ¥</a>  </li>
<li>ç½‘ä¸Šå¦å¤–ä¸€ç¯‡ä¸é”™çš„æ–‡ç« ï¼š<a href="https://blog.csdn.net/zhangchiytu/article/details/7958513">lightsä»ä¸Šåˆ°ä¸‹çš„æµç¨‹</a>  </li>
</ol>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>service</tag>
      </tags>
  </entry>
  <entry>
    <title>iHerbç¤¼åˆ¸ç </title>
    <url>/2019/08/08/iherb/</url>
    <content><![CDATA[<p>åˆ†äº«æˆ‘çš„iHerbç¤¼åˆ¸ç </p>
<span id="more"></span>


<p><a href="https://cn.iherb.com/?rcode=BKZ9932">BKZ9932</a></p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>nutrition</tag>
        <tag>protein</tag>
        <tag>bulking</tag>
      </tags>
  </entry>
  <entry>
    <title>GDBä½¿ç”¨</title>
    <url>/2019/05/23/gdb/</url>
    <content><![CDATA[<p>GDBé€ŸæŸ¥ã€‚  </p>
<span id="more"></span>


<p>å¸¸è§è°ƒè¯•å‘½ä»¤  </p>
<table>
<thead>
<tr>
<th align="left">å‘½ä»¤å</th>
<th align="left">å‘½ä»¤ç¼©å†™</th>
<th align="left">å‘½ä»¤è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">backtrace</td>
<td align="left">bt</td>
<td align="left">æŸ¥çœ‹å‡½æ•°è°ƒç”¨å †æ ˆ</td>
</tr>
<tr>
<td align="left">frame</td>
<td align="left">f</td>
<td align="left">æŸ¥çœ‹æ ˆå¸§</td>
</tr>
<tr>
<td align="left">list</td>
<td align="left">l</td>
<td align="left">æŸ¥çœ‹æºç </td>
</tr>
<tr>
<td align="left">print</td>
<td align="left">p</td>
<td align="left">æ‰“å°å†…éƒ¨å˜é‡å€¼</td>
</tr>
<tr>
<td align="left">info</td>
<td align="left">i</td>
<td align="left">æŸ¥çœ‹ç¨‹åºçŠ¶æ€</td>
</tr>
<tr>
<td align="left">display</td>
<td align="left">disp</td>
<td align="left">è·Ÿè¸ªæŸå˜é‡ï¼Œæ¯æ¬¡åœä¸‹æ¥åˆ™æ˜¾ç¤ºå€¼</td>
</tr>
<tr>
<td align="left">run</td>
<td align="left">r</td>
<td align="left">å¼€å§‹è¿è¡Œç¨‹åº</td>
</tr>
<tr>
<td align="left">continue</td>
<td align="left">c</td>
<td align="left">ç»§ç»­ç¨‹åºè¿è¡Œï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹</td>
</tr>
<tr>
<td align="left">break</td>
<td align="left">b</td>
<td align="left">è®¾ç½®æ–­ç‚¹</td>
</tr>
<tr>
<td align="left">start</td>
<td align="left">s</td>
<td align="left">å¼€å§‹æ‰§è¡Œç¨‹åº</td>
</tr>
<tr>
<td align="left">step</td>
<td align="left">s</td>
<td align="left">æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ï¼Œè‹¥è¯¥è¯­å¥ä¸ºå‡½æ•°è°ƒç”¨ï¼Œåˆ™è¿›å…¥å‡½æ•°å†…çš„ç¬¬ä¸€æ¡è¯­å¥</td>
</tr>
<tr>
<td align="left">next</td>
<td align="left">n</td>
<td align="left">æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ï¼Œä¸ä¼šè¿›å…¥å‡½æ•°å†…éƒ¨æ‰§è¡Œ</td>
</tr>
<tr>
<td align="left">watch</td>
<td align="left"></td>
<td align="left">ç›‘è§†å˜é‡å€¼çš„å˜åŒ–</td>
</tr>
<tr>
<td align="left">file</td>
<td align="left"></td>
<td align="left">è£…å…¥éœ€è¦è°ƒè¯•çš„ç¨‹åº</td>
</tr>
<tr>
<td align="left">set var name=v</td>
<td align="left"></td>
<td align="left">è®¾ç½®å˜é‡çš„å€¼</td>
</tr>
<tr>
<td align="left">kill</td>
<td align="left">k</td>
<td align="left">æ€æ‰æ­£åœ¨è°ƒè¯•çš„ç¨‹åº</td>
</tr>
<tr>
<td align="left">quit</td>
<td align="left">q</td>
<td align="left">é€€å‡ºGDBç¯å¢ƒ</td>
</tr>
</tbody></table>
<p>ä¸¾ä¾‹  </p>
<table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">info threads</td>
<td align="left">æ˜¾ç¤ºå½“å‰å¯è°ƒè¯•çš„æ‰€æœ‰çº¿ç¨‹</td>
</tr>
<tr>
<td align="left">t 23</td>
<td align="left">è·³åˆ°Thread ID 23</td>
</tr>
<tr>
<td align="left">f 1</td>
<td align="left">è·³åˆ°ç¬¬ä¸€å¸§</td>
</tr>
<tr>
<td align="left">thread apply all bt</td>
<td align="left">æŸ¥çœ‹æ‰€æœ‰çº¿ç¨‹å †æ ˆä¿¡æ¯</td>
</tr>
<tr>
<td align="left">break 16</td>
<td align="left">è®¾ç½®æ–­ç‚¹ï¼Œåœ¨æºç¨‹åºç¬¬16è¡Œå¤„</td>
</tr>
<tr>
<td align="left">break func</td>
<td align="left">è®¾ç½®æ–­ç‚¹ï¼Œåœ¨å‡½æ•°func( )å…¥å£å¤„</td>
</tr>
<tr>
<td align="left">info break</td>
<td align="left">æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">p i</td>
<td align="left">æ‰“å°å˜é‡içš„å€¼</td>
</tr>
<tr>
<td align="left">finish</td>
<td align="left">é€€å‡ºå‡½æ•°</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>gdb</tag>
        <tag>debug</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€å§‹å¥èº«</title>
    <url>/2019/08/08/kaike/</url>
    <content><![CDATA[<p>BE BETTER TOMORROW THAN YOU ARE TODAY!  </p>
<span id="more"></span>


<p>èº«é«˜170cmå·¦å³ï¼Œå¤§å­¦æœŸé—´ä½“é‡åœ¨102æ–¤åˆ°104æ–¤ä¹‹é—´æµ®åŠ¨ï¼Œèº«æå¾ˆç˜¦ã€‚2016å¹´å¹´ä¸­å¼€å§‹å·¥ä½œä¹‹åï¼Œæ²¡å¤šä¹…å°±æœ‰äº†å¥èº«çš„æƒ³æ³•ï¼Œå½“æ—¶è¿˜ä¸æƒ³å»å¥èº«æˆ¿ï¼Œæƒ³ä»å¯å®¤å¥èº«å¼€å§‹ï¼Œäºæ˜¯åœ¨å…¬å¸å®¿èˆä½äº†å¤§æ¦‚åŠå¹´åï¼Œæ¬å‡ºå»å¼€å§‹è‡ªå·±ç§Ÿæˆ¿å­ï¼Œå¤§æ¦‚2017å¹´å¹´ä¸­ï¼Œç»ˆäºä¹°äº†ä¸€ä¸ªå“‘é“ƒå‡³å’Œä¸€å¯¹å“‘é“ƒæ”¾åœ¨å°å‡ºç§Ÿå±‹é‡Œï¼Œæœç„¶ï¼Œé—²ç½®äº†ä¸€å¹´åŠï¼Œæœ€åäºŒæ‰‹å‡ºäº†ã€‚å¥èº«å¤±è´¥ã€‚  </p>
<p>æ—¶é—´æ¥åˆ°äº†2019å¹´4æœˆã€‚åŠé€”è€ŒåºŸçš„æŒ«è´¥æ„Ÿè®©æˆ‘éš¾å ªï¼Œé€‚é€¢<a href="https://zhuanlan.zhihu.com/Uncle-Zhuo">å“å”</a>æ–°é¦†å¼€å¼ ï¼Œæˆ‘ç»ˆäºä¸‹å®šå†³å¿ƒå¥èº«äº†ï¼ŒèŠ±äº†æ¥è¿‘5000å—é’±ä¹°äº†20èŠ‚è¯¾ï¼Œè¿™æ˜¯æˆ‘èŠ±é’±æœ€å¤šçš„ä¸€æ¬¡å•æ¬¡æ¶ˆè´¹ï¼å§æ§½ï¼Œç»ˆäºè¦å¼€å§‹äº†ã€‚å‰æœŸä¸€å‘¨ä¸¤èŠ‚è¯¾ï¼Œåˆ†åŒ–å¼€å§‹åä¸€å‘¨ä¸‰èŠ‚è¯¾ï¼ŒæŒ‰ç…§è¿™ä¸ªé¢‘ç‡ï¼Œè¯¾å¾ˆå¿«å°±å­¦å®Œäº†ï¼Œè§‰å¾—æ”¶è·å¾ˆå¤§ã€‚å…¬å¸ç°åœ¨æäº†ä¸ªå°å‹å¥èº«æˆ¿ï¼Œæˆ‘ç°åœ¨å¼€å§‹åœ¨å…¬å¸ç»ƒå•¦ï¼Œå¯¹æˆ‘æœ‰ç”¨çš„åªæœ‰ä¸ªå²å¯†æ–¯æœºã€ä¸€ä¸ªå“‘é“ƒå‡³å’Œä¸€æ¶å­å“‘é“ƒï¼Œæ€»æ¯”æ²¡æœ‰å¥½å§ï¼å²å¯†æ–¯æœºç»ƒä¸‰å¤§é¡¹å¾ˆéš¾å—ï¼æ²¡åŠæ³•æ­£å¸¸åšç¡¬æ‹‰å’Œæ é“ƒå§æ¨ï¼Œæ§½ç³•ï¼  </p>
<p>5æœˆ1å·å’Œ8æœˆ7å·çš„è‡ªæ‹ï¼Œæœ‰ç‚¹å°è¿›æ­¥ï¼Œå˜»å˜»ã€‚  </p>
<p>æœŸå¾…æ˜å¹´ä»Šæ—¥ã€‚  </p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>bulking</tag>
        <tag>fitness</tag>
        <tag>workout</tag>
        <tag>muscle</tag>
        <tag>training</tag>
        <tag>health</tag>
      </tags>
  </entry>
  <entry>
    <title>CRCæŸ¥è¡¨</title>
    <url>/2019/08/09/crc/</url>
    <content><![CDATA[<p>å¤åˆ¶ä¸‹æ¥ã€‚</p>
<span id="more"></span>


<p>ä»£ç å¦‚ä¸‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> crcTable[<span class="number">256</span>] = {</span><br><span class="line"><span class="number">0x00000000</span>, <span class="number">0x77073096</span>, <span class="number">0xEE0E612C</span>, <span class="number">0x990951BA</span>, <span class="number">0x076DC419</span>, <span class="number">0x706AF48F</span>,</span><br><span class="line"><span class="number">0xE963A535</span>, <span class="number">0x9E6495A3</span>, <span class="number">0x0EDB8832</span>, <span class="number">0x79DCB8A4</span>, <span class="number">0xE0D5E91E</span>, <span class="number">0x97D2D988</span>,</span><br><span class="line"><span class="number">0x09B64C2B</span>, <span class="number">0x7EB17CBD</span>, <span class="number">0xE7B82D07</span>, <span class="number">0x90BF1D91</span>, <span class="number">0x1DB71064</span>, <span class="number">0x6AB020F2</span>,</span><br><span class="line"><span class="number">0xF3B97148</span>, <span class="number">0x84BE41DE</span>, <span class="number">0x1ADAD47D</span>, <span class="number">0x6DDDE4EB</span>, <span class="number">0xF4D4B551</span>, <span class="number">0x83D385C7</span>,</span><br><span class="line"><span class="number">0x136C9856</span>, <span class="number">0x646BA8C0</span>, <span class="number">0xFD62F97A</span>, <span class="number">0x8A65C9EC</span>, <span class="number">0x14015C4F</span>, <span class="number">0x63066CD9</span>,</span><br><span class="line"><span class="number">0xFA0F3D63</span>, <span class="number">0x8D080DF5</span>, <span class="number">0x3B6E20C8</span>, <span class="number">0x4C69105E</span>, <span class="number">0xD56041E4</span>, <span class="number">0xA2677172</span>,</span><br><span class="line"><span class="number">0x3C03E4D1</span>, <span class="number">0x4B04D447</span>, <span class="number">0xD20D85FD</span>, <span class="number">0xA50AB56B</span>, <span class="number">0x35B5A8FA</span>, <span class="number">0x42B2986C</span>,</span><br><span class="line"><span class="number">0xDBBBC9D6</span>, <span class="number">0xACBCF940</span>, <span class="number">0x32D86CE3</span>, <span class="number">0x45DF5C75</span>, <span class="number">0xDCD60DCF</span>, <span class="number">0xABD13D59</span>,</span><br><span class="line"><span class="number">0x26D930AC</span>, <span class="number">0x51DE003A</span>, <span class="number">0xC8D75180</span>, <span class="number">0xBFD06116</span>, <span class="number">0x21B4F4B5</span>, <span class="number">0x56B3C423</span>,</span><br><span class="line"><span class="number">0xCFBA9599</span>, <span class="number">0xB8BDA50F</span>, <span class="number">0x2802B89E</span>, <span class="number">0x5F058808</span>, <span class="number">0xC60CD9B2</span>, <span class="number">0xB10BE924</span>,</span><br><span class="line"><span class="number">0x2F6F7C87</span>, <span class="number">0x58684C11</span>, <span class="number">0xC1611DAB</span>, <span class="number">0xB6662D3D</span>, <span class="number">0x76DC4190</span>, <span class="number">0x01DB7106</span>,</span><br><span class="line"><span class="number">0x98D220BC</span>, <span class="number">0xEFD5102A</span>, <span class="number">0x71B18589</span>, <span class="number">0x06B6B51F</span>, <span class="number">0x9FBFE4A5</span>, <span class="number">0xE8B8D433</span>,</span><br><span class="line"><span class="number">0x7807C9A2</span>, <span class="number">0x0F00F934</span>, <span class="number">0x9609A88E</span>, <span class="number">0xE10E9818</span>, <span class="number">0x7F6A0DBB</span>, <span class="number">0x086D3D2D</span>,</span><br><span class="line"><span class="number">0x91646C97</span>, <span class="number">0xE6635C01</span>, <span class="number">0x6B6B51F4</span>, <span class="number">0x1C6C6162</span>, <span class="number">0x856530D8</span>, <span class="number">0xF262004E</span>,</span><br><span class="line"><span class="number">0x6C0695ED</span>, <span class="number">0x1B01A57B</span>, <span class="number">0x8208F4C1</span>, <span class="number">0xF50FC457</span>, <span class="number">0x65B0D9C6</span>, <span class="number">0x12B7E950</span>,</span><br><span class="line"><span class="number">0x8BBEB8EA</span>, <span class="number">0xFCB9887C</span>, <span class="number">0x62DD1DDF</span>, <span class="number">0x15DA2D49</span>, <span class="number">0x8CD37CF3</span>, <span class="number">0xFBD44C65</span>,</span><br><span class="line"><span class="number">0x4DB26158</span>, <span class="number">0x3AB551CE</span>, <span class="number">0xA3BC0074</span>, <span class="number">0xD4BB30E2</span>, <span class="number">0x4ADFA541</span>, <span class="number">0x3DD895D7</span>,</span><br><span class="line"><span class="number">0xA4D1C46D</span>, <span class="number">0xD3D6F4FB</span>, <span class="number">0x4369E96A</span>, <span class="number">0x346ED9FC</span>, <span class="number">0xAD678846</span>, <span class="number">0xDA60B8D0</span>,</span><br><span class="line"><span class="number">0x44042D73</span>, <span class="number">0x33031DE5</span>, <span class="number">0xAA0A4C5F</span>, <span class="number">0xDD0D7CC9</span>, <span class="number">0x5005713C</span>, <span class="number">0x270241AA</span>,</span><br><span class="line"><span class="number">0xBE0B1010</span>, <span class="number">0xC90C2086</span>, <span class="number">0x5768B525</span>, <span class="number">0x206F85B3</span>, <span class="number">0xB966D409</span>, <span class="number">0xCE61E49F</span>,</span><br><span class="line"><span class="number">0x5EDEF90E</span>, <span class="number">0x29D9C998</span>, <span class="number">0xB0D09822</span>, <span class="number">0xC7D7A8B4</span>, <span class="number">0x59B33D17</span>, <span class="number">0x2EB40D81</span>,</span><br><span class="line"><span class="number">0xB7BD5C3B</span>, <span class="number">0xC0BA6CAD</span>, <span class="number">0xEDB88320</span>, <span class="number">0x9ABFB3B6</span>, <span class="number">0x03B6E20C</span>, <span class="number">0x74B1D29A</span>,</span><br><span class="line"><span class="number">0xEAD54739</span>, <span class="number">0x9DD277AF</span>, <span class="number">0x04DB2615</span>, <span class="number">0x73DC1683</span>, <span class="number">0xE3630B12</span>, <span class="number">0x94643B84</span>,</span><br><span class="line"><span class="number">0x0D6D6A3E</span>, <span class="number">0x7A6A5AA8</span>, <span class="number">0xE40ECF0B</span>, <span class="number">0x9309FF9D</span>, <span class="number">0x0A00AE27</span>, <span class="number">0x7D079EB1</span>,</span><br><span class="line"><span class="number">0xF00F9344</span>, <span class="number">0x8708A3D2</span>, <span class="number">0x1E01F268</span>, <span class="number">0x6906C2FE</span>, <span class="number">0xF762575D</span>, <span class="number">0x806567CB</span>,</span><br><span class="line"><span class="number">0x196C3671</span>, <span class="number">0x6E6B06E7</span>, <span class="number">0xFED41B76</span>, <span class="number">0x89D32BE0</span>, <span class="number">0x10DA7A5A</span>, <span class="number">0x67DD4ACC</span>,</span><br><span class="line"><span class="number">0xF9B9DF6F</span>, <span class="number">0x8EBEEFF9</span>, <span class="number">0x17B7BE43</span>, <span class="number">0x60B08ED5</span>, <span class="number">0xD6D6A3E8</span>, <span class="number">0xA1D1937E</span>,</span><br><span class="line"><span class="number">0x38D8C2C4</span>, <span class="number">0x4FDFF252</span>, <span class="number">0xD1BB67F1</span>, <span class="number">0xA6BC5767</span>, <span class="number">0x3FB506DD</span>, <span class="number">0x48B2364B</span>,</span><br><span class="line"><span class="number">0xD80D2BDA</span>, <span class="number">0xAF0A1B4C</span>, <span class="number">0x36034AF6</span>, <span class="number">0x41047A60</span>, <span class="number">0xDF60EFC3</span>, <span class="number">0xA867DF55</span>,</span><br><span class="line"><span class="number">0x316E8EEF</span>, <span class="number">0x4669BE79</span>, <span class="number">0xCB61B38C</span>, <span class="number">0xBC66831A</span>, <span class="number">0x256FD2A0</span>, <span class="number">0x5268E236</span>,</span><br><span class="line"><span class="number">0xCC0C7795</span>, <span class="number">0xBB0B4703</span>, <span class="number">0x220216B9</span>, <span class="number">0x5505262F</span>, <span class="number">0xC5BA3BBE</span>, <span class="number">0xB2BD0B28</span>,</span><br><span class="line"><span class="number">0x2BB45A92</span>, <span class="number">0x5CB36A04</span>, <span class="number">0xC2D7FFA7</span>, <span class="number">0xB5D0CF31</span>, <span class="number">0x2CD99E8B</span>, <span class="number">0x5BDEAE1D</span>,</span><br><span class="line"><span class="number">0x9B64C2B0</span>, <span class="number">0xEC63F226</span>, <span class="number">0x756AA39C</span>, <span class="number">0x026D930A</span>, <span class="number">0x9C0906A9</span>, <span class="number">0xEB0E363F</span>,</span><br><span class="line"><span class="number">0x72076785</span>, <span class="number">0x05005713</span>, <span class="number">0x95BF4A82</span>, <span class="number">0xE2B87A14</span>, <span class="number">0x7BB12BAE</span>, <span class="number">0x0CB61B38</span>,</span><br><span class="line"><span class="number">0x92D28E9B</span>, <span class="number">0xE5D5BE0D</span>, <span class="number">0x7CDCEFB7</span>, <span class="number">0x0BDBDF21</span>, <span class="number">0x86D3D2D4</span>, <span class="number">0xF1D4E242</span>,</span><br><span class="line"><span class="number">0x68DDB3F8</span>, <span class="number">0x1FDA836E</span>, <span class="number">0x81BE16CD</span>, <span class="number">0xF6B9265B</span>, <span class="number">0x6FB077E1</span>, <span class="number">0x18B74777</span>,</span><br><span class="line"><span class="number">0x88085AE6</span>, <span class="number">0xFF0F6A70</span>, <span class="number">0x66063BCA</span>, <span class="number">0x11010B5C</span>, <span class="number">0x8F659EFF</span>, <span class="number">0xF862AE69</span>,</span><br><span class="line"><span class="number">0x616BFFD3</span>, <span class="number">0x166CCF45</span>, <span class="number">0xA00AE278</span>, <span class="number">0xD70DD2EE</span>, <span class="number">0x4E048354</span>, <span class="number">0x3903B3C2</span>,</span><br><span class="line"><span class="number">0xA7672661</span>, <span class="number">0xD06016F7</span>, <span class="number">0x4969474D</span>, <span class="number">0x3E6E77DB</span>, <span class="number">0xAED16A4A</span>, <span class="number">0xD9D65ADC</span>,</span><br><span class="line"><span class="number">0x40DF0B66</span>, <span class="number">0x37D83BF0</span>, <span class="number">0xA9BCAE53</span>, <span class="number">0xDEBB9EC5</span>, <span class="number">0x47B2CF7F</span>, <span class="number">0x30B5FFE9</span>,</span><br><span class="line"><span class="number">0xBDBDF21C</span>, <span class="number">0xCABAC28A</span>, <span class="number">0x53B39330</span>, <span class="number">0x24B4A3A6</span>, <span class="number">0xBAD03605</span>, <span class="number">0xCDD70693</span>,</span><br><span class="line"><span class="number">0x54DE5729</span>, <span class="number">0x23D967BF</span>, <span class="number">0xB3667A2E</span>, <span class="number">0xC4614AB8</span>, <span class="number">0x5D681B02</span>, <span class="number">0x2A6F2B94</span>,</span><br><span class="line"><span class="number">0xB40BBE37</span>, <span class="number">0xC30C8EA1</span>, <span class="number">0x5A05DF1B</span>, <span class="number">0x2D02EF8D</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="title">CountCRC32</span><span class="params">(<span class="keyword">char</span> *pData, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> crc;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> c;</span><br><span class="line"></span><br><span class="line">    crc = <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;len; i++)</span><br><span class="line">    {</span><br><span class="line">        c = (<span class="keyword">unsigned</span> <span class="keyword">long</span>)pData[i];</span><br><span class="line">        crc = ((crc&gt;&gt;<span class="number">8</span>) &amp; <span class="number">0x00FFFFFF</span>) ^ crcTable[ (crc^c) &amp; <span class="number">0xFF</span> ];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span>( crc^<span class="number">0xFFFFFFFF</span> );</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h4><p><a href="https://blog.csdn.net/liyuanbhu/article/details/7882789">å¾ªç¯å†—ä½™æ ¡éªŒï¼ˆCRCï¼‰ç®—æ³•å…¥é—¨å¼•å¯¼</a></p>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>crc</tag>
        <tag>checksum</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒ†åŒ†</title>
    <url>/2019/12/13/y2b-driverold/</url>
    <content><![CDATA[<p><span class="github-emoji"><span>â¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<span id="more"></span>

<p><em>The sun shines through the kitchen, and we are making love, feel like the rest of the world doesnâ€™t exit any more and I finally understand the meaning of eternity.</em></p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>love</tag>
        <tag>debbie</tag>
      </tags>
  </entry>
  <entry>
    <title>é…å±ä¸äº®å¯èƒ½æœ‰å“ªäº›åŸå› ï¼Ÿ</title>
    <url>/2019/12/26/panel-not-working/</url>
    <content><![CDATA[<p>é…å±ä¸äº®å¯èƒ½æœ‰å“ªäº›åŸå› ï¼Ÿ  </p>
<span id="more"></span>


<ol>
<li>æ’çº¿æ¾åŠ¨  </li>
<li>æ¿å¡é©±å±ç”µå‹ä¸å¯¹  </li>
<li>LVDSé©±åŠ¨ç”µæµä¸å¤Ÿ  </li>
<li>åˆ†è¾¨ç‡ä¸å¯¹  </li>
<li>å±å‚ä¸å¯¹  </li>
</ol>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>panel</tag>
      </tags>
  </entry>
  <entry>
    <title>Auto Color</title>
    <url>/2019/12/27/auto-color/</url>
    <content><![CDATA[<p>Auto Colorï¼Œä¹Ÿæœ‰Auto ADCçš„å«æ³•ã€‚åˆ†é‡å’ŒVGAå±äºé«˜æ¸…æ¨¡æ‹Ÿé€šé“ï¼Œåœ¨TVçš„æµç¨‹é‡Œé¢ä¼šç»è¿‡ADCå¤„ç†ã€‚ä¸ºäº†ä¿è¯æ¯å°ç”µè§†çš„ä¸€è‡´æ€§ï¼Œåœ¨ç”Ÿäº§è¿‡ç¨‹å°±ä¼šæœ‰ä¸€é“ADCæ ¡æ­£å·¥åºã€‚ä½†æ˜¯ç›®å‰çš„ICä¸€èˆ¬éƒ½ä¼šè‡ªåŠ¨æ ¡æ­£äº†ã€‚    </p>
<span id="more"></span>


<p>ç›®çš„ï¼š  </p>
<ol>
<li>ä½¿ä¿¡å·çš„æœ€ä½ç”µå¹³ç»ADCé‡‡é›†åè¾“å‡ºçš„æ•°ä½ä¿¡å·æ˜¯0ï¼Œä¿¡å·çš„æœ€é«˜ç”µå¹³ç»ADCé‡‡é›†åè¾“å‡ºçš„æ•°ä½ä¿¡å·æ˜¯255ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°æœ€ä½³çš„å¯¹æ¯”åº¦ã€‚  </li>
<li>ç¡¬ä»¶ç”µè·¯å·®å¼‚ï¼Œè¿›å…¥ADCé‡‡é›†å™¨çš„RGBä¿¡å·å¯èƒ½åç¦»æ ‡å‡†ä¿¡å·ï¼Œä¸”åç¦»é‡å¯èƒ½ä¸ä¸€æ ·ï¼Œæ•…å¿…é¡»å¯¹RGBé€šé“åˆ†åˆ«åšAuto Colorã€‚  </li>
</ol>
<p>åŸç†ï¼š<br>é€šè¿‡è°ƒæ•´ADC Offsetè®¾å®šå€¼ï¼Œä½¿ä¿¡å·çš„æœ€ä½ç”µå¹³ç»ADCé‡‡é›†åè¾“å‡ºçš„æ•°ä½ä¿¡å·ä¸º0ï¼Œé€šè¿‡è°ƒæ•´ADC Gainè®¾å®šå€¼ä½¿ä¿¡å·çš„æœ€é«˜ç”µå¹³ç»ADCé‡‡é›†åè¾“å‡ºçš„æ•°ä½ä¿¡å·ä¸º255ã€‚  </p>
<p><img src="https://i.loli.net/2019/12/27/83pyl1QRjkstuZJ.png" alt="auto_adc.png">  </p>
<p><img src="https://i.loli.net/2019/12/27/mJOnClSaRdHgzBG.jpg" alt="AutoColor.jpg">  </p>
<p>VGA ADC Adjust:<br><img src="https://i.loli.net/2019/12/27/pQ1Un9zBgfibN54.jpg" alt="VGA_ADC.jpg">  </p>
<p>YPbPr ADC Adjust:<br><img src="https://i.loli.net/2019/12/27/F5oqWwOavPR6YN2.jpg" alt="YPP_ADC_1.jpg">  </p>
<p><img src="https://i.loli.net/2019/12/27/oh5dTI2NwXJn4fa.jpg" alt="YPP_ADC_2.jpg">  </p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>adc</tag>
      </tags>
  </entry>
  <entry>
    <title>DVBTè‡ªåŠ¨æœå°æµç¨‹è·Ÿè¸ª</title>
    <url>/2020/01/16/rtk-dvbt-auto-scan/</url>
    <content><![CDATA[<p>å·²ç»æœ‰ç‚¹çƒ¦äº†ã€‚  </p>
<span id="more"></span>



<p><code>kernel/android/pie/vendor/realtek/app/dtvinput/src/com/realtek/dtv/digitalsetup/dvb/DVBScanChannelFragment.java</code>ï¼Œèœå•ä¸Šçš„æœ€åä¸€æ­¥ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ª<code>DigitalScanTask</code>ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">mDigitalScanTask = <span class="keyword">new</span> DigitalScanTask((DigitalChannelSetupActivity)getActivity());</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"> mDigitalScanTask.sendMessageDelayed(DigitalScanTask.MSG_CHANNEL_SACN, scanParam, <span class="number">500</span>);</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> MSG_CHANNEL_SACN:</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    mHandler.sendEmptyMessage(MSG_CHANNEL_TABLE_SACN);</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> MSG_CHANNEL_TABLE_SACN:</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    startTableScan();</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">success = mTvServiceHelper.startAutoScan(mScanChannelList,mModeType);<span class="comment">//auto table scan</span></span><br></pre></td></tr></tbody></table></figure>
<p>å‘ä¸‹ä¼ è¿›ä¸€ä¸ªé¢‘ç‚¹è¡¨<code>mScanChannelList</code>ã€‚  </p>
<p>è°ƒåˆ°äº†<code>kernel/android/pie/vendor/realtek/app/dtvinput/src/com/realtek/dtv/TvServiceHelper.java</code>çš„<code>startAutoScan</code>  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">startAutoScan</span><span class="params">(ArrayList&lt;FreqTable&gt; freqtable,String type)</span></span>{</span><br><span class="line">	<span class="keyword">if</span> (mTv != <span class="keyword">null</span>) {</span><br><span class="line">		<span class="keyword">return</span> mTv.StartDtvAutoScan(freqtable.size(),freqtable,-<span class="number">1</span>);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ç€é€šè¿‡JNIï¼ŒHIDLï¼ˆä¾æ¬¡è°ƒç”¨äº†ä»¥ä¸‹æ–‡ä»¶ï¼‰<br><code>kernel/android/pie/vendor/realtek/frameworks/base/core/java/com/realtek/tv/Tv.java</code><br><code>kernel/android/pie/vendor/realtek/frameworks/base/core/jni/com_realtek_tv_Tv.cpp</code><br><code>kernel/android/pie/vendor/realtek/hardware/interfaces/tv/1.0/IRtkTv.hal</code><br><code>kernel/android/pie/vendor/realtek/hardware/interfaces/tv/1.0/default/RtkTv.cpp</code><br><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/tv/libtvsystem/tv/TvClient.cpp</code><br><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/tv/libtvservice/TvService.cpp</code><br><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/tv/libtvservice/Tv.cpp</code><br><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/tvapi/dtvcontrol/CDTVControl.cpp</code><br><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/mediacontrol/component/channel/scan/TableScanner.cpp</code>  </p>
<p>ç»ˆäºåˆ›å»ºä¸€ä¸ª<code>ScanThread</code>çº¿ç¨‹  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CTableScanner::AutoScanStart</span><span class="params">(<span class="keyword">int</span> tvsubtype, <span class="keyword">int</span> satelliteIndex,<span class="keyword">bool</span> bSkipPMT,<span class="keyword">bool</span> bSSUScan)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	RT_FRONTEND_TYPE feType = m_pFreqScanDetector-&gt;<span class="built_in">Mf_GetFrontendType</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (m_threadIsRunning == <span class="literal">true</span> || (feType != RT_FRONTEND_DVB_SATELLITE &amp;&amp; m_freqListSize == <span class="number">0</span>))</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (m_scanMode != CH_SCAN_MODE_IDLE)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	m_bRemoveAll = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ENABLE_SUPPORT_DVB_S</span></span><br><span class="line">	<span class="keyword">if</span>(feType == RT_FRONTEND_DVB_SATELLITE &amp;&amp; m_pFreqList == <span class="literal">NULL</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">xLoadTable</span>(satelliteIndex);</span><br><span class="line">	}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	m_serviceID=<span class="number">0</span>;</span><br><span class="line">	m_scanMode = CH_SCAN_MODE_AUTO;</span><br><span class="line">	m_bSSUScan = bSSUScan;</span><br><span class="line">	m_bDelNosignalMux = <span class="literal">true</span>;</span><br><span class="line">	m_satelliteIndex = satelliteIndex;</span><br><span class="line">	m_bQuickScan=<span class="literal">false</span>;</span><br><span class="line">	m_bSkipPMT=bSkipPMT;</span><br><span class="line">	m_curFreqIndex = <span class="number">0</span>;</span><br><span class="line">	m_uiScanProgress = <span class="number">0</span>;</span><br><span class="line">	m_lastScanedFreqIndex =<span class="number">0</span>;</span><br><span class="line">	m_curFreq = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].frequency:<span class="number">0</span>;</span><br><span class="line">	m_curBandwidth = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].bandwidth:<span class="number">0</span>;</span><br><span class="line">	m_curChNum = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].channelNum:<span class="number">0</span>;</span><br><span class="line">	m_curModulation = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].modulation:RT_MOD_UNKNOWN;</span><br><span class="line">	m_curSymbolRate = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].symbolRate:<span class="number">0</span>;</span><br><span class="line">	m_curPolarization = m_pFreqList!=<span class="literal">NULL</span>?m_pFreqList[<span class="number">0</span>].polarization:<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">pthread_create</span>(&amp;m_thread, <span class="literal">NULL</span>, ScanThread, (<span class="keyword">void</span> *)<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Quick sleep to cause thread to be created.</span></span><br><span class="line">	<span class="keyword">while</span> (m_threadIsRunning == <span class="literal">false</span>)</span><br><span class="line">		<span class="built_in">usleep</span>(<span class="number">100000</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‡†å¤‡æœå°"><a href="#å‡†å¤‡æœå°" class="headerlink" title="å‡†å¤‡æœå°"></a>å‡†å¤‡æœå°</h3><p><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/mediacontrol/component/channel/scan/ChScanner.cpp</code><br><code>ScanThread</code>çº¿ç¨‹é¦–å…ˆå°†<code>CH_SCAN_STATE</code>è®¾å®šä¸º<code>CH_SCAN_STATE_INIT</code>ï¼Œç„¶åè¿›å…¥ä¸€ä¸ª<code>xWorkerThread</code>å¾ªç¯  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">CChScanner::ScanThread</span><span class="params">(<span class="keyword">void</span> *pParam)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	CChScanner *pThis = (CChScanner *)pParam;</span><br><span class="line">	pThis-&gt;m_scanState = CH_SCAN_STATE_INIT;</span><br><span class="line">	pThis-&gt;m_threadIsRunning = <span class="literal">true</span>;</span><br><span class="line">	pThis-&gt;m_runThread = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (pThis-&gt;m_runThread == <span class="literal">true</span>)</span><br><span class="line">		pThis-&gt;<span class="built_in">xWorkerThread</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Manual/seekscan needs to set this variable before ending scan message is sent out.</span></span><br><span class="line">	pThis-&gt;m_threadIsRunning = <span class="literal">false</span>;</span><br><span class="line">	pThis-&gt;m_cancelScan = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/mediacontrol/component/channel/scan/TableScanner.cpp</code><br><code>xWorkerThread</code>å¾ªç¯ä¸­é¦–å…ˆå¤„ç†äº†<code>case``CH_SCAN_STATE_INIT</code>  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CTableScanner::xWorkerThread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">// Verify scan mode is valid.</span></span><br><span class="line">	<span class="keyword">if</span> ((m_scanMode == CH_SCAN_MODE_IDLE) || (m_scanMode &gt;= CH_SCAN_MODE_MAX))</span><br><span class="line">		<span class="keyword">goto</span> EXIT_SCANNING;</span><br><span class="line"></span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span> (m_scanState)</span><br><span class="line">	{</span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_INIT:</span><br><span class="line">		<span class="built_in">xStageInit</span>();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_BEGIN_FREQ:</span><br><span class="line">		<span class="built_in">ALOGD</span>(<span class="string">"[%s %d] CH_SCAN_STATE_BEGIN_FREQ start\n"</span>, __func__, __LINE__);</span><br><span class="line">		<span class="built_in">xStageBeginFreq</span>();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_SCANNING:</span><br><span class="line">		<span class="comment">// wait scan done</span></span><br><span class="line">		<span class="built_in">ALOGD</span>(<span class="string">"[%s %d] CH_SCAN_STATE_SCANNING start\n"</span>, __func__, __LINE__);</span><br><span class="line">		<span class="keyword">while</span> (!m_pFreqScanDetector-&gt;<span class="built_in">Mf_IsScanDone</span>()) {</span><br><span class="line">			<span class="keyword">if</span> (m_cancelScan == <span class="literal">true</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">			m_pFreqScanDetector-&gt;<span class="built_in">RunStateProc</span>();</span><br><span class="line">			<span class="keyword">if</span> (m_cancelScan != <span class="literal">true</span> &amp;&amp; !m_pFreqScanDetector-&gt;<span class="built_in">Mf_IsScanDone</span>()) {</span><br><span class="line">				<span class="keyword">if</span>(m_scanMode == CH_SCAN_MODE_BLIND_SCAN||m_scanMode == CH_SCAN_MODE_BLIND_SCAN_NETWORK)</span><br><span class="line">				{</span><br><span class="line">					<span class="keyword">int</span> Index = <span class="number">0</span>, Total = <span class="number">0</span>;</span><br><span class="line">					UINT32 freq = m_pFreqScanDetector-&gt;<span class="built_in">Mf_GetFrequency</span>(&amp;Index,&amp;Total);</span><br><span class="line">					<span class="keyword">if</span>(freq&gt;<span class="number">0</span>)</span><br><span class="line">					{</span><br><span class="line">						m_curFreqIndex = Index;</span><br><span class="line">						m_freqListSize = Total;</span><br><span class="line">						m_curFreq = freq;</span><br><span class="line">					}</span><br><span class="line">				}</span><br><span class="line">				<span class="built_in">usleep</span>(SCAN_THREAD_CS_TIME*<span class="number">1000</span>);</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="built_in">ALOGD</span>(<span class="string">"[%s %d] CH_SCAN_STATE_SCANNING end\n"</span>, __func__, __LINE__);</span><br><span class="line">		m_scanState = CH_SCAN_STATE_END_FREQ;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_END_FREQ:</span><br><span class="line">		<span class="built_in">ALOGD</span>(<span class="string">"[%s %d] CH_SCAN_STATE_END_FREQ begin\n"</span>, __func__, __LINE__);</span><br><span class="line">		<span class="built_in">xStageEndFreq</span>();</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_SCAN_FAILED:</span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_EXIT:</span><br><span class="line">		<span class="built_in">xStageExit</span>();</span><br><span class="line">		<span class="keyword">goto</span> EXIT_SCANNING;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> CH_SCAN_STATE_IDLE:</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">goto</span> EXIT_SCANNING;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (m_cancelScan == <span class="literal">true</span>)</span><br><span class="line">		m_scanState = CH_SCAN_STATE_EXIT;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">EXIT_SCANNING:</span><br><span class="line">	m_runThread = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è·‘çš„æ˜¯<code>xStageInit()</code>å‡½æ•°ï¼Œä¸»è¦åšäº†ä¸€ä»¶äº‹  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">m_pFreqScanDetector-&gt;<span class="built_in">Mf_ScanInit</span>(scanMode, param, m_bDelNosignalMux,scanModeEx);</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä»¶äº‹ä¼šè·³åˆ°<code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/mediacontrol/component/channel/scan/DtvFreqDetector.cpp</code>  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDtvFreqDetector::Mf_ScanInit</span><span class="params">(CH_SCAN_MODE scanMode, UINT32 param, <span class="keyword">bool</span> bDelNoSignalMux, CH_SCAN_MODE_EX modeEx)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">ScanInit</span>(<span class="built_in">getSiScanType</span>(scanMode), param, typeEx);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>æ¥ç€è·³åˆ°<code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/mediacontrol/component/si/DvbSiMgr.cpp</code>  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDvbSiMgr::ScanInit</span><span class="params">(SI_MGR_SCAN_TYPE type, <span class="keyword">int</span> antennaIndex, SI_MGR_SCAN_TYPE_EX typeEx)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">if</span> (type == SI_MGR_SCAN_TYPE_AUTO||type==SI_MGR_SCAN_TYPE_AUTO_QUICK) {</span><br><span class="line">	<span class="built_in">SI_SetState</span>(siHandle, SI_STATE_AUTOSCAN);</span><br><span class="line">	<span class="built_in">SI_AutoScanInit</span>(siHandle,antennaIndex,type==SI_MGR_SCAN_TYPE_AUTO_QUICK?TRUE:FALSE,FALSE);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (defined ENABLE_CI &amp;&amp; defined ENABLE_CIPLUS_1_4)</span></span><br><span class="line">	<span class="keyword">if</span>(m_CiCallbackObj.NotifyChannelErase != <span class="literal">NULL</span>) {</span><br><span class="line">		m_CiCallbackObj.<span class="built_in">NotifyChannelErase</span>();</span><br><span class="line">	}</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>xStageInit</code>æœ€åæŠŠ<code>CH_SCAN_STATE</code>çŠ¶æ€è®¾å®šä¸º<code>CH_SCAN_STATE_BEGIN_FREQ</code>  </p>
<h3 id="å¼€å§‹æœå°"><a href="#å¼€å§‹æœå°" class="headerlink" title="å¼€å§‹æœå°"></a>å¼€å§‹æœå°</h3><p><code>xWorkerThread``case``CH_SCAN_STATE_BEGIN_FREQ</code>æ‰§è¡Œ<code>CTableScanner::xStageBeginFreq()</code><br>æ‰§è¡Œ<code>m_pFreqScanDetector-&gt;Mf_ScanFrequency(param)</code><br>è¿™é‡Œ<code>FREQ_SCAN_STATE</code>è¢«è®¾ç½®æˆçŠ¶æ€<code>FREQ_SCAN_STATE_BEGIN_FREQ</code><br><code>CTableScanner::xStageBeginFreq()</code>çš„æœ€åï¼Œ<code>CH_SCAN_STATE</code>è¢«è®¾ç½®æˆ<code>CH_SCAN_STATE_SCANNING</code>  </p>
<h3 id="æ­£åœ¨æœå°"><a href="#æ­£åœ¨æœå°" class="headerlink" title="æ­£åœ¨æœå°"></a>æ­£åœ¨æœå°</h3><p>æœå°è¿‡ç¨‹å°±æ˜¯<code>CTableScanner::xWorkerThread()``case``CH_SCAN_STATE_SCANNING</code>ï¼Œæ˜¯ä¸€ä¸ª<code>while</code>å¾ªç¯<br>å…ˆåˆ¤æ–­æ˜¯å¦æœå°ç»“æŸ  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">m_pFreqScanDetector-&gt;<span class="built_in">Mf_IsScanDone</span>()</span><br></pre></td></tr></tbody></table></figure>
<p>å¦åˆ™ï¼Œè·‘  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">m_pFreqScanDetector-&gt;<span class="built_in">RunStateProc</span>();</span><br></pre></td></tr></tbody></table></figure>
<p>å› ä¸ºåˆšæ‰<code>FREQ_SCAN_STATE</code>è¢«è®¾ç½®ä¸º<code>FREQ_SCAN_STATE_BEGIN_FREQ</code>,æ‰€ä»¥è·‘<code>CDtvFreqDetector::xStageBeginFreq()</code>ã€‚åœ¨æŸä¸€é¢‘ç‚¹çš„æœå°åŸºæœ¬éƒ½æ˜¯åœ¨<code>CDtvFreqDetector</code>è¿™é‡Œå¤„ç†å•¦ã€‚  </p>
<p><code>m_pFreqScanDetector-&gt;RunStateProc()</code>åšäº†ä»€ä¹ˆï¼Ÿ  </p>
<ol>
<li>Stop SI  </li>
<li>Set tuner param  </li>
<li>Notify demod to lock  </li>
<li>Check frontend(Update modulation, bandwidth, and symbol rate)  </li>
<li>Check SI  </li>
</ol>
<h4 id="FREQ-SCAN-STATE-BEGIN-FREQ"><a href="#FREQ-SCAN-STATE-BEGIN-FREQ" class="headerlink" title="FREQ_SCAN_STATE_BEGIN_FREQ"></a><code>FREQ_SCAN_STATE_BEGIN_FREQ</code></h4><p>è·Ÿä¸‹å»èƒ½çœ‹åˆ°<code>tuner-&gt;tune(param)</code>å’Œ<code>tuner-&gt;isLocked()</code>éƒ½æ˜¯åœ¨<code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/driverbaseddtvapp/TunerMgr.cpp</code>å¤„ç†çš„  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">TunerMgr::tune</span><span class="params">(UINT32 frequency, UINT32 bandwidth, RT_FRONTEND_TYPE feType, RT_MODULATION modulation, RT_SPECTRAL_INVERSION inversion, <span class="keyword">bool</span> isScanMode, UINT32 symbolRate, SatelliteInfo *pSatelliteInfo)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	mFreq = frequency;</span><br><span class="line">	mBandwidth = bandwidth;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">FrontendLib_SetTuner</span>(frequency, bandwidth, mTunerId, feType, modulation, inversion, isScanMode, symbolRate, pSatelliteInfo);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">TunerMgr::isLocked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">uint8_t</span> lock = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">TunerControlGetLockStatus</span>(mTunerId, &amp;lock) == TUNER_CTRL_OK)</span><br><span class="line">		<span class="keyword">return</span> lock;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="FREQ-SCAN-STATE-CHECK-FRONTEND"><a href="#FREQ-SCAN-STATE-CHECK-FRONTEND" class="headerlink" title="FREQ_SCAN_STATE_CHECK_FRONTEND"></a><code>FREQ_SCAN_STATE_CHECK_FRONTEND</code></h4><figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDtvFreqDetector::xStageCheckFrontend</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    m_modulation = <span class="built_in">getRtModVal</span>(m_feType, info);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">ScanStart</span>(m_curFreq, m_modulation, m_curBandwidth, symbolrate,  m_curPhyChNum, tuner-&gt;<span class="built_in">getRFStrength</span>(), tuner-&gt;<span class="built_in">getSignalSNR</span>(), m_serviceID);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDvbSiMgr::ScanStart</span><span class="params">(UINT32 frequency, RT_MODULATION modulation, UINT32 bandwidth, UINT32 symbolrate, UINT32 phyChNum,UINT32 strength,<span class="keyword">float</span> snr, UINT16 serviceID)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    SI* siHandle = (SI*)m_pTvMedia-&gt;<span class="built_in">GetDtvFlow</span>()-&gt;<span class="built_in">GetSiHandle</span>();</span><br><span class="line">    SI_DVB_MODULATION siModulation;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span>(modulation)</span><br><span class="line">    {</span><br><span class="line">    <span class="keyword">case</span> RT_MOD_QAM16:</span><br><span class="line">        siModulation=SI_DVB_16_QAM;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> RT_MOD_QAM32:</span><br><span class="line">        siModulation=SI_DVB_32_QAM;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> RT_MOD_QAM64:</span><br><span class="line">        siModulation=SI_DVB_64_QAM;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> RT_MOD_QAM128:</span><br><span class="line">        siModulation=SI_DVB_128_QAM;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">case</span> RT_MOD_QAM256:</span><br><span class="line">        siModulation=SI_DVB_256_QAM;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">SI_SetState</span>(siHandle, SI_STATE_SCAN);</span><br><span class="line">    <span class="built_in">SI_ScanChannelEx</span>(siHandle, frequency, <span class="number">0</span>, bandwidth,siModulation,symbolrate, strength,snr,serviceID,(<span class="keyword">unsigned</span> <span class="keyword">char</span>)phyChNum);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><code>SI_ScanChannelEx</code>è·¯å¾„åœ¨<code>kernel/android/pie/vendor/realtek/frameworks/native/appclass/si/livetv_sidvb/librtd/si4/api/SI_Api.c</code>ï¼  </p>
<h4 id="FREQ-SCAN-STATE-CHECK-SI"><a href="#FREQ-SCAN-STATE-CHECK-SI" class="headerlink" title="FREQ_SCAN_STATE_CHECK_SI"></a><code>FREQ_SCAN_STATE_CHECK_SI</code></h4><p><code>CDtvFreqDetector::xStageCheckSi()</code>ï¼šWait for SI to finish gathering tables  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDtvFreqDetector::xStageCheckSi</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">RETRY:</span><br><span class="line">	<span class="keyword">if</span> (m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">ScanIsDone</span>(&amp;m_bIsGetService) == <span class="literal">false</span>)</span><br><span class="line">	{</span><br><span class="line">		m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">SetSignalInfo</span>(tuner-&gt;<span class="built_in">getRFStrength</span>(), tuner-&gt;<span class="built_in">getSignalSNR</span>());</span><br><span class="line">		<span class="built_in">usleep</span>(<span class="number">10000</span>);</span><br><span class="line">                <span class="comment">//...</span></span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	}</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">SetModulation</span>(m_curFreq, m_modulation);</span><br><span class="line">    m_scanState = FREQ_SCAN_STATE_END_FREQ;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CDvbSiMgr::ScanIsDone</span><span class="params">(<span class="keyword">bool</span> *bGetCh)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    SI_MESSAGE message;</span><br><span class="line">    UINT32 data = <span class="number">0</span>;</span><br><span class="line">    DriverBasedDtvApp *pDvbApp = m_pTvMedia-&gt;<span class="built_in">GetDtvFlow</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pDvbApp-&gt;<span class="built_in">GetSiMessage</span>(&amp;message, &amp;data) == <span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (message == SI_MESSAGE_RESET_CHANNEL &amp;&amp; data&gt;<span class="number">0</span>) {</span><br><span class="line">        <span class="built_in">xResetChannel</span>(data);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(message == SI_MESSAGE_CHANNEL_UPDATE &amp;&amp; data&gt;<span class="number">0</span>) {</span><br><span class="line">        <span class="built_in">xUpdateChannelMgr</span>(data);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (message == SI_MESSAGE_CH_INFO_READY)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(bGetCh!=<span class="literal">NULL</span>)</span><br><span class="line">        {</span><br><span class="line">            *bGetCh = data == <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (message == SI_MESSAGE_SSU_SW_NOT_FOUND||message == SI_MESSAGE_SSU_SWINFO_READY)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(bGetCh!=<span class="literal">NULL</span>)</span><br><span class="line">        {</span><br><span class="line">            *bGetCh = message == SI_MESSAGE_SSU_SWINFO_READY ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span><span class="comment">/* if (message != SI_MESSAGE_CH_INFO_READY)*/</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®Œæˆæœå°"><a href="#å®Œæˆæœå°" class="headerlink" title="å®Œæˆæœå°"></a>å®Œæˆæœå°</h3><h4 id="FREQ-SCAN-STATE-END-FREQ"><a href="#FREQ-SCAN-STATE-END-FREQ" class="headerlink" title="FREQ_SCAN_STATE_END_FREQ"></a><code>FREQ_SCAN_STATE_END_FREQ</code></h4><p>å¦‚æœæœå°å®Œæˆäº†ï¼Œ<code>CDtvFreqDetector::xStageCheckSi()</code>ä¹‹åä¼šæŠŠ<code>FREQ_SCAN_STATE</code>çŠ¶æ€è®¾å®šæˆ<code>FREQ_SCAN_STATE_END_FREQ</code>ï¼Œåœ¨<code>CTableScanner::xWorkerThread()</code>ä¸­ï¼Œ<code>CH_SCAN_STATE``CH_SCAN_STATE_SCANNING</code>ä¼šé€€å‡ºï¼Œå˜æˆ<code>CH_SCAN_STATE_END_FREQ</code><br>æ¥ç€è·‘<code>CTableScanner::xStageEndFreq()</code>,å¦‚æœé¢‘ç‚¹æ²¡æœå®Œï¼Œæ¥ç€æœä¸‹ä¸€ä¸ªé¢‘ç‚¹ï¼Œå¦åˆ™ï¼Œ<code>CH_SCAN_STATE</code>è®¾å®šä¸º<code>CH_SCAN_STATE_SCAN_FAILED</code>ï¼Œè·‘<code>CTableScanner::xStageExit()</code>ï¼Œè¿™é‡Œé¢è·‘<code>m_pFreqScanDetector-&gt;Mf_ScanDeInit()</code>ä»¥åŠæŠŠä¸€äº›æ ‡å¿—æ¸…ç©ºã€‚  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDtvFreqDetector::Mf_ScanDeInit</span><span class="params">(<span class="keyword">bool</span> bNoSaveInNoCh)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">SetMode</span>(SI_MGR_MODE_INACTIVE);</span><br><span class="line">	m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">ScanEnd</span>(bNoSaveInNoCh);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Flush SI queue.</span></span><br><span class="line">	m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">FlushMessageQueue</span>();</span><br><span class="line">	m_pIDtvMedia-&gt;<span class="built_in">GetSiMgr</span>()-&gt;<span class="built_in">SaveChannelToFile</span>(bNoSaveInNoCh);</span><br><span class="line"></span><br><span class="line">	DTV_STACK::TunerMgr* tuner = DTV_STACK::TunerMgr::<span class="built_in">getInstance</span>();</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> tunerId = <span class="number">-1</span>;</span><br><span class="line">	tuner-&gt;<span class="built_in">getTunerId</span>(tunerId);</span><br><span class="line">	<span class="built_in">TunerControlChannelScanModeEnable</span>(tunerId, <span class="number">0</span>);</span><br><span class="line">	tuner-&gt;<span class="built_in">reset</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>dvb</tag>
        <tag>si</tag>
        <tag>scan</tag>
        <tag>dvb-t</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ä¸ªç®€å•çš„AndroidåŠŸèƒ½éœ€æ±‚</title>
    <url>/2020/03/04/android-simple-hard/</url>
    <content><![CDATA[<p>èœé¸¡å†é™©è®°ã€‚  </p>
<span id="more"></span>



<p>éœ€è¦åŠ ä¸€ä¸ªåŠŸèƒ½ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œä¸€æ˜¯å·¥å‚èœå•ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ£€ç´¢Uç›˜ä¸­çš„OTAåŒ…ï¼Œå¹¶ä¸”è¿›è¡Œå‡çº§ï¼ŒäºŒæ˜¯æ’å…¥Uç›˜çš„æ—¶å€™ï¼Œå¹³å°èƒ½è‡ªåŠ¨è¯†åˆ«Uç›˜ä¸­çš„OTAåŒ…ï¼Œå¹¶ä¸”å¯ä»¥å‡çº§ã€‚  </p>
<p>ç¬¬ä¸€éƒ¨åˆ†ï¼Œå…·ä½“å°±æ˜¯ï¼ŒæŒ‰èœå•ä¸Šå‡çº§é€‰é¡¹çš„æ—¶å€™ï¼Œå»ç¡®è®¤Uç›˜æ˜¯å¦å­˜åœ¨æŒ‡å®šæ–‡ä»¶åçš„æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶æ‹·è´åˆ°ç³»ç»Ÿç›®å½•<code>/data</code>ï¼Œæ‹·è´çš„æ—¶å€™å¼¹å‡ºä¸€ä¸ªè¿›åº¦æ¡<code>ProgressDialog</code>ï¼Œç­‰æ‹·è´å®Œæˆï¼Œè¿›åº¦æ¡æ¶ˆå¤±ï¼Œæœ€åè°ƒç”¨ç³»ç»Ÿæ¥å£<code>RecoverySystem.installPackage</code>å‡çº§OTAåŒ…ã€‚ä»¥ä¸Šçš„åŠ¨ä½œåŸºæœ¬éƒ½åœ¨Fragmentèœå•é¡µé€šè¿‡Handler<code>sendEmptyMessageDelayed</code>çš„æ–¹å¼å¤„ç†ï¼ŒéªŒè¯ä¹ŸOKã€‚  </p>
<p>ç¬¬äºŒéƒ¨åˆ†ï¼š  </p>
<ul>
<li><p>é˜¶æ®µA<br>åšæ’Uç›˜è¯†åˆ«çš„ï¼Œåœ¨å¹¿æ’­æ¥æ”¶å™¨é‡Œé¢ï¼Œå¦‚æœæœ‰Uç›˜mountä¸Šäº†ï¼Œå°±å»æŸ¥è¿™ä¸ªä¸œè¥¿ï¼Œç„¶åè°ƒç”¨Fragmentçš„å‡½æ•°ï¼Œæœ€åä¹Ÿæƒ³é€šè¿‡Fragmentçš„HandleræŠŠè¿™äº›äº‹æƒ…å¤„ç†å®Œã€‚<br>æœ¬æƒ³é€šè¿‡è¿™æ ·ï¼Œå¯ä»¥è¾¾åˆ°Fragmentä¸Šä¸€æ ·çš„æ•ˆæœï¼Œæ—¢èƒ½æ‰§è¡Œæ‹·è´ç­‰åŠ¨ä½œä¹Ÿèƒ½åˆ·æ–°è¿›åº¦æ¡èœå•ã€‚ä½†æ˜¯å‘ç”Ÿäº†å¾ˆå¤š<code>CRASH</code>ï¼Œæ¯”å¦‚è°ƒç”¨çš„å¾ˆå¤šå‡½æ•°é‡Œéœ€è¦ç”¨åˆ°<code>Context</code>ï¼Œæ‰€ä»¥æˆ‘åˆåœ¨<code>BootCompleteReceiver</code>ï¼ˆåå­—æ˜¯è¿™æ ·å†™ï¼Œä½†æ˜¯å…¶å®é‡Œé¢æœ‰åˆ¤æ–­<code>android.intent.action.MEDIA_MOUNTED</code>çš„ï¼‰æŠŠ<code>Context</code>ä¼ åˆ°<code>Fragment</code>ï¼Œè¿™éƒ½è¿˜å¥½ï¼Œæœ€éº»çƒ¦çš„å°±æ˜¯ï¼Œæˆ‘åœ¨<code>BootCompleteReceiver</code>é‡Œæ— è®ºé€šè¿‡é™æ€çš„æ–¹å¼è¿˜æ˜¯newçš„æ–¹å¼è°ƒç”¨<code>Fragment</code>çš„æ–¹æ³•ï¼Œéƒ½ç”¨ä¸äº†æ§ä»¶<code>ProgressDialog</code>ï¼Œæç¤º<code>Unable to add window</code>ï¼Œ<code>Dialog</code>åªèƒ½åœ¨<code>Activity</code>ä¸­æ˜¾ç¤ºï¼åˆ°è¿™ï¼Œä¸çŸ¥é“æ€ä¹ˆåœ¨å¹¿æ’­é‡Œæ›´æ–°UIäº†ã€‚è¿™æ ·çš„è¯ï¼Œå°±åªæœ‰COPYå’Œå‡çº§çš„åŠŸèƒ½ï¼Œä½†æ˜¯çœ‹ä¸åˆ°æ•´ä¸ªè¿‡ç¨‹çš„è¿›åº¦æ¡ï¼Œè¿™æ ·çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚è¦ä¸åœ¨<code>BootCompleteReceiver</code>å…ˆæŠŠ<code>Activity</code>å¯åŠ¨èµ·æ¥ï¼Œå†æ¥ç€åšäº‹æƒ…ï¼Ÿæ„Ÿè§‰è¶Šæ¥è¶Šå¥‡æ€ªäº†ã€‚è¿˜æœ‰é‡åˆ°çš„å°±æ˜¯è°ƒç”¨<code>Fragment</code>æ–¹æ³•çš„æ—¶å€™ï¼ŒæŠ¥é”™<code>Attempt to invoke virtual method on a null object reference</code>ï¼Œæ„Ÿè§‰ä¹Ÿæ˜¯æ²¡æœ‰å¯¹è±¡ï¼Œæ‰€ä»¥ä¸€äº›æ–¹æ³•ç”¨äº†ä¼šæœ‰é—®é¢˜ä¹‹ç±»çš„é—®é¢˜ï¼Œéº»çƒ¦å•Šã€‚  </p>
</li>
<li><p>é˜¶æ®µB<br>é‚£å’‹æï¼Ÿæˆ‘å°±æŠŠ<code>Fragment</code>é‡Œé¢çš„<code>Handler</code>å¤„ç†æ–¹å¼å·®ä¸å¤šå¤åˆ¶ä¸€ä»½æåˆ°<code>BootCompleteReceiver</code>é‡Œé¢ï¼ŒåŠ¨ä½œéƒ½å†™åœ¨<code>BootCompleteReceiver</code>ï¼Œä¸é€šè¿‡åˆ«çš„åœ°æ–¹è°ƒç”¨äº†ï¼Œ<code>ProgressDialog</code>ä¹Ÿæ˜¯ï¼Œä½†æ˜¯æ“ä½œæ§ä»¶çš„æ—¶å€™è¿˜æ˜¯æ²¡æœ‰<code>Activity</code>å•Šã€‚ä½†æ˜¯æ’å…¥Uç›˜ä¹‹å<code>AlertDialog</code>æ˜¯æ€ä¹ˆå‡ºæ¥çš„å‘¢ï¼ŸåŸæ¥<code>AlertDialog</code>æœ‰<code>WindowManager.LayoutParams.TYPE_SYSTEM_ALERT</code>å±æ€§ï¼Œè¿™åº”è¯¥æ˜¯ç³»ç»Ÿå±‚é¢çš„ä¸œè¥¿å§ï¼Œä¸ä¾èµ–<code>Activity</code>ã€‚é‚£æœ‰æ²¡æœ‰ç³»ç»Ÿå±‚é¢çš„è¿›åº¦æ¡ï¼Ÿå¥½åƒæ²¡æœ‰ã€‚ä½†æ˜¯ç½‘ä¸Šæœ‰è¯´æŠŠ<code>ProgressDialog</code>è®¾ç½®æˆ<code>TYPE_SYSTEM_ALERT</code>æˆ–è€…<code>TYPE_TOAST</code>ï¼Œä¸€è¯•ç¡®å®OKã€‚ä½†æ˜¯ï¼Œè¿™åªæ˜¯èœå•è€Œå·²ã€‚èœå•è¿è¡Œè‰¯å¥½äº†ï¼Œä½†æ˜¯å®é™…ä¸Šï¼ŒOTAåŒ…ä½“ç§¯å¾ˆå¤§ï¼Œåœ¨<code>BootCompleteReceiver</code>è·‘æ‹·è´åŠ¨ä½œçš„æ—¶å€™ï¼Œå‘ç”Ÿ<code>ANR</code>ï¼Œæœ€ç»ˆæ²¡æœ‰è·‘åˆ°<code>RecoverySystem.installPackage</code>é‚£é‡Œå»ï¼Œä¸ºå•¥ï¼Œæ‹·è´æ˜¯åœ¨<code>BootCompleteReceiver</code>é‡Œé¢çš„<code>Handler</code>åšçš„ï¼Œç½‘ä¸ŠæŸ¥ï¼Œè¯´æ²¡æœ‰<code>new Thread</code>ç›´æ¥åˆ›å»ºçš„<code>new handler</code>æ˜¯<code>UIçº¿ç¨‹</code>ï¼Œ<code>UIçº¿ç¨‹</code>ä¸èƒ½åšè€—æ—¶æ“ä½œï¼Œä½†æ˜¯ä¸ºå•¥åœ¨é˜¶æ®µAçš„æ—¶å€™ï¼Œåœ¨<code>Fragment</code>çš„<code>Handler</code>é‡Œé¢æ‹·è´OTAåŒ…å´æ²¡æœ‰é—®é¢˜ï¼Ÿåœ¨å¹¿æ’­é‡Œçš„<code>Handler</code>å´æœ‰é—®é¢˜ï¼Ÿä¸æ˜ç™½ã€‚æŸ¥åˆ°è¯´<a href="https://www.jianshu.com/p/34c8d5384f94">ä¸€ä¸ªè¿›ç¨‹å¦‚æœæ­£åœ¨æ‰§è¡ŒBroadcastReceiverçš„ onReceive() æ–¹æ³•ï¼Œå°±ä¼šè¢«å½“åšä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œä¸æ˜“è¢«ç³»ç»Ÿæ€æ­»ã€‚å½“ onReceive() æ‰§è¡Œå®Œæ¯•ï¼ŒBroadcastReceiver å°±ä¸å†æ´»è·ƒï¼Œå…¶æ‰€åœ¨è¿›ç¨‹ä¼šè¢«ç³»ç»Ÿå½“åšä¸€ä¸ªç©ºè¿›ç¨‹ï¼Œéšæ—¶æœ‰å¯èƒ½è¢«ç³»ç»Ÿæ€æ­»ã€‚</a>å¯èƒ½å°±æ˜¯è¿™ä¸ªåŸå› å§ã€‚<code>onReceive</code>éƒ½è·‘å®Œäº†ï¼Œ<code>Handler</code>çš„æ‹·è´åŠ¨ä½œè¿˜æ²¡æœ‰è·‘å®Œã€‚ä½†æ˜¯<code>Fragment</code>çš„è¯ï¼Œä¸€ç›´åœ¨å‰å°ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ€æ­»ã€‚  </p>
</li>
<li><p>é˜¶æ®µC<br>æ”¹æˆ<code>new Thread</code>è¡Œä¸è¡Œå‘¢ï¼Œæ²¡æœ‰å°è¯•ï¼Œä¼°è®¡ä¸è¡Œã€‚<code>Fragment</code>å†™ä¸€æ¬¡ï¼Œ<code>BootCompleteReceiver</code>å†™ä¸€æ¬¡ï¼Œå¤ªè ¢äº†ã€‚æŒ‰ç…§<a href="https://www.jianshu.com/p/34c8d5384f94">ã€Šå¦‚ä½•åœ¨BroadcastReceiverä¸­æ‰§è¡Œè€—æ—¶æ“ä½œã€‹</a>è¿™é‡Œè¯´çš„ï¼Œç”¨<code>IntentService</code>ï¼Œå¾ˆå¥½ç”¨ï¼Œä½†æ˜¯æ“ä½œ<code>ProgressDialog</code>è¿˜æ˜¯ç”¨äº†<code>TYPE_SYSTEM_ALERT</code>å±æ€§ã€‚  </p>
</li>
</ul>
<p>ä½†æ˜¯å¦‚æœå¯åŠ¨äº†ä¸€ä¸ªæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡æ²¡æœ‰å¯¹åº”çš„<code>Activity</code>ï¼Œè€ŒæœåŠ¡éœ€è¦åˆ·æ–°UIï¼Œæ€ä¹ˆææ¯”è¾ƒå¥½å‘¢ï¼Ÿä¸èƒ½éƒ½ç”¨<code>TYPE_SYSTEM_ALERT</code>å§ã€‚  </p>
<p>çº¯å°ç™½ï¼ŒçœŸæƒ¨å•Šã€‚  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>code</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µè§†ä¿¡å·å¤§è‡´æµç¨‹</title>
    <url>/2019/12/30/tv-block-diagram/</url>
    <content><![CDATA[<p>å¦‚ä¸‹ï¼š  </p>
<span id="more"></span>



<p>å›¾åƒï¼š<br>ä¸€èˆ¬ç§°DemodåŠå…¶ä¹‹å‰çš„éƒ¨åˆ†ä¸ºå‰ç«¯ï¼ŒDecoderåŠå…¶ä¹‹åçš„éƒ¨åˆ†ä¸ºåç«¯ã€‚<br><img src="https://i.loli.net/2019/12/30/obZB2aPhHzECQAp.jpg" alt="video_block_diagram.jpg"><br>ä¸ªäººç†è§£ï¼š<br>RFä¿¡å·ç»™åˆ°Tunerï¼ŒTunerè°ƒè°æˆä¸­é¢‘ä¿¡å·ç»™åˆ°Demodï¼ŒDemodè§£è°ƒæˆTSæµç»™åˆ°Decoderï¼Œå¦‚æœæ˜¯éš”è¡Œä¿¡å·ï¼Œè¿˜ä¼šç»è¿‡De-Interlacerå»äº¤é”™ï¼Œç„¶åç»è¿‡Scalerç¼©æ”¾ï¼Œè¾“å‡ºåˆ°Panelã€‚  </p>
<hr>
<p>å£°éŸ³ï¼š<br>ç”±å‰ç«¯è¾“å…¥æ¨¡ç»„ï¼Œä¸­é—´å¤„ç†æ¨¡ç»„ï¼Œåç«¯è¾“å‡ºæ¨¡ç»„æ„æˆï¼š<br>å‰ç«¯è¾“å…¥ä¸€èˆ¬å«åšAudio_Rxæ¨¡å—ï¼Œæ­¤æ¨¡å—ä¸å„é€šé“HWè¿æ¥ï¼Œé€šè¿‡è®¾å®šMUXï¼Œæ¥æ”¶å„ä¸ªé€šé“é€è¿‡æ¥çš„èµ„æ–™ï¼›<br>ä¸­é—´å¤„ç†æ¨¡ç»„å¯¹æ”¶è¿›æ¥çš„èµ„æ–™å¤„ç†ã€ç¼–è§£ç åŠ¨ä½œåŠå„ç§postprocessåŠ¨ä½œç­‰ç­‰ï¼›<br>åç«¯è¾“å‡ºæ¨¡ç»„ä¸€èˆ¬å«åšAudio_Txå•å…ƒï¼Œä¼šå»æ‰§è¡ŒVolã€PeakControlã€è¾“å‡ºé€šé“é€‰æ‹©ç­‰åŠ¨ä½œã€‚<br><img src="https://i.loli.net/2020/09/09/7hkbSzi3nql5XRc.png" alt="Audio Processor Flow Chart.png"><br><img src="https://i.loli.net/2019/12/30/NxED3dr7sCqSRp1.jpg" alt="audio_block_diagram.jpg"><br>ä¸ªäººç†è§£ï¼š<br>å£°éŸ³ç”±é€šé“è¾“å…¥ï¼ŒMUXåï¼Œç»ç”±PreScaleå¤„ç†å£°éŸ³é¢å¤–çš„æ­£Gainï¼Œç„¶åç»è¿‡AVLã€EQã€Treble/Bassç­‰å¤„ç†åï¼Œè¾“å‡ºåˆ°åç«¯ï¼Œæ‰§è¡ŒVolumeã€Power Limiterã€Muteç­‰ï¼Œæœ€åç»è¿‡åŠŸæ”¾æ”¾å¤§ï¼Œè¾“å‡ºåˆ°å–‡å­ã€‚  </p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰å“ç”ŸæˆäºŒç»´ç demo</title>
    <url>/2020/04/15/android-qrcode-demo/</url>
    <content><![CDATA[<p>ä¸¾ä¸ªæ —å­ã€‚  </p>
<span id="more"></span>

<ol>
<li><p>éœ€è¦ç”¨åˆ°<code>zxing</code>è¿™ä¸ªåº“ã€‚<br>ä¸‹è½½<code>core-3.4.0.jar</code>è¿™ä¸ªä¸œè¥¿ï¼Œä¿®æ”¹<code>Android.mk</code>,å°†<code>core-3.4.0.jar</code>å†™åˆ°<code>LOCAL_STATIC_JAVA_LIBRARIES</code>å’Œ<code>LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES</code>ï¼Œç”¨äºç¼–è¯‘ã€‚  </p>
</li>
<li><p>æ·»åŠ äºŒç»´ç å·¥å…·ç±»<code>QRCodeUtils.java</code>  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.menu.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.graphics.Bitmap;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Matrix;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.zxing.BarcodeFormat;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.EncodeHintType;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.WriterException;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.common.BitMatrix;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.qrcode.QRCodeWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QRCodeUtils</span> </span>{</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"QRCodeUtil"</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">createQRImage</span><span class="params">(String url, <span class="keyword">final</span> <span class="keyword">int</span> width, <span class="keyword">final</span> <span class="keyword">int</span> height)</span> </span>{</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">			</span><br><span class="line">            <span class="keyword">if</span> (url == <span class="keyword">null</span> || <span class="string">""</span>.equals(url) || url.length() &lt; <span class="number">1</span>) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            }</span><br><span class="line">            Hashtable&lt;EncodeHintType, String&gt; hints = <span class="keyword">new</span> Hashtable&lt;EncodeHintType, String&gt;();</span><br><span class="line">            hints.put(EncodeHintType.CHARACTER_SET, <span class="string">"utf-8"</span>);</span><br><span class="line">            hints.put(EncodeHintType.MARGIN, <span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line">            BitMatrix bitMatrix = <span class="keyword">new</span> QRCodeWriter().encode(url,</span><br><span class="line">                    BarcodeFormat.QR_CODE, width, height, hints);</span><br><span class="line">            <span class="keyword">int</span>[] pixels = <span class="keyword">new</span> <span class="keyword">int</span>[width * height];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; height; y++) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; width; x++) {</span><br><span class="line">                    <span class="keyword">if</span> (bitMatrix.get(x, y)) {</span><br><span class="line">                        pixels[y * width + x] = <span class="number">0xff000000</span>;</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        pixels[y * width + x] = <span class="number">0xffffffff</span>;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            Bitmap bitmap = Bitmap.createBitmap(width, height,</span><br><span class="line">                    Bitmap.Config.ARGB_8888);</span><br><span class="line">            bitmap.setPixels(pixels, <span class="number">0</span>, width, <span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">            <span class="keyword">return</span> bitmap;</span><br><span class="line">        } <span class="keyword">catch</span> (WriterException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åˆ¶ä½œèœå•<br>ç•¥  </p>
</li>
<li><p>æŠŠäºŒç»´ç å›¾ç‰‡è®¾ç½®åˆ°èœå•<br>äºŒç»´ç å›¾ç‰‡çš„å†…å®¹æ˜¯å¾€<code>createQRImage</code>ä¼ å…¥çš„å­—ç¬¦ä¸²ã€‚  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">String allString = <span class="string">"helloworld"</span>;</span><br><span class="line">mImageView.setImageBitmap(QRCodeUtils.createQRImage(allString, <span class="number">128</span>, <span class="number">128</span>));</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>qrcode</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>å†¥æƒ³</title>
    <url>/2020/02/28/ming-xiang/</url>
    <content><![CDATA[<p>è´ªå©ªåœ°å‘¼å¸ï¼Ÿ    </p>
<span id="more"></span>


<ol>
<li>èˆ’é€‚åœ°è½åº§ã€‚ä½ ä¸ä¸€å®šéå¾—ç›˜è…¿ã€‚ååœ¨æ¤…å­ä¸Šã€å«å­ä¸Šï¼Œæˆ–è€…åœ°æ¿ä¸Šï¼Œå“ªé‡Œéƒ½å¯ä»¥ã€‚åªè¦ä½ ä¿è¯è„ŠæŸ±ç›´ç«‹ã€‚  </li>
<li>å‘¼å¸æ—¶æ„Ÿå—æ°”æ¯çš„è¿›å‡ºã€‚é€‰æ‹©ä¸€ä¸ªèº«ä½“éƒ¨ä½â€“é¼»è…”ï¼Œèƒ¸å£ï¼Œæˆ–è€…å†…è„ï¼Œå°†ä½ çš„æ³¨æ„åŠ›é›†ä¸­åœ¨é‚£é‡Œï¼Œè®¤çœŸåœ°å°è¯•æ„Ÿè§‰ä½ çš„å‘¼å¸ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€äº›æŸ”å’Œçš„æç¤ºï¼Œæ¯”å¦‚â€œå¸æ°”â€ã€â€œåæ°”â€ï¼Œåªè¦è¿™æ ·æœ‰åŠ©äºå¼•å¯¼ä½ çš„æ³¨æ„åŠ›ã€‚  </li>
<li>æ ¹æ®æˆ‘é˜…è¯»è¿‡çš„æ‰€æœ‰ä¹¦ç±ï¼Œè¿™ä¸€æ­¥æ˜¯é‡å¤´æˆã€‚ä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œå¦‚æœä½ çš„æ³¨æ„åŠ›è·‘åï¼Œåªè¦åŸè°…è‡ªå·±ï¼Œæ¢å¤å‘¼å¸èŠ‚å¥å°±å¯ä»¥äº†ã€‚ä½ ä¸éœ€è¦å‹‰å¼ºè‡ªå·±çš„å¤§è„‘ä¸€ç‰‡ç©ºç™½ï¼Œå› ä¸ºè¿™åŸºæœ¬æ˜¯ä¸å¯èƒ½çš„ã€‚ï¼ˆå½“ç„¶ï¼Œå½“ä½ çš„æ³¨æ„åŠ›é›†ä¸­åœ¨æ„Ÿå—å‘¼å¸æ—¶ï¼Œè„‘è¢‹é‡Œçš„å½å½å–³å–³ä¼šæš‚åœï¼Œä½†è¿™ç§å®é™ä¸ä¼šæŒç»­å¤ªä¹…ã€‚ï¼‰è¿™å°±æ˜¯ä¸ªè®­ç»ƒï¼Œç›®çš„åœ¨äºæŠ“ä½ä½ æ¸¸è¡çš„æ€ç»ªï¼Œç„¶åé‡å¯»ä½ çš„å‘¼å¸ï¼Œä¸€ééåœ°é‡å¤ã€‚  </li>
</ol>
<p>æ­¤åˆ»ï¼Œæˆ‘ç»ˆäºæ˜ç™½äº†ã€‚å¥‹æ–—æ— å¯åšéï¼Œåªè¦å¥‹æ–—è€…èƒ½å¤Ÿæ„è¯†åˆ°åœ¨è¿™å¹¿è¢¤çš„å®‡å®™ä¸­ï¼Œä¸€åˆ‡äº‹ç‰©çš„ç»“æœéƒ½ä¸ç”±æˆ‘ä»¬æŒæ§ï¼Œä¸å…¶åœ¨è‡ªå·±æ— æ³•æ§åˆ¶çš„å˜é‡ä¸Šæµªè´¹ç²¾åŠ›ï¼Œè¿˜ä¸å¦‚ä¸“æ³¨äºèƒ½å¤Ÿæ”¹å˜çš„ä¸œè¥¿ã€‚å½“ä½ çš„é›„å¿ƒå£®å¿—å¸¦ä¸Šäº†è¿™ä¸€å±‚æ™ºæ…§ï¼Œé‚£ä¹ˆä½ æ—¢èƒ½åƒæ–¹ç™¾è®¡åœ°è°‹æ±‚æˆåŠŸï¼Œåˆèƒ½æ´’è„±åœ°çœ‹å¾…ç»“æœã€‚å› æ­¤ï¼Œå³ä½¿é­é‡å¤±è´¥ï¼Œä¹Ÿèƒ½è¿…é€ŸæŒ¯ä½œèµ·æ¥ï¼Œæ¸æ¸æ»¡èº«çš„å°˜åœŸï¼Œé‡æ–°é¢å¯¹æŒ«æŠ˜ã€‚  </p>
<p>å¦‚æœç»“æœä¸å°½å¦‚äººæ„ï¼Œæˆ‘åªéœ€è¦é¼“èµ·å‹‡æ°”é‡æ–°å¼€å§‹å°±å¥½äº†ã€‚  </p>
<p>å› ä½ æ— æ³•æ”¹å˜çš„äº‹æƒ…è€Œéƒéƒå¯¡æ¬¢æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œå› ä½ èƒ½å¤Ÿæ”¹å˜çš„äº‹ç‰©è€Œæ„å®¹æ»¡é¢åŒæ ·æ²¡æœ‰å¸®åŠ©ã€‚  </p>
<p>é™å¿ƒå†¥æƒ³åŸºç¡€ç»ƒä¹ ï¼š  </p>
<ol>
<li>ä¿æŒèˆ’é€‚çš„åå§¿ã€‚  </li>
<li>æ„Ÿå—è‡ªå·±çš„å‘¼å¸ã€‚  </li>
<li>å½“ä½ èµ°ç¥çš„æ—¶å€™ï¼Œåªéœ€è¦æ¸©æŸ”åœ°å°†æ„è¯†å¸¦å›åˆ°å‘¼å¸ä¸Šå°±å¯ä»¥äº†ã€‚  </li>
</ol>
<hr>
<h4 id="æ¥æº"><a href="#æ¥æº" class="headerlink" title="æ¥æº"></a>æ¥æº</h4><p><a href="https://book.douban.com/subject/26434953/">ä¸€ä¸ªå†¥æƒ³è€…çš„è§‰çŸ¥ä¹¦</a></p>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>reading</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«ä¹</title>
    <url>/2020/03/28/kuai-le/</url>
    <content><![CDATA[<blockquote>
<p>è¿æ¢¦é‡Œä¹Ÿä¼šè§‰å¾—å¿«ä¹éš¾æ±‚<br>è¿æ³ªå…‰éƒ½å…‰ä¸è¿‡é»‘å¤œå°½å¤´<br>ä¸è¿‡ ä¸è¿‡æˆ‘ä¸ç”¨éš¾å—  </p>
</blockquote>
<span id="more"></span>


<blockquote>
<p>å¿«ä¹åœ¨äººç”Ÿé‡Œï¼Œå¥½æ¯”å¼•è¯±å°å­©å­åƒè¯çš„æ–¹ç³–ï¼Œæ›´åƒè·‘ç‹—åœºé‡Œå¼•è¯±ç‹—èµ›è·‘çš„ç”µå…”å­ã€‚å‡ åˆ†é’Ÿæˆ–è€…å‡ å¤©çš„å¿«ä¹èµšæˆ‘ä»¬æ´»äº†ä¸€ä¸–ï¼Œå¿å—ç€è®¸å¤šç—›è‹¦ã€‚æˆ‘ä»¬å¸Œæœ›å®ƒæ¥ï¼Œå¸Œæœ›å®ƒç•™ï¼Œå¸Œæœ›å®ƒå†æ¥â€”â€”è¿™ä¸‰å¥è¯æ¦‚æ‹¬äº†æ•´ä¸ªäººç±»åŠªåŠ›çš„å†å²ã€‚åœ¨æˆ‘ä»¬è¿½æ±‚å’Œç­‰å€™çš„æ—¶å€™ï¼Œç”Ÿå‘½åˆä¸çŸ¥ä¸è§‰åœ°å·åº¦è¿‡å»ã€‚ä¹Ÿè®¸æˆ‘ä»¬åªæ˜¯æ—¶é—´æ¶ˆè´¹çš„ç­¹ç ï¼Œæ´»äº†ä¸€ä¸–ä¸è¿‡æ˜¯ä¸ºé‚£ä¸€ä¸–çš„å²æœˆå……å½“æ®‰è‘¬å“ï¼Œæ ¹æœ¬ä¸ä¼šæƒ³åˆ°å¿«ä¹ã€‚ä½†æ˜¯æˆ‘ä»¬åˆ°æ­»ä¹Ÿä¸æ˜ç™½æ˜¯ä¸Šäº†å½“ï¼Œæˆ‘ä»¬è¿˜ç†æƒ³æ­»åæœ‰ä¸ªå¤©å ‚ï¼Œåœ¨é‚£é‡Œâ€”â€”è°¢ä¸Šå¸ï¼Œä¹Ÿæœ‰è¿™ä¸€å¤©ï¼æˆ‘ä»¬ç»ˆäºäº«å—åˆ°æ°¸è¿œçš„å¿«ä¹ã€‚ä½ çœ‹ï¼Œå¿«ä¹çš„å¼•è¯±ï¼Œä¸ä»…åƒç”µå…”å­å’Œæ–¹ç³–ï¼Œä½¿æˆ‘ä»¬å¿å—äº†äººç”Ÿï¼Œè€Œä¸”å½·ä½›é’“é’©ä¸Šçš„é±¼é¥µï¼Œç«Ÿä½¿æˆ‘ä»¬ç”˜å¿ƒå»æ­»ã€‚è¿™æ ·è¯´æ¥ï¼Œäººç”Ÿè™½ç—›è‹¦ï¼Œå´ä¸æ‚²è§‚ï¼Œå› ä¸ºå®ƒç»ˆæŠ±ç€å¿«ä¹çš„å¸Œæœ›ï¼›ç°åœ¨çš„è´¦ï¼Œæˆ‘ä»¬é¢„æ”¯äº†å°†æ¥å»ä»˜ã€‚ä¸ºäº†å¿«æ´»ï¼Œæˆ‘ä»¬ç”šè‡³äºæ„¿æ„æ…¢æ­»ã€‚  </p>
</blockquote>
]]></content>
      <categories>
        <category>Love</category>
      </categories>
      <tags>
        <tag>happiness</tag>
      </tags>
  </entry>
  <entry>
    <title>USB Port Status</title>
    <url>/2020/04/22/usb-port-status/</url>
    <content><![CDATA[<p>éœ€è¦æ£€æµ‹å¹³å°çš„ä¸¤è·¯USBç«¯å£æ˜¯å¦æ¥å…¥äº†è®¾å¤‡ã€‚ä¸å¤ªæ˜ç™½ã€‚  </p>
<span id="more"></span>


<p>ç½‘ä¸Šç¿»äº†ä¸€éï¼Œæ²¡æ‰¾åˆ°å®‰å“ä¸Šå±‚æ¥å£å¯ä»¥ç›´æ¥åˆ¤æ–­USBç«¯å£çš„çŠ¶æ€ï¼Œåªèƒ½ç®€å•åœ°è·å¾—USBè®¾å¤‡çš„æ•°é‡ã€‚ç±»ä¼¼è¿™ç§:  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getFirstUsbStoragePath</span><span class="params">(Context mContext)</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> StorageVolume[] volumes = StorageManager.getVolumeList(mContext.getUserId(), StorageManager.FLAG_FOR_WRITE);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; volumes.length; i++) {</span><br><span class="line">        <span class="keyword">if</span> (volumes[i].getPathFile().getAbsolutePath().contains(<span class="string">"emulated"</span>)) {</span><br><span class="line">            <span class="comment">// ignore internal path</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            DebugLog.d(<span class="string">"USB storage path:"</span> + volumes[i].getPathFile() + <span class="string">"; index:"</span> + i);</span><br><span class="line">            <span class="keyword">return</span> volumes[i].getPathFile().getAbsolutePath();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><code>sda1</code>å’Œ<code>sdb1</code>ä¹Ÿä¸èƒ½è·Ÿæ¿å¡çš„ç‰©ç†ç«¯å£å¯¹åº”ä¸Šï¼Œä¸çŸ¥é“æ€ä¹ˆåšã€‚  </p>
<p>åæ¥è·æ‚‰åŸå‚æœ‰å¦‚ä¸‹åšæ³•ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getUsb1StorageState</span><span class="params">()</span> </span>{</span><br><span class="line">	File checkfile = <span class="keyword">null</span>;</span><br><span class="line">	checkfile = <span class="keyword">new</span> File(<span class="string">"/sys/bus/usb/devices/1-1:1.0"</span>);</span><br><span class="line">	<span class="keyword">if</span>(checkfile != <span class="keyword">null</span> &amp;&amp; checkfile.exists() &amp;&amp; checkfile.isDirectory())</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getUsb2StorageState</span><span class="params">()</span> </span>{</span><br><span class="line">	File checkfile = <span class="keyword">null</span>;</span><br><span class="line">	checkfile = <span class="keyword">new</span> File(<span class="string">"/sys/bus/usb/devices/1-2:1.0"</span>);</span><br><span class="line">	<span class="keyword">if</span>(checkfile != <span class="keyword">null</span> &amp;&amp; checkfile.exists() &amp;&amp; checkfile.isDirectory())</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å®é™…æ‹”æ’Uç›˜ï¼š<br>å½“æ¿å¡ä¸¤è·¯USBéƒ½æ²¡æœ‰æ¥ä¸ŠUç›˜æ—¶ï¼š  </p>
<blockquote>
<p>console:/ $ ls sys/bus/usb/devices/ -l<br>total 0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-0:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-0:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.1 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.1<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.2 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.2<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 2-0:1.0 -&gt; ../../../devices/platform/usb/18013400.ohci_top/usb2/2-0:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 usb1 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 usb2 -&gt; ../../../devices/platform/usb/18013400.ohci_top/usb2</p>
</blockquote>
<p>å½“æ¿å¡ä¸¤è·¯USBéƒ½æ¥ä¸ŠUç›˜æ—¶ï¼š  </p>
<blockquote>
<p>console:/ $ ls sys/bus/usb/devices/ -l<br>total 0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-0:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-0:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-1 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-1<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-1:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-1/1-1:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-2 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-2<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-2:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-2/1-2:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.0 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.1 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.1<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 1-3:1.2 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1/1-3/1-3:1.2<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 2-0:1.0 -&gt; ../../../devices/platform/usb/18013400.ohci_top/usb2/2-0:1.0<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 usb1 -&gt; ../../../devices/platform/usb/18013000.ehci_top/usb1<br>lrwxrwxrwx    1 0        0                0 Apr 22 07:54 usb2 -&gt; ../../../devices/platform/usb/18013400.ohci_top/usb2</p>
</blockquote>
<p>å¯çœ‹åˆ°ä¸¤è·¯USBåˆ†åˆ«å¯¹åº”<code>sys/bus/usb/devices/1-1</code>ã€<code>sys/bus/usb/devices/1-1:1.0</code>å’Œ<code>sys/bus/usb/devices/1-2</code>ã€<code>sys/bus/usb/devices/1-2:1.0</code>ï¼Œå¹¶ä¸”èƒ½è·Ÿç‰©ç†åœ°å€å¯¹åº”ä¸Šã€‚æ‰€ä»¥å¯ä»¥è®¤ä¸ºå½“Uç›˜æ¥å…¥æ—¶ï¼Œå¯¹åº”çš„æ–‡ä»¶å°±ç”Ÿæˆäº†ã€‚å› æ­¤é€šè¿‡è¿™ä¸ªæ–‡ä»¶åˆ¤æ–­å¯¹åº”çš„USB Portæ˜¯å¦æœ‰æ¥ä¸Šè®¾å¤‡ã€‚  </p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>android</tag>
        <tag>usb</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸‹Threadä½¿ç”¨demo</title>
    <url>/2020/04/15/linux-thread-demo/</url>
    <content><![CDATA[<p>è¿™é‡Œçš„åœºæ™¯æ˜¯ä¸²å£è‡ªå‘è‡ªæ”¶ã€‚  </p>
<span id="more"></span>


<p>å…ˆè´´ä»£ç ï¼š  </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> readRet = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">CH_Factory_Uart_Selfcheck_Reading_Thread</span><span class="params">(<span class="keyword">void</span> *arg)</span> </span>{</span><br><span class="line">	SINT32 count = <span class="number">0</span>;</span><br><span class="line">	SINT32 port_id = <span class="number">0</span>;<span class="comment">// use uart 0</span></span><br><span class="line">	SINT32 read_len = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">char</span> buf[] = <span class="string">"changhong"</span>;</span><br><span class="line">	<span class="built_in">memset</span>(buf,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(buf));</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">RHAL_UART_ReadUart</span>(port_id,(UINT8 *)buf,&amp;read_len,<span class="built_in"><span class="keyword">sizeof</span></span>(buf));</span><br><span class="line">		count++;</span><br><span class="line">		<span class="keyword">if</span>(read_len &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">strcmp</span>(buf,<span class="string">"changhong"</span>) == <span class="number">0</span>) {</span><br><span class="line">			<span class="built_in">ALOGD</span>(<span class="string">"[%s] [%d]: count = %d, buf = %s, read_len = %d\n"</span>,__func__,__LINE__,count,buf,read_len);</span><br><span class="line">			<span class="built_in">ALOGD</span>(<span class="string">"[%s] [%d]: OOOOOOOOOOOOOOOOK!\n"</span>,__func__,__LINE__);</span><br><span class="line">			readRet = <span class="number">1</span>;</span><br><span class="line">			<span class="built_in">pthread_exit</span>(<span class="number">0</span>);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span>(count &gt; <span class="number">20</span>) {</span><br><span class="line">			<span class="built_in">ALOGD</span>(<span class="string">"[%s] [%d]: ERRORRRRRRRRRRRR!\n"</span>,__func__,__LINE__);</span><br><span class="line">			readRet = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">pthread_exit</span>(<span class="number">0</span>);</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CSystemControl::CH_Factory_Uart_Check</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">ALOGD</span>(<span class="string">"[%s] [%d]\n"</span>,__func__,__LINE__);</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    SINT32 read_len = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">char</span> buf[] = <span class="string">"changhong"</span>;</span><br><span class="line">    SINT32 port_id = <span class="number">0</span>;<span class="comment">// use uart 0</span></span><br><span class="line">    <span class="keyword">pthread_t</span> readThreadId;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">"stop console"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">RHAL_UART_SelectUart</span>(port_id)!=<span class="number">0</span>)</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">system</span>(<span class="string">"start console"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">	<span class="built_in">pthread_create</span>(&amp;readThreadId, <span class="literal">NULL</span>, CH_Factory_Uart_Selfcheck_Reading_Thread, <span class="literal">NULL</span>);</span><br><span class="line">	</span><br><span class="line">    ret = <span class="built_in">RHAL_UART_WriteUart</span>(port_id,(UINT8 *)buf,<span class="built_in"><span class="keyword">sizeof</span></span>(buf));</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span> != ret) </span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">ALOGD</span>(<span class="string">"[%s] [%d]: write uart fail\n"</span>,__func__,__LINE__);</span><br><span class="line">		<span class="built_in">pthread_join</span>(readThreadId, <span class="literal">NULL</span>);</span><br><span class="line">		<span class="built_in">RHAL_UART_SelectUart</span>(<span class="number">1</span>); <span class="comment">//switch back to UART1</span></span><br><span class="line">		<span class="built_in">system</span>(<span class="string">"start console"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">pthread_join</span>(readThreadId, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">RHAL_UART_SelectUart</span>(<span class="number">1</span>); <span class="comment">//switch back to UART1</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">"start console"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(!readRet)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šä»£ç çº¿ç¨‹çš„ç‚¹åœ¨äºï¼š  </p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ª<code>ID</code>  </p>
<blockquote>
<p>pthread_t readThreadId;  </p>
</blockquote>
</li>
<li><p>åˆ›å»ºäº†çº¿ç¨‹ï¼Œ<code>ID</code>ä¸å®é™…çš„çº¿ç¨‹å‡½æ•°åŒ¹é…äº†  </p>
<blockquote>
<p>pthread_create(&amp;readThreadId, NULL, CH_Factory_Uart_Selfcheck_Reading_Thread, NULL);  </p>
</blockquote>
<p> <code>CH_Factory_Uart_Selfcheck_Reading_Thread</code>å°±æ˜¯è¢«åˆ›å»ºçš„çº¿ç¨‹ï¼Œ<code>ID</code>æ˜¯<code>readThreadId</code>  </p>
</li>
<li><p>é€€å‡ºçº¿ç¨‹  </p>
<blockquote>
<p>pthread_join(readThreadId, NULL);  </p>
</blockquote>
<p> <code>pthread_join</code>ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…<code>CH_Factory_Uart_Selfcheck_Reading_Thread</code>ç»“æŸã€‚<code>CH_Factory_Uart_Selfcheck_Reading_Thread</code>æ˜¯ä¸€ä¸ª<code>while(1)</code>å¾ªç¯ï¼Œå½“ä¸²å£è¯»åˆ°éœ€è¦çš„æ•°æ®æ—¶ï¼Œé€šè¿‡<code>pthread_exit(0)</code>ä½¿çº¿ç¨‹å†…éƒ¨ç»“æŸï¼Œè¿™ä¸ªæ—¶å€™è·³åˆ°ä¸»çº¿ç¨‹çš„<code>pthread_join</code>ï¼Œ<code>pthread_join</code>ç»ˆäºç­‰åˆ°äº†<code>CH_Factory_Uart_Selfcheck_Reading_Thread</code>ç»“æŸï¼Œä¸»çº¿ç¨‹å°±å¯ä»¥ç»§ç»­è·‘ä¸‹å»äº†ã€‚  </p>
</li>
</ol>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>coding</tag>
        <tag>demo</tag>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title>è“ç‰™æ‰«ædemo</title>
    <url>/2020/04/23/scan-bluetooth-device-demo/</url>
    <content><![CDATA[<p>å®‰å“æ‰«æé™„è¿‘çš„è“ç‰™è®¾å¤‡ã€‚  </p>
<span id="more"></span>


<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//MainActivity.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.bluetoothtest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest;</span><br><span class="line"><span class="keyword">import</span> android.bluetooth.BluetoothAdapter;</span><br><span class="line"><span class="keyword">import</span> android.bluetooth.BluetoothDevice;</span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.IntentFilter;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.net.ConnectivityManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.ActivityCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"SystemInfoFragment"</span>;</span><br><span class="line">    <span class="keyword">private</span> ConnectivityManager mConnectivityManager;</span><br><span class="line">    <span class="keyword">private</span> BluetoothAdapter btAdapt;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; mBluetoothList;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        mBluetoothList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        btAdapt = BluetoothAdapter.getDefaultAdapter();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(btAdapt.getState() != BluetoothAdapter.STATE_ON) {</span><br><span class="line">            btAdapt.enable();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        mBluetoothList.clear();</span><br><span class="line">        <span class="keyword">if</span> (btAdapt.isDiscovering()) {</span><br><span class="line">            btAdapt.cancelDiscovery();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">23</span>) {</span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {</span><br><span class="line">                <span class="comment">//éœ€è¦åŠ¨æ€ç”³è¯·æƒé™</span></span><br><span class="line">                ActivityCompat.requestPermissions(MainActivity.<span class="keyword">this</span>, <span class="keyword">new</span> String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, <span class="number">10</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        btAdapt.startDiscovery();</span><br><span class="line"></span><br><span class="line">        IntentFilter intent = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">        intent.addAction(BluetoothDevice.ACTION_FOUND);</span><br><span class="line">        intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);</span><br><span class="line">        intent.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);</span><br><span class="line">        registerReceiver(scanBluetoothDevices, intent);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span>(scanBluetoothDevices != <span class="keyword">null</span>) {</span><br><span class="line">            unregisterReceiver(scanBluetoothDevices);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (btAdapt.isDiscovering()) {</span><br><span class="line">            btAdapt.cancelDiscovery();</span><br><span class="line">        }</span><br><span class="line">        mBluetoothList.clear();</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> BroadcastReceiver scanBluetoothDevices = <span class="keyword">new</span> BroadcastReceiver() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>{</span><br><span class="line">            String action = intent.getAction();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (action.equals(BluetoothDevice.ACTION_FOUND)) {</span><br><span class="line">                <span class="comment">//found device</span></span><br><span class="line">                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);</span><br><span class="line">                <span class="keyword">int</span> deviceType = device.getType();</span><br><span class="line">                String str = device.getName() + <span class="string">"("</span> + device.getAddress() + <span class="string">")"</span>;</span><br><span class="line">                Log.d(TAG, <span class="string">"found bluetooth device: "</span> + deviceType + <span class="string">" - "</span> + str);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (mBluetoothList.indexOf(str) == -<span class="number">1</span>) {</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(deviceType == BluetoothDevice.DEVICE_TYPE_CLASSIC)</span><br><span class="line">                        Log.d(TAG, <span class="string">"deviceType: DEVICE_TYPE_CLASSIC"</span>);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(deviceType == BluetoothDevice.DEVICE_TYPE_LE)</span><br><span class="line">                        Log.d(TAG, <span class="string">"deviceType: DEVICE_TYPE_LE"</span>);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(deviceType == BluetoothDevice.DEVICE_TYPE_DUAL)</span><br><span class="line">                        Log.d(TAG, <span class="string">"deviceType: DEVICE_TYPE_DUAL"</span>);</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(deviceType == BluetoothDevice.DEVICE_TYPE_UNKNOWN)</span><br><span class="line">                        Log.d(TAG, <span class="string">"deviceType: DEVICE_TYPE_UNKNOWN"</span>);</span><br><span class="line"></span><br><span class="line">                    mBluetoothList.add(str);</span><br><span class="line">                    Log.d(TAG, <span class="string">"add bluetooth device: "</span> + str);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (action.equals(BluetoothAdapter.ACTION_DISCOVERY_STARTED)) {</span><br><span class="line">                <span class="comment">//Scanning</span></span><br><span class="line">                Log.d(TAG, <span class="string">"start scanning bluetooth devices... "</span>);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (action.equals(BluetoothAdapter.ACTION_DISCOVERY_FINISHED)) {</span><br><span class="line">                <span class="comment">//Scan Finished</span></span><br><span class="line">                Log.d(TAG, <span class="string">"scan bluetooth devices finished"</span>);</span><br><span class="line">                Log.d(TAG, <span class="string">"mBluetoothList size = "</span> + mBluetoothList.size());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>AndroidManifest.xml</code>éœ€è¦æ·»åŠ å¦‚ä¸‹æƒé™ï¼š  </p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH_ADMIN"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BLUETOOTH"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<p>ç®€å•æ€»ç»“å°±æ˜¯ï¼šå…ˆ<code>startDiscovery()</code>ï¼Œç„¶åæ³¨å†Œä¸€ä¸ªæœç´¢ç›‘å¬å¹¿æ’­<code>scanBluetoothDevices</code>ã€‚<br><code>startDiscovery()</code>è¿™ä¸ªæ¥å£èƒ½æ‰«æ‰€æœ‰è®¾å¤‡ï¼ŒåŒ…æ‹¬ç»å…¸è“ç‰™å’ŒBLEã€‚<br>ç½‘ä¸Šèµ„æ–™è¯´ï¼Œä¸è®¾å®šæ‰«æå‘¨æœŸçš„è¯ï¼Œé»˜è®¤12ç§’ï¼Œä½†æ˜¯å®æµ‹å¹¶ä¸éƒ½æ˜¯12ç§’ã€‚<br>é¡ºä¾¿ä¸€æï¼ŒBLEæœ€å¤§çš„å¹¿æ’­é—´éš”æ˜¯10.25ç§’ã€‚<br>é¡ºä¾¿å†æï¼Œè“ç‰™è€³æœºéƒ½æ˜¯ç»å…¸è“ç‰™ï¼ŒBLEç›®å‰çš„åè®®æ˜¯ä¸æ”¯æŒéŸ³é¢‘ä¼ è¾“çš„ã€‚  </p>
<p>é‡åˆ°çš„é—®é¢˜ï¼š  </p>
<ol>
<li>ç¼–è¯‘ä¸è¿‡ã€‚â€error: cannot find symbol registerReceiver/unregisterReceiverâ€ï¼Œå½“æ—¶æ˜¯å†™åœ¨<code>Fragment</code>ä¸­ï¼Œä½†æ˜¯<code>Fragment</code>æ˜¯æ²¡æœ‰è¿™ä¸ªæ–¹æ³•çš„ã€‚æœ€ç»ˆåœ¨<code>onAttach(Activity activity)</code>ä¸­<code>activity.registerReceiver(scanBluetoothDevices, intent);</code>ï¼Œåœ¨<code>onDetach()</code>ä¸­<code>getActivity().unregisterReceiver(scanBluetoothDevices);</code>ã€‚  </li>
<li>èœå•ä¸Šçœ‹åˆ°ä¸€äº›ç©ºç™½è®¾å¤‡ã€‚å½“æ—¶ä»¥ä¸ºæ˜¯æ‰«ä¸åˆ°è®¾å¤‡ï¼Œæ£€æŸ¥æ‰“å°æ‰çŸ¥é“æœ‰æ‰«åˆ°äº†ï¼Œåªæ˜¯è®¾å¤‡æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥å°±ç©ºç™½äº†ï¼Œä½†æ˜¯æ‰“å°èƒ½çœ‹åˆ°æœ‰<code>mac</code>åœ°å€ã€‚  </li>
</ol>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>demo</tag>
        <tag>bluetooth</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¼€æœºä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡</title>
    <url>/2020/05/27/linux-task/</url>
    <content><![CDATA[<p>å¦‚é¢˜</p>
<span id="more"></span>


<h3 id="å¼€æœºä»»åŠ¡"><a href="#å¼€æœºä»»åŠ¡" class="headerlink" title="å¼€æœºä»»åŠ¡"></a>å¼€æœºä»»åŠ¡</h3><p>ç¼–è¾‘<code>/etc/rc.local</code>æ–‡ä»¶ï¼ŒåŠ ä¸Šéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚  </p>
<p>ä½†æ˜¯æœ‰çš„Linuxç‰ˆæœ¬æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ è¿™ä¸ªæ–‡ä»¶ï¼Œä¾ç„¶èƒ½å¤Ÿç”Ÿæ•ˆï¼š  </p>
<ol>
<li><p>æ·»åŠ è¿™ä¸ªæ–‡ä»¶  </p>
 <figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">vim /etc/rc.local</span><br></pre></td></tr></tbody></table></figure>
 <figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ifconfig ens33 192.168.52.128 netmask 255.255.255.0</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ·»åŠ æƒé™  </p>
 <figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">chmod 755 /etc/rc.local</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>è®¾ç½®å¯åŠ¨  </p>
 <figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">systemctl restart rc-local</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>é‡å¯ï¼Œå¼€æœºä»»åŠ¡æœ‰è¢«æ‰§è¡Œ  </p>
</li>
</ol>
<h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">crontab -l #åˆ—å‡ºå·¥ä½œè¡¨é‡Œçš„å‘½ä»¤</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">crontab -e #ç¼–è¾‘å®šæ—¶å·¥ä½œè¡¨</span><br></pre></td></tr></tbody></table></figure>

<p><code>crontab</code>å‘½ä»¤æ„æˆä¸º<code>æ—¶é—´</code>+<code>åŠ¨ä½œ</code>ï¼Œæ—¶é—´æœ‰ï¼š  </p>
<ul>
<li>åˆ†(0-59)</li>
<li>æ—¶(0-23)</li>
<li>æ—¥(1-31)</li>
<li>æœˆ(1-12)</li>
<li>å‘¨(0-6ï¼Œå…¶ä¸­0ä»£è¡¨æ˜ŸæœŸæ—¥)</li>
</ul>
<p>æ“ä½œç¬¦æœ‰ï¼š  </p>
<ul>
<li>* å–å€¼èŒƒå›´å†…çš„æ‰€æœ‰æ•°å­—  </li>
<li>/ æ¯è¿‡å¤šå°‘ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºé¢‘ç‡  </li>
<li>- è¡¨ç¤ºèŒƒå›´  </li>
<li>, æ•£åˆ—æ•°å­—  </li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š  </p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">*/360 * * * * /usr/sbin/ntpdate time.nist.gov # æ—¶é—´åŒæ­¥ï¼Œæ¯éš”å…­å°æ—¶åŒæ­¥ä¸€æ¬¡</span><br><span class="line">2 * * * * /home/foo/test.sh # è¿™ä¸ªcronä½œä¸šä¼šåœ¨æ¯å¤©å„å°æ—¶çš„ç¬¬2åˆ†é’Ÿæ‰§è¡Œè„šæœ¬test.sh</span><br><span class="line">0 5,6,7 * * * /home/foo/test.sh # æ¯å¤©çš„ç¬¬5ã€6ã€7å°æ—¶æ‰§è¡Œè„šæœ¬</span><br><span class="line">0 2 * * * /sbin/shutdown -h # åœ¨æ¯å¤©å‡Œæ™¨2ç‚¹é’Ÿå…³é—­è®¡ç®—æœº</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WiFiæ‰«ædemo</title>
    <url>/2020/04/23/scan-wifi-demo/</url>
    <content><![CDATA[<p>å®‰å“æ‰«æWiFiã€‚  </p>
<span id="more"></span>


<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//MainActivity.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.wifitest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.Manifest;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.net.wifi.ScanResult;</span><br><span class="line"><span class="keyword">import</span> android.net.wifi.WifiManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.ActivityCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.content.ContextCompat;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</span><br><span class="line">    <span class="keyword">private</span> WifiManager mWifiManager;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ScanResult&gt; mWifiList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">23</span>) {</span><br><span class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {</span><br><span class="line">		<span class="comment">//éœ€è¦åŠ¨æ€ç”³è¯·æƒé™</span></span><br><span class="line">                ActivityCompat.requestPermissions(MainActivity.<span class="keyword">this</span>, <span class="keyword">new</span> String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, <span class="number">10</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        mWifiManager = (WifiManager) <span class="keyword">this</span>.getSystemService(Context.WIFI_SERVICE);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!mWifiManager.isWifiEnabled()) {</span><br><span class="line">            mWifiManager.setWifiEnabled(<span class="keyword">true</span>);</span><br><span class="line">        }</span><br><span class="line">        mWifiList.clear();</span><br><span class="line">        mWifiManager.startScan();</span><br><span class="line">        mWifiList = mWifiManager.getScanResults();</span><br><span class="line"></span><br><span class="line">        Log.d(TAG, <span class="string">"mWifiList.size(): "</span> + mWifiList.size());</span><br><span class="line">        <span class="keyword">if</span>(mWifiList.size() &gt; <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mWifiList.size(); ++i) {</span><br><span class="line">                Log.d(TAG, <span class="string">"mWifiList["</span> + i + <span class="string">"].SSID : "</span> + mWifiList.get(i).SSID);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>AndroidManifest.xml</code>éœ€è¦æ·»åŠ å¦‚ä¸‹æƒé™ï¼š  </p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.CHANGE_NETWORK_STATE"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šã€‚  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>demo</tag>
        <tag>wifi</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidç³»ç»Ÿå±æ€§</title>
    <url>/2020/05/27/android-system-property/</url>
    <content><![CDATA[<p>æ¥æºç½‘ç»œ</p>
<span id="more"></span>


<h3 id="å±æ€§çš„åˆ†ç±»"><a href="#å±æ€§çš„åˆ†ç±»" class="headerlink" title="å±æ€§çš„åˆ†ç±»"></a>å±æ€§çš„åˆ†ç±»</h3><p>roå¼€å¤´çš„å±æ€§ï¼Œè¡¨æ˜è¯¥å±æ€§æ˜¯åªè¯»çš„ï¼Œä¸€æ—¦è®¾ç½®ï¼Œä¸èƒ½æ›´æ”¹ã€‚<br>persistå¼€å¤´çš„å±æ€§ï¼Œè¡¨æ˜è¯¥å±æ€§æ˜¯å¯ä¿®æ”¹çš„ï¼Œä»¥persistå¼€å§‹çš„å±æ€§ä¼šåœ¨/data/propertyå­˜ä¸€ä¸ªå‰¯æœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç¨‹åºè°ƒproperty_setè®¾äº†ä¸€ä¸ªä»¥persistä¸ºå‰ç¼€çš„å±æ€§ï¼Œç³»ç»Ÿä¼šåœ¨/data/property/persistent_propertiesè®°å½•è¿™ä¸ªå±æ€§ï¼Œé‡å¯ä¹‹åè¿™ä¸ªå±æ€§è¿˜ä¼šå­˜åœ¨ã€‚<br>ctl.startå’Œctl.stopå±æ€§ã€‚ç”¨æ¥å¯åŠ¨å’Œåœæ­¢init.rcä¸­å®šä¹‰çš„æœåŠ¡ã€‚<br>å…¶ä»–æ ¼å¼çš„å±æ€§éƒ½å¯ä¿®æ”¹ï¼Œé‡å¯ä¸ä¿å­˜ï¼Œå› ä¸ºå±æ€§æ˜¯åœ¨å†…å­˜é‡Œå­˜çš„ï¼Œæ‰€ä»¥é‡å¯åè¿™ä¸ªå±æ€§å°±æ²¡æœ‰äº†ã€‚  </p>
<h3 id="å±æ€§çš„è®¾ç½®å’Œè·å–"><a href="#å±æ€§çš„è®¾ç½®å’Œè·å–" class="headerlink" title="å±æ€§çš„è®¾ç½®å’Œè·å–"></a>å±æ€§çš„è®¾ç½®å’Œè·å–</h3><p>Java  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.SystemProperties;</span><br><span class="line"></span><br><span class="line">SystemProperties.set(<span class="string">"persist.sys.miracast.hdcp2"</span>,â€<span class="number">1</span>â€);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(SystemProperties.get(<span class="string">"persist.sys.miracast.hdcp2"</span>).equals(<span class="string">"1"</span>)) {</span><br><span class="line">    Log.d(TAG, <span class="string">"666"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Native  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cutils/properties.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> value[PROPERTY_VALUE_MAX];</span><br><span class="line">property_get(<span class="string">"persist.sys.miracast.hdcp2"</span>, value, <span class="string">"1"</span>);</span><br><span class="line">property_set(<span class="string">"persist.sys.miracast.hdcp2"</span>, value);</span><br></pre></td></tr></tbody></table></figure>

<p>Shell  </p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">setprop persist.sys.miracast.hdcp2 0</span><br><span class="line">getprop persist.sys.miracast.hdcp2</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±æ€§çš„æƒé™"><a href="#å±æ€§çš„æƒé™" class="headerlink" title="å±æ€§çš„æƒé™"></a>å±æ€§çš„æƒé™</h3><p>ç¨‹åºè¦æ­£ç¡®è·å–/è®¾ç½®æƒé™ï¼Œéœ€è¦æœ‰systemæƒé™ã€‚  </p>
<ol>
<li>åœ¨AndroidManifest.xmlä¸­ï¼Œåœ¨manifeståŠ å…¥android:sharedUserId=â€android.uid.systemâ€  </li>
<li>åœ¨Android.mkä¸­ï¼Œå°‡LOCAL_CERTIFICATE := XXXä¿®æ”¹æˆLOCAL_CERTIFICATE := platform  </li>
</ol>
<p>è¿è¡Œæ—¶å€™å¯èƒ½è¿˜ä¼šæœ‰â€œlibc access denied finding property androidâ€çš„é—®é¢˜ï¼Œéœ€è¦æŠŠç›¸å…³avc deniedçš„æŠ¥é”™ä¿¡æ¯ä¿®æ‰  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>dlopen failedå¤„ç†</title>
    <url>/2020/07/15/dlopen-failed/</url>
    <content><![CDATA[<p>å¦‚é¢˜</p>
<span id="more"></span>


<p>ä½¿ç”¨çš„æ˜¯Android7.1å¹³å°ã€‚<br>åº”ç”¨æœ¬æ¥æ˜¯ç³»ç»Ÿé¢„ç½®çš„ï¼Œä½†æ˜¯æœ‰äº›å®¢æˆ·éœ€è¦åšæ¨é€ã€‚ä½¿ç”¨Uç›˜å®‰è£…æµ‹è¯•çš„æ—¶å€™ï¼Œé—ªé€€ã€‚AndroidRuntimeæŠ¥é”™ï¼š  </p>
<blockquote>
<p>java.lang.UnsatisfiedLinkError: dlopen failed: library â€œ/system/lib/librtk-mediaplayer_jni.soâ€ needed<br>or dlopened by â€œ/system/lib/libnativeloader.soâ€ is not accessible for the namespace â€œclassloader-namespaceâ€  </p>
</blockquote>
<p>æ‰¾åˆ°librtk-mediaplayer_jni.soåœ¨ç³»ç»Ÿä¸­çš„/system/libç›®å½•ï¼Œä¿®æ”¹ä»£ç /system/core/libnativeloader/native_loader.cppæ–‡ä»¶ï¼ŒæŠŠ  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keyword">char</span>* kWhitelistedDirectories = <span class="string">"/data:/mnt/expand"</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>æ”¹æˆ  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">const</span> <span class="keyword">char</span>* kWhitelistedDirectories = <span class="string">"/data:/mnt/expand:/system/lib"</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>ç¼–è¯‘ã€å‡çº§ã€æµ‹è¯•ï¼Œè¿è¡Œæ—¶æœ‰æ–°çš„æŠ¥é”™æç¤ºï¼š  </p>
<blockquote>
<p>java.lang.UnsatisfiedLinkError: dlopen failed: library â€œlibutils.soâ€ not found  </p>
</blockquote>
<p>æ‰¾åˆ°ç³»ç»Ÿçš„/system/etc/public.libraries.txtæ–‡ä»¶ï¼Œå‘ç°å…¶ä¸­æ²¡æœ‰libutils.soï¼Œé€šè¿‡  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ su</span><br><span class="line">foo@bar:~$ mount -o rw,remount /</span><br><span class="line">foo@bar:~$ mount -o rw,remount /system</span><br><span class="line">foo@bar:~$ sed -i '1alibutils.so' /system/etc/public.libraries.txt</span><br><span class="line">foo@bar:~$ sync</span><br><span class="line">foo@bar:~$ reboot</span><br></pre></td></tr></tbody></table></figure>
<p>ä¿®æ”¹æµ‹è¯•ï¼Œç»§ç»­æœ‰libnativehelper.soã€librtk-mediaplayer.soæ‰¾ä¸åˆ°çš„æŠ¥é”™ï¼Œä¾æ¬¡æ·»åŠ åˆ°public.libraries.txtï¼Œæœ€ååº”ç”¨èƒ½æ­£å¸¸ä½¿ç”¨äº†ã€‚<br>æ¥ç€ä¿®æ”¹ä»£ç /system/core/rootdir/etc/public.libraries.android.txtï¼Œæ·»åŠ libutils.soã€libnativehelper.soå’Œlibrtk-mediaplayer.soï¼Œé‡æ–°ç¼–è¯‘ã€å‡çº§ã€æµ‹è¯•ï¼Œè¿è¡ŒOKã€‚  </p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://stackoverflow.com/questions/54234905/how-to-modify-vendor-etc-public-libraries-txt-when-building-pure-aosp">How to modify â€œvendor/etc/public.libraries.txtâ€ when building pure AOSP</a>  </li>
<li><a href="https://www.cnblogs.com/Qunter/p/7485090.html">ã€Android Nå…¼å®¹é—®é¢˜ã€‘Android Nä¸Šç³»ç»Ÿé¢„ç½®åº”ç”¨è°ƒç”¨soåº“å¤±è´¥é—®é¢˜çš„çœ‹æ³•</a>  </li>
<li><a href="https://www.jianshu.com/p/a4af2bdcc3c0">android N : java.lang.UnsatisfiedLinkError</a>  </li>
<li><a href="https://www.jianshu.com/p/4be3d1dafbec">FrameworkåŸºç¡€ï¼šAndroid N å…¬å…±soåº“æ€ä¹ˆå®šä¹‰å‘¢ï¼Ÿ</a>  </li>
<li><a href="https://blog.csdn.net/duan_xiaosu/article/details/81031174">Android 7.0ä»¥å .so link åŠ è½½é“¾æ¥è¿‡ç¨‹ä¸­ dlopen failed é—®é¢˜</a>  </li>
<li><a href="https://segmentfault.com/a/1190000021461854">Android åŠ¨æ€é“¾æ¥åº“éš”ç¦»</a>  </li>
</ul>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>bootåˆ°kernelçš„ä¼ é€’</title>
    <url>/2020/08/03/uboot-kernel/</url>
    <content><![CDATA[<p>ç†è§£ä¸æ·±ï¼Œç®€å•è®°å½•ä¸€ä¸‹ã€‚</p>
<span id="more"></span>


<p>æ–°ICå‡ºæ¥äº†ï¼Œè¦ç§»æ¤é…ç½®ï¼Œæœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå¢å‡é¥æ§å™¨ï¼Œæ— ä½œç”¨ã€‚é¥æ§è§£ç æ˜¯åœ¨å†…æ ¸å¤„ç†çš„ï¼Œdebugå‘ç°ï¼šé…ç½®é‡Œæ²¡æœ‰é€‰ä¸Šçš„é¥æ§å™¨ï¼Œå†…æ ¸ä¹Ÿæœ‰åœ¨è§£æï¼Œå› ä¸ºir_tableç”¨çš„æ˜¯å†…æ ¸é‡Œé…ç½®çš„ï¼Œæ–°ir_tableä¸æ˜¯åœ¨å†…æ ¸é‡Œé¢é…ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ†ç¦»å‡ºæ¥çš„å®šåˆ¶é…ç½®æ²¡æœ‰æ•ˆæœï¼Œæ‰€ä»¥è¦æŠŠå†…æ ¸çš„ir_tableæ”¹æˆç”±æˆ‘ä»¬å®šåˆ¶çš„é…ç½®çš„ir_tableï¼Œé‚£è¦æ€ä¹ˆåšå‘¢ï¼Ÿå®šåˆ¶çš„æ–°ir_tableåœ¨ä¸Šç”µçš„æ—¶å€™ï¼Œåœ¨bootè¢«è§£æï¼Œç„¶åè¢«å¡«åˆ°<code>arch/arm/include/asm/arch-rtk/system.h</code>çš„è¿™ä¸ªåœ°å€<code>POWER_ON_IR_TABLE_ADDR</code>ã€‚è¿™ä¸ªåœ°å€å‡ºå¹²å˜›çš„ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* Memory for power on music, video, and image. Include stream buffer and decode buffer */</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POWER_ON_IR_TABLE_ADDR                  (0x1ffff000)    <span class="comment">// 0x1ffff000 ~ 0x20000000</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POWER_ON_IR_TABLE_SIZE                  (0x1000 - 128 - 8)              <span class="comment">// 4k</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POWER_ON_KEYPAD_TABLE_ADDR              (POWER_ON_IR_TABLE_ADDR + POWER_ON_IR_TABLE_SIZE)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POWER_ON_KEYPAD_TABLE_SIZE              (128 + 8)</span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªæ˜¯å…±äº«å†…å­˜çš„ç‰©ç†åœ°å€ï¼Œå†…æ ¸å¯ä»¥ä»è¿™é‡Œæ‹¿åˆ°ä¸œè¥¿ã€‚  </p>
<p>ä½†æ˜¯å†…æ ¸æ€ä¹ˆçŸ¥é“åœ°å€æ˜¯å¤šå°‘ï¼Ÿå¼ºåˆ¶å®šä¹‰ä¹Ÿå¯ä»¥ï¼ˆæ„Ÿè§‰ä¸ä¼šæœ‰é—®é¢˜ï¼‰ã€‚è¿™é‡Œæ˜¯é€šè¿‡<code>cmdline</code>æŠŠä¸œè¥¿ä¼ ç»™å†…æ ¸ï¼Œçœ‹çœ‹bootçš„å¯åŠ¨å‚æ•°ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">console:/ # cat /proc/cmdline                                                  </span><br><span class="line">androidboot.console=ttyS1 console=ttyS1,115200 androidboot.dtbo_idx=0 bufsize=80000  envp=e4100 wdt=&lt;NULL&gt;  flashtype=emmc mmcparts=rtkemmc:304927k,2097152k(/super),4718592k(/userdata),281808k(/cache),1024k(/persist),1024k(/misc),16384k(/metadata),32768k(/boot),32768k(/recovery),8192k(/dtbo),16384k(/tvconfigs),32768k(/tvdata),24576k(/impdata),1024k(/vbmeta),65536k(/smarttv)  androidboot.boot_devices=18010800.emmc loop.max_part=7 buildvariant=userdebug initrd=0x10000000,0xbd000 keepinitrd reclaim=54M@40M last_image=8M@160M VIP=2M@766M OD=8M@768M bootcode_git_version=c422e6b no_console_suspend androidboot.vbmeta.device=179:13 androidboot.vbmeta.avb_version=1.1 androidboot.vbmeta.device_state=locked androidboot.vbmeta.hash_alg=sha256 androidboot.vbmeta.size=3968 androidboot.vbmeta.digest=7d27ba8f742e398b5827d4a1ab61aec26e4f0ee5192105877cad1e8ebb960359 androidboot.vbmeta.invalidate_on_error=yes androidboot.veritymode=enforcing androidboot.verifiedbootstate=green androidboot.hardware.sku=ATV00003919R01 loglevel=4 earlyprintk androidboot.bootreason=watchdog chip=RTD2851A chip_model=4K androidboot.serialno=001020304050 irda=1-hikeen irda_powerup=74,221,189,16e,2f5,2f6 irda1=7-hikeen dvfs_low=0xC6 dvfs_high=0xFD rtk_rcs=0x4eff000 ir_table=0x1ffff000</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥æ‰¾åˆ°ir_table=0x1ffff000ï¼Œå†…æ ¸æ€ä¹ˆåšï¼Ÿ<br>é€šè¿‡<code>early_param</code>è§£ææ‹¿åˆ°åœ°å€ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> __init <span class="title">venus_ir_input_table_addr_parse</span><span class="params">(<span class="keyword">char</span> *options)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> ir_table_phy_address = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(options == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">sscanf</span>(options, <span class="string">"%lx"</span>, &amp;ir_table_phy_address) != <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    g_ir_boot_memory_address = ir_table_phy_address;</span><br><span class="line">    IR_INFO(<span class="string">"g_ir_boot_memory_address == %lx\n"</span>, g_ir_boot_memory_address);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">early_param(<span class="string">"ir_table"</span>, venus_ir_input_table_addr_parse);</span><br></pre></td></tr></tbody></table></figure>

<p>æŠŠç‰©ç†åœ°å€è½¬æ¢æˆè™šæ‹Ÿåœ°å€ï¼Œå¹¶æ‹¿åˆ°ir_tableï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> __init <span class="title">venus_ir_input_early_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> *ir_boot_table = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//carvedout_buf_query(CARVEDOUT_IR_TABLE, &amp;ir_boot_table);</span></span><br><span class="line">    <span class="keyword">if</span>(g_ir_boot_memory_address) {</span><br><span class="line">        ir_boot_table = (<span class="keyword">unsigned</span> <span class="keyword">int</span> *)phys_to_virt (g_ir_boot_memory_address);</span><br><span class="line">	<span class="keyword">if</span>(!ir_boot_table) {</span><br><span class="line">	    g_ir_boot_memory_address = <span class="number">0</span>;</span><br><span class="line">	    <span class="keyword">return</span>;</span><br><span class="line">	}</span><br><span class="line">	IR_INFO(<span class="string">"venus_ir_input__table_parse: %px, %x,%d\n"</span>, ir_boot_table, ir_boot_table[<span class="number">0</span>], ir_boot_table[<span class="number">1</span>]);</span><br><span class="line">	rwlock_init(&amp;g_ir_user_key_table.lock);</span><br><span class="line">	g_ir_user_key_table.keys = (IR_USER_KEY *)(ir_boot_table + <span class="number">2</span>);</span><br><span class="line">	<span class="keyword">if</span>(ir_boot_table[<span class="number">0</span>] == <span class="number">0x49525442</span> &amp;&amp;  ir_boot_table[<span class="number">1</span>] &gt; <span class="number">0</span> &amp;&amp; ir_boot_table[<span class="number">1</span>] &lt;= MAX_IR_USER_KEY_NUM) {</span><br><span class="line">	    g_ir_user_key_table.size = ir_boot_table[<span class="number">1</span>];</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	    g_ir_user_key_table.size = <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line">	g_ir_user_key_table.is_init = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://blog.csdn.net/RyanLiu_/article/details/78925515">é«˜é€šå¹³å°abooté€šè¿‡shared memoryä¿å­˜uart logåˆ°kernel</a>  </li>
<li><a href="https://blog.csdn.net/sgmenghuo/article/details/41251739?utm_source=copy">linuxé©±åŠ¨â€”â€”cmdlineåŸç†åŠåˆ©ç”¨</a>  </li>
<li><a href="https://www.cnblogs.com/tlnshuju/p/6851812.html">linux kernelçš„cmdlineåƒæ•°è§£æåŸç†åˆ†æ</a>  </li>
<li><a href="https://blog.csdn.net/YuZhiHui_No1/article/details/46711601">è°ˆé«˜ç«¯å†…å­˜å’Œä½ç«¯å†…å­˜</a>  </li>
<li><a href="https://blog.csdn.net/tienham/article/details/9493615">ioremap å’Œ phys_to_virtåŒºåˆ«</a>  </li>
<li><a href="https://blog.csdn.net/angle_birds/article/details/8804033">Linuxé©±åŠ¨ä¿®ç‚¼ä¹‹é“-å†…å­˜æ˜ å°„ mmap()/phys_to_virt()</a>  </li>
<li><a href="https://wenku.baidu.com/view/0319a8c408a1284ac85043d4.html">è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€</a>  </li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>boot</tag>
        <tag>kernel</tag>
        <tag>cmdline</tag>
      </tags>
  </entry>
  <entry>
    <title>HIDL demo</title>
    <url>/2020/08/04/hidl-demo/</url>
    <content><![CDATA[<p>ç®€å•è®°å½•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<span id="more"></span>

<h3 id="1-æ·»åŠ halç›®å½•ã€å®šä¹‰halæ¥å£"><a href="#1-æ·»åŠ halç›®å½•ã€å®šä¹‰halæ¥å£" class="headerlink" title="1.æ·»åŠ halç›®å½•ã€å®šä¹‰halæ¥å£"></a>1.æ·»åŠ halç›®å½•ã€å®šä¹‰halæ¥å£</h3><figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ mkdir -p vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default</span><br><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/IHello.hal</span><br></pre></td></tr></tbody></table></figure>

<p>æ¥å£å¦‚ä¸‹ï¼š  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//IHello.hal</span></span><br><span class="line"></span><br><span class="line">package vendor.realtek.hello@<span class="number">1.0</span>;</span><br><span class="line"></span><br><span class="line">interface IHello {</span><br><span class="line">    <span class="built_in">helloWorld</span> (string name) <span class="built_in">generates</span> (string result);</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-æ ¹æ®halè‡ªåŠ¨ç”Ÿæˆcppå®ç°"><a href="#2-æ ¹æ®halè‡ªåŠ¨ç”Ÿæˆcppå®ç°" class="headerlink" title="2.æ ¹æ®halè‡ªåŠ¨ç”Ÿæˆcppå®ç°"></a>2.æ ¹æ®halè‡ªåŠ¨ç”Ÿæˆcppå®ç°</h3><figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ source build/envsetup.sh</span><br><span class="line">foo@bar:~$ lunch</span><br><span class="line">foo@bar:~$ make hidl-gen</span><br><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/genImpHidl.sh</span><br><span class="line">foo@bar:~$ chmod u+x vendor/realtek/common/ATV/hardware/interfaces/hello/genImpHidl.sh</span><br><span class="line">foo@bar:~$ ./vendor/realtek/common/ATV/hardware/interfaces/hello/genImpHidl.sh</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">//genImpHidl.sh</span><br><span class="line"></span><br><span class="line">PACKAGE=vendor.realtek.hello@1.0</span><br><span class="line">LOC=vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default</span><br><span class="line"></span><br><span class="line">hidl-gen -o $LOC -Lc++-impl -rvendor.realtek:vendor/realtek/common/ATV/hardware/interfaces \</span><br><span class="line">    -randroid.hidl:system/libhidl/transport $PACKAGE</span><br><span class="line">hidl-gen -o $LOC -Landroidbp-impl -rvendor.realtek:vendor/realtek/common/ATV/hardware/interfaces \</span><br><span class="line">    -randroid.hidl:system/libhidl/transport $PACKAGE</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡ŒgenImpHidl.shåï¼Œdefaultç›®å½•ç”ŸæˆAndroid.bpã€Hello.cppå’ŒHello.hæ–‡ä»¶ã€‚  </p>
<p><img src="https://i.loli.net/2020/08/04/KfyYMuRGtl16PSD.png" alt="1_genImplHidl.png">  </p>
<p>ç¼–å†™Hello.cpp  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default/Hello.cpp</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//Hello.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">FIXME:</span> your file license if you have one</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Hello.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> vendor {</span><br><span class="line"><span class="keyword">namespace</span> realtek {</span><br><span class="line"><span class="keyword">namespace</span> hello {</span><br><span class="line"><span class="keyword">namespace</span> V1_0 {</span><br><span class="line"><span class="keyword">namespace</span> implementation {</span><br><span class="line"></span><br><span class="line"><span class="comment">// Methods from ::vendor::realtek::hello::V1_0::IHello follow.</span></span><br><span class="line"><span class="function">Return&lt;<span class="keyword">void</span>&gt; <span class="title">Hello::helloWorld</span><span class="params">(<span class="keyword">const</span> hidl_string&amp; name, helloWorld_cb _hidl_cb)</span> </span>{</span><br><span class="line">    <span class="comment">// TODO implement</span></span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">100</span>];</span><br><span class="line">    ::<span class="built_in">memset</span>(buf,<span class="number">0</span>,<span class="number">100</span>);</span><br><span class="line">    ::<span class="built_in">snprintf</span>(buf, <span class="number">100</span>, <span class="string">"Hello World, %s"</span>, name.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="function">hidl_string <span class="title">result</span><span class="params">(buf)</span></span>;</span><br><span class="line">    _hidl_cb(result);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Void</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Methods from ::android::hidl::base::V1_0::IBase follow.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//IHello* HIDL_FETCH_IHello(const char* /* name */) {</span></span><br><span class="line">    <span class="comment">//return new Hello();</span></span><br><span class="line"><span class="comment">//}</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">}  <span class="comment">// namespace implementation</span></span><br><span class="line">}  <span class="comment">// namespace V1_0</span></span><br><span class="line">}  <span class="comment">// namespace hello</span></span><br><span class="line">}  <span class="comment">// namespace realtek</span></span><br><span class="line">}  <span class="comment">// namespace vendor</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>HIDLçš„å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚æœæ‰“å¼€HIDL_FETCHçš„æ³¨é‡Šï¼Œå°±æ˜¯passthroughï¼Œå¦åˆ™æ˜¯Binderizedæ–¹å¼ï¼Œè¿™é‡Œä½¿ç”¨é»˜è®¤çš„Binderizedæ–¹å¼ã€‚  </p>
<h3 id="3-å¼€æœºå¯åŠ¨æœåŠ¡"><a href="#3-å¼€æœºå¯åŠ¨æœåŠ¡" class="headerlink" title="3.å¼€æœºå¯åŠ¨æœåŠ¡"></a>3.å¼€æœºå¯åŠ¨æœåŠ¡</h3><p>æ·»åŠ service.cppæ–‡ä»¶ï¼›  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default/service.cpp</span><br></pre></td></tr></tbody></table></figure>

<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//service.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOG_TAG <span class="meta-string">"vendor.realtek.hello@1.0-service"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vendor/realtek/hello/1.0/IHello.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;hidl/HidlTransportSupport.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Hello.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> android::hardware::configureRpcThreadpool;</span><br><span class="line"><span class="keyword">using</span> android::hardware::joinRpcThreadpool;</span><br><span class="line"><span class="keyword">using</span> vendor::realtek::hello::V1_0::IHello;</span><br><span class="line"><span class="keyword">using</span> vendor::realtek::hello::V1_0::implementation::Hello;</span><br><span class="line"><span class="keyword">using</span> android::sp;</span><br><span class="line"><span class="keyword">using</span> android::<span class="keyword">status_t</span>;</span><br><span class="line"><span class="keyword">using</span> android::OK;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> vendor::realtek::hello::V1_0;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> tune the max thread count.</span></span><br><span class="line">    <span class="built_in">configureRpcThreadpool</span>(<span class="number">10</span>, <span class="literal">true</span>);</span><br><span class="line">    sp&lt;IHello&gt; mHello = <span class="keyword">new</span> <span class="built_in">Hello</span>();</span><br><span class="line">    <span class="keyword">status_t</span> status = mHello-&gt;<span class="built_in">registerAsService</span>();</span><br><span class="line">    <span class="built_in">LOG_ALWAYS_FATAL_IF</span>(status != OK, <span class="string">"Could not register IHello"</span>);</span><br><span class="line">    <span class="built_in">ALOGD</span>(<span class="string">"IHello vendor.realtek.hello@1.0-service start\n"</span>);</span><br><span class="line">    <span class="comment">// other interface registration comes here</span></span><br><span class="line">    <span class="built_in">joinRpcThreadpool</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ·»åŠ <a href="mailto:vendor.realtek.hello@1.0-service.rc">vendor.realtek.hello@1.0-service.rc</a>æ–‡ä»¶ï¼›  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default/vendor.realtek.hello@1.0-service.rc</span><br></pre></td></tr></tbody></table></figure>

<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">//vendor.realtek.hello@1.0-service.rc</span><br><span class="line">service hello-1-0 /vendor/bin/hw/vendor.realtek.hello@1.0-service</span><br><span class="line">    class hal</span><br><span class="line">    user system</span><br><span class="line">    group system</span><br></pre></td></tr></tbody></table></figure>

<p>ä¿®æ”¹Android.bpï¼›  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/default/Android.bp</span><br></pre></td></tr></tbody></table></figure>

<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">//hello/1.0/default/Android.bp</span><br><span class="line"></span><br><span class="line">// FIXME: your file license if you have one</span><br><span class="line"></span><br><span class="line">cc_library_shared {</span><br><span class="line">    // FIXME: this should only be -impl for a passthrough hal.</span><br><span class="line">    // In most cases, to convert this to a binderized implementation, you should:</span><br><span class="line">    // - change '-impl' to '-service' here and make it a cc_binary instead of a</span><br><span class="line">    //   cc_library_shared.</span><br><span class="line">    // - add a *.rc file for this module.</span><br><span class="line">    // - delete HIDL_FETCH_I* functions.</span><br><span class="line">    // - call configureRpcThreadpool and registerAsService on the instance.</span><br><span class="line">    // You may also want to append '-impl/-service' with a specific identifier like</span><br><span class="line">    // '-vendor' or '-&lt;hardware identifier&gt;' etc to distinguish it.</span><br><span class="line">    name: <span class="string">"vendor.realtek.hello@1.0-impl"</span>,</span><br><span class="line">    relative_install_path: <span class="string">"hw"</span>,</span><br><span class="line">    // FIXME: this should be 'vendor: true' for modules that will eventually be</span><br><span class="line">    // on AOSP.</span><br><span class="line">    proprietary: true,</span><br><span class="line">    srcs: [</span><br><span class="line">        <span class="string">"Hello.cpp"</span>,</span><br><span class="line">    ],</span><br><span class="line">    shared_libs: [</span><br><span class="line">        <span class="string">"libhidlbase"</span>,</span><br><span class="line">	<span class="string">"libhidltransport"</span>,</span><br><span class="line">	<span class="string">"libutils"</span>,</span><br><span class="line">	<span class="string">"vendor.realtek.hello@1.0"</span>,</span><br><span class="line">    ],</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">cc_binary {</span><br><span class="line">    name: <span class="string">"vendor.realtek.hello@1.0-service"</span>,</span><br><span class="line">    defaults: [<span class="string">"hidl_defaults"</span>],</span><br><span class="line">    proprietary: true,</span><br><span class="line">    relative_install_path: <span class="string">"hw"</span>,</span><br><span class="line">    srcs: [</span><br><span class="line">        <span class="string">"Hello.cpp"</span>,</span><br><span class="line">	<span class="string">"service.cpp"</span></span><br><span class="line">    ],</span><br><span class="line">    init_rc: [<span class="string">"vendor.realtek.hello@1.0-service.rc"</span>],</span><br><span class="line">    shared_libs: [</span><br><span class="line">        <span class="string">"liblog"</span>,</span><br><span class="line">	<span class="string">"libhidlbase"</span>,</span><br><span class="line">	<span class="string">"libhidltransport"</span>,</span><br><span class="line">	<span class="string">"libutils"</span>,</span><br><span class="line">	<span class="string">"libcutils"</span>,</span><br><span class="line">	<span class="string">"libbinder"</span>,</span><br><span class="line">	<span class="string">"vendor.realtek.hello@1.0"</span>,</span><br><span class="line">    ],</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-ç”Ÿæˆhalæ¥å£çš„Android-bp"><a href="#4-ç”Ÿæˆhalæ¥å£çš„Android-bp" class="headerlink" title="4.ç”Ÿæˆhalæ¥å£çš„Android.bp"></a>4.ç”Ÿæˆhalæ¥å£çš„Android.bp</h3><p>çœ‹ä¸‹update-makefiles.shå†…å®¹æ˜¯ä»€ä¹ˆï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">source system/tools/hidl/update-makefiles-helper.sh</span><br><span class="line"></span><br><span class="line">do_makefiles_update \</span><br><span class="line">    "vendor.realtek:vendor/realtek/common/ATV/hardware/interfaces" \</span><br><span class="line">    "android.hidl:system/libhidl/transport"</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡Œè¯¥è„šæœ¬ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ ./vendor/realtek/common/ATV/hardware/interfaces/update-makefiles.sh</span><br></pre></td></tr></tbody></table></figure>

<p>1.0ç›®å½•å°±ç”Ÿæˆäº†Android.bpæ–‡ä»¶ã€‚  </p>
<p><img src="https://i.loli.net/2020/08/04/zIsYiW4gtxKh5Ue.png" alt="2_update-makefiles.png">  </p>
<h3 id="5-æ›´æ–°å“ˆå¸Œå€¼"><a href="#5-æ›´æ–°å“ˆå¸Œå€¼" class="headerlink" title="5.æ›´æ–°å“ˆå¸Œå€¼"></a>5.æ›´æ–°å“ˆå¸Œå€¼</h3><p>ç¼–å†™genHash.sh  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/genHash.sh</span><br><span class="line">foo@bar:~$ chmod u+x vendor/realtek/common/ATV/hardware/interfaces/hello/genHash.sh</span><br><span class="line">foo@bar:~$ ./vendor/realtek/common/ATV/hardware/interfaces/hello/genHash.sh</span><br></pre></td></tr></tbody></table></figure>

<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">PACKAGE=vendor.realtek.hello@1.0::IHello</span><br><span class="line"></span><br><span class="line">hidl-gen -L hash -rvendor.realtek:vendor/realtek/common/ATV/hardware/interfaces/ -randroid.hidl:system/libhidl/transport $PACKAGE</span><br></pre></td></tr></tbody></table></figure>

<p>æŠŠè¾“å‡ºçš„hashæ·»åŠ åˆ°current.txt  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim ./vendor/realtek/common/ATV/hardware/interfaces/current.txt</span><br></pre></td></tr></tbody></table></figure>

<h3 id="6-æ·»åŠ clientæµ‹è¯•"><a href="#6-æ·»åŠ clientæµ‹è¯•" class="headerlink" title="6.æ·»åŠ clientæµ‹è¯•"></a>6.æ·»åŠ clientæµ‹è¯•</h3><p>æ·»åŠ å¦‚ä¸‹ç›®å½•å’Œæ–‡ä»¶ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ mkdir -p vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/vts/functional</span><br><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/vts/functional/VtsHalHelloV1_0TargetTest.cpp</span><br><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/1.0/vts/functional/Android.bp</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸‹æ˜¯å…¶å†…å®¹ï¼š  </p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">cc_test {</span><br><span class="line">    name: <span class="string">"VtsHalHelloV1_0TargetTest"</span>,</span><br><span class="line">    defaults: [<span class="string">"hidl_defaults"</span>],</span><br><span class="line">    srcs: [<span class="string">"VtsHalHelloV1_0TargetTest.cpp"</span>],</span><br><span class="line">    shared_libs: [</span><br><span class="line">        <span class="string">"libbase"</span>,</span><br><span class="line">	<span class="string">"libhidlbase"</span>,</span><br><span class="line">	<span class="string">"liblog"</span>,</span><br><span class="line">	<span class="string">"libutils"</span>,</span><br><span class="line">	<span class="string">"vendor.realtek.hello@1.0"</span>,</span><br><span class="line">    ],</span><br><span class="line">    static_libs: [<span class="string">"VtsHalHidlTargetTestBase"</span>],</span><br><span class="line">    cflags: [</span><br><span class="line">        <span class="string">"-O0"</span>,</span><br><span class="line">	<span class="string">"-g"</span>,</span><br><span class="line">    ]</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//VtsHalHelloV1_0TargetTest.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOG_TAG <span class="meta-string">"HelloHidlHalTest"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;VtsHalHidlTargetTestBase.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;android-base/logging.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vendor/realtek/hello/1.0/IHello.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> vendor::realtek::hello::V1_0::IHello;</span><br><span class="line"><span class="keyword">using</span> ::android::hardware::hidl_string;</span><br><span class="line"><span class="keyword">using</span> ::android::hardware::hidl_vec;</span><br><span class="line"><span class="keyword">using</span> ::android::hardware::Return;</span><br><span class="line"><span class="keyword">using</span> ::android::hardware::Void;</span><br><span class="line"><span class="keyword">using</span> ::android::sp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> ret;</span><br><span class="line"></span><br><span class="line">    sp&lt;IHello&gt; hello = IHello::<span class="built_in">getService</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(hello == <span class="literal">nullptr</span>) {</span><br><span class="line">        <span class="built_in">ALOGD</span>(<span class="string">"Failed to get hello service\n"</span>);</span><br><span class="line">	ret = <span class="number">-1</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        hello-&gt;<span class="built_in">helloWorld</span>(<span class="string">"Hikari"</span>, [&amp;](hidl_string result) {</span><br><span class="line">	    <span class="built_in">ALOGD</span>(<span class="string">"%s\n"</span>,result.<span class="built_in">c_str</span>());</span><br><span class="line">	});</span><br><span class="line">	ret = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="7-æ·»åŠ helloç›®å½•çš„Android-bp"><a href="#7-æ·»åŠ helloç›®å½•çš„Android-bp" class="headerlink" title="7.æ·»åŠ helloç›®å½•çš„Android.bp"></a>7.æ·»åŠ helloç›®å½•çš„Android.bp</h3><p><span style="color:red"> è·‘update-makefiles.shçš„æ—¶å€™ä¸ºå•¥æ²¡æœ‰ç”Ÿæˆè¿™ä¸ªï¼Ÿ </span> è·Ÿrtkä»£ç makefileæ¶æ„æœ‰å…³å—ã€‚</p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim vendor/realtek/common/ATV/hardware/interfaces/hello/Android.bp</span><br></pre></td></tr></tbody></table></figure>

<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">// This is an autogenerated file, do not edit.</span><br><span class="line">subdirs = [</span><br><span class="line">    <span class="string">"1.0"</span>,</span><br><span class="line">    <span class="string">"1.0/vts/functional"</span>,</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<h3 id="8-å°ç¼–"><a href="#8-å°ç¼–" class="headerlink" title="8.å°ç¼–"></a>8.å°ç¼–</h3><p>helloæœ€ç»ˆæ–‡ä»¶æ¶æ„å¦‚ä¸‹ï¼š<br><img src="https://i.loli.net/2020/08/04/jSbq4dc63CHeI7D.png" alt="3_end.png">  </p>
<p>å°ç¼–è¯•è¯•æ·»åŠ çš„helloèƒ½ä¸èƒ½ç¼–è¿‡ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ mmm vendor/realtek/common/ATV/hardware/interfaces/hello/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="9-æ³¨å†Œhelloå¹¶æ·»åŠ è¿›ç¼–è¯‘"><a href="#9-æ³¨å†Œhelloå¹¶æ·»åŠ è¿›ç¼–è¯‘" class="headerlink" title="9.æ³¨å†Œhelloå¹¶æ·»åŠ è¿›ç¼–è¯‘"></a>9.æ³¨å†Œhelloå¹¶æ·»åŠ è¿›ç¼–è¯‘</h3><p>æ³¨å†Œï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/manifest.xml</span><br></pre></td></tr></tbody></table></figure>

<p>æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hal</span> <span class="attr">format</span>=<span class="string">"hidl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>vendor.realtek.hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transport</span>&gt;</span>hwbinder<span class="tag">&lt;/<span class="name">transport</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>IHello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">instance</span>&gt;</span>default<span class="tag">&lt;/<span class="name">instance</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hal</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/product/rtk_base.mk</span><br></pre></td></tr></tbody></table></figure>

<p>æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">PRODUCT_PACKAGES += \</span><br><span class="line">    vendor.realtek.hello@1.0 \</span><br><span class="line">    vendor.realtek.hello@1.0-impl \</span><br><span class="line">    vendor.realtek.hello@1.0-impl \</span><br></pre></td></tr></tbody></table></figure>

<h3 id="10-æ·»åŠ seLinuxè§„åˆ™"><a href="#10-æ·»åŠ seLinuxè§„åˆ™" class="headerlink" title="10.æ·»åŠ seLinuxè§„åˆ™"></a>10.æ·»åŠ seLinuxè§„åˆ™</h3><p>å¦‚æœæ²¡æœ‰æ­¤æ­¥éª¤ï¼Œå¼€æœºä¹‹å<a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a>ä¼šè·‘ä¸èµ·æ¥ã€‚<br>ä¿®æ”¹file_contextsæ–‡ä»¶  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/sepolicy/file_contexts</span><br></pre></td></tr></tbody></table></figure>
<p>è¡¥å……å¦‚ä¸‹ï¼š</p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line"><span class="regexp">/(vendor|system/</span>vendor)<span class="regexp">/bin/</span>hw/vendor\.realtek\.hello@<span class="number">1</span>\.<span class="number">0</span>-service        u:object_r:hal_hello_default_exec:s0</span><br></pre></td></tr></tbody></table></figure>

<p>ä¿®æ”¹hwservice_contextsæ–‡ä»¶  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/sepolicy/hwservice_contexts</span><br></pre></td></tr></tbody></table></figure>
<p>è¡¥å……å¦‚ä¸‹ï¼š  </p>
<figure class="highlight stylus"><table><tbody><tr><td class="code"><pre><span class="line">vendor<span class="selector-class">.realtek</span><span class="selector-class">.hello</span>::IHello        u:object_r:hal_hello_service:s0</span><br></pre></td></tr></tbody></table></figure>

<p>ä¿®æ”¹hwservice.teæ–‡ä»¶  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/sepolicy/hwservice.te</span><br></pre></td></tr></tbody></table></figure>
<p>è¡¥å……å¦‚ä¸‹ï¼š  </p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="type">hal_hello_service,   </span>hwservice_manager_type;</span><br></pre></td></tr></tbody></table></figure>

<p>æ·»åŠ hal_hello_default.teæ–‡ä»¶  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ vim device/realtek/common/sepolicy/hal_hello_default.te</span><br></pre></td></tr></tbody></table></figure>
<p>å†…å®¹å¦‚ä¸‹ï¼š  </p>
<figure class="highlight ceylon"><table><tbody><tr><td class="code"><pre><span class="line">type hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span>, domain;</span><br><span class="line">type hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span><span class="number">_</span>exec, exec<span class="number">_</span>type, vendor<span class="number">_f</span>ile<span class="number">_</span>type, file<span class="number">_</span>type;</span><br><span class="line"></span><br><span class="line">init<span class="number">_</span>daemon<span class="number">_</span>domain(hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span>);</span><br><span class="line"></span><br><span class="line">hwbinder<span class="number">_u</span>se(hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span>)</span><br><span class="line">add<span class="number">_</span>hwservice(hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span>, hal<span class="number">_</span>hello<span class="number">_</span>service)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">allow hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span> hwservicemanager<span class="number">_p</span>rop:file r<span class="number">_f</span>ile<span class="number">_p</span>erms;</span><br><span class="line">allow hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span> hwservicemanager:binder { transfer call };</span><br><span class="line">allow hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span> hal<span class="number">_</span>hello<span class="number">_</span>service:binder call;</span><br><span class="line">allow hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span> hal<span class="number">_</span>hello<span class="number">_</span>service:hwservice<span class="number">_m</span>anager { add find };</span><br><span class="line">allow hal<span class="number">_</span>hello<span class="number">_</span><span class="keyword">default</span> hidl<span class="number">_</span>base<span class="number">_</span>hwservice:hwservice<span class="number">_m</span>anager add;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå¼€æœºä¹‹åæœåŠ¡ä¾ç„¶æœ‰å¯èƒ½è·‘ä¸èµ·æ¥ï¼Œå¯ä»¥dmesgæŸ¥çœ‹æƒé™ç›¸å…³çš„avcæŠ¥é”™ï¼ŒæŠŠç›¸å…³çš„æŠ¥é”™ä¿®æ‰ä¹‹åï¼Œè¿˜æœ‰å¯èƒ½è·‘ä¸èµ·æ¥ï¼Œç›´æ¥è¿è¡Œ./vendor/bin/hw/<a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a>ï¼ŒæŠŠavc deniedä¿®æ‰ï¼Œåº”è¯¥å°±å¯ä»¥äº†ã€‚å¦‚æœä¸ç¡®å®šæ˜¯ä¸æ˜¯æƒé™é—®é¢˜å¼•èµ·ï¼Œå¯ä»¥å…ˆsetenforce 0åç›´æ¥è¿è¡ŒæœåŠ¡ï¼Œå¦‚æœèƒ½è·‘èµ·æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯æƒé™æœ‰é—®é¢˜ã€‚å¦å¤–ï¼Œå®¢æˆ·ç«¯è°ƒç”¨çš„æ—¶å€™å¦‚æœçœ‹ä¸åˆ°æ•ˆæœï¼Œå¯ä»¥å…ˆç”¨clientï¼ˆå‚è€ƒç¬¬6ç‚¹ï¼‰è°ƒè¯•ã€‚  </p>
<h3 id="11-å…¨ç¼–ä»£ç éªŒè¯"><a href="#11-å…¨ç¼–ä»£ç éªŒè¯" class="headerlink" title="11.å…¨ç¼–ä»£ç éªŒè¯"></a>11.å…¨ç¼–ä»£ç éªŒè¯</h3><p>å¼€æœºå¯ä»¥çœ‹åˆ°<a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a>çš„logï¼š  </p>
<blockquote>
<p>01-01 01:01:03.490   328   328 I ServiceManagement: Registered <a href="mailto:vendor.realtek.hello@1.0">vendor.realtek.hello@1.0</a>::IHello/default (start delay of 261ms)<br>01-01 01:01:03.491   328   328 I ServiceManagement: Removing namespace from process name <a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a> to <a href="mailto:hello@1.0-service">hello@1.0-service</a>.<br>01-01 01:01:03.491   328   328 D <a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a>: IHello <a href="mailto:vendor.realtek.hello@1.0-service">vendor.realtek.hello@1.0-service</a> start  </p>
</blockquote>
<p>åœ¨data/nativetest/VtsHalHelloV1_0TargetTestç›®å½•å¯ä»¥æ‰¾åˆ°VtsHalHelloV1_0TargetTestæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æµ‹è¯•clientï¼Œæ‰§è¡Œè¿™ä¸ªç¨‹åºï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ ./data/nativetest/VtsHalHelloV1_0TargetTest/VtsHalHelloV1_0TargetTest</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼š  </p>
<blockquote>
<p>08-04 10:06:24.211  2063  2063 D HelloHidlHalTest: Hello World, Hikari  </p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>demo</tag>
        <tag>hidl</tag>
      </tags>
  </entry>
  <entry>
    <title>HDMIç›¸å…³</title>
    <url>/2020/09/08/hdmi/</url>
    <content><![CDATA[<p>ç®€å•è®°å½•ç›¸å…³çŸ¥è¯†ç‚¹ã€‚  </p>
<span id="more"></span>


<h2 id="PIN"><a href="#PIN" class="headerlink" title="PIN"></a>PIN</h2><p>HDMIå¼•è„šå®šä¹‰å¦‚å›¾ï¼š<br><img src="https://i.loli.net/2020/09/08/m68ojqtpgZ9Ifn4.jpg" alt="HDMIå¼•è„šå®šä¹‰.jpg"><br><img src="https://i.loli.net/2020/09/08/jxsLhZ5eEn68VaT.jpg" alt="HDMIç«¯å­.jpg">  </p>
<p>å…¶ä¸­  </p>
<ul>
<li>1-9æ˜¯TMDSæ•°æ®ä¼ è¾“å®é™…ä¸Šç”¨åˆ°çš„å¼•è„šï¼Œä¸€å…±3ç»„  </li>
<li>10-12ä¸ºTMDSæ—¶é’Ÿä¿¡å·  </li>
<li>13ä¸ºCECæ§åˆ¶å¼•è„š  </li>
<li>14ä¸ºä¿ç•™å¼•è„š  </li>
<li>15-16æ˜¯I2Cå¼•è„šï¼Œç”¨äºDDCä¼ è¾“  </li>
<li>17æ¥åœ°  </li>
<li>18ä¸º5Vä¾›ç”µ  </li>
<li>19ä¸ºHotplugå¼•è„š  </li>
</ul>
<h2 id="Hotplug"><a href="#Hotplug" class="headerlink" title="Hotplug"></a>Hotplug</h2><p>çƒ­æ’æ‹”ï¼Œå½“æ¥ä¸Šæ¥å£æ—¶å°±å¯ä»¥åˆ¤æ–­è®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼Œä»¥è¿›è¡Œåç»­å·¥ä½œã€‚  </p>
<p>å½“è®¡ç®—æœºé€šè¿‡HDMIæ¥å£ä¸æ˜¾ç¤ºå™¨ç›¸è¿æ¥æ—¶ï¼Œä¸»æœºé€šè¿‡HDMIçš„18è„šå‘æ˜¾ç¤ºå™¨ä¾›ç”µï¼Œæ˜¾ç¤ºå™¨æ¥æ”¶åˆ°+5Vç”µå‹åï¼Œé€šè¿‡å†…éƒ¨ç”µè·¯ä½¿HDMIæ¥å£ç¬¬19è„šHPDè½¬å˜ä¸ºé«˜ç”µå¹³ï¼Œä¸»æœºæ£€æµ‹åˆ°HPDä¸ºé«˜ç”µå¹³åï¼Œè®¤ä¸ºä¸»æœºä¸æ˜¾ç¤ºå™¨å·²ç»è¿æ¥ä¸Šï¼Œäºæ˜¯é€šè¿‡I2Cè¯»å–æ˜¾ç¤ºå™¨çš„EDIDï¼Œæ»¡è¶³æ¡ä»¶åï¼ˆæ¯”å¦‚æ˜¾ç¤ºå™¨æ”¯æŒä¸»æœºå½“å‰è®¾ç½®çš„åˆ†è¾¨ç‡ï¼‰ï¼ŒåšHDCPäº¤äº’è®¤è¯ï¼Œç„¶åTMDSå‘é€ç”µè·¯å¼€å§‹å·¥ä½œï¼Œè¾“å‡ºå›¾åƒå’Œå£°éŸ³ã€‚  </p>
<p>å…¶ä¸­æœ‰ä¸¤ç§Hotplugç›¸å…³çš„æƒ…å†µä¼šå¯¼è‡´HDMIè¢«è¯†åˆ«ä¸ºDVIï¼š  </p>
<ul>
<li>Hotplugä¸ºHighï¼Œä¸è¿‡EDIDå¹¶æ²¡æœ‰å‡†å¤‡å¥½ï¼Œé‚£ä¹ˆä¿¡å·æºè®¾å¤‡ä¼šç”±äºæ— æ³•è¯»åˆ°EDIDè€Œè®¤ä¸ºæ¥æ”¶è®¾å¤‡ä¸ºDVIï¼Œè¿™æ ·ä¼šå¯¼è‡´HDMIæœ‰å›¾åƒæ— å£°çš„é—®é¢˜ã€‚  </li>
<li>Hotplugä¸ºLowï¼Œä¹Ÿä¼šå¯¼è‡´ä¿¡å·æºæ— æ³•è¯»åˆ°EDIDè€Œè®¤ä¸ºæ¥æ”¶è®¾å¤‡ä¸ºDVIï¼Œä»è€Œå¯¼è‡´HDMIæœ‰å›¾æ— å£°ã€‚  </li>
</ul>
<p>åœ¨TVè¿™ç§æœ‰å¤šä¸ªHDMIé€šé“çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶ä¼šåœ¨å¤šä¸ªHDMIé€šé“è¿›è¡Œåˆ‡æ¢ï¼Œåˆ‡æ¢åHDMIé€šé“åº”å½“å…ˆåˆå§‹åŒ–ï¼Œå³å…ˆæŠŠHotplugæ‹‰ä½ï¼Œé€šçŸ¥HDMI source deviceä¹‹å‰æ‰€ç”¨çš„EDIDå·²ç»æ”¹å˜ï¼Œéœ€è¦é‡æ–°è¯»å–ï¼Œé‚£ä¹ˆsource deviceåœ¨Hotplugè¢«æ‹‰é«˜çš„æ—¶å€™ä¼šå»è¯»å–æ–°çš„EDIDï¼Œä½†æ˜¯æ‹‰ä½è¿™ä¸ªè¿‡ç¨‹è‡³å°‘éœ€è¦100msï¼Œå¦åˆ™source deviceæœ‰å¯èƒ½ä¸ä¼šå»è¯»å–æ–°çš„EDIDï¼Œä»è€Œè¾“å‡ºDVIä¿¡å·ã€‚  </p>
<h2 id="EDID"><a href="#EDID" class="headerlink" title="EDID"></a>EDID</h2><p>ç›¸å½“äºä¸€ä¸ªèº«ä»½è¯ï¼Œå‘Šè¯‰ä¸»æœºï¼Œæ­¤æ˜¾ç¤ºå™¨çš„å‚æ•°ã€æ”¯æŒçš„ç‰¹å¾ã€‚åŒ…æ‹¬åŸºæœ¬EDIDå’Œæ‰©å±•EDIDã€‚å­˜åœ¨äºç¨‹åºï¼Œç”±ç³»ç»Ÿåˆå§‹åŒ–ï¼Œæˆ–å­˜åœ¨ä¸EEPROMã€‚    </p>
<ul>
<li><p>EDIDä¸­æœ‰ä¸€å—æ•°æ®æ˜¯VSDBï¼ˆVendor-Specific Data Blockï¼‰ï¼Œå¦‚æœåŒ…å«IEEEåˆ†é…ç»™HDMIçš„å›ºå®šæ•°å€¼ï¼Œåˆ™è®¤ä¸ºæ˜¯HDMIï¼Œå¦åˆ™è¢«è®¤ä¸ºæ˜¯DVIã€‚<br>HDMI1.4b çš„ VSDB (H14b VSDB): ç¬¬ä¸€ä¸ªByteï¼ŒLengthè‡³å°‘æ˜¯5ï¼Œæœ€å¤š31ï¼›æ¥ä¸‹æ¥3ä¸ªByteæ˜¯IEEEåˆ†é…ç»™HDMIçš„å›ºå®šæ•°å€¼ï¼š030C00hï¼›éšå2ä¸ªByteæ˜¯ç‰©ç†åœ°å€ã€‚ä»¥ä¸Šæ˜¯è‡³å°‘åŒ…å«çš„ä¿¡æ¯ï¼Œåç»­å†…å®¹ä¸ºExtension Fieldã€‚<br><img src="https://i.loli.net/2020/09/08/YramXM9hlvwRT5b.png" alt="vsdb1.4.png"><br>HDMI2.0 çš„ VSDB (HF-VSDB): ç¬¬1ä¸ªByteï¼ŒLengthè‡³å°‘æ˜¯5ï¼Œæœ€å¤š31ï¼›æ¥ä¸‹æ¥3ä¸ªByteæ˜¯IEEEåˆ†é…ç»™HDMIçš„å›ºå®šæ•°å€¼ï¼šD85DC4hï¼›éšå1ä¸ªByteæ˜¯ç‰©ç†åœ°å€ã€‚ä»¥ä¸Šæ˜¯è‡³å°‘åŒ…å«çš„ä¿¡æ¯ï¼Œåç»­å†…å®¹ä¸ºExtension Fieldã€‚<br><img src="https://i.loli.net/2020/09/08/yx9krTW7vdwBAIe.png" alt="vsdb2.0.png"><br>æ³¨æ„HFâ€”VSDBä¸èƒ½ä¸H14b VSDBç›¸æ··æ·†ã€å³ä½¿æ¥æ”¶ç«¯æ”¯æŒHDMI2.0ç‰ˆæœ¬ï¼Œä¹Ÿå¿…é¡»åŒ…å«H14b VSDBï¼ˆç”±HDMI H1.4bï¼‰å®šä¹‰ï¼Œåœ¨E-EDIDä¸­æ˜¯å¦åŒ…å«æ˜¯å¯é€‰çš„ã€‚<br><img src="https://i.loli.net/2020/09/08/58NWlSXLdgszGJh.png" alt="vsdb.png">  </p>
</li>
<li><p>EDIDä¸­æœ‰ä¸€å—æ•°æ®æè¿°äº†CECç‰©ç†åœ°å€ã€‚  </p>
</li>
</ul>
<h2 id="CEC"><a href="#CEC" class="headerlink" title="CEC"></a>CEC</h2><p>å…è®¸ç”¨æˆ·æ§åˆ¶HDMIæ¥å£ä¸Šæ‰€è¿æ¥çš„è®¾å¤‡ã€‚  </p>
<p>åœ¨HDMI CECæœ€å°ç³»ç»Ÿé‡Œï¼Œæ‰€æœ‰é€šè¿‡HDMIè¿æ¥åœ¨ä¸€èµ·çš„è®¾å¤‡ï¼ˆåŒ…æ‹¬ç”µè§†ã€DVDã€æœºé¡¶ç›’ç­‰ï¼‰åœ¨ç‰©ç†è¿æ¥ä¸Šï¼Œå„è‡ªçš„CECæ˜¯å…¨éƒ¨è¿æ¥åœ¨ä¸€èµ·ï¼Œå¯ä»¥çœ‹åšï¼Œåœ¨ä¸€æ¡CECçº¿ï¼ˆæ ‡å‡†HDMIæ¥å£çš„ç¬¬13å¼•è„šï¼‰ä¸ŠæŒ‚ç€æ‰€æœ‰çš„è®¾å¤‡ã€‚  </p>
<p>Youtubeä¸Šçš„ä¸€å ‚CECè¯¾ï¼Œè®²å¾—å¾ˆä¸é”™ã€‚  </p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Q6S2FabX2WA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>  

<h3 id="Handshake"><a href="#Handshake" class="headerlink" title="Handshake"></a>Handshake</h3><p>å½“ä¸€ä¸ªå¸¦CECåŠŸèƒ½çš„è®¾å¤‡å¾—åˆ°ä¸€ä¸ªæ–°çš„ç‰©ç†åœ°å€æ—¶ï¼Œå®ƒå°†è¿›è¡Œå¦‚ä¸‹å¤„ç†ï¼š</p>
<ol>
<li>ä¸»åŠ¨ç”³è¯·åˆ†é…ä¸ä¹‹è®¾å¤‡ç±»å‹ç›¸åº”çš„é€»è¾‘åœ°å€ï¼›  </li>
<li>é€šè¿‡å¹¿æ’­<report physical="" address="">æ¥æŠ¥å‘Šå®ƒçš„ç‰©ç†åœ°å€ä¸é€»è¾‘åœ°å€çš„ç»‘å®šã€‚  </report></li>
</ol>
<p><img src="https://i.loli.net/2020/09/08/U2xWgmBi4ktYTue.png" alt="CEC Physical Address.png"><br><img src="https://i.loli.net/2020/09/08/mGKIQEc9rLuOwgB.png" alt="CEC Physical Address Discovery.png"><br>Physical Address: Root display(TV) is always 0.0.0.0<br>Logical Address: Root display(TV) is always 0<br><img src="https://i.loli.net/2020/09/08/Jr1HthQoIkSEyY3.png" alt="CEC addressing.png"></p>
<p>CECè®¾å¤‡çš„é€»è¾‘åœ°å€ä¹Ÿæ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œå…¶åˆ†é…æ–¹å¼å¦‚ä¸‹ï¼š  </p>
<ol>
<li>æ ¹èŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯TVï¼‰ç›´æ¥è®¾é€»è¾‘åœ°å€ï¼š0ï¼›  </li>
<li>å½“è®¾å¤‡Aæ’å…¥åï¼Œè¯¥è®¾å¤‡çš„ç±»å‹æ˜¯å·²çŸ¥çš„ï¼Œå› æ­¤å¯ä»¥ä¸ºè¯¥è®¾å¤‡Aé¢„è®¾ä¸€ä¸ªé€»è¾‘åœ°å€ï¼ˆå¦‚DVDï¼Œå…¶é¢„è®¾åœ°å€ä¸ºDVD1ï¼Œå³æ˜¯4ï¼‰ï¼Œå¹¶é€šè¿‡<polling message="">å¹¿æ’­æ­¤åœ°å€ï¼›  </polling></li>
<li>å½“è¯¥é€»è¾‘åœ°å€å·²ç»è¢«å ç”¨æ—¶ï¼Œå¯¹åº”çš„å ç”¨è®¾å¤‡ä¼šåº”ç­”ç¡®è®¤ä¿¡æ¯ã€‚è®¾å¤‡Aæ”¶åˆ°ç¡®è®¤åï¼Œé‡è®¾å…¶ä»–é€»è¾‘åœ°å€ï¼ˆå¦‚ï¼šDVD1-&gt;DVD2ï¼‰ï¼Œå¹¶å¹¿æ’­<polling message="">ï¼›  </polling></li>
<li>å½“æ£€æµ‹åˆ°æ²¡æœ‰ç¡®è®¤æ—¶ï¼Œæ­¤é€»è¾‘åœ°å€å¯ç”¨ï¼Œå› æ­¤è®¾å¤‡Aå ç”¨æ­¤é€»è¾‘åœ°å€ï¼›  </li>
<li>å ç”¨åï¼Œå‘é€å¹¿æ’­<report physical="" address="">ï¼Œå…¶ä¸­åŒ…å«äº†å…¶ç‰©ç†åœ°å€å’Œé€»è¾‘åœ°å€ï¼Œå£°æ˜å¯¹åœ°å€çš„å ç”¨ã€‚è‹¥è¯¢é—®ä¸€åœˆåï¼Œé€»è¾‘åœ°å€å‡è¢«å ç”¨ï¼Œåˆ™è®¾å¤‡Açš„é€»è¾‘åœ°å€ä¸º15ã€‚  </report></li>
</ol>
<h3 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h3><p>æ€»çº¿ä¿æŒé«˜ç”µå¹³æ˜¯é—²æ€ï¼ˆIDLEï¼‰ï¼›<br>è¦å‘é€æ¶ˆæ¯ï¼Œçœ‹æ€»çº¿æ˜¯å¦ç©ºé—²ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™æ‹‰ä½æ€»çº¿ç”µå¹³ï¼Œå‘é€ï¼Œå¦åˆ™ï¼Œå»¶è¿Ÿå‘é€ï¼›<br>ä¸€æ¡CECå…·ä½“ä¼ è¾“çš„æŒ‡ä»¤ï¼šèµ·å§‹ä¿¡å·ï¼ˆä¸€ä¸ª3.7msä½ç”µå¹³+ä¸€ä¸ª0.8msé«˜ç”µå¹³ï¼‰+å¤´éƒ¨æ•°æ®ï¼ˆèµ·å§‹è®¾å¤‡çš„é€»è¾‘åœ°å€+æ¥æ”¶è®¾å¤‡çš„é€»è¾‘åœ°å€ï¼‰+æ“ä½œç +æ“ä½œæ•°ã€‚  </p>
<p>å› ä¸ºï¼Œæ‰€æœ‰è®¾å¤‡çš„CECéƒ½æŒ‚åœ¨ä¸€æ¡çº¿ä¸Šï¼Œæ‰€ä»¥ï¼Œå¤§å®¶éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰æŒ‡ä»¤ã€‚å¦‚æœå¤´éƒ¨æ•°æ®é‡Œçš„æ¥æ”¶é€»è¾‘åœ°å€æ˜¯å’Œè‡ªå·±ç›¸å…³çš„ï¼Œæ­¤è®¾å¤‡å°±ä¼šå¯¹æ“ä½œç è¿›è¡Œå“åº”ï¼Œå¦‚æœå¤´éƒ¨æ•°æ®é‡Œçš„æ¥æ”¶é€»è¾‘åœ°å€å’Œè‡ªå·±æ— å…³ï¼Œæ­¤è®¾å¤‡å°±å¿½ç•¥è¿™ä¸ªæŒ‡ä»¤ã€‚  </p>
<p>CECé€šä¿¡ä¿¡æ¯ç»“æ„æ¨¡å—åŒ…æ‹¬ï¼šHeaderå¼•å¯¼å—å’ŒDataæ•°æ®å—ã€‚æ‰€æœ‰çš„Headerå—å’ŒDataå—éƒ½æ˜¯10bitå¤§å°ã€‚  </p>
<p>Header = æºé€»è¾‘åœ°å€(source) + ç›®çš„é€»è¾‘åœ°å€(destination) + ä¿¡æ¯ç»“æŸä½(EOM) + åº”ç­”ä½(ACK)<br>Data = æ“ä½œç (opcode)/æ“ä½œæ•°(operand) + EOM(End of Message) + ACK(Acknowledge)<br>EOM: 0è¡¨ç¤ºè¿˜æœ‰ä¸€ä¸ªæˆ–æ›´å¤šçš„æ•°æ®å—ï¼Œ1è¡¨ç¤ºæ¶ˆæ¯å·²å®Œæ•´<br><img src="https://i.loli.net/2020/09/08/qz5T7dAIv9inhM3.png" alt="CEC Message Structure.png"><br><img src="https://i.loli.net/2020/09/08/gsplSfNFZCeovx3.png" alt="CEC Protocol.png">  </p>
<p>ä¾‹å­ï¼šStandbyæŒ‡ä»¤ï¼šèµ·å§‹ä¿¡å·+00FF+0x36ï¼›å…¶ä¸­ï¼Œ00è¡¨ç¤ºç”µè§†çš„é€»è¾‘åœ°å€ï¼ŒFFè¡¨ç¤ºå¹¿æ’­åœ°å€ï¼Œè¿™é‡Œè¡¨ç¤ºæ‰€æœ‰æ¥æ”¶è®¾å¤‡çš„é›†åˆï¼Œ36è¡¨ç¤ºStandbyå¾…æœºæ“ä½œã€‚æ­¤æ¡æŒ‡ä»¤å¯ä»¥ç¿»è¯‘ä¸ºï¼šç”µè§†å‘Šè¯‰æ‰€æœ‰è®¾å¤‡ï¼Œå¤§å®¶éƒ½è¿›å…¥å¾…æœºçŠ¶æ€ã€‚  </p>
<h2 id="HDCP"><a href="#HDCP" class="headerlink" title="HDCP"></a>HDCP</h2><p>HDCPç”¨äºä¿æŠ¤ç‰ˆæƒè§†é¢‘ï¼Œé€šè¿‡DDCä¼ è¾“ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.znds.com/forum.php?mod=viewthread&amp;tid=825004&amp;page=1">å¹²è´§çŸ¥è¯†ï¼šä¸€ç¯‡æ–‡çœ‹æ‡‚HDMI1.0åˆ°HDMI2.1çš„è§„æ ¼å˜åŒ–</a><br><a href="https://www.cnblogs.com/TaigaCon/p/3840653.html">HDMIä»‹ç»ä¸æµç¨‹</a><br><a href="https://www.cnblogs.com/zhongguo135/p/9197995.html">HDMIä¹‹HPD</a><br><a href="https://www.cnblogs.com/zhongguo135/p/9458884.html">HDMI EDID å¤„ç†è¿‡ç¨‹</a>  </p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>edid</tag>
        <tag>hdmi</tag>
        <tag>cec</tag>
      </tags>
  </entry>
  <entry>
    <title>æœå°ä¸è§£æ</title>
    <url>/2020/09/10/tuning/</url>
    <content><![CDATA[<p>æœå°ä¸è§£æçš„æ¦‚å¿µã€‚  </p>
<span id="more"></span>


<h2 id="æœå°"><a href="#æœå°" class="headerlink" title="æœå°"></a><strong>æœå°</strong></h2><h3 id="ä¸¤ç§æœå°æ–¹å¼"><a href="#ä¸¤ç§æœå°æ–¹å¼" class="headerlink" title="ä¸¤ç§æœå°æ–¹å¼"></a>ä¸¤ç§æœå°æ–¹å¼</h3><h4 id="AFT"><a href="#AFT" class="headerlink" title="AFT"></a>AFT</h4><p>è‡ªåŠ¨é¢‘ç‡å¾®è°ƒç”µè·¯ã€‚ä¸»è¦æ˜¯ä¾æ®AFTåé¦ˆç”µå‹æ¥åˆ¤åˆ«å½“å‰é¢‘ç‚¹ä¸æ­£ç¡®é¢‘ç‚¹çš„æ¥è¿‘æƒ…å†µã€‚å®ƒçš„ä»»åŠ¡æ˜¯ä¿è¯å›¾åƒä¸­é¢‘ä¿¡å·çš„é¢‘ç‡å›ºå®šåœ¨è§„å®šçš„38MHzæ ‡å‡†å€¼ä¸Šï¼Œä»è€Œä½¿å›¾åƒåŠä¼´éŸ³å¤„äºæœ€ä½³çŠ¶æ€ã€‚  </p>
<p>è·å¾—AFTåé¦ˆç”µå‹çš„ä¸¤ç§æ–¹å¼ï¼š  </p>
<ol>
<li>å¤–æ¥æ¯”è¾ƒç”µè·¯ã€‚å½“å›¾åƒä¸­é¢‘åç¦»38MHzæ—¶ï¼ŒAFTç”µè·¯æ£€æµ‹è¿™ç§é¢‘ç‡åç§»ï¼Œå¹¶å°†é¢‘ç‡åç§»è½¬æ¢æˆç›´æµè¯¯å·®æ§åˆ¶ç”µå‹ï¼Œå»è°ƒèŠ‚æœ¬æŒ¯ç”µè·¯çš„éœ‡è¡é¢‘ç‡ï¼Œä½¿å›¾åƒä¸­é¢‘æ¢å¤åˆ°38MHzä¸Šã€‚  </li>
<li>Tunerå†…ç½®ADï¼Œé€šè¿‡I2Cä»TunerèŠ¯ç‰‡ä¸­è·å¾—ã€‚  </li>
</ol>
<h4 id="AFC"><a href="#AFC" class="headerlink" title="AFC"></a>AFC</h4><p>è‡ªåŠ¨é¢‘ç‡æ§åˆ¶ã€‚åœ¨æœå°è¿‡ç¨‹ä¸­ï¼Œé¢‘ç‡è¿›å…¥AFCå¯æ§èŒƒå›´å‰æä¸‹ï¼Œé€šè¿‡è¯»å–Tunerçš„AFCçŠ¶æ€å¯„å­˜å™¨ï¼Œæ¥åˆ¤æ–­å½“å‰é¢‘ç‚¹ä¸æ­£ç¡®é¢‘ç‚¹ç›¸å·®å¤šå°‘ï¼Œä»è€Œç›´æ¥åŠ å‡ç›¸åº”çš„é¢‘ç‚¹å³å¯ã€‚<br>è¿™ç§æœå°ç®—æ³•ä¸AFTç®—æ³•ç›¸æ¯”ï¼Œæœå°ä¼šæ›´å¿«æ›´å‡†ã€‚  </p>
<p><img src="https://i.loli.net/2020/09/09/fldZ8jAH1FeuNI5.png" alt="å˜é¢‘çš„æ–¹æ³•.png">  </p>
<p>æ€»ç»“ï¼š<br>å†™Tuneré¢‘ç‚¹ï¼Œæ£€æµ‹åŒæ­¥ä¿¡å·è¾“å…¥ç«¯ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¨³å®šçš„åŒæ­¥ä¿¡å·ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ¤æ–­AFTç”µå‹æ˜¯å¦ä¸ºæ ‡å‡†å€¼/Tuner AFCçŠ¶æ€å¯„å­˜å™¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å­˜å°ï¼Œåˆ¤æ–­å›¾åƒã€å£°éŸ³åˆ¶å¼å¹¶è¿›è¡Œç›¸åº”è®¾ç½®ï¼Œè¯¥é¢‘ç‚¹æœå°ç»“æŸã€‚  </p>
<p>æ— æ³•æœå°ï¼š<br>æ’æŸ¥ä¿¡å·æ˜¯å¦æ­£å¸¸ï¼ŒTuneræ˜¯å¦èƒ½æ­£å¸¸åˆå§‹åŒ–ï¼ŒTuner I2Cé€šä¿¡æ˜¯å¦æ­£å¸¸ï¼ŒTunerçš„æ™¶æŒ¯ã€ä¸­é¢‘å’ŒAGCç®¡è„šé…ç½®æ˜¯å¦å’Œç¡¬ä»¶ä¸€è‡´ã€‚  </p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://wenku.baidu.com/view/bd0cefd133d4b14e85246882.html">Tuneræœå°åŸºç¡€</a><br><a href="https://wenku.baidu.com/view/168d33e60975f46527d3e126.html">ç”µè§†æœºæœå°åŸç†</a><br><a href="https://wenku.baidu.com/view/3b771f8b84868762caaed514">è‡ªåŠ¨æœå°åŸç†</a>  </p>
<h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a><strong>è§£æ</strong></h2><h3 id="TSæµ"><a href="#TSæµ" class="headerlink" title="TSæµ"></a>TSæµ</h3><ul>
<li>ESæµï¼šåŸºæœ¬ç æµï¼Œä¸åˆ†æ®µçš„éŸ³é¢‘ã€è§†é¢‘æˆ–å…¶ä»–ä¿¡æ¯çš„è¿ç»­ç æµã€‚  </li>
<li>PESæµï¼š æŠŠåŸºæœ¬æµESåˆ†å‰²æˆæ®µï¼Œå¹¶åŠ ä¸Šç›¸åº”å¤´æ–‡ä»¶æ‰“åŒ…æˆå½¢çš„æ‰“åŒ…åŸºæœ¬ç æµã€‚  </li>
<li>PSæµï¼š èŠ‚ç›®æµï¼Œå°†å…·æœ‰å…±åŒæ—¶é—´åŸºå‡†çš„ä¸€ä¸ªæˆ–å¤šä¸ªPESç»„åˆï¼ˆå¤åˆï¼‰è€Œæˆçš„å•ä¸€æ•°æ®æµï¼ˆç”¨äºæ’­æ”¾æˆ–ç¼–è¾‘ç³»ç»Ÿï¼Œå¦‚m2pï¼‰ã€‚  </li>
<li>TSæµï¼š ä¼ è¾“æµï¼Œå°†å…·æœ‰å…±åŒæ—¶é—´åŸºå‡†æˆ–ç‹¬ç«‹æ—¶é—´åŸºå‡†çš„ä¸€ä¸ªæˆ–å¤šä¸ªPESç»„åˆï¼ˆå¤åˆï¼‰è€Œæˆçš„å•ä¸€æ•°æ®æµï¼ˆç”¨äºæ•°æ®ä¼ è¾“ï¼‰ã€‚  </li>
</ul>
<p>TSæµçš„åŒ…ç»“æ„é•¿åº¦æ˜¯å›ºå®šçš„ï¼ŒPQæµçš„åŒ…ç»“æ„é•¿åº¦æ˜¯å¯å˜çš„ï¼ŒTSæµçš„æŠµæŠ—ä¼ è¾“è¯¯ç èƒ½åŠ›å¼ºäºPSæµã€‚  </p>
<p>è§†é¢‘ESå’ŒéŸ³é¢‘ESåˆ†åˆ«æ‰“åŒ…æˆè§†é¢‘PESå’ŒéŸ³é¢‘PESï¼ŒPESå†å¤ç”¨æˆTSä¼ è¾“æµã€‚  </p>
<p>TSæµæ˜¯åŸºäºPacketçš„ä½æµæ ¼å¼ï¼Œç”±nä¸ªåŒ…ç»„æˆã€‚æ¯ä¸ªåŒ…ç”±Packet Headerå’ŒPacket Dataç»„æˆã€‚å…¶ä¸­Packet HeaderæŒ‡ç¤ºäº†è¯¥Packetæ˜¯ä»€ä¹ˆå±æ€§çš„ï¼Œå¹¶ç»™å‡ºäº†è¯¥Packet Dataçš„æ•°æ®çš„å”¯ä¸€ç½‘ç»œæ ‡è¯†ç¬¦PIDã€‚å¦‚æœä¸€ä¸ªTSæµä¸­çš„ä¸€ä¸ªPacketçš„Packet Headerä¸­çš„PIDæ˜¯0x0000ï¼Œé‚£ä¹ˆè¿™ä¸ªPacketçš„Packet Dataå°±æ˜¯DVBçš„PATè¡¨è€Œéå…¶ä»–ç±»å‹æ•°æ®ï¼ˆå¦‚Videoã€Audioæˆ–å…¶ä»–ä¸šåŠ¡ä¿¡æ¯ï¼‰ã€‚  </p>
<h3 id="åŠŸèƒ½è¡¨"><a href="#åŠŸèƒ½è¡¨" class="headerlink" title="åŠŸèƒ½è¡¨"></a>åŠŸèƒ½è¡¨</h3><h4 id="ä¸šåŠ¡ä¸äº‹ä»¶"><a href="#ä¸šåŠ¡ä¸äº‹ä»¶" class="headerlink" title="ä¸šåŠ¡ä¸äº‹ä»¶"></a>ä¸šåŠ¡ä¸äº‹ä»¶</h4><p>æŒ‰ç…§æ™®é€šäººçš„ä¹ æƒ¯æ¥è¯´ï¼ŒCCTV1æ˜¯ä¸€ä¸ªé¢‘é“ï¼Œä½†å…¶æ ‡å‡†è¯´æ³•åº”è¯¥æ˜¯â€œä¸šåŠ¡(Service)â€ï¼Œã€Šæ–°é—»è”æ’­ã€‹æ˜¯ä¸€ä¸ªèŠ‚ç›®ï¼Œå…¶æ ‡å‡†è¯´æ³•æ˜¯â€œäº‹ä»¶(Event)â€ã€‚  </p>
<p>â€œChannelâ€æŒ‡çš„æ˜¯â€œé¢‘ç‚¹â€æˆ–è€…â€œä¿¡é“â€ï¼Œæ¯ä¸ªâ€œChannelâ€é‡Œä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªâ€œServiceâ€ã€‚  </p>
<h4 id="PSI-SI-Table"><a href="#PSI-SI-Table" class="headerlink" title="PSI/SI Table"></a>PSI/SI Table</h4><table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">å…¨ç§°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">PAT</td>
<td align="left">èŠ‚ç›®å…³è”è¡¨</td>
<td align="left">å°†èŠ‚ç›®å·ç å’ŒèŠ‚ç›®æ˜ å°„è¡¨PIDç›¸å…³è”ï¼Œè·å–æ•°æ®çš„å¼€å§‹</td>
</tr>
<tr>
<td align="left">PMT</td>
<td align="left">èŠ‚ç›®æ˜ å°„è¡¨</td>
<td align="left">æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç›®çš„PID</td>
</tr>
<tr>
<td align="left">CAT</td>
<td align="left">æ¡ä»¶æ¥æ”¶è¡¨</td>
<td align="left">å°†ä¸€ä¸ªæˆ–å¤šä¸ªä¸“ç”¨EMMæµåˆ†åˆ«ä¸å”¯ä¸€çš„PIDç›¸å…³è”</td>
</tr>
<tr>
<td align="left">NIT</td>
<td align="left">ç½‘ç»œä¿¡æ¯è¡¨</td>
<td align="left">æè¿°æ•´ä¸ªç½‘ç»œï¼Œå¦‚å¤šå°‘TSæµã€é¢‘ç‚¹å’Œè°ƒåˆ¶æ–¹å¼ç­‰ä¿¡æ¯</td>
</tr>
</tbody></table>
<p><img src="https://i.loli.net/2020/09/09/put7hxKGnPaQFE9.png" alt="SI.png">  </p>
<p>PSIåªæä¾›äº†å•ä¸ªTSæµçš„ä¿¡æ¯ï¼Œä½¿æ¥æ”¶æœºèƒ½å¤Ÿå¯¹å•ä¸ªTSæµä¸­çš„ä¸åŒèŠ‚ç›®è¿›è¡Œè§£ç ã€‚ ä½†æ˜¯ï¼Œå®ƒä¸èƒ½æä¾›å¤šä¸ªTSæµçš„ç›¸å…³ä¸šåŠ¡ï¼Œä¹Ÿä¸èƒ½æä¾›èŠ‚ç›®çš„ç±»å‹ã€èŠ‚ç›®åç§°ã€å¼€å§‹æ—¶é—´ã€èŠ‚ç›®ç®€ä»‹ç­‰ä¿¡æ¯ã€‚ å› æ­¤ï¼ŒDVBå¯¹PSIè¿›è¡Œäº†æ‰©å±•ï¼Œæä¾›äº†å…¶ä»–ä¸åŒç±»å‹çš„è¡¨ï¼Œå½¢æˆäº†SIã€‚  </p>
<p>SIå®šä¹‰çš„è¡¨ï¼Œå¹¶ä¸éœ€è¦å…¨éƒ¨ä¼ è¾“ï¼Œ å…¶ä¸­ï¼ŒSDTã€EITå’ŒTDTæ˜¯å¿…é¡»ä¼ è¾“çš„ï¼› è€Œåˆä»¥SDTå’ŒEITæœ€ä¸ºé‡è¦ï¼Œåˆ©ç”¨è¿™2ä¸ªè¡¨å¯ä»¥æ„æˆåŠŸèƒ½ä¸åŒçš„EPGï¼Œ å¦‚æä¾›èŠ‚ç›®é™„åŠ ä¿¡æ¯ã€èŠ‚ç›®åˆ†ç±»ã€èŠ‚ç›®é¢„å®šå’Œå®¶é•¿åˆ†çº§æ§åˆ¶ç­‰ã€‚  </p>
<p>é€šè¿‡PATåŠå…¶ä»–PSIä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€ç‚¹ä¸€ç‚¹åœ°æŠŠæ•´ä¸ªTSæµçš„ä¿¡æ¯ç»„ç»‡å’Œç®¡ç†èµ·æ¥ï¼Œä»è€Œåˆ†ç¦»å‡ºä¸åŒçš„ä¸šåŠ¡(Service)ï¼Œ ä»¥åŠè¯¥ä¸šåŠ¡çš„è§†é¢‘ã€éŸ³é¢‘ã€å›¾æ–‡(Teletext)ã€å­—å¹•(Subtitle)ã€å…¶ä»–éŸ³è½¨ç­‰åˆ†é‡ï¼›å†æ ¹æ®SIä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ¯ä¸ªä¸šåŠ¡çš„åç§°ã€äº‹ä»¶(Event)ç­‰é™„åŠ ä¿¡æ¯ï¼Œä»è€Œå½¢æˆEPGï¼Œæ›´å¥½åœ°ç®¡ç†å„ä¸ªä¸šåŠ¡ã€‚  </p>
<p>Decoderåœ¨è§£æTSæµçš„æ—¶å€™è¿›è¡Œæ•°æ®çš„åŒæ­¥ï¼Œç­‰å¾…å®Œæ•´çš„Packetåˆ°æ¥ï¼Œé¦–å…ˆå¯»æ‰¾PATè¡¨ï¼Œæ ¹æ®PATè·å–æ‰€æœ‰PMTè¡¨çš„PIDï¼›å†å¯»æ‰¾PMTè¡¨ï¼Œè·å–è¯¥é¢‘æ®µæ‰€æœ‰èŠ‚ç›®æ•°æ®å¹¶ä¿å­˜ã€‚ è¿™æ ·ï¼Œåªéœ€è¦çŸ¥é“èŠ‚ç›®çš„PIDå°±å¯ä»¥æ ¹æ®PacketHeadeç»™å‡ºçš„PIDè¿‡æ»¤å‡ºä¸åŒçš„Packetï¼Œä»è€Œè§‚çœ‹ä¸åŒçš„èŠ‚ç›®ã€‚ è¿™äº›å°±æ˜¯PATè¡¨å’ŒPMTè¡¨ä¹‹é—´çš„å…³ç³»ã€‚  </p>
<h4 id="å…·ä½“æè¿°"><a href="#å…·ä½“æè¿°" class="headerlink" title="å…·ä½“æè¿°"></a>å…·ä½“æè¿°</h4><ul>
<li>PATè¡¨æè¿°TSæµä¸­æœ‰å‡ ä¸ªèŠ‚ç›®ï¼Œä»¥åŠå®ƒä»¬çš„PMT PIDåˆ†åˆ«æ˜¯å¤šå°‘ã€‚é€šè¿‡program_map_PIDæ‰¾åˆ°äº†å¯¹åº”çš„PMTè¡¨ã€‚  </li>
<li>PMTè¡¨ç»™å‡ºäº†èŠ‚ç›®å·ä¸ç»„æˆè¿™ä¸ªèŠ‚ç›®å…ƒç´ ä¹‹é—´çš„æ˜ å°„ã€‚é€šè¿‡program_numberä¸SDTè¡¨ä¸­çš„service_idå…³è”èµ·æ¥ã€‚    </li>
<li>NITï¼šæœç´¢ä¸»é¢‘ç‚¹çš„åŒæ—¶è§£æNITè¡¨ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªç½‘ç»œçš„é¢‘ç‚¹åˆ—è¡¨ï¼ŒæŒ‰é¡ºåºå¯¹è¿™ä¸ªåˆ—è¡¨çš„é¢‘ç‚¹é”é¢‘ã€è§£æï¼Œå°±å¯ä»¥å°†æ•´ä¸ªç½‘ç»œçš„ä¸šåŠ¡æœç´¢å‡ºæ¥ã€‚  </li>
<li>CATè¡¨æè¿°äº†èŠ‚ç›®çš„åŠ å¯†æ–¹å¼ã€‚  </li>
<li>SDTè¡¨å°†èŠ‚ç›®åç§°å’Œè¯¥èŠ‚ç›®çš„PIDå¯¹åº”èµ·æ¥ã€‚æè¿°ä¸šåŠ¡å†…å®¹åŠä¿¡æ¯ï¼Œè¿æ¥äº†NITã€EITå’ŒPMTã€‚    </li>
<li>EITè¡¨æŒ‰æ—¶é—´é¡ºåºæä¾›æ¯ä¸€ä¸ªä¸šåŠ¡æ‰€åŒ…å«çš„äº‹ä»¶ä¿¡æ¯ã€‚é€šè¿‡service_idä¸SDTè¡¨ä¸­çš„service_idä»¥åŠPMTè¡¨çš„program_numberå…³è”èµ·æ¥ã€‚  </li>
<li>TDTè¡¨ä»…ä¼ é€UTCæ—¶é—´å’Œæ—¥æœŸä¿¡æ¯ã€‚  </li>
<li>TOTè¡¨åŒ…å«äº†UTCæ—¶é—´å’Œæ—¥æœŸä¿¡æ¯ï¼Œä»¥åŠå½“åœ°æ—¶é—´åç§»ï¼ˆæ—¶å·®ï¼‰ç­‰ä¿¡æ¯ã€‚  </li>
<li>BATè¡¨å°†ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸šåŠ¡åˆ†æˆäº†å¤šä¸ªä¸šåŠ¡ç¾¤ï¼Œä»¥æ­¤ç•Œå®šç”¨æˆ·ã€‚  </li>
</ul>
<p><img src="https://i.loli.net/2020/09/09/PEXyujYZ24xVUMh.png" alt="SIå…³è”.png">  </p>
<h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://www.onelib.biz/doc/stb/">æ—æ™“å·OneLibæ™ºåº“</a>  </p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
        <tag>scan</tag>
        <tag>tuning</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–°å»ºåˆ†åŒº</title>
    <url>/2020/08/05/new-android-partition/</url>
    <content><![CDATA[<p>å¯èƒ½æœ‰é—æ¼ã€‚  </p>
<span id="more"></span>


<p>æ·»åŠ åˆ†åŒºï¼Œä¿®æ”¹kernel/android/android-10/vendor/realtek/tool/image_file_creator/configs/Frigga_2851a.cfgï¼Œæ·»åŠ   </p>
<figure class="highlight apache"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">part14</span> = smarttv /smarttv ext<span class="number">4</span> package<span class="number">7</span>/smarttv.tar.bz<span class="number">2</span> <span class="number">67108864</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¼–è¯‘ç³»ç»Ÿå‡çº§æµ‹è¯•ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ‰§è¡Œcat /proc/partitionsåº”è¯¥èƒ½çœ‹åˆ°æ–°æ·»åŠ çš„åˆ†åŒºï¼Œä½†æ˜¯df -hå´çœ‹ä¸åˆ°è¿™ä¸ªåˆ†åŒºæœ‰æŒ‚è½½ä¸Šæ¥ï¼›  </p>
<p>éœ€è¦ä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œæ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•éœ€è¦ä¸€ä¸ªsmarttvç›®å½•ï¼Œç”¨äºæŒ‚è½½ï¼Œ  </p>
<p>ä¿®æ”¹system/core/rootdir/Android.mkæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ï¼š  </p>
<figure class="highlight makefile"><table><tbody><tr><td class="code"><pre><span class="line">LOCAL_POST_INSTALL_CMD += ; mkdir -p <span class="variable">$(TARGET_ROOT_OUT)</span>/smarttv</span><br></pre></td></tr></tbody></table></figure>

<p>æ·»åŠ ç›®å½•æƒé™ï¼Œä¿®æ”¹device/realtek/common/sepolicy/file_contextsï¼Œæ·»åŠ å¦‚ä¸‹ï¼š  </p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#smarttv partition</span></span><br><span class="line"><span class="regexp">/smarttv(/</span>.*)?          u:object_r:rtk_data_file:s0</span><br></pre></td></tr></tbody></table></figure>

<p>å…‰æœ‰æŒ‚è½½ç‚¹è¿˜ä¸å¤Ÿï¼ŒæŒ‚è½½è§„åˆ™å‘¢ï¼Ÿéœ€è¦ä¿®æ”¹device/realtek/common/root/rtd2851a/fstab.gsi<br>æ·»åŠ å¦‚ä¸‹ï¼š  </p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line"><span class="regexp">/dev/</span>block<span class="regexp">/by-name/</span>smarttv    /smarttv      ext4 noatime,defaults               defaults</span><br></pre></td></tr></tbody></table></figure>

<p>è¿˜éœ€è¦æŒ‚è½½åŠ¨ä½œï¼Œè¿™ä¸ªåœ¨device/realtek/common/root/rtd2851a/init.gsi.rcå·²ç»åšå¥½äº†ï¼š  </p>
<figure class="highlight awk"><table><tbody><tr><td class="code"><pre><span class="line">on fs</span><br><span class="line">    mount_all <span class="regexp">/system/</span>etc/fstab.gsi</span><br></pre></td></tr></tbody></table></figure>

<p>ç³»ç»Ÿèµ·æ¥éœ€è¦æ‰§è¡Œä¸€æ¬¡restorecon_recursive /smarttvï¼Œç”¨äºé‡æ–°åŠ è½½sepolicy contextï¼Œå¦åˆ™åˆ†åŒºå¯èƒ½æ— æ³•æ­£å¸¸è¯»å†™ï¼Œä¼šæœ‰  </p>
<blockquote>
<p>[2020/11/9 æ˜ŸæœŸä¸€ 9:27:02] 01-01 00:00:19.826   338   338 D SmartTVService: SmartTvInit::SmartTvInit<br>[2020/11/9 æ˜ŸæœŸä¸€ 9:27:02] 01-01 00:00:19.809   338   338 W vendor.realtek.: type=1400 audit(0.0:15): avc: denied { search } for name=â€/â€œ dev=â€mmcblk0p14â€ ino=2 scontext=u:r:hal_smarttv_default:s0 tcontext=u:object_r:unlabeled:s0 tclass=dir permissive=0  </p>
</blockquote>
<p>è¿™ç§æŠ¥é”™ä¿¡æ¯ã€‚  </p>
<p>ä¿®æ”¹device/realtek/common/root/rtd2851a/init.rtd2851a.rc  </p>
<figure class="highlight dart"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">on</span> <span class="keyword">late</span>-fs</span><br><span class="line">    restorecon_recursive /tvconfigs</span><br><span class="line">    restorecon_recursive /smarttv</span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨æ„restorecon_recursiveè¿™ä¸ªåŠ¨ä½œè¦åšåœ¨mountä¹‹åã€‚  </p>
<p>ç¼–è¯‘ç³»ç»Ÿå‡çº§æµ‹è¯•ï¼Œdf -håº”è¯¥èƒ½çœ‹åˆ°æ–°å»ºçš„åˆ†åŒºæŒ‚è½½ä¿¡æ¯ã€‚  </p>
<p>å®Œã€‚  </p>
<p>[å‚è€ƒ]<br><a href="https://blog.csdn.net/ZC_25/article/details/104027721">[AOSP]Android 9.0æ·»åŠ åˆ†åŒºunlabeledçš„åŸå› åˆ†æåŠè§£å†³åŠæ³•</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿæ’åº</title>
    <url>/2020/09/14/quick-sort/</url>
    <content><![CDATA[<p>å¿«é€Ÿæ’åºï¼ŒåŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºæ•°åˆ—ã€‚  </p>
<span id="more"></span>


<p><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><br>ä¸€è¶Ÿå¿«é€Ÿæ’åºçš„ç®—æ³•æ˜¯ï¼š  </p>
<ol>
<li>è®¾ç½®ä¸¤ä¸ªå˜é‡iã€jï¼Œæ’åºå¼€å§‹çš„æ—¶å€™ï¼ši=0ï¼Œj=N-1ï¼›  </li>
<li>ä»¥ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ ä½œä¸ºå…³é”®æ•°æ®ï¼Œèµ‹å€¼ç»™keyï¼Œå³key=A[0]ï¼›  </li>
<li>ä»jå¼€å§‹å‘å‰æœç´¢ï¼Œå³ç”±åå¼€å§‹å‘å‰æœç´¢(jâ€“)ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºkeyçš„A[j]ï¼Œå°†A[j]çš„å€¼èµ‹ç»™A[i]ï¼›  </li>
<li>ä»iå¼€å§‹å‘åæœç´¢ï¼Œå³ç”±å‰å¼€å§‹å‘åæœç´¢(i++)ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºkeyçš„A[i]ï¼Œå°†A[i]çš„å€¼èµ‹ç»™A[j]ï¼›  </li>
<li>é‡å¤ç¬¬3ã€4æ­¥ï¼Œç›´åˆ°i=jã€‚  </li>
</ol>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> src[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> tmp = src[left];</span><br><span class="line">	src[left] = src[right];</span><br><span class="line">	src[right] = tmp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partArray</span><span class="params">(<span class="keyword">int</span> src[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> pivot = src[low];</span><br><span class="line">	<span class="keyword">while</span>(low &lt; high)</span><br><span class="line">	{</span><br><span class="line">		<span class="keyword">while</span>(low &lt; high &amp;&amp; src[high] &gt;= pivot)</span><br><span class="line">		{</span><br><span class="line">			high--;</span><br><span class="line">		}</span><br><span class="line">		swap(src,low,high);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span>(low &lt; high &amp;&amp; src[low] &lt;= pivot)</span><br><span class="line">		{</span><br><span class="line">			low++;</span><br><span class="line">		}</span><br><span class="line">		swap(src,low,high);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> low;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_quick_sort</span><span class="params">(<span class="keyword">int</span> src[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> pivot = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(low &lt;= high)</span><br><span class="line">	{</span><br><span class="line">		pivot = partArray(src,low,high);</span><br><span class="line">		do_quick_sort(src,low,pivot<span class="number">-1</span>);</span><br><span class="line">		do_quick_sort(src,pivot+<span class="number">1</span>,high);</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> src[], <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	do_quick_sort(src, <span class="number">0</span>, length<span class="number">-1</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">        <span class="keyword">int</span> a[] = {<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>};</span><br><span class="line">        <span class="keyword">int</span> length = <span class="keyword">sizeof</span>(a)/<span class="number">4</span>;</span><br><span class="line">        quick_sort(a,length);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        {</span><br><span class="line">        	<span class="built_in">printf</span>(<span class="string">"a[%d] = %d\n"</span>,i,a[i]);</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>c</tag>
        <tag>algorithm</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>SELinuxçš„é—®é¢˜</title>
    <url>/2020/05/27/selinux/</url>
    <content><![CDATA[<p>å¦‚é¢˜</p>
<span id="more"></span>


<h3 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1"></a>åœºæ™¯1</h3><p>åœ¨setenforce 0å’Œé…ç½®äº†allow system_app self:udp_socket ioctl;åæ“ä½œä¾ç„¶è¢«deniedï¼Œlogä¿¡æ¯å¦‚ä¸‹ï¼š  </p>
<blockquote>
<p>08-07 10:49:20.149 4795 4795 I iwpriv: type=1400 audit(0.0:3457): avc: denied {ioctl} for path=â€socket:[1607798]â€ dev=â€sockfsâ€ ino=1607798 ioctlcmd=8bfc scontext=u:r:system_app:s0 tcontext=u:r:system_app:s0 tclass=udp_socket permissive=1  </p>
</blockquote>
<p>è¿™æ˜¯ç”±äºioctlçš„æ§åˆ¶åœ¨åº•å±‚åˆ’åˆ†å¾—æ›´ç»†ï¼Œéœ€è¦å…è®¸å¯¹åº”ioctlcmdçš„æ“ä½œã€‚  </p>
<p>å…·ä½“æ–¹æ³•æ˜¯ï¼š  </p>
<ol>
<li>æŸ¥æ‰¾å¯¹åº”çš„ioctlcmdåœ¨ioctl_defines(system/sepolicy/public/ioctl_defines)ä¸­çš„å®šä¹‰ï¼Œå¦‚ä¸Šæ–‡çš„8bfcï¼Œå¯¹åº”çš„æ˜¯SIOCIWFIRSTPRIV_1C  </li>
<li>åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹çš„é…ç½®ï¼š<br> allowxperm system_app self:udp_socket ioctl SIOCIWFIRSTPRIV_1C;  </li>
</ol>
<p>è¿™æ ·ï¼Œåœ¨ioctlæ“ä½œæ—¶ï¼Œå¯¹åº”çš„ioctlcmdå°±ä¼šè¢«å…è®¸äº†ã€‚  </p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://www.jianshu.com/p/66062e509d13">android selinux-170821</a>  </li>
<li><a href="https://blog.csdn.net/zxlworking1/article/details/85249796">Android SELinuxé…ç½®</a>  </li>
</ul>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>android</tag>
        <tag>selinux</tag>
      </tags>
  </entry>
  <entry>
    <title>TVä¸€äº›æ¦‚å¿µ</title>
    <url>/2020/09/09/tv/</url>
    <content><![CDATA[<p>ä¸€äº›åè¯æˆ–æ¦‚å¿µã€‚  </p>
<span id="more"></span>


<h3 id="AVC-AVL"><a href="#AVC-AVL" class="headerlink" title="AVC/AVL"></a>AVC/AVL</h3><p>è‡ªåŠ¨éŸ³é‡æ§åˆ¶ã€‚ç”µè§†èŠ‚ç›®ä¸­çš„éŸ³é¢‘ä¿¡å·ç”±äºç‰‡æºå‡ºè‡ªä¸åŒçš„ç”µè§†å°å’Œé‡‡ç¼–å•ä½ï¼Œå¯¼è‡´å…¶éŸ³é¢‘æ°´å¹³ä¸å›ºå®šï¼Œå› æ­¤å®¹æ˜“å‡ºç°åœ¨ä¸è°ƒèŠ‚ç”µè§†éŸ³é‡çš„æƒ…å†µä¸‹ï¼Œæœ‰çš„ç”µè§†èŠ‚ç›®å£°éŸ³å¾ˆå¤§ï¼Œæœ‰çš„ç”µè§†èŠ‚ç›®åˆå£°éŸ³å¾ˆå°ã€‚ä½¿ç”¨AVCåŠŸèƒ½åï¼Œç”µè§†æœºå¯ä»¥æ ¹æ®èŠ‚ç›®è¾“å…¥çš„éŸ³é‡å¤§å°ï¼Œè‡ªåŠ¨è°ƒèŠ‚è¾“å‡ºéŸ³é‡æ°´å¹³ï¼Œä¿æŒå£°éŸ³çš„ç¨³å®šï¼Œå‡å°‘æˆ–æ¶ˆé™¤çˆ†éŸ³ï¼ŒåŒæ—¶æ”¾å¤§è¾ƒå°çš„å£°éŸ³è‡³é€‚å®œçš„èŒƒå›´ã€‚  </p>
<h3 id="PreScale"><a href="#PreScale" class="headerlink" title="PreScale"></a>PreScale</h3><p>ç”±äºå„ä¸ªé€šé“åŸå§‹éŸ³é‡ä¸å°½ç›¸åŒï¼Œä¼šå…ˆé€è¿‡PreScaleå°†å„é€šé“éŸ³é‡è°ƒæ•´ä¸€è‡´ã€‚  </p>
<h3 id="æ¶ˆéš"><a href="#æ¶ˆéš" class="headerlink" title="æ¶ˆéš"></a>æ¶ˆéš</h3><ul>
<li>è¡Œæ¶ˆéšï¼šç”µå­æŸåœ¨æ¯ä¸€è¡Œä»å³è¾¹å›åˆ°å·¦è¾¹çš„æ—¶é—´  </li>
<li>åœºæ¶ˆéšï¼šç”µå­æŸä»æ¯ä¸€åœºçš„å³ä¸‹è§’å›åˆ°å·¦ä¸Šè§’çš„æ—¶é—´ã€‚åœ¨åœºæ¶ˆéšæœŸé—´å¯èƒ½è¾“å‡ºä¸€äº›CCæˆ–è€…TTç­‰ä¿¡æ¯  </li>
</ul>
<h3 id="è§£è°ƒ"><a href="#è§£è°ƒ" class="headerlink" title="è§£è°ƒ"></a>è§£è°ƒ</h3><ul>
<li>é«˜é¢‘å¤´æŠŠå°„é¢‘ä¿¡å·è§£è°ƒæˆä¸­é¢‘ä¿¡å·  </li>
<li>ä¸­é¢‘è§£è°ƒæŠŠä¸­é¢‘ä¿¡å·è§£è°ƒæˆè§†é¢‘ä¿¡å·  </li>
<li>å£°éŸ³è§£è°ƒæŠŠSIFè§£è°ƒæˆå£°éŸ³ä¿¡å·  </li>
</ul>
<h3 id="CC"><a href="#CC" class="headerlink" title="CC"></a>CC</h3><p>Closed Captionï¼šç¾å›½åœ¨VBIé‡Œé¢ä¼ è¾“çš„å­—å¹•ä¿¡æ¯ï¼Œå¸®åŠ©è‹å“‘äººçœ‹ç”µè§†  </p>
<h3 id="MTS"><a href="#MTS" class="headerlink" title="MTS"></a>MTS</h3><p>ä¸€ä¸ªé€šç”¨ç§°å‘¼ï¼Œæ‰€æœ‰å¤šå£°é“ä¼´éŸ³å‡å¯ç§°ä½œMTSã€‚  </p>
<ul>
<li>NICAMæ˜¯æ•°å­—å¤šå£°é“ä¼´éŸ³å¹¿æ’­  </li>
<li>BTSCæ˜¯æ¨¡æ‹Ÿå¤šå£°é“ä¼´éŸ³å¹¿æ’­  </li>
<li>A2  </li>
<li>EIAJ  </li>
</ul>
<h3 id="AGC"><a href="#AGC" class="headerlink" title="AGC"></a>AGC</h3><p>è‡ªåŠ¨å¢ç›Šæ§åˆ¶ã€‚è‡ªåŠ¨å¯¹å¢ç›Šè¿›è¡Œæ§åˆ¶æ¥å¾—åˆ°ç¨³å®šçš„è¾“å‡ºå¹…åº¦ã€‚  </p>
<ul>
<li>åœ¨é«˜é¢‘å¤´å†…éƒ¨ï¼Œæœ‰å°„é¢‘AGCå’Œä¸­é¢‘AGCï¼Œæ¥é’ˆå¯¹ä»40dBuVåˆ°100dBuVçš„å°„é¢‘ä¿¡å·éƒ½å¾—åˆ°ç›¸è¿‘çš„ä¸­é¢‘è¾“å‡º  </li>
<li>åœ¨è§†é¢‘è§£ç èŠ¯ç‰‡å†…éƒ¨ï¼Œæœ‰è§†é¢‘AGCæ¥é’ˆå¯¹ä¸åŒå¹…åº¦çš„è§†é¢‘ä¿¡å·è¿›è¡Œå¢ç›Šæ§åˆ¶ï¼Œå¾—åˆ°ç›¸åŒçš„ä¿¡å·è¾“å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è®ºä½ è¾“å…¥300mVppè¿˜æ˜¯1.5Vppçš„è§†é¢‘ä¿¡å·ï¼Œå¾—åˆ°çš„è¾“å‡ºå¹…åº¦éƒ½æ˜¯ç›¸ç­‰çš„  </li>
<li>å¯¹è‰²åº¦ä¿¡å·å¤„ç†æ—¶ï¼Œæœ‰AGCæ¥å®Œæˆç±»ä¼¼çš„å¤„ç†  </li>
</ul>
<p>ADCå†…éƒ¨æ˜¯æ²¡æœ‰AGCçš„ï¼Œæ‰€ä»¥RGBä¿¡å·å’Œè‰²å·®ä¿¡å·éƒ½è¢«è®¤ä¸ºæ˜¯æ ‡å‡†å¹…åº¦è€Œä¸ä¼šè¿›è¡ŒAGCæ§åˆ¶ã€‚  </p>
<h3 id="ä¿¡å·"><a href="#ä¿¡å·" class="headerlink" title="ä¿¡å·"></a>ä¿¡å·</h3><ul>
<li>å¤åˆè§†é¢‘ä¿¡å·ï¼šåŒ…å«åŒæ­¥ä¿¡å·ã€äº®åº¦ä¿¡å·ã€è‰²åº¦ä¿¡å·  </li>
<li>CVBSï¼šå¤åˆè§†é¢‘åŸºå¸¦ä¿¡å·  </li>
<li>åˆ†é‡ä¿¡å·ï¼šé€šå¸¸åœ¨æ•°å­—é¢†åŸŸç§°ä½œYCbCr(Digital color difference signals)ï¼Œæ¨¡æ‹Ÿé¢†åŸŸç§°ä½œYPbPr(Analog color difference signals)<br><img src="https://i.loli.net/2020/09/09/KRrwjhmNSOe3YJs.png" alt="å·®åˆ†ä¿¡å·.png">  </li>
</ul>
<h3 id="DDC"><a href="#DDC" class="headerlink" title="DDC"></a>DDC</h3><p>æŒ‡ä¸»æœºä¸æ˜¾ç¤ºè®¾å¤‡çš„é€šè®¯æ–¹å¼ã€‚åŒ…æ‹¬DDC1/DDC2B/DDC2B+ç­‰æ–¹å¼ã€‚ç›®å‰ä¸»è¦é‡‡ç”¨DDC2Bæ–¹å¼ï¼šä¸»æœºä¸æ˜¾ç¤ºè®¾å¤‡åŒå‘é€šè®¯ï¼ŒåŸºäºI2Cåè®®ï¼Œåªæœ‰ä¸»æœºå‘æ˜¾ç¤ºå™¨å‘å‡ºéœ€æ±‚ä¿¡å·ï¼Œå¹¶å¾—åˆ°æ˜¾ç¤ºå™¨çš„å“åº”åï¼Œæ˜¾ç¤ºå™¨æ‰é€å‡ºEDIDèµ„æ–™ã€‚  </p>
<h3 id="Auto-Color"><a href="#Auto-Color" class="headerlink" title="Auto Color"></a>Auto Color</h3><p>VGAå’ŒYPBPRé€šé“éœ€è¦äººçˆ²åšAUTO COLORï¼Œ å…¶å®ƒAV/S-VIDEO/TVé€šé“æ˜¯é€šéVideo Decodeå…§çš„digital clampingå’Œdigital gainåšå¯¦æ™‚èª¿æ•´ï¼Œä¸éœ€è¦ç”¨äººçˆ²AUTO COLORçš„æ–¹å¼ã€‚  </p>
<p>åŸç†ï¼šåœ¨ä¸‰è·¯R/G/B or Y/Pb/Pr æ¨¡æ‹Ÿä¿¡å·è¾“å…¥åˆ°ä¸»èŠ¯ç‰‡æ—¶ï¼Œç”±äºå­˜åœ¨ç¡¬ä»¶ä¸Šçš„åå·®ï¼Œå¯¼è‡´è¿›å…¥åˆ°èŠ¯ç‰‡çš„ä¿¡å·èŒƒå›´å’Œæ ‡å‡†å€¼æœ‰ä¸€å®šçš„å·®åˆ«ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¾“å…¥ä¿¡å·è¿›è¡ŒADC æ ¡æ­£ï¼Œæ ¡éªŒéœ€è¦ä½¿100% colorbarå›¾åƒï¼Œä»¥ä¿è¯è¿›åˆ°ä¸»èŠ¯ç‰‡çš„æ¨¡æ‹Ÿè¾“å…¥ä¿¡å·ç¬¦åˆæ ‡å‡†ï¼›å…±æœ‰R/G/B GAINï¼ˆå¢ç›Šé‡ï¼‰å’ŒR/G/B OFFSETï¼ˆåç§»é‡ï¼‰å…­ä¸ªå‚æ•°ã€‚  </p>
<h3 id="éŸ³é¢‘æ•°æ®"><a href="#éŸ³é¢‘æ•°æ®" class="headerlink" title="éŸ³é¢‘æ•°æ®"></a>éŸ³é¢‘æ•°æ®</h3><ul>
<li>PCMæ•°æ®ï¼šæŒ‡ç»è¿‡è§£ç åçš„æ•°æ®æˆ–æœªç»ç¼–ç çš„è£¸æ•°æ®  </li>
<li>é€ä¼ æ•°æ®ï¼šæŒ‡ç¼–ç æ•°æ®æ²¡ç»è¿‡è§£ç ï¼Œç›´æ¥å°è£…IEC61937åè®®åå¾€ç«¯å£è¾“å‡ºï¼Œç”±å¤–å›´è®¾å¤‡è§£ç ã€‚é€ä¼ æ•°æ®åˆ†ä¸ºä½ç ç‡é€ä¼ æ•°æ®ï¼ˆç®€ç§°LBRï¼Œä¸»è¦æœ‰DDã€DTSï¼‰å’Œé«˜ç ç‡é€ä¼ æ•°æ®ï¼ˆç®€ç§°HBRï¼Œä¸»è¦æœ‰DDPã€DTSHDï¼‰ã€‚  </li>
</ul>
<h3 id="ç”µè§†æœºçš„åŒæ­¥èŒƒå›´"><a href="#ç”µè§†æœºçš„åŒæ­¥èŒƒå›´" class="headerlink" title="ç”µè§†æœºçš„åŒæ­¥èŒƒå›´"></a>ç”µè§†æœºçš„åŒæ­¥èŒƒå›´</h3><p>ç”µè§†æœºçš„åŒæ­¥èŒƒå›´æ˜¯æŒ‡åŒæ­¥ä¿¡å·èƒ½å¤Ÿæ§åˆ¶æ‰«æç”µè·¯çš„é¢‘ç‡èŒƒå›´ï¼Œè¦æ±‚è¡ŒåŒæ­¥ä¿æŒèŒƒå›´ï¼ˆå›¾åƒä¿æŒåŒæ­¥çš„èŒƒå›´ï¼‰åœ¨æ­£è´Ÿ400Hzä¹‹é—´ï¼Œè¡ŒåŒæ­¥å¼•å…¥èŒƒå›´ï¼ˆä»æ–­å¼€è‡³æ¥å…¥ä¿¡å·æ—¶ï¼Œå›¾åƒå¼•å…¥åŒæ­¥èŒƒå›´ï¼‰åœ¨æ­£è´Ÿ200Hzä¹‹é—´ï¼Œå¸§åŒæ­¥èŒƒå›´ä¸º-4~2Hzï¼Œä¿æŒåŒæ­¥çš„ç”µæºç”µå‹å˜åŒ–èŒƒå›´ä¸è¶…è¿‡æ­£è´Ÿ10%ã€‚  </p>
<p>å¯¹äºç”µè§†æœºçš„è¡Œæ‰«æç”µè·¯æ¥è¯´ï¼Œå½“ç”µè§†æœºçš„è¡Œé¢‘fHåœ¨æŸä¸€é¢‘ç‡èŒƒå›´å†…æ—¶ï¼Œåªè¦æœ‰åŒæ­¥è„‰å†²å­˜åœ¨ï¼Œå³ä½¿ç”±äºå¹²æ‰°è€Œå¤±å»åŒæ­¥ï¼Œä¹Ÿè¿˜èƒ½è¢«â€œæ‹‰å›â€åˆ°ä¸åŒæ­¥è„‰å†²ç›¸åŒæ­¥çš„çŠ¶æ€ï¼Œè¿™ä¸ªè¡Œé¢‘fHçš„èŒƒå›´å«æ•æ‰èŒƒå›´ï¼›å½“ç”µè§†æœºå·²å¤„äºåŒæ­¥çŠ¶æ€æ—¶ï¼Œæ…¢æ…¢æ”¹å˜è¡Œé¢‘ï¼Œåœ¨å¤±å»åŒæ­¥ä¹‹å‰èƒ½å¤Ÿä¿æŒåŒæ­¥çš„fHèŒƒå›´å«ä¿æŒèŒƒå›´ã€‚ç”±äºç”µè§†æœºä¸­è®¾æœ‰è¡Œé¢‘è‡ªåŠ¨æ§åˆ¶ï¼ˆAFCï¼‰ç”µè·¯ï¼Œæ‰€ä»¥å®ƒçš„è¡Œé¢‘ä¿æŒèŒƒå›´å¤§äºæ•æ‰èŒƒå›´ï¼Œå¦‚æœæ²¡æœ‰AFCç³»ç»Ÿï¼Œåˆ™ç”µè§†æœºçš„è¡Œé¢‘æ•æ‰èŒƒå›´å’Œä¿æŒèŒƒå›´æ˜¯ç›¸åŒçš„ã€‚æˆ‘å›½å¹¿æ’­ç”µè§†æ¥æ”¶æœºçš„æ ‡å‡†è§„å®šï¼Œç”²çº§å’Œä¹™çº§ç”µè§†æœºçš„è¡ŒåŒæ­¥æ•æ‰èŒƒå›´åˆ†åˆ«ä¸ºä¸å°äºæ­£è´Ÿ400Hzå’Œæ­£è´Ÿ200Hzï¼Œè¡ŒåŒæ­¥çš„ä¿æŒèŒƒå›´åˆ†åˆ«ä¸ºä¸å°äºæ­£è´Ÿ800Hzå’Œæ­£è´Ÿ400Hzã€‚  </p>
<h3 id="ä¸½éŸ³"><a href="#ä¸½éŸ³" class="headerlink" title="ä¸½éŸ³"></a>ä¸½éŸ³</h3><p>å±äºç«‹ä½“éŸ³çš„ä¸€ç§ã€‚  </p>
<ul>
<li>å•å£°é“æ–¹å¼ï¼š ä¸¤ä¸ªå£°é“åˆ†åˆ«ä¼ é€ä¸€è·¯å£°éŸ³ä¿¡å·å’Œä¸€è·¯æ•°æ®  </li>
<li>åŒè¯­è¨€æ–¹å¼ï¼š ä¼ ä¸¤è·¯å£°éŸ³ä¿¡å·ï¼Œé€‚åˆäºå¤šè¯­è¨€ã€è¯­ç§åœ°åŒº  </li>
<li>ç«‹ä½“éŸ³æ–¹å¼ï¼š ä¸¤ä¸ªæ•°å­—é€šé“åˆ†åˆ«ä¼ é€ç«‹ä½“å£°å·¦å³ä¸¤ä¸ªå£°é“çš„å£°éŸ³ä¿¡å·  </li>
</ul>
<h3 id="Overscan"><a href="#Overscan" class="headerlink" title="Overscan"></a>Overscan</h3><p>è¿‡æ‰«æã€‚åœ¨ç”µè§†ç³»ç»Ÿä¸­ï¼Œä¸ºé¿å…å…ƒå™¨ä»¶çš„è€åŒ–æˆ–è€…å‚æ•°å˜åŒ–å¯¼è‡´çš„å½±å“ï¼Œå¿…é¡»æœ‰ä¸€å®šçš„è¿‡æ‰«æã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰«æçš„å¤§å°è¶…è¿‡æ˜¾ç¤ºå±çš„å¤§å°ï¼Œå››å‘¨æœ‰ä¸€å°éƒ¨åˆ†çš„å›¾åƒçœ‹ä¸åˆ°ã€‚  </p>
<p>å¦‚æœæ²¡æœ‰è¿‡æ‰«æï¼Œåœ¨å›¾åƒäº®åº¦å˜åŒ–æ—¶ï¼Œç”±äºæŸæµå˜åŒ–ï¼Œä¼šå¯¼è‡´å›¾åƒæ‰«æçš„åŒºåŸŸå˜åŒ–ï¼Œä»è€Œå¯¼è‡´å›¾åƒå˜å°æˆ–è€…å˜å¤§ï¼Œæ˜¾åƒç®¡å››å‘¨å‡ºç°é»‘è¾¹ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦ä¸€å®šçš„è¿‡æ‰«æã€‚  </p>
<p>ç‚¹å¯¹ç‚¹æ¯”ä¾‹æ¨¡å¼ä¸åšOverscanã€‚  </p>
<p>USB/DVI/VGAé€šé“ä¸åšOverscanã€‚VGAæ˜¯æ¥ç”µè„‘çš„ï¼Œä¸æ˜¯çœ‹ç”µè§†ç”¨çš„ï¼›ç›¸å½“äºåœ¨ç”¨ç”µè„‘ï¼›ç”µè„‘ä¿¡å·ä¹Ÿä¸ä¼šå‡ºç°æ‚æ³¢å¹²æ‰°ã€‚  </p>
<p><a href="https://wenku.baidu.com/view/bbb35dafd0f34693daef5ef7ba0d4a7302766c32.html">ä»€ä¹ˆæ˜¯ç‚¹å¯¹ç‚¹æ˜¾ç¤º</a></p>
]]></content>
      <categories>
        <category>TV</category>
      </categories>
      <tags>
        <tag>tv</tag>
      </tags>
  </entry>
  <entry>
    <title>Android TV è“ç‰™é¥æ§é€‚é…</title>
    <url>/2020/09/17/android-bluetooth-remote/</url>
    <content><![CDATA[<p>HID(Human Interface Device)è®¾å¤‡ï¼Œå³äººæœºäº¤äº’è®¾å¤‡ã€‚å¸¸è§çš„æœ‰é¼ æ ‡ã€é”®ç›˜ã€æ¸¸æˆæ‰‹æŸ„ç­‰ã€‚ä¸€èˆ¬æœ‰çº¿æ–¹å¼éƒ½æ˜¯é€šè¿‡USBè¿çº¿è¿æ¥åˆ°æœºå™¨è®¾å¤‡ï¼Œä½œä¸ºç”¨æˆ·è¾“å…¥è®¾å¤‡ã€‚åœ¨è“ç‰™æŠ€æœ¯ä¸­ï¼ŒHIDè®¾å¤‡çš„æ¥å…¥å°±æ˜¯æ— çº¿çš„ã€‚æ‰€ä»¥å®¢æˆ·çš„è“ç‰™é¥æ§å™¨ä¹Ÿæ˜¯HIDè®¾å¤‡ï¼Œæœ¬æ–‡è®°å½•è“ç‰™é¥æ§å™¨é€‚é…æ–¹æ³•ã€‚  </p>
<span id="more"></span>


<p>é€šè¿‡å®¢æˆ·æä¾›çš„æ–‡æ¡£æˆ–è€…<code>getevent</code>å‘½ä»¤ï¼ˆé¥æ§è·ŸTVéœ€è¦å…ˆåŒ¹é…ä¸Šï¼‰ç¡®å®šé¥æ§çš„HIDç å€¼ï¼ˆä¸æ˜¯çº¢å¤–ç å€¼ï¼‰ï¼Œæ¯”å¦‚æŒ‰ä¸‹è¯­éŸ³é”®ä¼šå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š<br><code>getevent</code>:  </p>
<blockquote>
<p>/dev/input/event3: 0004 0004 000c0221<br>/dev/input/event3: 0001 00d9 00000001<br>/dev/input/event3: 0000 0000 00000000<br>/dev/input/event3: 0004 0004 000c0221<br>/dev/input/event3: 0001 00d9 00000000<br>/dev/input/event3: 0000 0000 00000000  </p>
</blockquote>
<p><code>getevent -l</code>:  </p>
<blockquote>
<p>/dev/input/event3: EV_MSC       MSC_SCAN             000c0221<br>/dev/input/event3: EV_KEY       KEY_SEARCH           DOWN<br>/dev/input/event3: EV_SYN       SYN_REPORT           00000000<br>/dev/input/event3: EV_MSC       MSC_SCAN             000c0221<br>/dev/input/event3: EV_KEY       KEY_SEARCH           UP<br>/dev/input/event3: EV_SYN       SYN_REPORT           00000000  </p>
</blockquote>
<p>é€šè¿‡ä¸Šè¿°æ‰“å°å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š<br>0221æ˜¯è¿™ä¸ªæŒ‰é”®çš„HIDç å€¼ï¼Œpageç±»å‹æ˜¯000cï¼Œ00d9æ˜¯è¿™ä¸ªLinuxçš„é”®å€¼ï¼ˆå¯¹åº”äº†KEY_SEARCHè¿™ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—èµ·å¾—å¾ˆç–‘æƒ‘ï¼Œæ˜æ˜æ˜¯è¯­éŸ³åŠŸèƒ½<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼‰ã€‚  </p>
<p>KEY_SEARCHæ˜¯åœ¨kernel/linux/linux-4.14/include/uapi/linux/input-event-codes.hè¿™ä¸ªæ–‡ä»¶å®šä¹‰çš„ï¼š  </p>
<blockquote>
<p>#define KEY_SEARCH              217  </p>
</blockquote>
<p>åè¿›åˆ¶çš„217å°±æ˜¯ç­‰äºåå…­è¿›åˆ¶çš„d9ã€‚  </p>
<p>é€šè¿‡kernel/linux/linux-4.14/drivers/hid/hid-input.cè¿™ä¸ªæ–‡ä»¶:  </p>
<blockquote>
<p>case 0x221: map_key_clear(KEY_SEARCH);          break;  </p>
</blockquote>
<p>æŠŠHIDç å€¼è·ŸLinuxé”®å€¼åŒ¹é…åœ¨ä¸€èµ·ã€‚  </p>
<p>è“ç‰™é”®å€¼æœ‰ä¸åŒç±»å‹ï¼Œâ€œ07â€ä»£è¡¨æ™®é€šè“ç‰™é”®å€¼ï¼Œâ€œ0Câ€ä»£è¡¨å¤šåª’ä½“é”®å€¼ï¼Œâ€œ0Câ€ç±»å‹éœ€è¦ä¿®æ”¹hid-input.cçš„<code>HID_UP_CONSUMER</code>ï¼Œâ€œ07â€ç±»å‹åˆ™éœ€è¦ä¿®æ”¹<code>hid_keyboard[256]</code>ã€‚  </p>
<p>ç°åœ¨çŸ¥é“äº†HIDç å€¼ï¼ˆ0x0221ï¼‰åŠå…¶å¯¹åº”çš„Linuxé”®å€¼(0xd9)(217)äº†ï¼Œä½†æ˜¯åŠŸèƒ½å®ç°è¿˜éœ€è¦Androidé”®å€¼ã€‚Linuxé”®å€¼ä¸Androidé”®å€¼æ˜¯é€šè¿‡<code>kl</code>æ–‡ä»¶åŒ¹é…çš„ã€‚æ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªklæ–‡ä»¶ï¼Ÿ  </p>
<p>é€šè¿‡<code>cat /proc/bus/input/devices</code>å‘½ä»¤ç¡®è®¤é¥æ§å™¨çš„<code>Vendor</code>IDå’Œ<code>Product</code>ID  </p>
<blockquote>
<p>I: Bus=0005 Vendor=1d5a Product=c081 Version=0000<br>N: Name=â€H016A001â€<br>P: Phys=<br>S: Sysfs=/devices/virtual/misc/uhid/0005:1D5A:C081.0001/input/input3<br>U: Uniq=20:19:10:23:00:f6<br>H: Handlers=event3<br>B: PROP=0<br>B: EV=12001f<br>B: KEY=1 8000000 0 3007f 0 0 0 0 403ffff 17aff32d bf540446 0 0 1 130f97 8b17e007 ffff7bfa d9415fff febeffd7 ffefffff ffffffff fffffffe<br>B: REL=40<br>B: ABS=1 0<br>B: MSC=10<br>B: LED=3ff  </p>
</blockquote>
<p>æ‰€ä»¥éœ€è¦çš„klæ–‡ä»¶æ˜¯ï¼šVendor_1d5a_Product_c081.kl<br>è¯¥æ–‡ä»¶æœ‰å¦‚ä¸‹ä¿¡æ¯ï¼š  </p>
<blockquote>
<p>key 217   VOICE_ASSIST  </p>
</blockquote>
<p>Android Frameworkä¼šæŠŠVOICE_ASSISTè½¬åŒ–æˆAndroidé”®å€¼ï¼Œå®ç°å¯¹åº”çš„åŠŸèƒ½ã€‚<br>Frameworkæ”¹åˆ°çš„æ–‡ä»¶æœ‰å¦‚ä¸‹4ä¸ªï¼š<br><img src="https://i.loli.net/2020/09/17/x5E4wOcneVz7BJ9.png" alt="android_keycode.png">  </p>
<p>åˆ°æ­¤ï¼ŒåŸºæœ¬é€‚é…å®Œæˆäº†ã€‚  </p>
<p>å¦å¤–ï¼Œdumpsys inputè¿˜å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š  </p>
<blockquote>
<p>4: H016A001<br>Classes: 0x80000121<br>Path: /dev/input/event3<br>Enabled: true<br>Descriptor: 83b91aadd3b6814a870f118082cde683c34f199e<br>Location:<br>ControllerNumber: 0<br>UniqueId: 20:19:10:23:00:f6<br>Identifier: bus=0x0005, vendor=0x1d5a, product=0xc081, version=0x0000<br>KeyLayoutFile: /system/usr/keylayout/Vendor_1d5a_Product_c081.kl<br>KeyCharacterMapFile: /system/usr/keychars/Generic.kcm<br>ConfigurationFile:<br>HaveKeyboardLayoutOverlay: false  </p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>bluetooth</tag>
        <tag>hid</tag>
      </tags>
  </entry>
  <entry>
    <title>Android:ä¸€ä¸ªèœå•åˆ·æ–°å¾ˆæ…¢çš„é—®é¢˜</title>
    <url>/2020/10/30/android-ui-update-slowly/</url>
    <content><![CDATA[<p>ä½ç«¯æ‰“å·¥äººä¹‹æ—¥å¸¸ç–‘æƒ‘ã€‚  </p>
<span id="more"></span>


<h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><p>ä¸€ä¸ªä¸²å£è‡ªåŠ¨åŒ–æµ‹è¯•ç¨‹åºï¼š<br>æ˜¯ä¸€ä¸ªæœåŠ¡ï¼š<code>FactoryAutomationService</code> ï¼ˆFactoryAutomationService.javaæ–‡ä»¶ï¼‰<br>æœåŠ¡å¯åŠ¨ä¹‹åå‡†å¤‡åˆ›å»ºå­çº¿ç¨‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> FactoryUartThread mFacUartThread;  </span><br><span class="line">mFacUartThread = <span class="keyword">new</span> FactoryUartThread(<span class="keyword">this</span>);  </span><br><span class="line">mFacUartThread.startChangHongUartThread();  </span><br></pre></td></tr></tbody></table></figure>

<p>å…·ä½“åˆ›å»ºäº†å­çº¿ç¨‹ï¼šï¼ˆFactoryUartThread.javaæ–‡ä»¶ï¼‰  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Thread changhongUartThread;  </span><br><span class="line">changhongUartThread = <span class="keyword">new</span> Thread(ChangHongUartTest);  </span><br><span class="line">changhongUartThread.start();  </span><br></pre></td></tr></tbody></table></figure>

<p>å­çº¿ç¨‹ä¸»è¦å¹²çš„äº‹æƒ…æ˜¯<code>handleChangHongFactoryCommand</code>:  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Runnable ChangHongUartTest = <span class="keyword">new</span> Runnable() {  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{  </span><br><span class="line">        <span class="keyword">while</span> (RunChangHongUartThread) {  </span><br><span class="line">	    <span class="comment">//...  </span></span><br><span class="line">	    handleChangHongFactoryCommand(ReceiveBuffer);  </span><br><span class="line">	    <span class="comment">//...  </span></span><br><span class="line">	}  </span><br><span class="line">    }  </span><br><span class="line">};  </span><br></pre></td></tr></tbody></table></figure>

<p><code>handleChangHongFactoryCommand</code>é‡Œé¢æ‹¿åˆ°æ­£å¸¸çš„æ•°æ®åï¼Œè¦åˆ·æ–°èœå•ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡<code>handler</code>åˆ‡æ¢ä¸»çº¿ç¨‹å»åˆ·æ–°èœå•ï¼Œå¦‚æœæœ‰ä¸€äº›è€—æ—¶çš„æ¯”å¦‚ä¿å­˜æ•°æ®ç­‰æ“ä½œï¼Œåˆ™è¿˜æ˜¯åœ¨åŸæ¥çš„å­çº¿ç¨‹ä¸Šæ“ä½œã€‚<br>å¦‚æœæµ‹è¯•å®Œæ¯•ï¼Œè¦å…³é—­<code>FactoryAutomationService</code>æœåŠ¡äº†ï¼Œä¼šå…³å­çº¿ç¨‹ï¼Œ  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">changhongUartThread.join();  </span><br></pre></td></tr></tbody></table></figure>
<p><code>join()</code>ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å­çº¿ç¨‹ç»“æŸï¼Œä¿è¯æ•°æ®å­˜å‚¨å®Œæˆï¼Œä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­è·‘ä¸‹å»ã€‚  </p>
<h4 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h4><p>åœ¨å­çº¿ç¨‹<code>handleChangHongFactoryCommand</code>ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å†™æ³•1</span></span><br><span class="line">saveChangHongColorTemp(getcommand[<span class="number">2</span>]); <span class="comment">//åˆ·æ–°èœå•</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆ·æ–°èœå•çš„å®ç°å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">    Log.d(TAG, "System.currentTimeMillis() = " + System.currentTimeMillis());</span></span><br><span class="line"><span class="comment">    mHandlerComands.post(new Runnable() {</span></span><br><span class="line"><span class="comment">        @Override</span></span><br><span class="line"><span class="comment">	public void run() {</span></span><br><span class="line"><span class="comment">	    Log.d(TAG, "AAA");</span></span><br><span class="line"><span class="comment">	    Log.d(TAG, "System.currentTimeMillis() = " + System.currentTimeMillis());</span></span><br><span class="line"><span class="comment">	    showRGBValue(cTyte, r_value, g_value, b_value);</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">    });</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">mHandler.post(<span class="keyword">new</span> Runnable() {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        Log.d(TAG, <span class="string">"BBB"</span>);</span><br><span class="line">	GetSys().SetValueInt(<span class="string">"Misc_PRE_SAVE_TEMP_VALUE"</span>, getcommand[<span class="number">2</span>]&amp;<span class="number">0xFF</span>); <span class="comment">//æ•°æ®å­˜å‚¨ã€‚æŒ‰ç†è¯´ä¸åº”åˆ‡åˆ°ä¸»çº¿ç¨‹ï¼Ÿ</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šå†™æ³•ï¼Œèœå•è¦ç­‰ä¸€ä¼šæ‰ä¼šè¢«åˆ·æ–°å‡ºæ¥ã€‚<br>ç¨ä½œä¿®æ”¹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å†™æ³•2</span></span><br><span class="line">saveChangHongColorTemp(getcommand[<span class="number">2</span>]); <span class="comment">//åˆ·æ–°èœå•</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆ·æ–°èœå•çš„å®ç°å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">    Log.d(TAG, "System.currentTimeMillis() = " + System.currentTimeMillis());</span></span><br><span class="line"><span class="comment">    mHandlerComands.post(new Runnable() {</span></span><br><span class="line"><span class="comment">        @Override</span></span><br><span class="line"><span class="comment">	public void run() {</span></span><br><span class="line"><span class="comment">	    Log.d(TAG, "AAA");</span></span><br><span class="line"><span class="comment">	    Log.d(TAG, "System.currentTimeMillis() = " + System.currentTimeMillis());</span></span><br><span class="line"><span class="comment">	    showRGBValue(cTyte, r_value, g_value, b_value);</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">    });</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">GetSys().SetValueInt(<span class="string">"Misc_PRE_SAVE_TEMP_VALUE"</span>, getcommand[<span class="number">2</span>]&amp;<span class="number">0xFF</span>); <span class="comment">//æ•°æ®å­˜å‚¨</span></span><br></pre></td></tr></tbody></table></figure>

<p>èœå•åˆ·æ–°å°±å¾ˆåŠæ—¶ï¼Œä¸ºä»€ä¹ˆï¼Ÿ<br>æ­£å¸¸æ¥è¯´ï¼Œè€—æ—¶æ“ä½œåº”è¯¥æ”¾åœ¨å­çº¿ç¨‹ï¼Œæ‰€ä»¥è¦æŒ‰ç…§å†™æ³•2å†™ä»£ç ã€‚<br>ä½†æ˜¯å¦‚æœæŒ‰ç…§å†™æ³•1çš„è¯ï¼Œä¸ºä»€ä¹ˆèœå•åˆ·æ–°å˜æ…¢äº†ï¼Ÿçœ‹æ‰“å°æ˜¯å…ˆæ‰“å°AAAï¼Œå†æ‰“å°BBBï¼Œåˆ·æ–°èœå•çš„æ“ä½œæ²¡æœ‰è¢«å­˜å‚¨æ•°æ®çš„æ“ä½œé˜»å¡ï¼Œé‚£ä¹ˆå®ƒæ˜¯å µåœ¨å“ªï¼Ÿä¸æ‡‚å•Šã€‚  </p>
<p>é¡ºä¾¿ä¸€æï¼Œæ— è®ºæ˜¯å†™æ³•1è¿˜æ˜¯å†™æ³•2ï¼ŒSystem.currentTimeMillis()æ—¶é—´å·®éƒ½æ˜¯25å·¦å³ã€‚  </p>
<p>å†ä¿®æ”¹ä¸‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å†™æ³•3</span></span><br><span class="line">saveChangHongColorTemp(getcommand[<span class="number">2</span>]); <span class="comment">//åˆ·æ–°èœå•</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆ·æ–°èœå•çš„å®ç°å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">    showRGBValue(cTyte, r_value, g_value, b_value);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">mHandler.post(<span class="keyword">new</span> Runnable() {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        GetSys().SetValueInt(<span class="string">"Misc_PRE_SAVE_TEMP_VALUE"</span>, getcommand[<span class="number">2</span>]&amp;<span class="number">0xFF</span>); <span class="comment">//æ•°æ®å­˜å‚¨</span></span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·ï¼Œèœå•åˆ·æ–°è·Ÿå†™æ³•2ä¸€æ ·å¿«ã€‚ä½†æ˜¯é£é™©ç‚¹åœ¨äºå­çº¿ç¨‹åˆ·æ–°UIï¼Œä»¥åŠæŠŠè€—æ—¶æ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ã€‚  </p>
<p>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šåˆ·æ–°èœå•å’Œå­˜å‚¨æ•°æ®ä¸åœ¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œèœå•å°±èƒ½æ­£å¸¸åˆ·æ–°ã€‚èœå•åˆ·æ–°åœ¨ä¸»çº¿ç¨‹ï¼Œæ•°æ®å­˜å‚¨åœ¨å­çº¿ç¨‹ï¼Œæ‰€ä»¥å†™æ³•2è¾ƒä¸ºæ›´ä¸ºåˆç†ã€‚  </p>
<p>é—®é¢˜åœ¨äºï¼Œå†™æ³•1æ˜¯æ€ä¹ˆé˜»å¡çš„ï¼Ÿå¯èƒ½è¦äº†è§£ä¸€ä¸‹handleråŸç†ï¼Ÿ  </p>
<h4 id="rocket"><a href="#rocket" class="headerlink" title=":rocket:"></a><span class="github-emoji"><span>ğŸš€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯å­çº¿ç¨‹ï¼š  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMainThread</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> Thread.currentThread().getId()) == Looper.getMainLooper().getThread().getId();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>thread</tag>
        <tag>ui</tag>
      </tags>
  </entry>
  <entry>
    <title>å®šä¹‰æ–°çš„Property</title>
    <url>/2020/11/19/customize-property/</url>
    <content><![CDATA[<p>è‡ªå®šä¹‰æ–°å±æ€§ã€‚<dd23>  </dd23></p>
<span id="more"></span>


<p><span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><br>å¸Œæœ›æ–°å¢è‡ªå®šä¹‰çš„å±æ€§ï¼Œå•çº¯ä½¿ç”¨  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">android.os.SystemProperties.set(<span class="string">"json.smarttv.config.order.backlight.home"</span>,<span class="string">"80"</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>ä¼šæŠ¥é”™ï¼š  </p>
<blockquote>
<p>libc    : Unable to set property â€œjson.smarttv.config.order.backlight.homeâ€ to â€œ80â€: error code: 0x18  </p>
</blockquote>
<p>éœ€è¦åœ¨device/realtek/common/sepolicy/property_contextså®šä¹‰è‡ªå·±çš„å±æ€§  </p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">json. </span>                          u:object_r:<span class="keyword">json_prop:s0 </span> </span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨device/realtek/common/sepolicy/property.teå®šä¹‰æ–°å¢åŠ çš„json_propåŸŸ  </p>
<figure class="highlight ada"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="type">json_prop, </span>property_type;  </span><br></pre></td></tr></tbody></table></figure>

<p>é‡æ–°ç¼–è¯‘è¿è¡Œï¼Œå¯èƒ½è¿˜ä¼šæœ‰é”™ã€‚<br>å¯èƒ½è¿˜éœ€è¦è¡¥å……æƒé™ï¼Œæ¯”å¦‚ï¼š<br>ä¿®æ”¹device/realtek/common/sepolicy/hal_smarttv_default.teï¼š  </p>
<figure class="highlight reasonml"><table><tbody><tr><td class="code"><pre><span class="line">set<span class="constructor">_prop(<span class="params">hal_smarttv_default</span>, <span class="params">json_prop</span>)</span>;  </span><br><span class="line">get<span class="constructor">_prop(<span class="params">hal_smarttv_default</span>, <span class="params">json_prop</span>)</span>;  </span><br></pre></td></tr></tbody></table></figure>
<p>ä¿®æ”¹device/realtek/common/sepolicy/system_app.teï¼š  </p>
<figure class="highlight arduino"><table><tbody><tr><td class="code"><pre><span class="line">allow system_app json_prop:file { read open getattr map };  </span><br></pre></td></tr></tbody></table></figure>

<p>[å‚è€ƒ]<br><a href="https://www.itread01.com/content/1546437184.html">system.propæ–°å¢è‡ªå·±çš„æ¬„ä½</a><br><a href="https://my.oschina.net/u/4339087/blog/3306403">Android coredomain å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰çš„ property typeï¼Ÿ</a>  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>property</tag>
      </tags>
  </entry>
  <entry>
    <title>Android10 super.imgè§£åŒ…æ–¹æ³•</title>
    <url>/2020/11/19/extract-super-img/</url>
    <content><![CDATA[<p>å¦‚é¢˜ã€‚  </p>
<span id="more"></span>


<p>å¯¹äºsuper.imgï¼Œè¿™ä»½Android10çš„ä»£ç æä¾›äº†system/extras/partition_toolså·¥å…·ï¼Œmmm system/extras/partition_toolsä¼šåœ¨out/host/linux-x86/binç›®å½•ï¼ˆå…¨ç¼–ä»£ç åï¼Œout/host/linux-x86/bin/ç›®å½•ä¸‹çš„å·¥å…·åŸºæœ¬é½å…¨äº†ã€‚ç™»å½•ç»ˆç«¯åï¼Œè¿›androidä»£ç æ ¹ç›®å½•æ‰§è¡Œsource build/envsetup.sh;lunchåï¼Œlpunpackè¿™äº›å‘½ä»¤éƒ½å¯ä»¥ç›´æ¥åƒç³»ç»Ÿå‘½ä»¤è·‘ äº†ï¼Œä¸ç”¨åŠ è·¯å¾„ï¼‰ç”Ÿæˆlpdumpã€lpflashã€lpmakeã€lpunpackæ–‡ä»¶ã€‚å…¶ä¸­ï¼š  </p>
<ul>
<li>lpdump displays pretty-printed partition metadata.  </li>
<li>lpflash writes a non-sparse image from lpmake to a block device.   </li>
<li>lpmake is a command-line tool for generating a â€œsuperâ€ partition image.  </li>
<li>lpunpack is a command-line tool for extracting partition images from super.  </li>
</ul>
<p>ç›´æ¥è§£ç¼–è¯‘å‡ºæ¥çš„super.imgåŒ…çœ‹çœ‹ï¼š<br>æ‰§è¡Œå‘½ä»¤ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ lpunpack super.img  </span><br></pre></td></tr></tbody></table></figure>
<p>å¾—åˆ°  </p>
<blockquote>
<p>lpunpack E 11-19 17:09:36 233504 233504 reader.cpp:77] [liblp]Logical partition metadata has invalid geometry magic signature.<br>lpunpack E 11-19 17:09:36 233504 233504 reader.cpp:77] [liblp]Logical partition metadata has invalid geometry magic signature.<br>This image appears to be a sparse image. It must be unsparsed to be unpacked.  </p>
</blockquote>
<p>è§£åŒ…å¤±è´¥ï¼Œéœ€è¦å°†super.imgè½¬æ¢æˆunsparsedæ ¼å¼ã€‚  </p>
<p>Androidæä¾›äº†system/core/libsparseå·¥å…·ï¼Œmmm system/core/libsparseå¯åœ¨out/host/linux-x86/binç›®å½•å¾—åˆ°simg2imgæ–‡ä»¶ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å°†sparseæ ¼å¼è½¬æ¢æˆunsparsedæ ¼å¼ã€‚  </p>
<p>å…ˆè½¬æ¢æ ¼å¼ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ simg2img super.img super.raw.img  </span><br></pre></td></tr></tbody></table></figure>

<p>å†è§£åŒ…ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ lpunpack super.raw.img  </span><br></pre></td></tr></tbody></table></figure>

<p>å¾—åˆ°odm.imgã€product.imgã€system.imgã€vendor.imgè¿™4ä¸ªæ–‡ä»¶ã€‚  </p>
<p>é¡ºä¾¿ç”¨lpdumpå·¥å…·dumpä¸€ä¸‹unsparsedæ ¼å¼çš„super.imgï¼Œæ‰§è¡Œå‘½ä»¤ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ lpdump super.raw.img  </span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥å¾—åˆ°ï¼š  </p>
<blockquote>
<p>Metadata version: 10.0<br>Metadata size: 592 bytes<br>Metadata max size: 65536 bytes<br>Metadata slot count: 2<br>Partition table:  </p>
<hr>
<p>  Name: system<br>  Group: realtek_dynamic_partitions<br>  Attributes: readonly<br>  Extents:<br>    0 .. 1734399 linear super 2048  </p>
<hr>
<p>  Name: vendor<br>  Group: realtek_dynamic_partitions<br>  Attributes: readonly<br>  Extents:<br>    0 .. 496975 linear super 1736704  </p>
<hr>
<p>  Name: product<br>  Group: realtek_dynamic_partitions<br>  Attributes: readonly<br>  Extents:<br>    0 .. 664919 linear super 2234368  </p>
<hr>
<p>  Name: odm<br>  Group: realtek_dynamic_partitions<br>  Attributes: readonly<br>  Extents:<br>    0 .. 1295 linear super 2899968  </p>
<hr>
<h2 id="Block-device-table"><a href="#Block-device-table" class="headerlink" title="Block device table:  "></a>Block device table:  </h2><p>  Partition name: super<br>  First sector: 2048<br>  Size: 2147483648 bytes<br>  Flags: none  </p>
<hr>
<h2 id="Group-table"><a href="#Group-table" class="headerlink" title="Group table:  "></a>Group table:  </h2><p>  Name: default<br>  Maximum size: 0 bytes<br>  Flags: none  </p>
<hr>
<p>  Name: realtek_dynamic_partitions<br>  Maximum size: 2147483648 bytes<br>  Flags: none  </p>
<hr>
</blockquote>
<p>ç¡®å®æ˜¯æœ‰è¿™4ä¸ªåˆ†åŒºã€‚  </p>
<p>çœ‹ä¸‹æ–‡ä»¶å±æ€§ï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ file *  </span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>odm.img:       Linux rev 1.0 ext2 filesystem data, UUID=e1cf857c-334d-40cb-aa89-7634b14a39a2, volume name â€œodmâ€ (extents) (large files) (huge files)<br>product.img:   Linux rev 1.0 ext2 filesystem data, UUID=9e1933ad-3f1b-4441-a314-f95987dc6c29, volume name â€œproductâ€ (extents) (large files) (huge files)<br>super.img:     data<br>super.raw.img: data<br>system.img:    Linux rev 1.0 ext2 filesystem data, UUID=3dab5a90-e84d-4e0c-a1e1-cc8779c3e0b2 (extents) (large files) (huge files)<br>vendor.img:    Linux rev 1.0 ext2 filesystem data, UUID=830ef149-3c4e-4455-ad55-f80faad5c8e1, volume name â€œvendorâ€ (extents) (large files) (huge files)  </p>
</blockquote>
<p>å¦‚æœæŸ¥çœ‹å„ä¸ªåˆ†åŒºçš„æ–‡ä»¶ï¼Ÿ<br>Linux rev 1.0 ext2 filesystem data è¿™ä¸ªç±»å‹çš„æ–‡ä»¶å¯ä»¥ç›´æ¥mountï¼š  </p>
<figure class="highlight console"><table><tbody><tr><td class="code"><pre><span class="line">foo@bar:~$ mkdir vendor_partition; mount vendor.img vendor_partition  </span><br></pre></td></tr></tbody></table></figure>

<p>æˆ–è€…åœ¨Windowså¹³å°ç”¨7zipå·¥å…·ç›´æ¥æ‰“å¼€ï¼ˆå³é”®-&gt;7-Zip-&gt;æ‰“å¼€å‹ç¼©åŒ…ï¼‰ã€‚  </p>
<p>è‡³æ­¤ï¼Œç®—æ˜¯è§£åŒ…å®Œæˆäº†ã€‚  </p>
<p>æœ€åè´´ä¸€ä¸ªçº¯Windowså¹³å°çš„æ•™ç¨‹ï¼š  </p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/J5cQdzivtXk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>  

]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>image</tag>
      </tags>
  </entry>
  <entry>
    <title>jqä½¿ç”¨</title>
    <url>/2021/05/31/jq/</url>
    <content><![CDATA[<p>ä½¿ç”¨<code>json</code>åšå®¢åˆ¶åŒ–é…ç½®ï¼Œä¸€å¼€å§‹æ¯ä»½å®¢åˆ¶åŒ–ç”¨ä¸€ä»½<code>json</code>é…ç½®ï¼Œç›´æ¥ç”¨å¤åˆ¶æ›¿æ¢çš„æ–¹å¼åˆ‡æ¢ï¼Œè™½ç„¶ä¸é«˜æ˜ä½†æ˜¯å¾ˆå®ç”¨ã€‚åæ¥é¢†å¯¼çš„è¦æ±‚è¶Šæ¥è¶ŠèŠ±å“¨ï¼Œå¤§è‡´éœ€è¦å…ˆå»è§£æ<code>json</code>çš„å†…å®¹ï¼Œç„¶åå†å»å®¢åˆ¶åŒ–ï¼Œè¿™é‡Œè®°å½•è¿‡ç¨‹ä¸­ç”¨åˆ°çš„<code>jq</code>æ“ä½œï¼Œæ–¹ä¾¿ä»¥åæœ‰ç±»ä¼¼éœ€æ±‚æ—¶ç›´æ¥å‚è€ƒã€‚<br>å®˜æ–¹æ–‡æ¡£åœ¨<a href="https://stedolan.github.io/jq/manual/">è¿™é‡Œ</a>  ï¼Œè™½ç„¶æ˜¯è‹±æ–‡ï¼Œä½†æ˜¯è¿˜ç®—æ–¹ä¾¿ï¼Œè™½è¯´ä¸ä¸€å®šçœ‹æ‡‚ã€‚</p>
<span id="more"></span>


<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ul>
<li><p>è¾ƒç®€å•ä½¿ç”¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat built.json | jq <span class="comment"># ä¸ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œåˆ™åŸæ ·è¾“å‡º</span></span><br><span class="line">$ cat built.json | jq <span class="string">'.'</span> <span class="comment"># ä½¿ç”¨ . è¿‡æ»¤å™¨è·å– key çš„å€¼ï¼Œè¿™é‡ŒåŸæ ·è¾“å‡º</span></span><br><span class="line">$ jq <span class="string">'.'</span> built.json <span class="comment"># ä½¿ç”¨ . è¿‡æ»¤å™¨è·å– key çš„å€¼ï¼Œè¿™é‡ŒåŸå‚è¾“å‡º</span></span><br><span class="line">$ jq <span class="string">'.config.built'</span> built.json <span class="comment"># ä½¿ç”¨ . è¿‡æ»¤å™¨è·å– key çš„å€¼</span></span><br><span class="line">$ jq <span class="string">'.config.built.fw_builtdate | tonumber'</span> built.json <span class="comment"># å°†æ ¼å¼æ­£ç¡®çš„å­—ç¬¦ä¸²è½¬æ¢æˆå¯¹åº”çš„æ•°å­—</span></span><br><span class="line">$ jq -c <span class="string">'.'</span> built.json <span class="comment"># å°†jsonåœ¨ä¸€è¡Œè¾“å‡º</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç®€å•ä½¿ç”¨</p>
<ul>
<li><p><code>--slurp/-s</code>å‚æ•°</p>
<blockquote>
<p>Instead of running the filter for each JSON object in the input, read the entire input stream into a large array and run the filter just once.</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ jq -s <span class="string">'.[0] * .[1]'</span> built.json irmap.json <span class="comment"># å°†ä¸¤ä»½jsonåˆå¹¶</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>--argjson</code>å‚æ•°</p>
<p>å°†ä¸€ä¸ª<code>json</code>å¯¹è±¡ç»™å˜é‡èµ‹å€¼ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">SMARTTVJSON=smarttv/smarttv.json</span><br><span class="line">jq -n --argjson order <span class="string">"<span class="subst">$(&lt;<span class="string">"<span class="variable">${SMARTTVJSON}</span>"</span>)</span>"</span> <span class="string">'{"smarttv":null} | .smarttv = $order'</span> &gt; smarttv.json</span><br></pre></td></tr></tbody></table></figure>

<p>å°†smarttv.jsonçš„å†…å®¹ï¼Œè½¬æ¢æˆ<code>json</code>å¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ª<code>json</code>å¯¹è±¡ï¼Œèµ‹ç»™å˜é‡orderï¼›</p>
<p>è¿‡æ»¤å™¨æ·»åŠ ä¸€ä¸ªsmarttvçš„ç©ºkeyï¼Œæ¥ç€æŠŠå˜é‡orderçš„å€¼ç»™åˆ°smarttvè¿™ä¸ªkeyï¼›</p>
<p>æœ€åæŠŠå¤„ç†åçš„æ•°æ®é‡å®šå‘åˆ°ä¸€ä¸ª<code>json</code>æ–‡ä»¶ã€‚</p>
</li>
<li><p><code>--slurpfile</code>å‚æ•°</p>
<p>å°†ä¸€ä¸ª<code>json</code>æ–‡ä»¶ç»™å˜é‡èµ‹å€¼ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">COMMON_JSON=public/public.json</span><br><span class="line">ORDER_JSON=order/order.json</span><br><span class="line">jq --slurpfile public <span class="variable">${COMMON_JSON}</span> <span class="string">'paths(scalars) as $order | $public[] | getpath($order)'</span> <span class="variable">${ORDER_JSON}</span></span><br></pre></td></tr></tbody></table></figure>

<p>å°†public.jsonæ–‡ä»¶ï¼Œèµ‹ç»™å˜é‡publicï¼›</p>
<p>è¿‡æ»¤å™¨ï¼Œå°†order.jsonæ–‡ä»¶çš„énullï¼ˆè¿™ä¸ªä¸å¤ªç†è§£ï¼Œåªæ˜¯åˆšå¥½åŠŸèƒ½OKï¼‰çš„keyçš„è·¯å¾„èµ‹ç»™orderå˜é‡ï¼Œç„¶åæ‹¿åˆ°public.jsonå¯¹åº”çš„è¿™äº›è·¯å¾„çš„keyçš„å€¼ï¼ˆå¦‚æœæ˜¯nullï¼Œè¯´æ˜public.jsonæ²¡æœ‰è¿™ä¸ªkeyï¼‰ã€‚</p>
<p>è¿‡æ»¤å™¨è¿™æ ·è®¾è®¡ï¼Œæ˜¯è¦æ‰¾å‡ºorder.jsoné‡Œæ¯”public.jsonå¤šçš„æœ‰æ•ˆå€¼ï¼ˆè¿™ä¸ªkeyçš„å€¼ä¸æ˜¯nullï¼‰ã€‚</p>
<p><code>paths(scalars)</code>åœ¨<code>builtin.jq</code>é‡Œçš„å®šä¹‰ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">def scalars: select(<span class="built_in">type</span>|. != <span class="string">"array"</span> and . != <span class="string">"object"</span>);</span><br><span class="line">def paths(node_filter): . as <span class="variable">$dot</span>|paths|select(. as <span class="variable">$p</span>|<span class="variable">$dot</span>|getpath(<span class="variable">$p</span>)|node_filter);</span><br><span class="line">def leaf_paths: paths(scalars);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>-f</code>å‚æ•°</p>
<p>ä»æ–‡ä»¶ä¸­è¯»å–è¿‡æ»¤å™¨ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">jq -f mergeorder.jq -s public.json order.json &gt; order.json</span><br></pre></td></tr></tbody></table></figure>

<p>è¿‡æ»¤å™¨mergeorder.jqå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">def mergeorder(a;b):</span><br><span class="line">    reduce b[] as <span class="variable">$item</span> (a;</span><br><span class="line">        reduce (<span class="variable">$item</span> | keys_unsorted[]) as <span class="variable">$key</span> (.;</span><br><span class="line">            <span class="variable">$item</span>[<span class="variable">$key</span>] as <span class="variable">$val</span> | (<span class="variable">$val</span> | <span class="built_in">type</span>) as <span class="variable">$type</span> | .[<span class="variable">$key</span>] = <span class="keyword">if</span> (<span class="variable">$type</span> == <span class="string">"object"</span>) <span class="keyword">then</span></span><br><span class="line">            mergeorder({}; [<span class="keyword">if</span> .[<span class="variable">$key</span>] == null <span class="keyword">then</span> {} <span class="keyword">else</span> .[<span class="variable">$key</span>] end, <span class="variable">$val</span>])</span><br><span class="line">            <span class="keyword">elif</span> (<span class="variable">$type</span> == <span class="string">"null"</span>) <span class="keyword">then</span></span><br><span class="line">            .[<span class="variable">$key</span>]</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            <span class="variable">$val</span></span><br><span class="line">            end)</span><br><span class="line">        );</span><br><span class="line">    mergeorder({}; .)</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://cloud.tencent.com/developer/ask/40577">å¦‚ä½•ä½¿ç”¨JQåˆå¹¶2ä¸ª JSONæ–‡ä»¶ï¼Ÿ</a></p>
<p><a href="https://stackoverflow.com/questions/66024299/how-to-merge-two-json-files-using-jq-or-any-tool">How to merge two JSON files using jq or any tool?</a></p>
<p><a href="https://stackoverflow.com/questions/19529688/how-to-merge-2-json-objects-from-2-files-using-jq">How to merge 2 JSON objects from 2 files using jq?</a></p>
<p><a href="https://justcode.ikeepstudying.com/2018/02/shell%EF%BC%9A%E6%97%A0%E6%AF%94%E5%BC%BA%E5%A4%A7%E7%9A%84shell%E4%B9%8Bjson%E8%A7%A3%E6%9E%90%E5%B7%A5%E5%85%B7jq-linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%A7%A3%E6%9E%90json-jq%E8%A7%A3%E6%9E%90-json/">Shellï¼šæ— æ¯”å¼ºå¤§çš„shellä¹‹jsonè§£æå·¥å…·jq , Linuxå‘½ä»¤è¡Œè§£æjson, jqè§£æ json å®ä¾‹</a></p>
<p><a href="https://www.cnblogs.com/kevingrace/p/7565371.html">JSONæ ¼å¼åŒ–è¾“å‡ºå’Œè§£æå·¥å…· - jq</a></p>
<p><a href="https://e.printstacktrace.blog/merging-json-files-recursively-in-the-command-line/">Merging JSON files recursively in the command-line</a></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uIKvYgix-L4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe> 

]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>json</tag>
        <tag>jq</tag>
      </tags>
  </entry>
  <entry>
    <title>Java</title>
    <url>/2019/08/10/java/</url>
    <content><![CDATA[<p><span class="github-emoji"><span>ğŸ’©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a9.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<span id="more"></span>


<h2 id="åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„"><a href="#åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„" class="headerlink" title="åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„"></a>åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„</h2><ul>
<li>å˜é‡ï¼š<br>  Javaè¯­è¨€æ”¯æŒçš„å˜é‡ç±»å‹æœ‰ï¼š  <pre><code>  1. ç±»å˜é‡ï¼šç‹¬ç«‹äºæ–¹æ³•ä¹‹å¤–çš„å˜é‡ï¼Œç”¨staticä¿®é¥°  
  2. å®ä¾‹å˜é‡ï¼šç‹¬ç«‹äºæ–¹æ³•ä¹‹å¤–çš„å˜é‡ï¼Œä¸è¿‡æ²¡æœ‰staticä¿®é¥°  
  3. å±€éƒ¨å˜é‡ï¼šç±»çš„æ–¹æ³•ä¸­çš„å˜é‡  
</code></pre>
  å®ä¾‹ï¼š    <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Variable</span> </span>{</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> allClicks = <span class="number">0</span>; <span class="comment">//ç±»å˜é‡</span></span><br><span class="line">	String str = <span class="string">"hello world"</span>; <span class="comment">//å®ä¾‹å˜é‡</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>; <span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h2><ul>
<li><p>Javaä¸­çš„å—ä¿æŠ¤éƒ¨åˆ†å¯¹äºæ‰€æœ‰å­ç±»åŠåŒä¸€ä¸ªåŒ…ä¸­çš„æ‰€æœ‰å…¶ä»–ç±»éƒ½å¯è§ã€‚  </p>
</li>
<li><p>protectedéœ€è¦ä»ä»¥ä¸‹ä¸¤ä¸ªç‚¹æ¥åˆ†æè¯´æ˜ï¼š</p>
<ol>
<li>å­ç±»ä¸åŸºç±»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼šè¢«å£°æ˜ä¸ºprotectedçš„å˜é‡ã€æ–¹æ³•å’Œæ„é€ å™¨èƒ½è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„ä»»ä½•å…¶ä»–ç±»è®¿é—®ï¼›  </li>
<li>å­ç±»ä¸åŸºç±»ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼šé‚£ä¹ˆåœ¨å­ç±»ä¸­ï¼Œå­ç±»å®ä¾‹å¯ä»¥è®¿é—®å…¶ä»åŸºç±»ç»§æ‰¿è€Œæ¥çš„protectedæ–¹æ³•ï¼Œè€Œä¸èƒ½è®¿é—®åŸºç±»å®ä¾‹çš„protectedæ–¹æ³•ã€‚  </li>
</ol>
</li>
<li><p>final  </p>
<ul>
<li>åœ¨Javaä¸­ï¼Œç”¨å…³é”®å­—finalæŒ‡ç¤ºå¸¸é‡ã€‚  </li>
<li>å…³é”®å­—finalè¡¨ç¤ºè¿™ä¸ªå˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚ä¸€æ—¦è¢«èµ‹å€¼ä¹‹åï¼Œå°±ä¸èƒ½å¤Ÿå†æ›´æ”¹äº†ã€‚ä¹ æƒ¯ä¸Šï¼Œå¸¸é‡åä½¿ç”¨å…¨å¤§å†™ã€‚  </li>
<li>åœ¨Javaä¸­ï¼Œç»å¸¸å¸Œæœ›æŸä¸ªå˜é‡å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­çš„å¤šä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œé€šå¸¸å°†è¿™äº›å¸¸é‡ç§°ä¸ºç±»å¸¸é‡ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—static finalè®¾ç½®ä¸€ä¸ªç±»å¸¸é‡ã€‚  </li>
<li>finalå…³é”®å­—å£°æ˜ç±»å¯ä»¥æŠŠç±»å®šä¹‰ä¸ºä¸èƒ½ç»§æ‰¿çš„ï¼Œå³æœ€ç»ˆç±»ï¼›æˆ–è€…ç”¨äºä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚ï¼ˆæ³¨ï¼šå®ä¾‹å˜é‡ä¹Ÿå¯ä»¥è¢«å®šä¹‰ä¸ºfinalï¼Œè¢«å®šä¹‰ä¸ºfinalçš„å˜é‡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¢«å£°æ˜ä¸ºfinalç±»çš„æ–¹æ³•è‡ªåŠ¨å¾—å£°æ˜ä¸ºfinalï¼Œä½†æ˜¯å®ä¾‹å˜é‡å¹¶ä¸æ˜¯finalï¼ˆå¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸ºfinalï¼Œåªæœ‰å…¶ä¸­çš„æ–¹æ³•è‡ªåŠ¨åœ°æˆä¸ºfinalï¼Œè€Œä¸åŒ…æ‹¬åŸŸï¼‰ï¼‰</li>
</ul>
</li>
<li><p>æ„å»ºå­—ç¬¦ä¸²ï¼šStringBuilder  </p>
<ol>
<li>æ„å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²æ„å»ºå™¨:   <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br></pre></td></tr></tbody></table></figure></li>
<li>å½“æ¯æ¬¡éœ€è¦æ·»åŠ ä¸€éƒ¨åˆ†å†…å®¹æ—¶ï¼Œå°±è°ƒç”¨append()æ–¹æ³•:   <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">builder.append(ch); <span class="comment">//appends a single character</span></span><br><span class="line">builder.append(str); <span class="comment">//appends a string</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>åœ¨éœ€è¦æ„å»ºå­—ç¬¦ä¸²æ—¶å°±è°ƒç”¨toString()æ–¹æ³•ï¼Œå°†å¯ä»¥å¾—åˆ°ä¸€ä¸ªStringå¯¹è±¡ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ„å»ºå™¨ä¸­çš„å­—ç¬¦åºåˆ—:   <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">String completedString = builder.toString();</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
<li><p>ä¸€æ—¦åˆ›å»ºäº†æ•°ç»„ï¼Œå°±ä¸èƒ½æ”¹å˜å®ƒçš„å¤§å°ï¼ˆå°½ç®¡å¯ä»¥æ”¹å˜æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ ï¼‰ã€‚å¦‚æœç»å¸¸éœ€è¦åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰©å±•æ•°ç»„çš„å¤§å°ï¼Œå°±åº”è¯¥ä½¿ç”¨å¦ä¸€ç§æ•°æ®ç»“æ„ -- æ•°ç»„åˆ—è¡¨ã€‚  </p>
</li>
<li><p>åˆå§‹åŒ–æ•°æ®åŸŸçš„æ–¹æ³•ï¼š  </p>
<ol>
<li>åœ¨æ„é€ å™¨ä¸­è®¾ç½®å€¼  </li>
<li>åœ¨å£°æ˜ä¸­èµ‹å€¼  </li>
<li>åˆå§‹åŒ–å—ï¼ˆé¦–å…ˆè¿è¡Œåˆå§‹åŒ–å—ï¼Œç„¶åæ‰è¿è¡Œæ„é€ å™¨çš„ä¸»ä½“éƒ¨åˆ†ï¼Œè¿™ç§æœºåˆ¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä¹Ÿä¸å¸¸è§ï¼Œé€šå¸¸ï¼Œç›´æ¥å°†åˆå§‹åŒ–ä»£ç æ”¾åœ¨æ„é€ å™¨ä¸­ï¼‰</li>
</ol>
</li>
<li><p>åœ¨å¯¹è±¡ä¸å¯¹è±¡å˜é‡ä¹‹é—´å­˜åœ¨ç€ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¾‹å¦‚ï¼Œè¯­å¥ Date deadlineï¼›<br>  å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å˜é‡deadlineï¼Œå®ƒå¯ä»¥å¼•ç”¨Dateç±»å‹çš„å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œä¸€å®šè¦è®¤è¯†åˆ°ï¼šå˜é‡deadlineä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®é™…ä¸Šä¹Ÿæ²¡æœ‰å¼•ç”¨å¯¹è±¡ã€‚æ­¤æ—¶ï¼Œä¸èƒ½å°†ä»»ä½•Dateæ–¹æ³•åº”ç”¨äºè¿™ä¸ªå˜é‡ä¸Šã€‚è¯­å¥ s = deadline.toString(); å°†äº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚å¿…é¡»é¦–å…ˆåˆå§‹åŒ–å˜é‡deadlineï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œå¯ä»¥ç”¨æ–°æ„é€ çš„å¯¹è±¡åˆå§‹åŒ–è¿™ä¸ªå˜é‡ï¼šdeadline = new Date(); ä¹Ÿå¯ä»¥è®©è¿™ä¸ªå˜é‡å¼•ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ï¼šdeadline = birthdayï¼›  </p>
</li>
<li><p>ä¸€å®šè¦è®¤è¯†åˆ°ï¼šä¸€ä¸ªå¯¹è±¡å˜é‡å¹¶æ²¡æœ‰å®é™…åŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»…ä»…æ˜¯å¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨Javaä¸­ï¼Œä»»ä½•å¯¹è±¡å˜é‡çš„å€¼éƒ½æ˜¯å¯¹å­˜å‚¨åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹çš„ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚newæ“ä½œç¬¦çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨ã€‚  </p>
</li>
<li><p>å¯ä»¥æ˜¾å¼åœ°å°†å¯¹è±¡å˜é‡è®¾ç½®ä¸ºnullï¼Œè¡¨æ˜è¿™ä¸ªå¯¹è±¡å˜é‡ç›®å‰æ²¡æœ‰å¼•ç”¨ä»»ä½•å¯¹è±¡ã€‚deadline = nullï¼›  </p>
</li>
<li><p>å±€éƒ¨å˜é‡ä¸ä¼šè‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸ºnullï¼Œè€Œå¿…é¡»é€šè¿‡è°ƒç”¨newæˆ–å°†ä»–ä»¬è®¾ç½®ä¸ºnullè¿›è¡Œåˆå§‹åŒ–ã€‚  </p>
</li>
<li><p>æ‰€æœ‰çš„Javaå¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­ã€‚  </p>
</li>
<li><p>åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå…¬æœ‰ç±»ï¼Œä½†å¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„éå…¬æœ‰ç±»ã€‚  </p>
</li>
<li><p>æ„é€ å™¨æ€»æ˜¯ä¼´éšç€newæ“ä½œç¬¦çš„æ‰§è¡Œè¢«è°ƒç”¨ï¼Œè€Œä¸èƒ½å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡è°ƒç”¨æ„é€ å™¨æ¥è¾¾åˆ°é‡æ–°è®¾ç½®å®ä¾‹åŸŸçš„ç›®çš„ã€‚  </p>
</li>
<li><p>æ³¨æ„ä¸è¦ç¼–å†™è¿”å›å¼•ç”¨å¯å˜å¯¹è±¡çš„è®¿é—®å™¨æ–¹æ³•ã€‚å¦‚æœéœ€è¦è¿”å›ä¸€ä¸ªå¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œåº”è¯¥é¦–å…ˆå¯¹å®ƒè¿›è¡Œå…‹éš†ï¼ˆcloneï¼‰ã€‚å¦‚æœéœ€è¦è¿”å›ä¸€ä¸ªå¯å˜æ•°æ®åŸŸçš„æ‹·è´ï¼Œå°±åº”è¯¥ä½¿ç”¨cloneã€‚å¯¹è±¡çš„å…‹éš†æ˜¯æŒ‡å­˜æ”¾åœ¨å¦ä¸€ä¸ªä½ç½®ä¸Šçš„å¯¹è±¡å‰¯æœ¬ã€‚ä¿®æ”¹å‰çš„ä»£ç ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> Date hireDay;</span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Date <span class="title">getHireDay</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> hireDay;</span><br><span class="line">	}</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¿®æ”¹åçš„ä»£ç ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>{</span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Date <span class="title">getHireDay</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> hireDay.clone();</span><br><span class="line">	}</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>staticæ¸¸ç¦»å—ã€ä¸€èˆ¬æ¸¸ç¦»å—ã€å­çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œæ‰§è¡Œé¡ºåºï¼šçˆ¶ç±»é™æ€æ¸¸ç¦»å— &gt; å­ç±»é™æ€æ¸¸ç¦»å— &gt; çˆ¶ç±»æ¸¸ç¦»å— &gt; çˆ¶ç±»æ„é€ å‡½æ•° &gt; å­ç±»æ¸¸ç¦»å— &gt; å­ç±»æ„é€ å‡½æ•°  </p>
</li>
<li><p>å—ä½œç”¨åŸŸï¼šä¸èƒ½åœ¨åµŒå¥—çš„ä¸¤ä¸ªå—ä¸­å£°æ˜åŒåçš„å˜é‡ã€‚ä½†æ˜¯åœ¨C++ä¸­ï¼Œå¯ä»¥åœ¨åµŒå¥—çš„å—ä¸­é‡å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œåœ¨å†…å±‚å®šä¹‰çš„å˜é‡ä¼šè¦†ç›–åœ¨å¤–å±‚å®šä¹‰çš„å˜é‡ã€‚  </p>
</li>
<li><p>ä¸€ä¸ªæ–¹æ³•å¯ä»¥è®¿é—®æ‰€å±ç±»çš„æ‰€æœ‰å¯¹è±¡çš„ç§æœ‰æ•°æ®ã€‚  </p>
</li>
</ul>
<h3 id="é™æ€åŸŸå’Œé™æ€æ–¹æ³•"><a href="#é™æ€åŸŸå’Œé™æ€æ–¹æ³•" class="headerlink" title="é™æ€åŸŸå’Œé™æ€æ–¹æ³•"></a>é™æ€åŸŸå’Œé™æ€æ–¹æ³•</h3><ul>
<li><p>é™æ€åŸŸï¼š<br>  å¦‚æœå°†åŸŸå®šä¹‰ä¸ºstaticï¼Œæ¯ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªè¿™æ ·çš„åŸŸï¼Œè€Œæ¯ä¸€ä¸ªå¯¹è±¡å¯¹äºæ‰€æœ‰çš„å®ä¾‹åŸŸå´éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½æ‹·è´ã€‚ä¾‹å¦‚ï¼Œå‡å®šéœ€è¦ç»™æ¯ä¸€ä¸ªé›‡å‘˜èµ‹äºˆå”¯ä¸€çš„æ ‡è¯†ç ã€‚è¿™é‡Œç»™Employeeç±»æ·»åŠ ä¸€ä¸ªå®ä¾‹åŸŸidå’Œä¸€ä¸ªé™æ€åŸŸnextIdï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> nextId = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  ç°åœ¨ï¼Œæ¯ä¸€ä¸ªé›‡å‘˜å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„idåŸŸï¼Œä½†è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å°†å…±äº«ä¸€ä¸ªnextIdåŸŸã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæœ‰1000ä¸ªEmployeeç±»çš„å¯¹è±¡ï¼Œåˆ™æœ‰1000ä¸ªå®ä¾‹åŸŸidã€‚ä½†æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªé™æ€åŸŸnextIdã€‚å³ä½¿æ²¡æœ‰ä¸€ä¸ªé›‡å‘˜å¯¹è±¡ï¼Œé™æ€åŸŸnextIdä¹Ÿå­˜åœ¨ã€‚å®ƒå±äºç±»ï¼Œè€Œä¸å±äºä»»ä½•ç‹¬ç«‹çš„å¯¹è±¡ã€‚  </p>
</li>
<li><p>åœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨é™æ€æ–¹æ³•ï¼š  </p>
<ol>
<li>ä¸€ä¸ªæ–¹æ³•ä¸éœ€è¦è®¿é—®å¯¹è±¡çŠ¶æ€ï¼Œå…¶æ‰€éœ€å‚æ•°éƒ½æ˜¯é€šè¿‡æ˜¾å¼å‚æ•°æä¾›ï¼ˆä¾‹å¦‚ï¼šMath.powï¼‰ã€‚  </li>
<li>ä¸€ä¸ªæ–¹æ³•åªéœ€è¦è®¿é—®ç±»çš„é™æ€åŸŸï¼ˆä¾‹å¦‚ï¼šEmployee.getNextIdï¼‰ã€‚  </li>
</ol>
</li>
<li><p>é™æ€æ–¹æ³•åœ¨è®¿é—®æœ¬ç±»çš„æˆå‘˜æ—¶ï¼Œåªå…è®¸è®¿é—®é™æ€æˆå‘˜ï¼ˆå³é™æ€æˆå‘˜å˜é‡å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œè€Œä¸å…è®¸è®¿é—®å®ä¾‹æˆå‘˜å˜é‡å’Œå®ä¾‹æ–¹æ³•ï¼›å®ä¾‹æ–¹æ³•åˆ™æ— æ­¤é™åˆ¶ã€‚  </p>
</li>
<li><p>é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œå®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®é™æ€å’Œå®ä¾‹æˆå‘˜ã€‚  </p>
</li>
<li><p>ä¹‹æ‰€ä»¥ä¸å…è®¸é™æ€æ–¹æ³•è®¿é—®å®ä¾‹æˆå‘˜å˜é‡ï¼Œæ˜¯å› ä¸ºå®ä¾‹æˆå‘˜å˜é‡æ˜¯å±äºæŸä¸ªå¯¹è±¡çš„ï¼Œè€Œé™æ€æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œå¹¶ä¸ä¸€å®šå­˜åœ¨å¯¹è±¡ã€‚  </p>
</li>
</ul>
<h3 id="æ–¹æ³•å‚æ•°"><a href="#æ–¹æ³•å‚æ•°" class="headerlink" title="æ–¹æ³•å‚æ•°"></a>æ–¹æ³•å‚æ•°</h3><ul>
<li><p>æ–¹æ³•å‚æ•°å…±æœ‰ä¸¤ç§ç±»å‹ï¼š  </p>
<ol>
<li>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•°å­—ã€å¸ƒå°”å€¼ï¼‰  </li>
<li>å¯¹è±¡å¼•ç”¨  </li>
</ol>
</li>
<li><p>æ–¹æ³•å‚æ•°çš„ä½¿ç”¨æƒ…å†µï¼š  </p>
<ol>
<li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆå³æ•°å€¼å‹å’Œå¸ƒå°”å‹ï¼‰ã€‚  </li>
<li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ã€‚ï¼ˆå®ç°ä¸€ä¸ªæ”¹å˜å¯¹è±¡å‚æ•°çŠ¶æ€çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸€ä»¶éš¾äº‹ã€‚ç†ç”±å¾ˆç®€å•ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚ï¼‰  </li>
<li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ </li>
</ol>
</li>
<li><p>è°ƒç”¨ï¼š<br>  æŒ‰å€¼è°ƒç”¨ï¼šè¡¨ç¤ºæ–¹æ³•æ¥æ”¶çš„æ˜¯è°ƒç”¨è€…æä¾›çš„å€¼ã€‚<br>  æŒ‰å¼•ç”¨è°ƒç”¨ï¼šè¡¨ç¤ºæ–¹æ³•æ¥æ”¶çš„æ˜¯è°ƒç”¨è€…æä¾›çš„å˜é‡åœ°å€ã€‚<br>  ä¸€ä¸ªæ–¹æ³•å¯ä»¥ä¿®æ”¹ä¼ é€’å¼•ç”¨æ‰€å¯¹åº”çš„å˜é‡å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹ä¼ é€’å€¼è°ƒç”¨æ‰€å¯¹åº”çš„å˜é‡å€¼ã€‚<br>  Javaç¨‹åºè®¾è®¡è¯­è¨€æ€»æ˜¯é‡‡ç”¨æŒ‰å€¼è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œç‰¹åˆ«æ˜¯ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚<br>  Javaç¨‹åºè®¾è®¡è¯­è¨€å¯¹å¯¹è±¡é‡‡ç”¨çš„ä¸æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œå®é™…ä¸Šï¼Œå¯¹è±¡å¼•ç”¨è¿›è¡Œçš„æ˜¯å€¼ä¼ é€’ã€‚</p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTest</span></span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>{</span><br><span class="line">	</span><br><span class="line">		<span class="comment">/* Test1: Methods can't modify numeric parameters*/</span></span><br><span class="line">		<span class="comment">//ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆå³æ•°å€¼å‹å’Œå¸ƒå°”å‹ï¼‰</span></span><br><span class="line">		System.out.println(<span class="string">"Testing tripleValue:"</span>);</span><br><span class="line">		<span class="keyword">double</span> percent = <span class="number">10</span>;</span><br><span class="line">		System.out.println(<span class="string">"Before: percent = "</span> + percent);</span><br><span class="line">		tripleValue(percent);</span><br><span class="line">		System.out.println(<span class="string">"After: percent = "</span> + percent);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/* Test2: Methods can change the state of object parameters*/</span></span><br><span class="line">		<span class="comment">//ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€</span></span><br><span class="line">		System.out.println(<span class="string">"\nTesting tripleValue:"</span>);</span><br><span class="line">		Employee harry = <span class="keyword">new</span> Employee(<span class="string">"Harry"</span>,<span class="number">500000</span>);</span><br><span class="line">		System.out.println(<span class="string">"Before: salary = "</span> + harry.getSalary());</span><br><span class="line">		tripleSalary(harry);</span><br><span class="line">		System.out.println(<span class="string">"After: salary = "</span> + harry.getSalary());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/* Test3: Methods can't attach new objects to object parameters*/</span></span><br><span class="line">		<span class="comment">//ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span><br><span class="line">		System.out.println(<span class="string">"\nTesting swap:"</span>);</span><br><span class="line">		Employee a = <span class="keyword">new</span> Employee(<span class="string">"Alice"</span>, <span class="number">70000</span>);</span><br><span class="line">		Employee b = <span class="keyword">new</span> Employee(<span class="string">"Bob"</span>, <span class="number">60000</span>);</span><br><span class="line">		System.out.println(<span class="string">"Before: a = "</span> + a.getName());</span><br><span class="line">		System.out.println(<span class="string">"Before: b = "</span> + b.getName());</span><br><span class="line">		swap(a,b);</span><br><span class="line">		System.out.println(<span class="string">"After: a = "</span> + a.getName());</span><br><span class="line">		System.out.println(<span class="string">"After: b = "</span> + b.getName());</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tripleValue</span><span class="params">(<span class="keyword">double</span> x)</span></span>{ <span class="comment">//doesn't work</span></span><br><span class="line">		x = <span class="number">3</span> * x;</span><br><span class="line">		System.out.println(<span class="string">"End of method: x = "</span> + x);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tripleSalary</span><span class="params">(Employee x)</span></span>{ <span class="comment">//works</span></span><br><span class="line">		x.raiseSalary(<span class="number">200</span>);</span><br><span class="line">		System.out.println(<span class="string">"End of method: salary = "</span> + x.getSalary());</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Employee x, Employee y)</span></span>{</span><br><span class="line">		Employee temp = x;</span><br><span class="line">		x = y;</span><br><span class="line">		y = temp;</span><br><span class="line">		System.out.println(<span class="string">"End of method: x = "</span> + x.getName());</span><br><span class="line">		System.out.println(<span class="string">"End of method: y = "</span> + y.getName());</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>{ <span class="comment">//simplified Employee class</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String n, <span class="keyword">double</span> s)</span></span>{</span><br><span class="line">		name = n;</span><br><span class="line">		salary = s;</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>{</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span></span>{</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">raiseSalary</span><span class="params">(<span class="keyword">double</span> byPercent)</span></span>{</span><br><span class="line">		<span class="keyword">double</span> raise = salary * byPercent / <span class="number">100</span>;</span><br><span class="line">		salary += raise;</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><ul>
<li><p>åœ¨é€šè¿‡æ‰©å±•è¶…ç±»å®šä¹‰å­ç±»çš„æ—¶å€™ï¼Œä»…éœ€è¦æŒ‡å‡ºå­ç±»ä¸è¶…ç±»çš„ä¸åŒä¹‹å¤„ã€‚ç„¶è€Œï¼Œè¶…ç±»ä¸­çš„æœ‰äº›æ–¹æ³•å¯¹å­ç±»Managerå¹¶ä¸ä¸€å®šé€‚ç”¨ã€‚å…·ä½“æ¥è¯´ï¼ŒManagerç±»ä¸­çš„getSalaryæ–¹æ³•åº”è¯¥è¿”å›è–ªæ°´å’Œå¥–é‡‘çš„æ€»å’Œã€‚ä¸ºæ­¤ï¼Œéœ€è¦æä¾›ä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥è¦†ç›–ï¼ˆoverrideï¼‰è¶…ç±»ä¸­çš„è¿™ä¸ªæ–¹æ³•ã€‚<br>  é‚£ä¹ˆå¦‚ä½•å®ç°è¿™ä¸ªæ–¹æ³•å‘¢ï¼Ÿä¹çœ‹èµ·æ¥ä¼¼ä¹å¾ˆç®€å•ï¼Œåªè¦è¿”å›salaryå’ŒbonusåŸŸçš„æ€»å’Œå°±å¯ä»¥äº†ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> salary + bonus; <span class="comment">// won't work</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç„¶è€Œï¼Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½è¿è¡Œã€‚è¿™æ˜¯å› ä¸ºMangerç±»çš„getSalaryæ–¹æ³•ä¸èƒ½åœ°è®¿é—®è¶…ç±»çš„ç§æœ‰åŸŸã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°½ç®¡æ¯ä¸€ä¸ªManagerå¯¹è±¡éƒ½æ‹¥æœ‰ä¸€ä¸ªåä¸ºsalaryçš„åŸŸï¼Œä½†åœ¨Managerç±»çš„getSalaryæ–¹æ³•ä¸­å¹¶ä¸èƒ½ç›´æ¥åœ°è®¿é—®salaryåŸŸã€‚åªæœ‰Employeeç±»çš„æ–¹æ³•æ‰èƒ½å¤Ÿè®¿é—®ç§æœ‰éƒ¨åˆ†ã€‚å¦‚æœManagerç±»çš„æ–¹æ³•ä¸€å®šè¦è®¿é—®ç§æœ‰åŸŸï¼Œå°±å¿…é¡»å€ŸåŠ©äºå…¬æœ‰çš„æ¥å£ï¼ŒEmployeeç±»ä¸­çš„å…¬æœ‰æ–¹æ³•getSalaryæ­£æ˜¯è¿™æ ·ä¸€ä¸ªæ¥å£ã€‚  </p>
</li>
<li><p>ç°åœ¨ï¼Œå†è¯•ä¸€ä¸‹ã€‚å°†å¯¹salaryåŸŸçš„è®¿é—®æ›¿æ¢æˆè°ƒç”¨getSalaryæ–¹æ³•ã€‚  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">double</span> baseSalary = getSalary(); <span class="comment">// still won't work</span></span><br><span class="line">	<span class="keyword">return</span> baseSalary + bonus;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢è¿™æ®µä»£ç ä»ç„¶ä¸èƒ½è®¿é—®ã€‚é—®é¢˜å‡ºç°åœ¨è°ƒç”¨getSalaryçš„è¯­å¥ä¸Šï¼Œè¿™æ˜¯å› ä¸ºManagerç±»ä¹Ÿæœ‰ä¸€ä¸ªgetSalaryæ–¹æ³•ï¼ˆå°±æ˜¯æ­£åœ¨å®ç°çš„è¿™ä¸ªæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥è¿™æ¡è¯­å¥å°†ä¼šå¯¼è‡´æ— é™æ¬¡åœ°è°ƒç”¨è‡ªå·±ï¼Œç›´åˆ°æ•´ä¸ªç¨‹åºå´©æºƒä¸ºæ­¢ã€‚  </p>
</li>
<li><p>è¿™é‡Œéœ€è¦æŒ‡å‡ºï¼šæˆ‘ä»¬å¸Œæœ›è°ƒç”¨è¶…ç±»Employeeä¸­çš„getSalaryæ–¹æ³•ï¼Œè€Œä¸æ˜¯å½“å‰ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„å…³é”®å­—superè§£å†³è¿™ä¸ªé—®é¢˜ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">double</span> baseSalary = <span class="keyword">super</span>.getSalary();</span><br><span class="line">	<span class="keyword">return</span> baseSalary + bonus;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨å­ç±»ä¸­å¯ä»¥å¢åŠ åŸŸã€å¢åŠ æ–¹æ³•æˆ–è¦†ç›–è¶…ç±»çš„æ–¹æ³•ï¼Œç„¶è€Œç»å¯¹ä¸èƒ½åˆ é™¤ç»§æ‰¿çš„ä»»ä½•åŸŸå’Œæ–¹æ³•ã€‚  </p>
</li>
<li><p>superåœ¨æ„é€ å™¨ä¸­çš„åº”ç”¨ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String n, <span class="keyword">double</span> s, <span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>{</span><br><span class="line">	<span class="keyword">super</span>(n,s,year,month,day);</span><br><span class="line">	bonus = <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  è¿™é‡Œçš„å…³é”®å­—superå…·æœ‰ä¸åŒçš„å«ä¹‰ã€‚è¯­å¥super(n,s,year,month,day);æ˜¯â€œè°ƒç”¨è¶…ç±»Employeeä¸­å«æœ‰nã€sã€yearã€monthå’Œdayå‚æ•°çš„æ„é€ å™¨â€çš„ç®€å†™å½¢å¼ã€‚<br>  ç”±äºManagerç±»çš„æ„é€ å™¨ä¸èƒ½è®¿é—®Employeeç±»çš„ç§æœ‰åŸŸï¼Œæ‰€ä»¥å¿…é¡»åˆ©ç”¨Employeeçš„æ„é€ å™¨å¯¹è¿™éƒ¨åˆ†ç§æœ‰åŸŸè¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡superå®ç°å¯¹è¶…ç±»æ„é€ å™¨çš„è°ƒç”¨ã€‚ä½¿ç”¨superè°ƒç”¨æ„é€ å™¨çš„è¯­å¥å¿…é¡»æ˜¯å­ç±»æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚<br>  å¦‚æœå­ç±»çš„æ„é€ å™¨æ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨è¶…ç±»çš„æ„é€ å™¨ï¼Œåˆ™å°†è‡ªåŠ¨åœ°è°ƒç”¨è¶…ç±»é»˜è®¤ï¼ˆæ²¡æœ‰å‚æ•°ï¼‰çš„æ„é€ å™¨ã€‚å¦‚æœè¶…ç±»æ²¡æœ‰ä¸å¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œå¹¶ä¸”åœ¨å­ç±»çš„æ„é€ å™¨ä¸­åˆæ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨å…¶ä»–æ„é€ å™¨ï¼Œåˆ™Javaç¼–è¯‘å™¨å°†æŠ¥å‘Šé”™è¯¯ã€‚ï¼ˆå­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨ï¼ˆæ„é€ æ–¹æ³•æˆ–è€…æ„é€ å‡½æ•°ï¼‰ï¼Œå¦‚æœçˆ¶ç±»çš„æ„é€ å™¨å¸¦æœ‰å‚æ•°ï¼Œåˆ™å¿…é¡»åœ¨å­ç±»çš„æ„é€ å™¨ä¸­æ˜¾å¼åœ°é€šè¿‡superå…³é”®å­—è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨å¹¶é…ä»¥é€‚å½“çš„å‚æ•°åˆ—è¡¨ã€‚å¦‚æœçˆ¶ç±»æ„é€ å™¨æ²¡æœ‰å‚æ•°ï¼Œåˆ™åœ¨å­ç±»çš„æ„é€ å™¨ä¸­ä¸éœ€è¦ä½¿ç”¨superå…³é”®å­—è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚ï¼‰  </p>
</li>
<li><p>å…³é”®å­—thisçš„ä¸¤ä¸ªç”¨é€”ï¼š  </p>
<ol>
<li>å¼•ç”¨éšå¼å‚æ•°  </li>
<li>è°ƒç”¨è¯¥ç±»å…¶ä»–çš„æ„é€ å™¨  </li>
</ol>
</li>
<li><p>å…³é”®å­—superçš„ä¸¤ä¸ªç”¨é€”ï¼š  </p>
<ol>
<li>è°ƒç”¨è¶…ç±»æ–¹æ³•  </li>
<li>è°ƒç”¨è¶…ç±»çš„æ„é€ å™¨  </li>
</ol>
</li>
<li><p>é‡å†™(override)ï¼š  </p>
<ul>
<li>å£°æ˜ä¸ºfinalçš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™  </li>
<li>å£°æ˜ä¸ºstaticçš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œä½†æ˜¯èƒ½å¤Ÿè¢«å†æ¬¡å£°æ˜  </li>
<li>æ„é€ æ–¹æ³•ä¸èƒ½è¢«é‡å†™  </li>
<li>å¦‚æœä¸èƒ½ç»§æ‰¿ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™ä¸èƒ½é‡å†™è¿™ä¸ªæ–¹æ³•  </li>
</ul>
</li>
<li><p>é‡è½½(overload)ï¼š  </p>
<ul>
<li>è¢«é‡è½½çš„æ–¹æ³•å¿…é¡»æ”¹å˜å‚æ•°åˆ—è¡¨ï¼ˆå‚æ•°ä¸ªæ•°æˆ–ç±»å‹ä¸ä¸€æ ·ï¼‰  </li>
<li>è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥æ”¹å˜è¿”å›ç±»å‹  </li>
<li>è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥æ”¹å˜è®¿é—®ä¿®é¥°ç¬¦  </li>
<li>è¢«é‡è½½çš„æ–¹æ³•å¯ä»¥å£°æ˜æ–°çš„æˆ–æ›´å¹¿çš„æ£€æŸ¥å¼‚å¸¸  </li>
<li>æ–¹æ³•èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­æˆ–è€…åœ¨ä¸€ä¸ªå­ç±»ä¸­è¢«é‡è½½  </li>
</ul>
</li>
</ul>
<ul>
<li><p>ä¸€ä¸ªå¯¹è±¡å˜é‡å¯ä»¥æŒ‡ç¤ºå¤šç§å®é™…ç±»å‹çš„ç°è±¡è¢«ç§°ä¸ºå¤šæ€ã€‚åœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè‡ªåŠ¨åœ°é€‰æ‹©è°ƒç”¨å“ªä¸ªæ–¹æ³•çš„ç°è±¡ç§°ä¸ºåŠ¨æ€ç»‘å®šã€‚  </p>
</li>
<li><p>å¤šæ€çš„å®ç°æ–¹æ³•ï¼šé‡å†™ã€æ¥å£ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•ã€‚  </p>
</li>
<li><p>å¦‚æœæ˜¯privateæ–¹æ³•ã€staticæ–¹æ³•ã€finalæ–¹æ³•æˆ–è€…æ„é€ å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†å¯ä»¥å‡†ç¡®åœ°çŸ¥é“åº”è¯¥è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°†è¿™ç§è°ƒç”¨æ–¹å¼ç§°ä¸ºé™æ€ç»‘å®šã€‚  </p>
</li>
<li><p>åœ¨è¦†ç›–ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå­ç±»æ–¹æ³•ä¸èƒ½ä½äºè¶…ç±»æ–¹æ³•çš„å¯è§æ€§ã€‚  </p>
</li>
<li><p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–å¹¶ä¸”å¾ˆçŸ­ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿå¯¹å®ƒè¿›è¡Œä¼˜åŒ–å¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå†…è”ã€‚å¦‚æœæ–¹æ³•å¾ˆç®€çŸ­ã€è¢«é¢‘ç¹è°ƒç”¨ä¸”æ²¡æœ‰çœŸæ­£åœ°è¢«è¦†ç›–ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºä¸­çš„å³æ—¶ç¼–è¯‘å™¨å°±ä¼šå°†è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†…è”å¤„ç†ã€‚  </p>
</li>
<li><p>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šåœ¨å°†è¶…ç±»è½¬æ¢æˆå­ç±»ä¹‹å‰ï¼Œåº”è¯¥ä½¿ç”¨instanceofè¿›è¡Œæ£€æŸ¥ã€‚  </p>
</li>
<li><p>abstractå…³é”®å­—ï¼š  </p>
<ol>
<li>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»æœ¬èº«å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡çš„ã€‚  </li>
<li>é™¤æŠ½è±¡æ–¹æ³•ä¹‹å¤–ï¼ŒæŠ½è±¡ç±»è¿˜å¯ä»¥åŒ…å«å…·ä½“æ•°æ®å’Œå…·ä½“æ–¹æ³•ã€‚  </li>
<li>æŠ½è±¡æ–¹æ³•å……å½“ç€å ä½çš„è§’è‰²ï¼Œå®ƒä»¬çš„å…·ä½“å®ç°åœ¨å­ç±»ä¸­ã€‚  </li>
<li>æ‰©å±•æŠ½è±¡ç±»å¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ã€‚ä¸€ç§æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰éƒ¨åˆ†æŠ½è±¡æ–¹æ³•æˆ–è€…æŠ½è±¡æ–¹æ³•ä¹Ÿä¸å®šä¹‰ï¼Œè¿™æ ·å°±å¿…é¡»å°†å­ç±»ä¹Ÿæ ‡è®°ä¸ºæŠ½è±¡ç±»ï¼›å¦ä¸€ç§æ˜¯å®šä¹‰å…¨éƒ¨æŠ½è±¡æ–¹æ³•ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå­ç±»å°±ä¸æ˜¯æŠ½è±¡çš„äº†ã€‚  </li>
<li>ç±»å³ä½¿ä¸å«æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å°†ç±»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚  </li>
<li>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸ºabstractï¼Œå°±ä¸èƒ½åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚(æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥é€šè¿‡newå»å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å®ƒå°±æ˜¯ä¸èƒ½å®ä¾‹åŒ–ï¼Œè¦è·å–æŠ½è±¡ç±»çš„å¯¹è±¡ï¼Œéœ€è¦å…ˆç”¨ä¸€ä¸ªç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œç„¶åå»å®ä¾‹åŒ–å­ç±»ã€‚ä¹Ÿå¯ä»¥ç”¨åŒ¿åå†…éƒ¨ç±»ï¼Œåœ¨æŠ½è±¡ç±»ä¸­åˆ›å»ºä¸€ä¸ªåŒ¿åçš„å­ç±»ï¼Œç»§æ‰¿æŠ½è±¡ç±»ï¼Œé€šè¿‡ç‰¹æ®Šçš„è¯­æ³•å®ä¾‹åŒ–å­ç±»çš„å¯¹è±¡ã€‚)  </li>
<li>å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œä½†æ˜¯å®ƒåªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚  </li>
<li>æ„é€ æ–¹æ³•ã€ç±»æ–¹æ³•ï¼ˆç”¨staticä¿®é¥°çš„æ–¹æ³•ï¼‰ä¸èƒ½å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ã€‚  </li>
</ol>
</li>
</ul>
<h2 id="æ¥å£å’Œå†…éƒ¨ç±»"><a href="#æ¥å£å’Œå†…éƒ¨ç±»" class="headerlink" title="æ¥å£å’Œå†…éƒ¨ç±»"></a>æ¥å£å’Œå†…éƒ¨ç±»</h2><ul>
<li><p>æ¥å£ç»ä¸èƒ½å«æœ‰å®ä¾‹åŸŸï¼Œä¹Ÿä¸èƒ½åœ¨æ¥å£ä¸­å®ç°æ–¹æ³•ã€‚æä¾›å®ä¾‹åŸŸå’Œæ–¹æ³•å®ç°çš„ä»»åŠ¡åº”è¯¥ç”±å®ç°æ¥å£çš„é‚£ä¸ªç±»æ¥å®Œæˆã€‚å› æ­¤ï¼Œå¯ä»¥å°†æ¥å£çœ‹æˆæ˜¯æ²¡æœ‰å®ä¾‹åŸŸçš„æŠ½è±¡ç±»ã€‚  </p>
</li>
<li><p>æ¥å£ä¸æ˜¯ç±»ï¼Œå°¤å…¶ä¸èƒ½ä½¿ç”¨newè¿ç®—ç¬¦å®ä¾‹åŒ–ä¸€ä¸ªæ¥å£ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">x = <span class="keyword">new</span> Compare(...); <span class="comment">//ERROR</span></span><br></pre></td></tr></tbody></table></figure>
<p>  ç„¶è€Œï¼Œå°½ç®¡ä¸èƒ½æ„é€ æ¥å£çš„å¯¹è±¡ï¼Œå´èƒ½å£°æ˜æ¥å£çš„å˜é‡ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Compare x; <span class="comment">//OK</span></span><br></pre></td></tr></tbody></table></figure>
<p>  æ¥å£å˜é‡å¿…é¡»å¼•ç”¨å®ç°äº†æ¥å£çš„ç±»å¯¹è±¡ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">x = <span class="keyword">new</span> Employee(...); <span class="comment">//OK provided Employee implements Comparable</span></span><br></pre></td></tr></tbody></table></figure>
<p>  æ¥ä¸‹æ¥ï¼Œå¦‚åŒä½¿ç”¨instanceofæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç‰¹å®šç±»ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨instanceofæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å®ç°äº†æŸä¸ªç‰¹å®šçš„æ¥å£ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> Comparable) {...}</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸å¯ä»¥å»ºç«‹ç±»çš„ç»§æ‰¿å…³ç³»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥è¢«æ‰©å±•ã€‚è¿™é‡Œå…è®¸å­˜åœ¨å¤šæ¡ä»å…·æœ‰è¾ƒé«˜é€šç”¨æ€§çš„æ¥å£åˆ°è¾ƒé«˜ä¸“ç”¨æ€§çš„æ¥å£çš„é“¾ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç§°ä¸ºMoveableçš„æ¥å£ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Moveable</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">move</span> <span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  ç„¶åï¼Œå¯ä»¥ä»¥å®ƒä¸ºåŸºç¡€æ‰©å±•ä¸€ä¸ªå«åšPoweredçš„æ¥å£ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Powered</span> <span class="keyword">extends</span> <span class="title">Moveable</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">milePerGallon</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  è™½ç„¶åœ¨æ¥å£ä¸­ä¸èƒ½åŒ…å«å®ä¾‹åŸŸæˆ–é™æ€æ–¹æ³•ï¼Œä½†å´å¯ä»¥åŒ…å«å¸¸é‡ã€‚<br>  ä¸æ¥å£ä¸­çš„æ–¹æ³•éƒ½è‡ªåŠ¨åœ°è¢«è®¾ç½®ä¸ºpublicä¸€æ ·ï¼Œæ¥å£ä¸­çš„åŸŸå°†è¢«è‡ªåŠ¨è®¾ä¸ºpublic static finalã€‚  </p>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿ  </p>
<ol>
<li>å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®è¯¥ç±»å®šä¹‰æ‰€åœ¨çš„ä½œç”¨åŸŸä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰æ•°æ®ã€‚  </li>
<li>å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥ã€‚  </li>
<li>å½“æƒ³è¦å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”ä¸æƒ³ç¼–å†™å¤§é‡ä»£ç æ—¶ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¯”è¾ƒä¾¿æ·ã€‚  </li>
</ol>
</li>
<li><p>Javaå†…éƒ¨ç±»è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠŸèƒ½ï¼Œè¿™ä½¿å¾—å®ƒæ¯”C++çš„åµŒå¥—ç±»æ›´åŠ ä¸°å¯Œï¼Œç”¨é€”æ›´åŠ å¹¿æ³›ã€‚å†…éƒ¨ç±»çš„å¯¹è±¡æœ‰ä¸€ä¸ªéšå¼å¼•ç”¨ï¼Œå®ƒå¼•ç”¨äº†å®ä¾‹åŒ–è¯¥å†…éƒ¨å¯¹è±¡çš„å¤–å›´ç±»å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥è®¿é—®å¤–å›´ç±»å¯¹è±¡çš„å…¨éƒ¨çŠ¶æ€ã€‚å†…éƒ¨ç±»æ—¢å¯ä»¥è®¿é—®è‡ªèº«çš„æ•°æ®åŸŸï¼Œä¹Ÿå¯ä»¥è®¿é—®åˆ›å»ºå®ƒçš„å¤–å›´ç±»å¯¹è±¡çš„æ•°æ®åŸŸã€‚  </p>
</li>
<li><p>å±€éƒ¨å†…éƒ¨ç±»ï¼š<br>  å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½ç”¨publicæˆ–privateè®¿é—®è¯´æ˜ç¬¦è¿›è¡Œå£°æ˜ã€‚å®ƒçš„ä½œç”¨åŸŸè¢«é™å®šåœ¨å£°æ˜è¿™ä¸ªå±€éƒ¨ç±»çš„å—ä¸­ã€‚  </p>
</li>
<li><p>ç”±å¤–éƒ¨æ–¹æ³•è®¿é—®finalå˜é‡ï¼š<br>  å±€éƒ¨ç±»ä¸ä»…èƒ½å¤Ÿè®¿é—®åŒ…å«å®ƒä»¬çš„å¤–éƒ¨ç±»ï¼Œè¿˜å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡ï¼Œä¸è¿‡ï¼Œè¿™äº›å±€éƒ¨å˜é‡å¿…é¡»è¢«å£°æ˜ä¸ºfinalã€‚  </p>
</li>
<li><p>finalå…³é”®å­—å¯ä»¥åº”ç”¨äºå±€éƒ¨å˜é‡ã€å®ä¾‹å˜é‡å’Œé™æ€å˜é‡ã€‚åœ¨æ‰€æœ‰è¿™äº›æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„å«ä¹‰éƒ½æ˜¯ï¼šåœ¨åˆ›å»ºè¿™ä¸ªå˜é‡ä¹‹åï¼Œåªèƒ½å¤Ÿä¸ºä¹‹èµ‹å€¼ä¸€æ¬¡ã€‚æ­¤åï¼Œå†ä¹Ÿä¸èƒ½ä¿®æ”¹å®ƒçš„å€¼äº†ï¼Œè¿™å°±æ˜¯finalã€‚ä¸è¿‡ï¼Œåœ¨å®šä¹‰finalå˜é‡çš„æ—¶å€™ï¼Œä¸å¿…è¿›è¡Œåˆå§‹åŒ–ã€‚  </p>
</li>
<li><p>åŒ¿åå†…éƒ¨ç±»ï¼š  </p>
<ol>
<li>å¦‚æœæ„é€ å™¨å‚æ•°çš„é—­åœ†æ‹¬å·è·Ÿä¸€ä¸ªå¼€èŠ±æ‹¬å·ï¼Œæ­£åœ¨å®šä¹‰çš„å°±æ˜¯åŒ¿åå†…éƒ¨ç±»ã€‚  </li>
<li>ç”±äºæ„é€ å™¨çš„åå­—å¿…é¡»ä¸ç±»åç›¸åŒï¼Œè€ŒåŒ¿åç±»æ²¡æœ‰ç±»åï¼Œæ‰€ä»¥ï¼ŒåŒ¿åç±»ä¸èƒ½æœ‰æ„é€ å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå°†æ„é€ å™¨å‚æ•°ä¼ é€’ç»™è¶…ç±»çš„æ„é€ å™¨ã€‚å°¤å…¶æ˜¯åœ¨å†…éƒ¨ç±»å®ç°æ¥å£çš„æ—¶å€™ï¼Œä¸èƒ½æœ‰ä»»ä½•æ„é€ å‚æ•°ã€‚  </li>
</ol>
</li>
<li><p>é™æ€å†…éƒ¨ç±»ï¼š<br>  æœ‰æ—¶å€™ï¼Œä½¿ç”¨å†…éƒ¨ç±»åªæ˜¯ä¸ºäº†æŠŠä¸€ä¸ªç±»éšè—åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œå¹¶ä¸éœ€è¦å†…éƒ¨ç±»å¼•ç”¨å¤–å›´ç±»å¯¹è±¡ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°†å†…éƒ¨ç±»å£°æ˜ä¸ºstaticï¼Œä»¥ä¾¿å–æ¶ˆäº§ç”Ÿçš„å¼•ç”¨ã€‚    </p>
</li>
</ul>
<h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><ul>
<li><p>Throwable  </p>
<ul>
<li>Error(æœªæ£€æŸ¥å¼‚å¸¸)  </li>
<li>Exception  <ul>
<li>IOException(å·²æ£€æŸ¥å¼‚å¸¸)  </li>
<li>RuntimeException(æœªæ£€æŸ¥å¼‚å¸¸)  </li>
</ul>
</li>
</ul>
</li>
<li><p>å£°æ˜ï¼šæ–¹æ³•åº”è¯¥åœ¨å…¶é¦–éƒ¨å£°æ˜æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚è¿™æ ·å¯ä»¥ä»é¦–éƒ¨åæ˜ å‡ºè¿™ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºå“ªç±»å·²æ£€æŸ¥å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œä¸éœ€è¦å£°æ˜Javaçš„å†…éƒ¨é”™è¯¯ï¼Œå³ä»Errorç»§æ‰¿çš„é”™è¯¯ã€‚åŒæ ·ï¼Œä¹Ÿä¸åº”è¯¥å£°æ˜ä»RuntimeExceptionç»§æ‰¿çš„é‚£äº›æœªæ£€æŸ¥å¼‚å¸¸ã€‚æ€»ä¹‹ï¼Œä¸€ä¸ªæ–¹æ³•å¿…é¡»å£°æ˜æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„å·²æ£€æŸ¥å¼‚å¸¸ï¼Œè€Œæœªæ£€æŸ¥å¼‚å¸¸è¦ä¹ˆä¸å¯æ§åˆ¶ï¼ˆErrorï¼‰ï¼Œè¦ä¹ˆå°±åº”è¯¥é¿å…å‘ç”Ÿï¼ˆRuntimeExceptionï¼‰ã€‚  </p>
</li>
<li><p>ç”±äºç¨‹åºé”™è¯¯å¯¼è‡´çš„å¼‚å¸¸å±äºRuntimeExceptionï¼Œè€Œç¨‹åºæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œä½†ç”±äºåƒI/Oé”™è¯¯è¿™ç±»é—®é¢˜å¯¼è‡´çš„å¼‚å¸¸å±äºå…¶ä»–å¼‚å¸¸ã€‚<br>  æ´¾ç”ŸäºRuntimeExceptionçš„å¼‚å¸¸åŒ…å«ä¸‹é¢å‡ ç§æƒ…å†µï¼š  </p>
<ol>
<li>é”™è¯¯çš„ç±»å‹è½¬æ¢  </li>
<li>æ•°ç»„è®¿é—®è¶Šç•Œ  </li>
<li>è®¿é—®ç©ºæŒ‡é’ˆ  </li>
</ol>
<p>  ä¸æ˜¯æ´¾ç”ŸäºRuntimeExceptionçš„å¼‚å¸¸åŒ…æ‹¬ï¼š  </p>
<ol>
<li>è¯•å›¾åœ¨æ–‡ä»¶å°¾éƒ¨åé¢è¯»å–æ•°æ®  </li>
<li>è¯•å›¾æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶  </li>
<li>è¯•å›¾æ ¹æ®ç»™å®šçš„å­—ç¬¦ä¸²æŸ¥æ‰¾Classå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºçš„ç±»å¹¶ä¸å­˜åœ¨  </li>
</ol>
<p>  â€œå¦‚æœå‡ºç°RuntimeExceptionå¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯ä½ çš„é—®é¢˜â€æ˜¯ä¸€æ¡ç›¸å½“æœ‰é“ç†çš„è§„æ ¼ã€‚  </p>
</li>
<li><p>å¦‚æœåœ¨å­ç±»ä¸­è¦†ç›–äº†è¶…ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå­ç±»æ–¹æ³•ä¸­å£°æ˜çš„å·²æ£€æŸ¥å¼‚å¸¸ä¸èƒ½æ¯”è¶…ç±»æ–¹æ³•ä¸­å£°æ˜çš„å¼‚å¸¸æ›´é€šç”¨ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»æ–¹æ³•ä¸­å¯ä»¥æŠ›å‡ºæ›´ç‰¹å®šçš„å¼‚å¸¸ï¼Œæˆ–è€…æ ¹æœ¬ä¸æŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼‰ã€‚ç‰¹åˆ«éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœè¶…ç±»æ–¹æ³•æ²¡æœ‰æŠ›å‡ºä»»ä½•å·²æ£€æŸ¥å¼‚å¸¸ï¼Œå­ç±»ä¹Ÿä¸èƒ½æŠ›å‡ºä»»ä½•å·²æ£€æŸ¥å¼‚å¸¸ã€‚  </p>
</li>
<li><p>å¦‚æœæƒ³ä¼ é€’ä¸€ä¸ªå¼‚å¸¸ï¼Œå°±å¿…é¡»åœ¨æ–¹æ³•çš„é¦–éƒ¨æ·»åŠ ä¸€ä¸ªthrowsè¯´æ˜ç¬¦ï¼Œä»¥ä¾¿å‘ŠçŸ¥è°ƒç”¨è€…è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚  </p>
</li>
</ul>
<h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><ul>
<li><p>å¯¹äºä¸€ä¸ªstaticæ–¹æ³•è€Œè¨€ï¼Œæ— æ³•è®¿é—®æ³›å‹ç±»å‹çš„å‚æ•°ã€‚å¦‚æœé™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›å‹çš„è¯ï¼Œå¿…é¡»å°†é™æ€æ–¹æ³•ä¹Ÿå®šä¹‰æˆæ³›å‹æ–¹æ³•ã€‚  </p>
</li>
<li><p>æ³›å‹ç±»ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line">	<span class="keyword">private</span> T first;</span><br><span class="line">	<span class="keyword">private</span> T second;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">()</span> </span>{first = <span class="keyword">null</span>; second = <span class="keyword">null</span>;}</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T second)</span> </span>{<span class="keyword">this</span>.first = first; <span class="keyword">this</span>.second = second;}</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>{<span class="keyword">return</span> first;}</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getSecond</span><span class="params">()</span> </span>{<span class="keyword">return</span> second;}</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirst</span><span class="params">(T newValue)</span> </span>{first = newValue;}</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(T newValue)</span> </span>{second = newValue;}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ³›å‹æ–¹æ³•ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayAlg</span> </span>{</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getMiddle</span><span class="params">(T... a)</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> a[a.length / <span class="number">2</span>];</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>  ç±»å‹å˜é‡æ”¾åœ¨ä¿®é¥°ç¬¦ï¼ˆè¿™é‡Œæ˜¯public staticï¼‰çš„åé¢ï¼Œè¿”å›ç±»å‹çš„å‰é¢ã€‚<br>  æ³›å‹æ–¹æ³•å¯ä»¥å®šä¹‰åœ¨æ™®é€šç±»ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨æ³›å‹ç±»ä¸­ã€‚<br>  å½“è°ƒç”¨ä¸€ä¸ªæ³›å‹æ–¹æ³•æ—¶ï¼Œåœ¨æ–¹æ³•åå‰çš„å°–æ‹¬å·ä¸­æ”¾å…¥å…·ä½“çš„ç±»å‹ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">String middle = ArrayAlg.&lt;String&gt;getMiddle(<span class="string">"John"</span>,<span class="string">"Q"</span>,<span class="string">"Public"</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>  å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ–¹æ³•è°ƒç”¨ä¸­å¯ä»¥çœç•¥<string>ç±»å‹å‚æ•°ã€‚ç¼–è¯‘å™¨æœ‰è¶³å¤Ÿä¿¡æ¯èƒ½å¤Ÿæ¨æ–­å‡ºæ‰€è°ƒç”¨çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥è°ƒç”¨ï¼š  </string></p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">String middle = ArrayAlg.getMiddle(<span class="string">"John"</span>,<span class="string">"Q"</span>,<span class="string">"Public"</span>);</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><ul>
<li><p>çº¿ç¨‹å¯ä»¥æœ‰å¦‚ä¸‹6ç§çŠ¶æ€ï¼šNew(æ–°åˆ›å»º)ã€Runnable(å¯è¿è¡Œ)ã€Blocked(è¢«é˜»å¡)ã€Waiting(ç­‰å¾…)ã€Timed waiting(è®¡æ—¶ç­‰å¾…)ã€Terminated(è¢«ç»ˆæ­¢)ã€‚  </p>
<ul>
<li>åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œä¸€ä¸ªå¯è¿è¡Œçš„çº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œä¹Ÿå¯èƒ½æ²¡æœ‰è¿è¡Œã€‚  </li>
<li>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå†…éƒ¨çš„å¯¹è±¡é”ï¼Œè€Œè¯¥é”è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚  </li>
<li>å½“çº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹é€šçŸ¥è°ƒåº¦å™¨ä¸€ä¸ªæ¡ä»¶æ—¶ï¼Œå®ƒè‡ªå·±è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚  </li>
<li>æœ‰å‡ ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªè¶…æ—¶å‚æ•°ï¼Œè°ƒç”¨å®ƒä»¬å¯¼è‡´çº¿ç¨‹è¿›å…¥è®¡æ—¶ç­‰å¾…çŠ¶æ€ã€‚  </li>
<li>çº¿ç¨‹å› å¦‚ä¸‹ä¸¤ä¸ªåŸå› ä¹‹ä¸€è€Œè¢«ç»ˆæ­¢ï¼šå› ä¸ºrunæ–¹æ³•æ­£å¸¸é€€å‡ºè€Œè‡ªç„¶æ­»äº¡ï¼›å› ä¸ºä¸€ä¸ªæ²¡æœ‰æ•è·çš„å¼‚å¸¸ç»ˆæ­¢äº†runæ–¹æ³•è€Œæ„å¤–æ­»äº¡ã€‚  </li>
</ul>
</li>
<li><p>åŒæ­¥ï¼š  </p>
<ol>
<li>é”å’Œæ¡ä»¶çš„å…³é”®ä¹‹å¤„ï¼š  <ul>
<li>é”ç”¨æ¥ä¿æŠ¤ä»£ç ç‰‡æ®µï¼Œä»»ä½•æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¢«ä¿æŠ¤çš„ä»£ç ã€‚  </li>
<li>é”å¯ä»¥ç®¡ç†è¯•å›¾è¿›å…¥è¢«ä¿æŠ¤ä»£ç æ®µçš„çº¿ç¨‹ã€‚  </li>
<li>é”å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³çš„æ¡ä»¶å¯¹è±¡ã€‚  </li>
<li>æ¯ä¸ªæ¡ä»¶å¯¹è±¡ç®¡ç†é‚£äº›å·²ç»è¿›å…¥è¢«ä¿æŠ¤çš„ä»£ç æ®µä½†è¿˜ä¸èƒ½è¿è¡Œçš„çº¿ç¨‹ã€‚  </li>
</ul>
</li>
<li>synchronizeã€wait()ã€notifyAll()  </li>
<li>é™¤äº†è°ƒç”¨åŒæ­¥æ–¹æ³•è·å¾—é”ï¼Œçº¿ç¨‹è¿˜å¯ä»¥é€šè¿‡è¿›å…¥ä¸€ä¸ªåŒæ­¥é˜»å¡è·å¾—é”ï¼š   <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">synchronize(obj) {</span><br><span class="line">	critical section</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>volatileå…³é”®å­—ä¸ºå®ä¾‹åŸŸçš„åŒæ­¥è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶ã€‚å¦‚æœå£°æ˜ä¸€ä¸ªåŸŸä¸ºvolatileï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å’Œè™šæ‹Ÿæœºå°±çŸ¥é“è¯¥åŸŸæ˜¯å¯èƒ½è¢«å¦ä¸€ä¸ªçº¿ç¨‹å¹¶å‘æ›´æ–°çš„ã€‚ï¼ˆvolatileä¿®é¥°çš„æˆå‘˜å˜é‡åœ¨æ¯æ¬¡è¢«çº¿ç¨‹è®¿é—®æ—¶ï¼Œéƒ½å¼ºåˆ¶ä»å…±äº«å†…å­˜ä¸­é‡æ–°è¯»å–è¯¥æˆå‘˜å˜é‡çš„å€¼ã€‚è€Œä¸”ï¼Œå½“æˆå‘˜å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¼ºåˆ¶çº¿ç¨‹å°†å˜åŒ–å€¼å›å†™åˆ°å…±äº«å†…å­˜ã€‚è¿™æ ·åœ¨ä»»ä½•æ—¶åˆ»ï¼Œä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹æ€»æ˜¯çœ‹åˆ°æŸä¸ªæˆå‘˜å˜é‡çš„åŒä¸€ä¸ªå€¼ã€‚ï¼‰  </li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>Coding</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰å“APP</title>
    <url>/2019/09/24/android/</url>
    <content><![CDATA[<p><span class="github-emoji"><span>ğŸ’©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a9.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<span id="more"></span>



<h3 id="å£°æ˜å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼"><a href="#å£°æ˜å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼" class="headerlink" title="å£°æ˜å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼"></a>å£°æ˜å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼</h3><ul>
<li>å…¸å‹æƒ…å†µä¸‹çš„å£°æ˜å‘¨æœŸ  <ol>
<li>onCreate: è¡¨ç¤ºActivityæ­£åœ¨è¢«åˆ›å»ºã€‚  </li>
<li>onRestart: è¡¨ç¤ºActivityæ­£åœ¨é‡æ–°å¯åŠ¨ã€‚  </li>
<li>onStart: è¡¨ç¤ºActivityæ­£åœ¨è¢«å¯åŠ¨ã€‚è¿™æ—¶Activityå·²ç»å¯è§ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰å‡ºç°åœ¨å‰å°ã€‚  </li>
<li>onResume: è¡¨ç¤ºActivityå·²ç»å¯è§äº†ï¼Œå¹¶ä¸”å‡ºç°åœ¨å‰å°å¹¶å¼€å§‹æ´»åŠ¨ã€‚  </li>
<li>onPause: è¡¨ç¤ºActivityæ­£åœ¨åœæ­¢ã€‚  </li>
<li>onStop: è¡¨ç¤ºActivityå³å°†åœæ­¢ã€‚  </li>
<li>onDestroy: è¡¨ç¤ºActivityå³å°†è¢«é”€æ¯ã€‚  </li>
</ol>
</li>
</ul>
<h3 id="IPCåŸºç¡€æ¦‚å¿µ"><a href="#IPCåŸºç¡€æ¦‚å¿µ" class="headerlink" title="IPCåŸºç¡€æ¦‚å¿µ"></a>IPCåŸºç¡€æ¦‚å¿µ</h3><ul>
<li><p>åœ¨Androidä¸­ä½¿ç”¨å¤šçº¿ç¨‹åªæœ‰ä¸€ç§æ–¹æ³•ï¼Œé‚£å°±æ˜¯ç»™å››å¤§ç»„ä»¶åœ¨AndroidMenifestä¸­æŒ‡å®šandroid:processå±æ€§ï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶ä»–åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ— æ³•ç»™ä¸€ä¸ªçº¿ç¨‹æˆ–è€…ä¸€ä¸ªå®ä½“ç±»æŒ‡å®šå…¶è¿è¡Œæ—¶æ‰€åœ¨çš„è¿›ç¨‹ã€‚å…¶å®è¿˜æœ‰ä¸€ç§éå¸¸è§„çš„å¤šè¿›ç¨‹æ–¹æ³•ï¼Œé‚£å°±æ˜¯é€šè¿‡JNIåœ¨nativeå±‚å»forkä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å±äºç‰¹æ®Šæƒ…å†µï¼Œä¹Ÿä¸æ˜¯å¸¸ç”¨çš„åˆ›å»ºå¤šè¿›ç¨‹çš„æ–¹å¼ã€‚  </p>
</li>
<li><p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ä¼šé€ æˆå¦‚ä¸‹å‡ æ–¹é¢çš„é—®é¢˜ï¼š  </p>
<ol>
<li>é™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼å®Œå…¨å¤±æ•ˆ  </li>
<li>çº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆ  </li>
<li>SharedPreferencesçš„å¯é æ€§ä¸‹é™  </li>
<li>Applicationä¼šå¤šæ¬¡åˆ›å»º  </li>
</ol>
</li>
<li><p>å®ç°è·¨è¿›ç¨‹é€šä¿¡çš„æ–¹å¼å¾ˆå¤šï¼Œæ¯”å¦‚é€šè¿‡Intentæ¥ä¼ é€’æ•°æ®ï¼Œå…±äº«æ–‡ä»¶å’ŒSharedPreferencesï¼ŒåŸºäºBinderçš„Messagerå’ŒAIDLä»¥åŠSocketç­‰ã€‚  </p>
</li>
<li><p>IPCä¸­çš„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¸»è¦åŒ…æ‹¬ä¸‰æ–¹é¢å†…å®¹ï¼šSerializableæ¥å£ã€Parcelableæ¥å£ä»¥åŠBinderã€‚  </p>
</li>
<li><p>ä»€ä¹ˆæ˜¯å¯¹è±¡çš„åºåˆ—åŒ–ï¼Ÿ<br>  å¯¹è±¡åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯è½¬åŒ–ä¸ºå¯ä»¥å­˜å‚¨æˆ–è€…ä¼ è¾“çš„å½¢å¼çš„è¿‡ç¨‹ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬Classä¿¡æ¯ã€ç»§æ‰¿å…³ç³»ä¿¡æ¯ã€è®¿é—®æƒé™ã€å˜é‡ç±»å‹ä»¥åŠæ•°å€¼ä¿¡æ¯ç­‰ã€‚<br>  å°†åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å‡ºæ¥å¹¶å¯¹å…¶è¿›è¡Œååºåˆ—åŒ–æ“ä½œã€‚é€šè¿‡ååºåˆ—åŒ–å°†å¯¹è±¡çš„ä¿¡æ¯å…¨éƒ¨è·å–ï¼Œç„¶åå¯ä»¥åœ¨å†…å­˜ä¸­æ ¹æ®è¿™äº›ä¿¡æ¯æ–°å»ºå¯¹è±¡ã€‚<br>  Javaæä¾›äº†Seriabizableæ¥å£æ¥å®ç°å¯¹è±¡åºåˆ—åŒ–ã€‚å½“å¯¹è±¡åœ¨ä¿å­˜å¯¹è±¡æ—¶ï¼Œä¼šæŠŠå…¶çŠ¶æ€ä¿å­˜ä¸ºä¸€ç»„å­—èŠ‚ï¼Œååºåˆ—åŒ–æ—¶å†å°†è¿™äº›è¿˜åŸæˆå¯¹è±¡å†å†…å­˜å½“ä¸­é‡æ–°åˆ›å»ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ç±»ä¸­çš„é™æ€å˜é‡æ˜¯ä¸ä¼šè¢«åºåˆ—åŒ–çš„ï¼Œå› ä¸ºå®ƒä¸å±äºå¯¹è±¡è€Œæ˜¯å±äºç±»ã€‚  </p>
</li>
</ul>
<h4 id="Seriablizable"><a href="#Seriablizable" class="headerlink" title="Seriablizable"></a>Seriablizable</h4><ul>
<li><p>Serializableæ˜¯Javaé”æä¾›çš„ä¸€ä¸ªåºåˆ—åŒ–æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œä¸ºå¯¹è±¡æä¾›æ ‡å‡†çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  Userç±»æ˜¯ä¸€ä¸ªå®ç°äº†Serializableæ¥å£çš„ç±»ï¼Œå®ƒæ˜¯å¯ä»¥è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Seriablizable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">519067123721295773L</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> userId;</span><br><span class="line">	<span class="keyword">public</span> String userName;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">boolean</span> isMale;</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>  åªéœ€è¦é‡‡ç”¨ObjectOutputStreamå’ŒObjectInputStreamå³å¯è½»æ¾å®ç°å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åºåˆ—åŒ–è¿‡ç¨‹</span></span><br><span class="line">User user = <span class="keyword">new</span> User(<span class="number">0</span>, <span class="string">"Jake"</span>, <span class="keyword">true</span>);</span><br><span class="line">ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"cache.txt"</span>));</span><br><span class="line">out.writeObject(user);</span><br><span class="line">out.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"cache.txt"</span>));</span><br><span class="line">User newUser = (User) in.readObject();</span><br><span class="line">in.close();</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†é‡‡ç”¨Serializableæ–¹å¼åºåˆ—åŒ–å¯¹è±¡çš„å…¸å‹è¿‡ç¨‹ï¼Œå¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠå®ç°äº†Serializableæ¥å£çš„Userå¯¹è±¡å†™åˆ°æ–‡ä»¶ä¸­å°±å¯ä»¥å¿«é€Ÿæ¢å¤äº†ï¼Œæ¢å¤åçš„å¯¹è±¡newUserå’Œuserçš„å†…å®¹å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯ä¸¤è€…å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚  </p>
</li>
</ul>
<h4 id="Parcelable"><a href="#Parcelable" class="headerlink" title="Parcelable"></a>Parcelable</h4><ul>
<li><p>Parcelableæ¥å£ã€‚åªè¦å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä¸€ä¸ªç±»çš„å¯¹è±¡å°±å¯ä»¥å®ç°åºåˆ—åŒ–å¹¶å¯ä»¥é€šè¿‡Intentå’ŒBinderä¼ é€’ã€‚  </p>
</li>
<li><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹ç”¨æ³•ï¼š  </p>
  <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Parcelable</span> </span>{</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> userId;</span><br><span class="line">	<span class="keyword">public</span> String userName;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">boolean</span> isMale;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Book book;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> userId, String userName, <span class="keyword">boolean</span> isMale)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.userId = userId;</span><br><span class="line">		<span class="keyword">this</span>.userName = userName;</span><br><span class="line">		<span class="keyword">this</span>.isMale = isMale;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å†…å®¹æè¿°</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">describeContents</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//å‡ ä¹åœ¨æ‰€æœ‰æƒ…å†µä¸‹è¿™ä¸ªæ–¹æ³•éƒ½åº”è¯¥è¿”å›0ï¼Œä»…å½“å½“å‰å¯¹è±¡ä¸­å­˜åœ¨æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œæ­¤æ–¹æ³•è¿”å›1ã€‚</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeToParcel</span><span class="params">(Parcel out, <span class="keyword">int</span> flags)</span> </span>{</span><br><span class="line">		out.writeInt(userId);</span><br><span class="line">		out.writeString(userName);</span><br><span class="line">		out.writeInt(isMale?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">		out.writeParcelable(book, <span class="number">0</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Parcelable.Creator&lt;User&gt; CREATOR = <span class="keyword">new</span> Parcelable.Creator&lt;User&gt;() {</span><br><span class="line">		<span class="function"><span class="keyword">public</span> User <span class="title">createFromParcel</span><span class="params">(Parcel in)</span> </span>{</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> User(in);</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> User[] = newArray(<span class="keyword">int</span> size) {</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> User[size];</span><br><span class="line">		}</span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">User</span><span class="params">(Parcel in)</span> </span>{</span><br><span class="line">		userId = in.readInt();</span><br><span class="line">		userName = in.readString();</span><br><span class="line">		isMale = in.readInt() == <span class="number">1</span>;</span><br><span class="line">		book = in.readParcelable(Thread.currentThread().getContextClassLoader());</span><br><span class="line">		<span class="comment">//ç”±äºbookæ˜¯å¦ä¸€ä¸ªå¯åºåˆ—åŒ–å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒçš„ååºåˆ—åŒ–è¿‡ç¨‹éœ€è¦ä¼ é€’å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œå¦åˆ™ä¼šæŠ¥æ‰¾ä¸åˆ°ç±»çš„é”™è¯¯ã€‚</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç³»ç»Ÿå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šå®ç°äº†Parcelableæ¥å£çš„ç±»ï¼Œå®ƒä»¬éƒ½æ˜¯å¯ä»¥ç›´æ¥åºåˆ—åŒ–çš„ï¼Œæ¯”å¦‚Intentã€Bundleã€Bitmapç­‰ï¼ŒåŒæ—¶Listå’ŒMapä¹Ÿå¯ä»¥åºåˆ—åŒ–ï¼Œå‰ææ˜¯å®ƒä»¬é‡Œé¢çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯åºåˆ—åŒ–çš„ã€‚  </p>
</li>
</ul>
<h4 id="Binder"><a href="#Binder" class="headerlink" title="Binder"></a>Binder</h4><p>ç›´è§‚æ¥è¯´ï¼ŒBinderæ˜¯Androidä¸­çš„ä¸€ä¸ªç±»ï¼Œå®ƒå®ç°äº†IBinderæ¥å£ã€‚ä»IPCè§’åº¦æ¥è¯´ï¼ŒBinderæ˜¯Androidä¸­çš„ä¸€ç§è·¨è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼ŒBinderè¿˜å¯ä»¥ç†è§£ä¸ºä¸€ç§è™šæ‹Ÿçš„ç‰©ç†è®¾å¤‡ï¼Œå®ƒçš„è®¾å¤‡é©±åŠ¨æ˜¯/dev/binderï¼Œè¯¥é€šä¿¡æ–¹å¼åœ¨Linuxä¸­æ²¡æœ‰ï¼›ä»Android Frameworkè§’åº¦æ¥è¯´ï¼ŒBinderæ˜¯ServiceManagerè¿æ¥å„ç§Managerï¼ˆActivityManagerã€WindowManagerï¼Œç­‰ç­‰ï¼‰å’Œç›¸åº”ManagerServiceçš„æ¡¥æ¢ï¼›ä»Androidåº”ç”¨å±‚æ¥è¯´ï¼ŒBinderæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¿›è¡Œé€šä¿¡çš„åª’ä»‹ï¼Œå½“bindServiceçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ªåŒ…å«äº†æœåŠ¡ç«¯ä¸šåŠ¡è°ƒç”¨çš„Binderå¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªBinderå¯¹è±¡ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥è·å–æœåŠ¡ç«¯æä¾›çš„æœåŠ¡æˆ–è€…æ•°æ®ï¼Œè¿™é‡Œçš„æœåŠ¡åŒ…æ‹¬æ™®é€šæœåŠ¡å’ŒåŸºäºAIDLçš„æœåŠ¡ã€‚  </p>
<p>Androidå¼€å‘ä¸­ï¼ŒBInderä¸»è¦ç”¨åœ¨Serviceä¸­ï¼ŒåŒ…æ‹¬AIDLå’ŒMessagerï¼Œå…¶ä¸­æ™®é€šServiceä¸­çš„Binderä¸æ¶‰åŠè¿›ç¨‹é—´é€šä¿¡ï¼Œæ‰€ä»¥è¾ƒä¸ºç®€å•ï¼Œæ— æ³•è§¦åŠBinderçš„æ ¸å¿ƒï¼Œè€ŒMessagerçš„åº•å±‚å…¶å®æ˜¯AIDLã€‚  </p>
<p><img src="https://i.loli.net/2019/09/26/xHhaYTteLmy8r53.jpg" alt="Binderçš„å·¥ä½œæœºåˆ¶.jpg">  </p>
<h3 id="Androidä¸­çš„IPCæ–¹å¼"><a href="#Androidä¸­çš„IPCæ–¹å¼" class="headerlink" title="Androidä¸­çš„IPCæ–¹å¼"></a>Androidä¸­çš„IPCæ–¹å¼</h3><h4 id="ä½¿ç”¨Bundle"><a href="#ä½¿ç”¨Bundle" class="headerlink" title="ä½¿ç”¨Bundle"></a>ä½¿ç”¨Bundle</h4><p>Activityã€Serviceã€Receiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®  </p>
<h4 id="ä½¿ç”¨æ–‡ä»¶å…±äº«"><a href="#ä½¿ç”¨æ–‡ä»¶å…±äº«" class="headerlink" title="ä½¿ç”¨æ–‡ä»¶å…±äº«"></a>ä½¿ç”¨æ–‡ä»¶å…±äº«</h4><p>æ–‡ä»¶å…±äº«æ–¹å¼é€‚åˆåœ¨å¯¹æ•°æ®åŒæ­¥è¦æ±‚ä¸é«˜çš„è¿›ç¨‹ä¹‹å‰è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä¸”è¦å¦¥å–„å¤„ç†å¹¶å‘è¯»/å†™çš„é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼ŒSharedPreferencesæ˜¯ä¸ªç‰¹ä¾‹ï¼Œä¸å»ºè®®åœ¨è¿›ç¨‹é—´é€šä¿¡ä¸­ä½¿ç”¨SharedPreferencesã€‚  </p>
<h4 id="ä½¿ç”¨Messenger"><a href="#ä½¿ç”¨Messenger" class="headerlink" title="ä½¿ç”¨Messenger"></a>ä½¿ç”¨Messenger</h4><p><img src="https://i.loli.net/2019/09/26/LEwqeRUbx7AVHvQ.jpg" alt="Messengerå·¥ä½œåŸç†.jpg">  </p>
<h4 id="ä½¿ç”¨AIDL"><a href="#ä½¿ç”¨AIDL" class="headerlink" title="ä½¿ç”¨AIDL"></a>ä½¿ç”¨AIDL</h4><p>Messengeræ˜¯å·²ä¸²è¡Œçš„æ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æœå¤§é‡çš„æ¶ˆæ¯åŒæ—¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä»ç„¶åªèƒ½ä¸€ä¸ªä¸ªå¤„ç†ï¼Œå¦‚æœæœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚ï¼Œé‚£ä¹ˆç”¨Messengerå°±ä¸å¤ªé€‚åˆäº†ã€‚åŒæ—¶ï¼ŒMessengerçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†ä¼ é€’æ¶ˆæ¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦è·¨è¿›ç¨‹è°ƒç”¨æœåŠ¡ç«¯çš„æ–¹æ³•ï¼Œè¿™ç§æƒ…å½¢ç”¨Messengerå°±æ— æ³•åšåˆ°äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨AIDLæ¥å®ç°è·¨è¿›ç¨‹çš„æ–¹æ³•è°ƒç”¨ã€‚AIDLä¹Ÿæ˜¯Messengerçš„åº•å±‚å®ç°ï¼Œå› æ­¤ï¼ŒMessengeræœ¬è´¨ä¸Šä¹Ÿæ˜¯AIDLï¼Œåªä¸è¿‡ç³»ç»Ÿä¸ºæˆ‘ä»¬åšäº†å°è£…ä»è€Œæ–¹ä¾¿ä¸Šå±‚çš„è°ƒç”¨è€Œå·²ã€‚  </p>
<p>åœ¨Binderçš„åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£AIDLã€‚è¿™é‡Œå…ˆä»‹ç»ä½¿ç”¨AIDLæ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„æµç¨‹ï¼Œåˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤ä¸ªæ–¹é¢ã€‚  </p>
<ol>
<li><p>æœåŠ¡ç«¯<br> æœåŠ¡ç«¯é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªServiceç”¨æ¥ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªAIDLæ–‡ä»¶ï¼Œå°†æš´éœ²ç»™å®¢æˆ·ç«¯çš„æ¥å£åœ¨è¿™ä¸ªAIDLæ–‡ä»¶ä¸­å£°æ˜ï¼Œæœ€ååœ¨Serviceä¸­å®ç°è¿™ä¸ªAIDLæ¥å£å³å¯ã€‚  </p>
</li>
<li><p>å®¢æˆ·ç«¯<br> å®¢æˆ·ç«¯æ‰€è¦åšçš„äº‹æƒ…å°±ç¨å¾®ç®€å•ä¸€äº›ï¼Œé¦–å…ˆéœ€è¦ç»‘å®šæœåŠ¡ç«¯çš„Serviceï¼Œç»‘å®šæˆåŠŸåï¼Œå°†æœåŠ¡ç«¯è¿”å›çš„Binderå¯¹è±¡è½¬æˆAIDLæ¥å£æ‰€å±çš„ç±»å‹ï¼Œæ¥ç€å°±å¯ä»¥è°ƒç”¨AIDLä¸­çš„æ–¹æ³•äº†ã€‚  </p>
</li>
<li><p>AIDLæ¥å£çš„åˆ›å»º<br> é¦–å…ˆçœ‹AIDLæ¥å£çš„åˆ›å»ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåç¼€ä¸ºAIDLçš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å£°æ˜äº†ä¸€ä¸ªæ¥å£å’Œä¸¤ä¸ªæ¥å£æ–¹æ³•ï¼š  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// IBookManager.aidl</span></span><br><span class="line"><span class="keyword">package</span> com.ryg.chapter_2.aidl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ryg.chapter_2.aidl.Book;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IBookManager</span> </span>{</span><br><span class="line">	<span class="function">List&lt;Book&gt; <span class="title">getBookList</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">addBook</span><span class="params">(in Book book)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> AIDLæ–‡ä»¶æ”¯æŒçš„æ•°æ®ç±»å‹ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">æ•°æ®ç±»å‹</th>
<th align="left">å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">åŸºæœ¬æ•°æ®ç±»å‹</td>
<td align="left">intã€longã€charã€booleanã€doubleç­‰</td>
</tr>
<tr>
<td align="left">String å’Œ CharSequence</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">List</td>
<td align="left">åªæ”¯æŒArrayListï¼Œé‡Œé¢æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»èƒ½å¤Ÿè¢«AIDLæ”¯æŒ</td>
</tr>
<tr>
<td align="left">Map</td>
<td align="left">åªæ”¯æŒHashMapï¼Œé‡Œé¢çš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»è¢«AIDLæ”¯æŒï¼ŒåŒ…æ‹¬keyå’Œvalue</td>
</tr>
<tr>
<td align="left">Parcelable</td>
<td align="left">æ‰€æœ‰å®ç°äº†Parcelableæ¥å£çš„å¯¹è±¡</td>
</tr>
<tr>
<td align="left">AIDL</td>
<td align="left">æ‰€æœ‰çš„AIDLæ¥å£æœ¬èº«ä¹Ÿå¯ä»¥åœ¨AIDLæ–‡ä»¶ä¸­ä½¿ç”¨</td>
</tr>
</tbody></table>
<p> ä»¥ä¸Š6ç§æ•°æ®ç±»å‹å°±æ˜¯AIDLæ‰€æ”¯æŒçš„æ‰€æœ‰æ•°æ®ç±»å‹ï¼Œå…¶ä¸­è‡ªå®šä¹‰çš„Parcelableå¯¹è±¡å’ŒAIDLå¯¹è±¡å¿…é¡»è¦æ˜¾å¼importè¿›æ¥ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦å’Œå½“å‰AIDLæ–‡ä»¶ä½äºåŒä¸€ä¸ªåŒ…å†…ã€‚  </p>
<p> å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœAIDLæ–‡ä»¶ä¸­ç”¨åˆ°äº†è‡ªå®šä¹‰çš„Parcelableå¯¹è±¡ï¼Œé‚£ä¹ˆå¿…é¡»æ–°å»ºä¸€ä¸ªå’Œå®ƒåŒåçš„AIDLæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å£°æ˜å®ƒä¸ºParcelableç±»å‹ã€‚  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// Book.aidl</span></span><br><span class="line"><span class="keyword">package</span> com.ryg.chapter_2.aidl;</span><br><span class="line"></span><br><span class="line">parcelable Book;</span><br></pre></td></tr></tbody></table></figure>

<p> AIDLä¸­é™¤äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå…¶ä»–ç±»å‹çš„å‚æ•°å¿…é¡»æ ‡ä¸Šæ–¹å‘ï¼šinã€outæˆ–è€…inoutï¼Œinè¡¨ç¤ºè¾“å…¥æ€§å‚æ•°ï¼Œoutè¡¨ç¤ºè¾“å‡ºå‹å‚æ•°ï¼Œinoutè¡¨ç¤ºè¾“å…¥è¾“å‡ºå‹å‚æ•°ã€‚  </p>
<p> AIDLæ¥å£ä¸­åªæ”¯æŒæ–¹æ³•ï¼Œä¸æ”¯æŒå£°æ˜é™æ€å¸¸é‡ï¼Œè¿™ä¸€ç‚¹åŒºåˆ«äºä¼ ç»Ÿçš„æ¥å£ã€‚  </p>
</li>
<li><p>è¿œç¨‹æœåŠ¡ç«¯Serviceçš„å®ç°<br> ä¸Šé¢è®²è¿°äº†å¦‚ä½•å®šä¹‰AIDLæ¥å£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å®ç°è¿™ä¸ªæ¥å£äº†ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªServiceï¼Œç§°ä¸ºBookManagerServiceï¼Œä»£ç å¦‚ä¸‹ï¼š  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookManagerService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"BMS"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> CopyOnWriteArrayList&lt;Book&gt; mBookList = <span class="keyword">new</span> CopyOnWriteArrayList&lt;Book&gt;();</span><br><span class="line">	<span class="comment">//CopyOnWriteArrayListæ”¯æŒå¹¶å‘è¯»/å†™ã€‚</span></span><br><span class="line">	<span class="comment">//å‰é¢æˆ‘ä»¬æåˆ°ï¼ŒAIDLæ–¹æ³•æ˜¯åœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± æ‰§è¡Œçš„ï¼Œå› æ­¤ï¼Œå½“å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥çš„æ—¶å€™ï¼Œ</span></span><br><span class="line">	<span class="comment">//ä¼šå­˜åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®çš„æƒ…å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨AIDLæ–¹æ³•ä¸­å¤„ç†çº¿ç¨‹åŒæ­¥ï¼Œ</span></span><br><span class="line">	<span class="comment">//è€Œæˆ‘ä»¬è¿™é‡Œç›´æ¥ä½¿ç”¨CopyOnWriteArrayListæ¥è¿›è¡Œè‡ªåŠ¨çš„çº¿ç¨‹åŒæ­¥ã€‚</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Binder mBinder = <span class="keyword">new</span> IBookManager.Stub() {</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">	        <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">getBookList</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException </span>{</span><br><span class="line">        	        <span class="keyword">return</span> mBookList;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">	        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addBook</span><span class="params">(Book book)</span> <span class="keyword">throws</span> RemoteException </span>{</span><br><span class="line">           			mBookList.add(book);</span><br><span class="line">       		}</span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>{</span><br><span class="line">       		<span class="keyword">super</span>.onCreate();</span><br><span class="line">	        mBookList.add(<span class="keyword">new</span> Book(<span class="number">1</span>, <span class="string">"Android"</span>));</span><br><span class="line">	        mBookList.add(<span class="keyword">new</span> Book(<span class="number">2</span>, <span class="string">"Ios"</span>));</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>{</span><br><span class="line">	        <span class="keyword">return</span> mBinder;</span><br><span class="line">   		}</span><br><span class="line">       }</span><br></pre></td></tr></tbody></table></figure>

<p> ç„¶åæˆ‘ä»¬éœ€è¦åœ¨XMLä¸­æ³¨å†Œè¿™ä¸ªServiceï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">&lt;service</span><br><span class="line">	android:name=<span class="string">".aidl.BookManagerService"</span></span><br><span class="line">	android:process=<span class="string">":remote"</span> &gt;</span><br><span class="line">&lt;/service&gt;</span><br></pre></td></tr></tbody></table></figure>
<p> æ³¨æ„BookManagerServiceæ˜¯è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­çš„ï¼Œå®ƒå’Œå®¢æˆ·ç«¯çš„Activityä¸åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œè¿™æ ·å°±æ„æˆäº†è¿›ç¨‹é—´é€šä¿¡çš„åœºæ™¯ã€‚  </p>
</li>
<li><p>å®¢æˆ·ç«¯çš„å®ç°<br> å®¢æˆ·ç«¯çš„å®ç°å°±æ¯”è¾ƒç®€å•äº†ï¼Œé¦–å…ˆè¦ç»‘å®šè¿œç¨‹æœåŠ¡ï¼Œç»‘å®šæˆåŠŸåå°†æœåŠ¡ç«¯è¿”å›çš„Binderå¯¹è±¡è½¬æ¢æˆAIDLæ¥å£ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£å»è°ƒç”¨æœåŠ¡ç«¯çš„è¿œç¨‹æ–¹æ³•äº†ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚  </p>
 <figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookManagerActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"BookManagerActivity"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> ServiceConnection mConnection = <span class="keyword">new</span> ServiceConnection() {</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceConnected</span><span class="params">(ComponentName className, IBinder service)</span> </span>{</span><br><span class="line">			IBookManager bookManager = IBookManager.Stub.asInterface(service);</span><br><span class="line">			<span class="keyword">try</span> {</span><br><span class="line">				List&lt;Book&gt; list = bookManager.getBookList();</span><br><span class="line">				Log.i(TAG, <span class="string">"query book list, list type:"</span> + list.getClass().getCanonicalName());</span><br><span class="line">				Log.i(TAG, <span class="string">"query book list:"</span> + list.toString());</span><br><span class="line">			} <span class="keyword">catch</span> (RemoteException e) {</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceDisconnected</span><span class="params">(ComponentName className)</span> </span>{</span><br><span class="line">		}</span><br><span class="line">	};</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.activity_book_manager);</span><br><span class="line">		Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, BookManagerService.class);</span><br><span class="line">		bindService(intent, mConnection, Context.BIND_AUTO_CREATE);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>{</span><br><span class="line">		unbindService(mConnection);</span><br><span class="line">		<span class="keyword">super</span>.onDestroy();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> ç»‘å®šæˆåŠŸåï¼Œä¼šé€šè¿‡bookManagerå»è°ƒç”¨getBookListæ–¹æ³•ï¼Œç„¶åæ‰“å°å‡ºæ‰€è·å–çš„å›¾ä¹¦ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæœåŠ¡ç«¯çš„æ–¹æ³•æœ‰å¯èƒ½éœ€è¦å¾ˆä¹…æ‰èƒ½æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªæ—¶å€™ä¸‹é¢çš„ä»£ç å°±ä¼šå¯¼è‡´ANRï¼Œè¿™ä¸€ç‚¹æ˜¯éœ€è¦æ³¨æ„çš„ï¼Œåé¢ä¼šå†ä»‹ç»è¿™ç§æƒ…å†µï¼Œä¹‹æ‰€ä»¥å…ˆè¿™ä¹ˆå†™æ˜¯ä¸ºäº†è®©è¯»è€…æ›´å¥½åœ°äº†è§£AIDLçš„å®ç°æ­¥éª¤ã€‚  </p>
<p> æ¥ç€åœ¨XMLä¸­æ³¨å†Œæ­¤Activityï¼Œè¿è¡Œç¨‹åºã€‚  </p>
<p> RemoteCallbackListæ˜¯ç³»ç»Ÿä¸“é—¨æä¾›çš„ç”¨äºåˆ é™¤è·¨è¿›ç¨‹listenerçš„æ¥å£ã€‚RemoteCallbackListæ˜¯ä¸€ä¸ªæ³›å‹ï¼Œæ”¯æŒç®¡ç†ä»»æ„çš„AIDLæ¥å£ã€‚  </p>
<pre><code> - è™½ç„¶è¯´å¤šæ¬¡è·¨è¿›ç¨‹ä¼ è¾“å®¢æˆ·ç«¯çš„åŒä¸€ä¸ªå¯¹è±¡ä¼šåœ¨æœåŠ¡ç«¯ç”Ÿæˆä¸åŒçš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›æ–°ç”Ÿæˆçš„å¯¹è±¡æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼Œé‚£å°±æ˜¯å®ƒä»¬çš„åº•å±‚çš„Binderå¯¹è±¡æ˜¯åŒä¸€ä¸ªã€‚å½“å®¢æˆ·ç«¯è§£æ³¨å†Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦éå†æœåŠ¡ç«¯æ‰€æœ‰çš„listenerï¼Œæ‰¾å‡ºé‚£ä¸ªå’Œè§£æ³¨å†Œlistenerå…·æœ‰ç›¸åŒBinderå¯¹è±¡çš„æœåŠ¡ç«¯listenerå¹¶æŠŠå®ƒåˆ æ‰å³å¯ã€‚  
 - RemoteCallbackListè¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å½“å®¢æˆ·ç«¯è¿›ç¨‹ç»ˆæ­¢åï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨ç§»é™¤å®¢æˆ·ç«¯æ‰€æ³¨å†Œçš„listenerã€‚  
 - RemoteCallbackListå†…éƒ¨è‡ªåŠ¨å®ç°äº†çº¿ç¨‹åŒæ­¥åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æ³¨å†Œå’Œè§£æ³¨å†Œæ—¶ï¼Œä¸éœ€è¦åšé¢å¤–çš„çº¿ç¨‹åŒæ­¥å·¥ä½œã€‚  
</code></pre>
</li>
</ol>
<p>åˆ°è¿™é‡Œï¼ŒAIDLçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å·²ç»ä»‹ç»å®Œäº†ï¼Œä½†æ˜¯æœ‰å‡ ç‚¹è¿˜éœ€è¦å†æ¬¡è¯´æ˜ä¸€ä¸‹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•è¿è¡Œåœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± ä¸­ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæœåŠ¡ç«¯æ–¹æ³•æ‰§è¡Œæ¯”è¾ƒè€—æ—¶ï¼Œå°±ä¼šå¯¼è‡´å®¢æˆ·ç«¯çº¿ç¨‹é•¿æ—¶é—´åœ°é˜»å¡åœ¨è¿™é‡Œï¼Œè€Œå¦‚æœè¿™ä¸ªå®¢æˆ·ç«¯çº¿ç¨‹æ˜¯UIçº¿ç¨‹çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å®¢æˆ·ç«¯ANRï¼Œè¿™å½“ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ˜ç¡®çŸ¥é“æŸä¸ªè¿œç¨‹æ–¹æ³•æ˜¯è€—æ—¶çš„ï¼Œé‚£ä¹ˆå°±è¦é¿å…åœ¨å®¢æˆ·ç«¯çš„UIçº¿ç¨‹ä¸­å»è®¿é—®è¿œç¨‹æ–¹æ³•ã€‚ç”±äºå®¢æˆ·ç«¯çš„onServiceConnectedå’ŒonSerivceDisconnectedæ–¹æ³•éƒ½è¿è¡Œåœ¨UIçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ä¹Ÿä¸å¯ä»¥åœ¨å®ƒä»¬é‡Œé¢ç›´æ¥è°ƒç”¨æœåŠ¡ç«¯çš„è€—æ—¶æ–¹æ³•ï¼Œè¿™ç‚¹è¦å°¤å…¶æ³¨æ„ã€‚å¦å¤–ï¼Œç”±äºæœåŠ¡ç«¯çš„æ–¹æ³•æœ¬èº«å°±è¿è¡Œåœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± ä¸­ï¼Œæ‰€ä»¥æœåŠ¡ç«¯æ–¹æ³•æœ¬èº«å°±å¯ä»¥æ‰§è¡Œå¤§é‡è€—æ—¶æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™åˆ‡è®°ä¸è¦åœ¨æœåŠ¡ç«¯æ–¹æ³•ä¸­å¼€çº¿ç¨‹å»è¿›è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œé™¤éä½ æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆï¼Œå¦åˆ™ä¸å»ºè®®è¿™ä¹ˆåšã€‚  </p>
<p>åŒç†ï¼Œå½“è¿œç¨‹æœåŠ¡ç«¯éœ€è¦è°ƒç”¨å®¢æˆ·ç«¯çš„listenerä¸­çš„æ–¹æ³•æ—¶ï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•ä¹Ÿè¿è¡Œåœ¨Binderçº¿ç¨‹æ± ä¸­ï¼Œåªä¸è¿‡æ˜¯å®¢æˆ·ç«¯çš„çº¿ç¨‹æ± ã€‚æ‰€ä»¥æˆ‘ä»¬åŒæ ·ä¸å¯ä»¥åœ¨æœåŠ¡ç«¯ä¸­è°ƒç”¨å®¢æˆ·ç«¯çš„è€—æ—¶æ–¹æ³•ã€‚  </p>
<p>æœ€åä¸€æ­¥ï¼šæƒé™éªŒè¯ï¼   </p>
<p>æ€»ç»“ä¸€ä¸‹å¤§è‡´æµç¨‹ï¼š<br>é¦–å…ˆåˆ›å»ºä¸€ä¸ªServiceå’Œä¸€ä¸ªAIDLæ¥å£ï¼Œæ¥ç€åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿è‡ªAIDLæ¥å£ä¸­çš„Stubç±»å¹¶å®ç°Stubä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œåœ¨Serviceçš„onBindæ–¹æ³•ä¸­è¿”å›è¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œç„¶åå®¢æˆ·ç«¯å°±å¯ä»¥ç»‘å®šæœåŠ¡ç«¯Serviceï¼Œå»ºç«‹è¿æ¥åå°±å¯ä»¥è®¿é—®è¿œç¨‹æœåŠ¡ç«¯çš„æ–¹æ³•äº†ã€‚  </p>
<h4 id="ä½¿ç”¨ContentProvider"><a href="#ä½¿ç”¨ContentProvider" class="headerlink" title="ä½¿ç”¨ContentProvider"></a>ä½¿ç”¨ContentProvider</h4><h4 id="ä½¿ç”¨Socket"><a href="#ä½¿ç”¨Socket" class="headerlink" title="ä½¿ç”¨Socket"></a>ä½¿ç”¨Socket</h4><h3 id="å››å¤§ç»„ä»¶çš„å·¥ä½œè¿‡ç¨‹"><a href="#å››å¤§ç»„ä»¶çš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="å››å¤§ç»„ä»¶çš„å·¥ä½œè¿‡ç¨‹"></a>å››å¤§ç»„ä»¶çš„å·¥ä½œè¿‡ç¨‹</h3><p>Androidçš„å››å¤§ç»„ä»¶ä¸­é™¤äº†BroadcastReceiverä»¥å¤–,å…¶ä»–ä¸‰ç§ç»„ä»¶éƒ½å¿…é¡»åœ¨AndroidManifestä¸­æ³¨å†Œï¼Œå¯¹äºBroadcastReceiveræ¥è¯´ï¼Œå®ƒæ—¢å¯ä»¥åœ¨AndroidManifestä¸­æ³¨å†Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»£ç æ¥æ³¨å†Œã€‚åœ¨è°ƒç”¨æ–¹å¼ä¸Šï¼ŒActivityã€Serviceå’ŒBroadcastReceiveréœ€è¦å€ŸåŠ©Intentï¼Œè€ŒContentProvideråˆ™æ— é¡»å€ŸåŠ©Intentã€‚  </p>
<p>å¹¿æ’­ï¼ˆBroadcastReceiverï¼‰çš„æ³¨å†Œæœ‰ä¸¤ç§æ–¹å¼ï¼šé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œã€‚é™æ€æ³¨å†Œæ˜¯æŒ‡åœ¨AndroidManifestä¸­æ³¨å†Œå¹¿æ’­ï¼Œè¿™ç§å¹¿æ’­åœ¨åº”ç”¨å®‰è£…æ—¶ä¼šè¢«ç³»ç»Ÿè§£æï¼Œæ­¤ç§å½¢å¼çš„å¹¿æ’­ä¸éœ€è¦åº”ç”¨å¯åŠ¨å°±å¯ä»¥æ”¶åˆ°ç›¸åº”çš„å¹¿æ’­ã€‚åŠ¨æ€æ³¨å†Œå¹¿æ’­éœ€è¦é€šè¿‡Context.registerReceiver()æ¥å®ç°ï¼Œå¹¶ä¸”åœ¨ä¸éœ€è¦çš„æ—¶å€™è¦é€šè¿‡Context.unRegisterReceiver()æ¥è§£é™¤å¹¿æ’­ï¼Œæ­¤ç§å½¢å¼çš„å¹¿æ’­å¿…é¡»è¦åº”ç”¨å¯åŠ¨æ‰èƒ½æ³¨å†Œå¹¶æ¥æ”¶å¹¿æ’­,å› ä¸ºåº”ç”¨ä¸å¯åŠ¨å°±æ— æ³•æ³¨å†Œå¹¿æ’­,æ— æ³•æ³¨å†Œå¹¿æ’­å°±æ— æ³•æ”¶åˆ°ç›¸åº”çš„å¹¿æ’­ã€‚  </p>
<p><a href="https://youtu.be/8KunR2xqkMM">Androidå±‚æ¬¡åˆ†æ â€“ä»é¡¶å±‚åˆ°åº•å±‚</a>  </p>
<h3 id="Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± "><a href="#Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± " class="headerlink" title="Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± "></a>Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± </h3><p>ä¸»çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹æ‰€æ‹¥æœ‰çš„çº¿ç¨‹,åœ¨Javaä¸­é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹,è¿™ä¸ªçº¿ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹.ä¸»çº¿ç¨‹ä¸»è¦å¤„ç†ç•Œé¢äº¤äº’ç›¸å…³çš„é€»è¾‘,å› ä¸ºç”¨æˆ·éšæ—¶ä¼šå’Œç•Œé¢å‘ç”Ÿäº¤äº’,å› æ­¤ä¸»çº¿ç¨‹åœ¨ä»»ä½•æ—¶å€™éƒ½å¿…é¡»æœ‰è¾ƒé«˜çš„å“åº”é€Ÿåº¦,å¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ç§ç•Œé¢å¡é¡¿çš„æ„Ÿè§‰.ä¸ºäº†ä¿æŒè¾ƒé«˜çš„å“åº”é€Ÿåº¦,è¿™å°±è¦æ±‚ä¸»çº¿ç¨‹ä¸­ä¸èƒ½æ‰§è¡Œè€—æ—¶çš„ä»»åŠ¡,è¿™ä¸ªæ—¶å€™å­çº¿ç¨‹å°±æ´¾ä¸Šç”¨åœºäº†.å­çº¿ç¨‹ä¹Ÿå«å·¥ä½œçº¿ç¨‹,é™¤äº†ä¸»çº¿ç¨‹ä»¥å¤–çš„çº¿ç¨‹éƒ½æ˜¯å­çº¿ç¨‹.  </p>
<p>Androidæ²¿ç”¨äº†Javaçš„çº¿ç¨‹æ¨¡å‹ï¼Œå…¶ä¸­çš„çº¿ç¨‹ä¹Ÿåˆ†ä¸ºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ï¼Œå…¶ä¸­ä¸»çº¿ç¨‹ä¹Ÿå«UIçº¿ç¨‹ã€‚ä¸»çº¿ç¨‹çš„ä½œç”¨æ˜¯è¿è¡Œå››å¤§ç»„ä»¶ä»¥åŠå¤„ç†å®ƒä»¬å’Œç”¨æˆ·çš„äº¤äº’ï¼Œè€Œå­çº¿ç¨‹çš„ä½œç”¨åˆ™æ˜¯æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€I/Oæ“ä½œç­‰ã€‚  </p>
<p>Androidçš„çº¿ç¨‹å½¢æ€ï¼šä¼ ç»Ÿçš„Threadã€AsyncTaskã€HandlerThreadã€IntentServiceã€‚  </p>
<p>Androidçº¿ç¨‹çš„åŸºæœ¬ç”¨æ³•ï¼š  </p>
<ol>
<li><p>æ–°å»ºä¸€ä¸ªç±»ç»§æ‰¿è‡ªThreadï¼Œç„¶åé‡å†™çˆ¶ç±»çš„run()æ–¹æ³•ï¼Œå¹¶åœ¨é‡Œé¢å†™è€—æ—¶é€»è¾‘  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//å¤„ç†å…·ä½“çš„é€»è¾‘</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ä½•å¯åŠ¨ï¼Ÿ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> MyThread().start();</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å®ç°Runnableæ¥å£çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªçº¿ç¨‹  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//å¤„ç†å…·ä½“çš„é€»è¾‘</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ä½•å¯åŠ¨ï¼Ÿ  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Mythread myThread = <span class="keyword">new</span> MyThread();</span><br><span class="line"><span class="keyword">new</span> Thread(myThread).start();</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä½¿ç”¨åŒ¿åç±»çš„æ–¹å¼ï¼Œè¿™ç§æ–¹æ³•æ›´ä¸ºå¸¸è§  </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//å¤„ç†å…·ä½“çš„é€»è¾‘</span></span><br><span class="line">    }</span><br><span class="line">}).start();</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h3><p><a href="https://houbb.github.io/2019/02/26/java-time-nanotime-02">Java æ—¶é—´ä¹‹ currentTimeMillis ä¸ nanoTime - æ—¶é—´ç²¾ç¡®æµ‹é‡</a>  </p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡ ä¸ªCè¯­è¨€çŸ¥è¯†ç‚¹</title>
    <url>/2018/12/27/c/</url>
    <content><![CDATA[<p>é‡æ–°æ•´ç†ä»¥å‰çš„ç¬”è®°ï¼ŒåŸºæœ¬æ¥è‡ªã€ŠCè¯­è¨€æ·±åº¦è§£å‰–ã€‹ã€‚  </p>
<span id="more"></span>

<h1 id="åŸç -åç -è¡¥ç "><a href="#åŸç -åç -è¡¥ç " class="headerlink" title="åŸç /åç /è¡¥ç "></a>åŸç /åç /è¡¥ç </h1><p>åŸç ï¼šåŸç å°±æ˜¯è¿™ä¸ªæ•°æœ¬èº«çš„äºŒè¿›åˆ¶å½¢å¼ï¼Œå…¶ä¸­æœ€é«˜ä½ä¸ºç¬¦å·ä½ã€‚<br>è¡¥ç ï¼šåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ•°å€¼ä¸€å¾‹ç”¨è¡¥ç æ¥è¡¨ç¤ºå’Œå­˜å‚¨ã€‚åŸå› åœ¨äºï¼Œä½¿ç”¨è¡¥ç ï¼Œå¯ä»¥å°†ç¬¦å·ä½å’Œæ•°å€¼åŸŸç»Ÿä¸€å¤„ç†ï¼›åŒæ—¶ï¼ŒåŠ æ³•å’Œå‡æ³•ä¹Ÿå¯ä»¥ç»Ÿä¸€å¤„ç†ã€‚<br>åç ï¼šæ­£æ•°çš„åç ä¸å…¶åŸç ç›¸åŒï¼›è´Ÿæ•°çš„åç æ˜¯å¯¹å…¶åŸç é€ä½å–åï¼Œä½†ç¬¦å·ä½é™¤å¤–ã€‚  </p>
<p>æ±‚è¡¥ç çš„æ–¹æ³•ï¼šæ•´æ•°æˆ–é›¶ï¼Œåˆ™è¡¥ç ç­‰äºåŸç ï¼Œè´Ÿæ•°åˆ™è¡¥ç ç­‰äºé™¤ç¬¦å·ä½å¤–ï¼Œå„ä½å–ååŠ ä¸€<br>æ±‚åç çš„æ–¹æ³•ï¼šæ­£æ•°ï¼Œåç ä¸åŸç ç›¸åŒï¼Œè´Ÿæ•°ï¼Œå¯¹å…¶åŸç é€ä½å–åï¼Œä½†ç¬¦å·ä½é™¤å¤–ï¼Œç¬¦å·ä½è¿˜æ˜¯ä¸€  </p>
<p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ•°å€¼ä¸€å¾‹ç”¨è¡¥ç æ¥è¡¨ç¤ºã€‚ </p>
<p>é—®é¢˜1ï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">char</span> a[<span class="number">1000</span>];</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++)</span><br><span class="line">{</span><br><span class="line">	a[i] = <span class="number">-1</span>-i;</span><br><span class="line">}</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,<span class="built_in">strlen</span>(a)); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><span style="color:red"> ä»¥ä¸Šä»£ç è¾“å‡ºä¸º255 </span>  </p>
<p>é—®é¢˜2ï¼š<br>char a = -300ï¼Œæ±‚ int a<br>300çš„åŸç ï¼š1 0010 1100<br>å–åï¼š1101 0011<br>åŠ ä¸€ï¼š1101 0100<br>300çš„è¡¥ç ï¼š1101 0100<br>ç¬¦å·ä½ï¼š1<br>æ±‚åŸç ï¼š101 0100<br>å–åï¼š010 1011<br>åŠ ä¸€ï¼š010 1100<br>æ±‚å¾—ï¼š-44  </p>
<p>é—®é¢˜3ï¼š<br>int i = -20;<br>unsigned j = 10;<br>i+jçš„å€¼ä¸ºå¤šå°‘ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ  </p>
<p>é—®é¢˜4ï¼š<br>ä¸‹é¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> i ;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">9</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">{</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%u\n"</span>,i);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><ul>
<li>åŸºæœ¬ç±»å‹ - æ•°å€¼ç±»å‹ã€å­—ç¬¦ç±»å‹</li>
<li>æ„é€ ç±»å‹ - æ•°ç»„ã€ç»“æ„ä½“ã€å…±ç”¨ä½“ã€æšä¸¾ç±»å‹</li>
<li>æŒ‡é’ˆç±»å‹</li>
<li>ç©ºç±»å‹</li>
</ul>
<p>å¸¸ç”¨æ•°æ®ç±»å‹åœ¨32ä½å’Œ64ä½CPUä¸Šçš„å­—èŠ‚æ•°æ¯”è¾ƒï¼š<br>æµ‹è¯•ç¨‹åºï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"char[%d], char*[%d], short int[%d], int[%d], unsigned int[%d], float[%d], double[%d], long[%d], long long[%d], unsigned long[%d]\n"</span>,</span><br><span class="line">			<span class="keyword">sizeof</span>(<span class="keyword">char</span>),<span class="keyword">sizeof</span>(<span class="keyword">char</span> *),</span><br><span class="line">			<span class="keyword">sizeof</span>(<span class="keyword">short</span> <span class="keyword">int</span>),<span class="keyword">sizeof</span>(<span class="keyword">int</span>),<span class="keyword">sizeof</span>(<span class="keyword">unsigned</span> <span class="keyword">int</span>),</span><br><span class="line">			<span class="keyword">sizeof</span>(<span class="keyword">float</span>),<span class="keyword">sizeof</span>(<span class="keyword">double</span>),</span><br><span class="line">			<span class="keyword">sizeof</span>(<span class="keyword">long</span>),<span class="keyword">sizeof</span>(<span class="keyword">long</span> <span class="keyword">long</span>),<span class="keyword">sizeof</span>(<span class="keyword">unsigned</span> <span class="keyword">long</span>));</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸åŒCPUç±»å‹çš„è¾“å‡ºç»“æœï¼š<br>x86_64:  </p>
<blockquote>
<p>char[1], char*[8], short int[2], int[4], unsigned int[4], float[4], double[8], long[8], long long[8], unsigned long[8]  </p>
</blockquote>
<p>i686:  </p>
<blockquote>
<p>char[1], char*[4], short int[2], int[4], unsigned int[4], float[4], double[8], long[4], long long[8], unsigned long[4]  </p>
</blockquote>
<p>æ€»ç»“ï¼šå¾ˆæ˜æ˜¾çš„æ¯”è¾ƒç»“æœï¼ŒæŒ‡é’ˆå’Œé•¿æ•´å½¢ç”±4ä¸ªå­—èŠ‚å‡ä¸º8ä¸ªå­—èŠ‚  </p>
<h1 id="32ä¸ªå…³é”®å­—"><a href="#32ä¸ªå…³é”®å­—" class="headerlink" title="32ä¸ªå…³é”®å­—"></a>32ä¸ªå…³é”®å­—</h1><p>ä¸¾ä¾‹ï¼š<br>register - å£°æ˜å¯„å­˜å™¨å˜é‡<br>const - å£°æ˜åªè¯»å˜é‡<br>volatile - è¯´æ˜å˜é‡åœ¨ç¨‹åºæ‰§è¡Œä¸­å¯è¢«éšå«åœ°æ”¹å˜ã€‚è¿™ä¸ªå…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜&gt;é‡çš„ä»£ç å°±ä¸å†è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œå¯ä»¥æä¾›å¯¹ç‰¹æ®Šåœ°å€çš„ç¨³å®šè®¿é—®ã€‚  </p>
<p>åˆ†æï¼š<br>ä¸€ä¸ªå®šä¹‰ä¸ºvolatileçš„å˜é‡æ˜¯è¯´è¿™å˜é‡å¯èƒ½ä¼šè¢«æ„æƒ³ä¸åˆ°åœ°æ”¹å˜ï¼Œè¿™æ ·ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šå»å‡è®¾è¿™ä¸ªå˜é‡çš„å€¼äº†ã€‚ç²¾ç¡®åœ°è¯´å°±æ˜¯ï¼Œä¼˜åŒ–å™¨åœ¨ç”¨åˆ°è¿™ä¸ªå˜é‡æ—¶å¿…é¡»æ¯æ¬¡éƒ½å°å¿ƒåœ°é‡æ–°è¯»å–è¿™ä¸ªå˜é‡çš„å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¿å­˜åœ¨å¯„å­˜å™¨é‡Œçš„å¤‡ä»½ã€‚(å¯¹Javaæ¥è¯´ï¼šJavaå†…å­˜æ¨¡å‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå„ä¸ªçº¿ç¨‹ä¼šå°†å…±äº«å˜é‡ä»ä¸»å†…å­˜ä¸­æ‹·è´åˆ°å·¥ä½œå†…å­˜ï¼Œç„¶åæ‰§è¡Œå¼•æ“ä¼šåŸºäºå·¥ä½œå†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œå¤„ç†ã€‚çº¿ç¨‹åœ¨å·¥ä½œå†…å­˜è¿›è¡Œæ“ä½œåä½•æ—¶ä¼šå†™åˆ°ä¸»å†…å­˜ä¸­ï¼Ÿè¿™ä¸ªæ—¶æœºå¯¹æ™®é€šå˜é‡æ˜¯æ²¡æœ‰è§„å®šçš„ï¼Œè€Œé’ˆå¯¹volatileä¿®é¥°çš„å˜é‡ç»™javaè™šæ‹Ÿæœºç‰¹æ®Šçš„çº¦å®šï¼Œçº¿ç¨‹å¯¹volatileå˜é‡çš„ä¿®æ”¹ä¼šç«‹åˆ»è¢«å…¶ä»–çº¿ç¨‹æ‰€æ„ŸçŸ¥ï¼Œå³ä¸ä¼šå‡ºç°æ•°æ®è„è¯»çš„ç°è±¡ï¼Œä»è€Œä¿è¯æ•°æ®çš„â€œå¯è§æ€§â€ã€‚)</p>
<p>ä¸‹é¢æ˜¯volatileå˜é‡çš„å‡ ä¸ªä¾‹å­ï¼š  </p>
<ol>
<li>å¹¶è¡Œè®¾å¤‡çš„ç¡¬ä»¶å¯„å­˜å™¨ï¼ˆå¦‚ï¼šçŠ¶æ€å¯„å­˜å™¨ï¼‰  </li>
<li>ä¸€ä¸ªä¸­æ–­æœåŠ¡å­ç¨‹åºä¸­ä¼šè®¿é—®åˆ°çš„éè‡ªåŠ¨å˜é‡(Non-automatic variables)  </li>
<li>å¤šçº¿ç¨‹åº”ç”¨ä¸­è¢«å‡ ä¸ªä»»åŠ¡å…±äº«çš„å˜é‡  </li>
</ol>
<p>  å›ç­”ä¸å‡ºè¿™ä¸ªé—®é¢˜çš„äººæ˜¯ä¸ä¼šè¢«é›‡ä½£çš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯åŒºåˆ†Cç¨‹åºå‘˜å’ŒåµŒå…¥å¼ç³»ç»Ÿç¨‹åºå‘˜çš„æœ€åŸºæœ¬çš„é—®é¢˜ã€‚åµŒå…¥å¼ç³»ç»Ÿç¨‹åºå‘˜ç»å¸¸åŒç¡¬ä»¶ã€ä¸­æ–­ã€RTOSç­‰ç­‰æ‰“äº¤é“ï¼Œæ‰€ç”¨è¿™äº›éƒ½è¦æ±‚volatileå˜é‡ã€‚ä¸æ‡‚å¾—volatileå†…å®¹å°†ä¼šå¸¦æ¥ç¾éš¾ã€‚ å‡è®¾è¢«é¢è¯•è€…æ­£ç¡®åœ°å›ç­”äº†è¿™æ˜¯é—®é¢˜ï¼ˆå—¯ï¼Œæ€€ç–‘è¿™å¦ä¼šæ˜¯è¿™æ ·ï¼‰ï¼Œæˆ‘å°†ç¨å¾®æ·±ç©¶ä¸€ä¸‹ï¼Œçœ‹ä¸€ä¸‹è¿™å®¶ä¼™æ˜¯ä¸æ˜¯ç›´æ­£æ‡‚å¾—volatileå®Œå…¨çš„é‡è¦æ€§ã€‚  </p>
<p>æœ‰å¦‚ä¸‹3ä¸ªé—®é¢˜ï¼š  </p>
<ol>
<li>ä¸€ä¸ªå‚æ•°æ—¢å¯ä»¥æ˜¯constè¿˜å¯ä»¥æ˜¯volatileå—ï¼Ÿè§£é‡Šä¸ºä»€ä¹ˆã€‚  </li>
<li>ä¸€ä¸ªæŒ‡é’ˆå¯ä»¥æ˜¯volatile å—ï¼Ÿè§£é‡Šä¸ºä»€ä¹ˆã€‚  </li>
<li>ä¸‹é¢çš„å‡½æ•°æœ‰ä»€ä¹ˆé”™è¯¯ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">square</span><span class="params">(<span class="keyword">volatile</span> <span class="keyword">int</span> *ptr)</span> </span></span><br><span class="line"><span class="function"></span>{ </span><br><span class="line">    <span class="keyword">return</span> *ptr * *ptr;</span><br><span class="line">}  </span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<p>ä¸‹é¢æ˜¯ç­”æ¡ˆï¼š </p>
<ol>
<li>æ˜¯çš„ã€‚ä¸€ä¸ªä¾‹å­æ˜¯åªè¯»çš„çŠ¶æ€å¯„å­˜å™¨ã€‚å®ƒæ˜¯volatileå› ä¸ºå®ƒå¯èƒ½è¢«æ„æƒ³ä¸åˆ°åœ°æ”¹å˜ã€‚å®ƒæ˜¯constå› ä¸ºç¨‹åºä¸åº”è¯¥è¯•å›¾å»ä¿®æ”¹å®ƒã€‚  </li>
<li>æ˜¯çš„ã€‚å°½ç®¡è¿™å¹¶ä¸å¾ˆå¸¸è§ã€‚ä¸€ä¸ªä¾‹å­æ˜¯å½“ä¸€ä¸ªä¸­æ–­æœåŠ¡å­ç¨‹åºä¿®æ”¹ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªbufferçš„æŒ‡é’ˆæ—¶ã€‚  </li>
<li>è¿™æ®µä»£ç çš„æœ‰ä¸ªæ¶ä½œå‰§ã€‚è¿™æ®µä»£ç çš„ç›®çš„æ˜¯ç”¨æ¥è¿”æŒ‡é’ˆ<em>ptræŒ‡å‘å€¼çš„å¹³æ–¹ï¼Œä½†æ˜¯ï¼Œç”±äº</em>ptræŒ‡å‘ä¸€ä¸ªvolatileå‹å‚æ•°ï¼Œç¼–è¯‘å™¨å°†äº§ç”Ÿç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">square</span><span class="params">(<span class="keyword">volatile</span> <span class="keyword">int</span> *ptr)</span> </span></span><br><span class="line"><span class="function"></span>{ </span><br><span class="line">    <span class="keyword">int</span> a,b; a = *ptr; </span><br><span class="line">    b = *ptr;</span><br><span class="line">    <span class="keyword">return</span> a * b; </span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>
ç”±äº*ptrçš„å€¼å¯èƒ½è¢«æ„æƒ³ä¸åˆ°åœ°è¯¥å˜ï¼Œå› æ­¤aå’Œbå¯èƒ½æ˜¯ä¸åŒçš„ã€‚ç»“æœï¼Œè¿™æ®µä»£ç å¯èƒ½è¿”ä¸æ˜¯ä½ æ‰€æœŸæœ›çš„å¹³æ–¹å€¼ï¼æ­£ç¡®çš„ä»£ç å¦‚ä¸‹ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">square</span><span class="params">(<span class="keyword">volatile</span> <span class="keyword">int</span> *ptr)</span> </span></span><br><span class="line"><span class="function"></span>{ </span><br><span class="line">    <span class="keyword">int</span> a; a = *ptr; </span><br><span class="line">    <span class="keyword">return</span> a * a;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<p>extern: è¯´æ˜å˜é‡æ˜¯åœ¨å…¶ä»–æ–‡ä»¶ä¸­å£°æ˜ï¼ˆä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å¼•ç”¨å˜é‡ï¼‰<br>sizeof: è®¡ç®—å¯¹è±¡æ‰€å å†…å­˜ç©ºé—´å¤§å°  </p>
<p>å‡½æ•°å‚æ•°çš„å£°æ˜ä¸¾ä¾‹ï¼švoid func(int i,char c)<br>å®šä¹‰å£°æ˜æœ€é‡è¦çš„åŒºåˆ«ï¼šå®šä¹‰åˆ›å»ºäº†å¯¹è±¡ï¼Œå¹¶ä¸ºè¿™ä¸ªå¯¹è±¡åˆ†é…äº†å†…å­˜ï¼Œå£°æ˜æ²¡æœ‰åˆ†é…å†…å­˜  </p>
<p>ç¼–è¯‘å™¨åœ¨é»˜è®¤çš„ç¼ºçœæƒ…å†µä¸‹ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯autoçš„ã€‚  </p>
<p>registerå˜é‡å¿…é¡»æ˜¯èƒ½è¢«CPUå¯„å­˜å™¨æ‰€æ¥å—çš„ç±»å‹ã€‚æ„å‘³ç€registerå˜é‡å¿…é¡»æ˜¯ä¸€ä¸ªå•ä¸ªçš„å€¼ï¼Œå¹¶ä¸”å…¶é•¿åº¦åº”å°äºæˆ–ç­‰äºæ•´å½¢çš„é•¿åº¦ã€‚è€Œä¸”registerå˜é‡å¯èƒ½ä¸å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨å–å€è¿ç®—ç¬¦â€œ&amp;â€æ¥è·å–registerå˜é‡çš„åœ°å€ã€‚æ¯”å¦‚è¯´ï¼Œ32ä½çš„CPUï¼Œæœ€å¤šæ˜¯4ä¸ªå­—èŠ‚ï¼Œæ•´å½¢å’Œé•¿æ•´å½¢éƒ½æ˜¯å 4ä¸ªå­—èŠ‚çš„æ•°æ®ç±»å‹ã€‚<br>æ³¨æ„ï¼šregisterå˜é‡åªæ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¸€å®šä¼šå°†è¯¥å˜é‡ä½œä¸ºregisterå˜é‡ã€‚  </p>
<h1 id="staticå…³é”®å­—ä½œç”¨"><a href="#staticå…³é”®å­—ä½œç”¨" class="headerlink" title="staticå…³é”®å­—ä½œç”¨"></a>staticå…³é”®å­—ä½œç”¨</h1><ol>
<li><p><strong>ä¿®é¥°å˜é‡</strong><br> é™æ€åŒºæ˜¯åˆ†é…é™æ€å˜é‡ã€å…¨å±€å˜é‡ç©ºé—´çš„ï¼›åˆå§‹åŒ–çš„å…¨å±€å˜é‡æ”¾åœ¨æ•°æ®æ®µï¼›å±€éƒ¨å˜é‡æ”¾åœ¨æ ˆï¼›æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡æ”¾åœ¨bssæ®µã€‚<br> ä»Cç¨‹åºè¿è¡Œçš„è§’åº¦çœ‹ï¼Œå†…å­˜å‡ å¤§éƒ¨åˆ†ï¼šé™æ€å­˜å‚¨åŒºã€å †åŒºå’Œæ ˆåŒºã€‚<br> é™æ€å­˜å‚¨åŒºï¼šå†…å­˜åœ¨ç¨‹åºç¼–è¯‘çš„æ—¶å€™å°±å·²ç»åˆ†é…å¥½ï¼Œè¿™å—å†…å­˜åœ¨ç¨‹åºçš„æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨ã€‚å®ƒä¸»è¦å­˜åœ¨é™æ€æ•°æ®ã€å…¨å±€æ•°æ®å’Œå¸¸é‡ã€‚<br> å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰ï¼ˆstaticï¼‰ â€”- å…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚  </p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;			<span class="comment">//å…¨å±€åˆå§‹åŒ–åŒº</span></span><br><span class="line"><span class="keyword">char</span> *p1;			<span class="comment">//å…¨å±€æœªåˆå§‹åŒ–åŒº</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> b;			<span class="comment">//æ ˆ</span></span><br><span class="line">    <span class="keyword">char</span> s[] = <span class="string">"abc"</span>;		<span class="comment">//æ ˆ</span></span><br><span class="line">    <span class="keyword">char</span> *p2;			<span class="comment">//æ ˆ</span></span><br><span class="line">    <span class="keyword">char</span> *p3 = <span class="string">"123456"</span>;	<span class="comment">//123456\0åœ¨å¸¸é‡åŒºï¼Œp3åœ¨æ ˆä¸Š</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> c = <span class="number">0</span>;		<span class="comment">//å…¨å±€ï¼ˆé™æ€ï¼‰åˆå§‹åŒ–åŒº</span></span><br><span class="line">    p1 = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">10</span>);	<span class="comment">//å †</span></span><br><span class="line">    p2 = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">20</span>);	<span class="comment">//å †</span></span><br><span class="line">    p1 = <span class="string">"123456"</span>;		<span class="comment">//123456\0åœ¨å¸¸é‡åŒºï¼Œç¼–è¯‘å™¨å°†p1ä¸p3æ‰€æŒ‡å‘çš„â€œ123456\0â€ä¼˜åŒ–æˆåŒä¸€ä¸ªåœ°æ–¹</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ã€é™æ€å…¨å±€å˜é‡ã€é™æ€å±€éƒ¨å˜é‡çš„åŒºåˆ«ï¼Œå¦‚ä¸‹ï¼š  </p>
<ul>
<li>ä»ä½œç”¨åŸŸçœ‹  </li>
</ul>
<ol>
<li>å…¨å±€å˜é‡å…·æœ‰å…¨å±€åŸŸã€‚å…¨å±€å˜é‡åªéœ€åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰ï¼Œå°±å¯ä»¥ä½œç”¨äºæ‰€æœ‰çš„æºæ–‡ä»¶ã€‚å½“ç„¶ï¼Œå…¶ä»–ä¸åŒ…æ‹¬å…¨å±€å˜é‡å®šä¹‰çš„æºæ–‡ä»¶éœ€è¦ç”¨externå…³é”®å­—å†æ¬¡å£°æ˜è¿™ä¸ªå…¨å±€å˜é‡ã€‚  </li>
<li>é™æ€å±€éƒ¨å˜é‡å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸã€‚å®ƒåªè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œè‡ªä»ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ç›´åˆ°ç¨‹åºç»“æŸéƒ½ä¸€ç›´å­˜åœ¨ã€‚å®ƒå’Œå…¨å±€å˜é‡çš„åŒºåˆ«åœ¨äºå…¨å±€å˜é‡å¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯å¯è§çš„ï¼Œè€Œé™æ€å±€éƒ¨å˜é‡åªå¯¹å®šä¹‰è‡ªå·±çš„å‡½æ•°ä½“å§‹ç»ˆå¯è§ã€‚  </li>
<li>å±€éƒ¨å˜é‡ä¹Ÿåªæœ‰å±€éƒ¨ä½œç”¨åŸŸï¼Œä»–æ˜¯è‡ªåŠ¨å¯¹è±¡ï¼Œä»–åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸æ˜¯ä¸€ç›´å­˜åœ¨ï¼Œè€Œæ˜¯åªåœ¨å‡½æ•°æ‰§è¡ŒæœŸé—´å­˜åœ¨ï¼Œå‡½æ•°çš„ä¸€æ¬¡è°ƒç”¨ç»“æŸåï¼Œå˜é‡å°±è¢«æ’¤é”€ï¼Œå…¶æ‰€å ç”¨çš„å†…å­˜ä¹Ÿè¢«æ”¶å›ã€‚  </li>
<li>é™æ€å…¨å±€å˜é‡ï¼ˆå…¶ä»–æ–‡ä»¶å³ä½¿ä½¿ç”¨externå£°æ˜ä¹Ÿæ²¡æ³•ä½¿ç”¨å®ƒï¼‰ä¹Ÿå…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œå®ƒä¸å…¨å±€å˜é‡çš„åŒºåˆ«åœ¨äºå¦‚æœç¨‹åºåŒ…å«å¤šä¸ªæ–‡ä»¶çš„è¯ï¼Œä»–ä½œç”¨äºå®šä¹‰å®ƒçš„æ–‡ä»¶é‡Œï¼Œä¸èƒ½ä½œç”¨åˆ°å…¶ä»–æ–‡ä»¶é‡Œï¼Œå³è¢«staticå…³é”®å­—ä¿®é¥°è¿‡çš„å˜é‡å…·æœ‰æ–‡ä»¶ä½œç”¨åŸŸã€‚è¿™æ ·å³ä½¿ä¸¤ä¸ªä¸åŒçš„æºæ–‡ä»¶éƒ½å®šä¹‰äº†ç›¸åŒçš„é™æ€å…¨å±€å˜é‡ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸åŒçš„å˜é‡ã€‚  </li>
</ol>
<ul>
<li>ä»åˆ†é…å†…å­˜ç©ºé—´çœ‹<br>å…¨å±€å˜é‡ã€é™æ€å…¨å±€å˜é‡ã€é™æ€å±€éƒ¨å˜é‡éƒ½åœ¨é™æ€å­˜å‚¨åŒºåˆ†é…ç©ºé—´ï¼Œè€Œå±€éƒ¨å˜é‡åœ¨æ ˆåˆ†é…ç©ºé—´ã€‚  </li>
</ul>
<p> æŠŠå±€éƒ¨å˜é‡æ”¹å˜ä¸ºé™æ€å˜é‡åæ˜¯æ”¹å˜äº†å®ƒçš„å­˜å‚¨æ–¹å¼ï¼Œå³æ”¹å˜äº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€‚æŠŠå…¨å±€å˜é‡æ”¹å˜ä¸ºé™æ€å˜é‡åæ˜¯æ”¹å˜äº†å®ƒçš„ä½œç”¨åŸŸï¼Œé™åˆ¶äº†å®ƒçš„ä½¿ç”¨èŒƒå›´ï¼Œå› æ­¤staticè¿™ä¸ªè¯´æ˜ç¬¦åœ¨ä¸åŒçš„åœ°æ–¹èµ·çš„ä½œç”¨æ˜¯ä¸åŒçš„ã€‚  </p>
<p> æ³¨æ„ï¼š<br> å¯¹äºé™æ€å±€éƒ¨å˜é‡çš„ç†è§£ï¼š  </p>
<ol>
<li>è‹¥å…¨å±€å˜é‡ä»…åœ¨å•ä¸ªå‡½æ•°ä¸­ä½¿ç”¨ï¼Œåˆ™å¯ä»¥å°†è¿™ä¸ªå˜é‡ä¿®æ”¹ä¸ºæ”¹å‡½æ•°çš„é™æ€å±€éƒ¨å˜é‡  </li>
<li>ç”±äºè¢«staticä¿®é¥°çš„å˜é‡æ€»æ˜¯å­˜åœ¨å†…å­˜çš„é™æ€åŒºï¼Œæ‰€ä»¥å³ä½¿è¿™ä¸ªå‡½æ•°è¿è¡Œç»“æŸï¼Œè¿™ä¸ªé™æ€å˜é‡çš„å€¼è¿˜æ˜¯ä¸ä¼šè¢«é”€æ¯ï¼Œå‡½æ•°ä¸‹æ¬¡ä½¿ç”¨æ—¶ä»ç„¶èƒ½ç”¨åˆ°è¿™ä¸ªå€¼<br>ç›´è§‚çš„ä¾‹å­ï¼š<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> k,ii = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> j;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    i++;</span><br><span class="line">    ii++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"ii = %d\n"</span>,ii);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    j = <span class="number">0</span>;</span><br><span class="line">    j++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"j = %d\n"</span>,j);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;<span class="number">10</span>;k++)</span><br><span class="line">    {</span><br><span class="line">	func1();</span><br><span class="line">	func2();</span><br><span class="line">	sleep(<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
</ol>
<ol start="2">
<li><strong>ä¿®é¥°å‡½æ•°</strong><br>å‡½æ•°å‰åŠ staticä½¿å¾—å‡½æ•°æˆä¸ºé™æ€å‡½æ•°ã€‚ä½†æ­¤å¤„â€œstaticâ€çš„å«ä¹‰ä¸æ˜¯æŒ‡å­˜å‚¨æ–¹å¼ï¼Œè€Œæ˜¯æŒ‡å¯¹å‡½æ•°çš„ä½œç”¨åŸŸä»…å±€é™äºæœ¬æ–‡ä»¶ï¼ˆæ‰€ä»¥åˆç§°ä¸ºå†…éƒ¨å‡½æ•°ï¼‰ã€‚</li>
</ol>
<ol start="3">
<li><p><strong>C++é‡Œå¯¹staticèµ‹äºˆäº†ç¬¬ä¸‰ä¸ªä½œç”¨ï¼ˆå¦‚æœæˆå‘˜å£°æ˜ä¸ºstaticï¼Œå¯ä»¥åœ¨å¤–éƒ¨ç›´æ¥è®¿é—®ï¼‰</strong>  </p>
<ol>
<li>é™æ€æ•°æ®æˆå‘˜  </li>
</ol>
</li>
</ol>
<ul>
<li>é™æ€æ•°æ®æˆå‘˜æ˜¯è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡æ‰€å…±æœ‰çš„ã€‚å¯¹è¯¥ç±»çš„å¤šä¸ªå¯¹è±¡æ¥è¯´ï¼Œé™æ€æ•°æ®æˆå‘˜åªåˆ†é…ä¸€ä¸ªå†…å­˜ï¼Œä¾›æ‰€æœ‰å¯¹è±¡å…±ç”¨  </li>
<li>é™æ€æ•°æ®æˆå‘˜å­˜å‚¨åœ¨å…¨å±€æ•°æ®åŒºã€‚é™æ€æ•°æ®æˆå‘˜å®šä¹‰æ—¶è¦åˆ†é…ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ç±»å£°æ˜ä¸­å®šä¹‰  <ol start="2">
<li>é™æ€æˆå‘˜å‡½æ•°  </li>
</ol>
</li>
<li>é™æ€æˆå‘˜ä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—®ï¼ŒåŒ…æ‹¬é™æ€æˆå‘˜å‡½æ•°è®¿é—®é™æ€æ•°æ®æˆå‘˜å’Œè®¿é—®é™æ€æˆå‘˜å‡½æ•°  </li>
<li>éé™æ€æˆå‘˜å‡½æ•°å¯ä»¥ä»»æ„åœ°è®¿é—®é™æ€æˆå‘˜å‡½æ•°å’Œé™æ€æ•°æ®æˆå‘˜  </li>
<li>é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜å‡½æ•°ï¼ˆä¸åŒ…æ‹¬æ„é€ å‡½æ•°ï¼‰å’Œéé™æ€æ•°æ®æˆå‘˜  </li>
</ul>
<h1 id="sizeofå…³é”®å­—"><a href="#sizeofå…³é”®å­—" class="headerlink" title="sizeofå…³é”®å­—"></a>sizeofå…³é”®å­—</h1><p>int i = 0;<br>A). sizeof(int);<br>B). sizeof(i);<br>C). sizeof int;<br>D). sizeof i;<br>Aã€Bå’ŒDéƒ½æ­£ç¡®ï¼ŒCé”™è¯¯ã€‚  </p>
<blockquote>
<p>sizeof(int) *pè¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ<br>32ä½ç³»ç»Ÿä¸‹ï¼š<br>int *p = NULL;<br>sizeof(p)çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ 4<br>sizeof(*p)å‘¢ï¼Ÿ 4<br>char *q = NULL;<br>sizeof(q)çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ 4<br>sizeof(*q)å‘¢ï¼Ÿ 1<br>int a[100];<br>sizeof (a) çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ 400<br>sizeof(a[100])å‘¢ï¼Ÿ 4<br>sizeof(&amp;a)å‘¢ï¼Ÿ 4<br>sizeof(&amp;a[0])å‘¢ï¼Ÿ 4<br>int b[100];<br>void fun(int b[100])<br>{<br>    sizeof(b);// sizeof (b) çš„å€¼æ˜¯å¤šå°‘ï¼Ÿæ˜¯ä¸ªæŒ‡é’ˆç±»å‹ï¼ŒæŠŠ int b[100] æ”¹ä¸º char b[100] ä¹Ÿæ˜¯è¾“å‡º 4<br>}  </p>
</blockquote>
<h1 id="ä¸é›¶å€¼æ¯”è¾ƒ"><a href="#ä¸é›¶å€¼æ¯”è¾ƒ" class="headerlink" title="ä¸é›¶å€¼æ¯”è¾ƒ"></a>ä¸é›¶å€¼æ¯”è¾ƒ</h1><ol>
<li><p>boolå˜é‡<br> bool bTestFlag = FALSE;//ä¸ºä»€ä¹ˆä¸€èˆ¬åˆå§‹åŒ–ä¸ºFALSEæ¯”è¾ƒå¥½ï¼Ÿ<br> FALSEåœ¨ç¼–è¯‘å™¨é‡Œè¢«å®šä¹‰ä¸º0ï¼Œè€ŒTRUEåˆ™ä¸ä¸€å®šæ˜¯1ï¼Œä¸åŒçš„ç¼–è¯‘å™¨æœ‰ä¸åŒçš„å®šä¹‰ã€‚  </p>
</li>
<li><p>floatå˜é‡<br> float fTestVal = 0.0;<br> const float EPSINON = 0.00001;<br> if((fTestVal &gt;= -EPSIONON) &amp;&amp; (fTestVal &lt;= EPSINON))  </p>
</li>
</ol>
<h1 id="returnå…³é”®å­—"><a href="#returnå…³é”®å­—" class="headerlink" title="returnå…³é”®å­—"></a>returnå…³é”®å­—</h1><p>returnå¯ä»¥è¿”å›äº›ä»€ä¹ˆä¸œè¥¿ï¼Ÿå¦‚ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">Func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">30</span>];</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>strå±äºå±€éƒ¨å˜é‡ï¼Œä½äºæ ˆå†…å­˜ä¸­ï¼Œåœ¨Funcç»“æŸçš„æ—¶å€™è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥è¿”å›strä¼šå¯¼è‡´é”™è¯¯ã€‚<br>è§„åˆ™ï¼šreturnè¯­å¥ä¸å¯è¿”å›æŒ‡å‘â€œæ ˆå†…å­˜â€çš„â€œæŒ‡é’ˆâ€ï¼Œå› ä¸ºè¯¥å†…å­˜åœ¨å‡½æ•°ä½“ç»“æŸæ—¶è¢«è‡ªåŠ¨é”€æ¯ã€‚  </p>
<h1 id="constå…³é”®å­—"><a href="#constå…³é”®å­—" class="headerlink" title="constå…³é”®å­—"></a>constå…³é”®å­—</h1><ol>
<li><p>constä¿®é¥°çš„æ˜¯åªè¯»å˜é‡ï¼Œè€Œä¸æ˜¯å¸¸é‡  </p>
</li>
<li><p>èŠ‚çœç©ºé—´ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…ï¼ŒåŒæ—¶æé«˜æ•ˆç‡<br> ä¾‹å¦‚ï¼š  </p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 3 <span class="comment">//å®å¸¸é‡</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5</span>; <span class="comment">//æ­¤æ—¶å¹¶æœªå°† N æ”¾å…¥å†…å­˜ä¸­</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">int</span> i = N; <span class="comment">//æ­¤æ—¶ä¸º N åˆ†é…å†…å­˜ï¼Œä»¥åä¸å†åˆ†é…</span></span><br><span class="line"><span class="keyword">int</span> I = M; <span class="comment">//é¢„ç¼–è¯‘æœŸé—´è¿›è¡Œå®æ›¿æ¢ï¼Œåˆ†é…å†…å­˜</span></span><br><span class="line"><span class="keyword">int</span> j = N; <span class="comment">//æ²¡æœ‰å†…å­˜åˆ†é…</span></span><br><span class="line"><span class="keyword">int</span> J = M; <span class="comment">//å†è¿›è¡Œå®æ›¿æ¢ï¼Œåˆä¸€æ¬¡åˆ†é…å†…å­˜</span></span><br></pre></td></tr></tbody></table></figure>

<p> constå®šä¹‰çš„åªè¯»å˜é‡ä»æ±‡ç¼–çš„è§’åº¦çœ‹ï¼Œåªæ˜¯ç»™å‡ºäº†å¯¹åº”çš„å†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯åƒ#defineä¸€æ ·ç»™å‡ºçš„æ˜¯ç«‹å³æ•°ï¼Œæ‰€ä»¥ï¼Œconstå®šä¹‰çš„åªè¯»å˜é‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼ˆå› ä¸ºå®ƒæ˜¯å…¨å±€çš„åªè¯»å˜é‡ï¼Œå­˜æ”¾åœ¨é™æ€åŒºï¼‰ï¼Œè€Œ#defineå®šä¹‰çš„å®å¸¸é‡åœ¨å†…å­˜ä¸­æœ‰è‹¥å¹²ä¸ªæ‹·è´ã€‚#defineå®æ˜¯åœ¨é¢„ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ›¿æ¢ï¼Œè€Œconstä¿®é¥°çš„åªè¯»å˜é‡æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™ç¡®å®šå…¶å€¼ã€‚#defineå®æ²¡æœ‰ç±»å‹ï¼Œè€Œconstä¿®é¥°çš„åªè¯»å˜é‡å…·æœ‰ç‰¹å®šçš„ç±»å‹ã€‚  </p>
</li>
</ol>
<p>æ³¨æ„ï¼š  </p>
<ul>
<li>å½“constä¿®é¥°æŒ‡é’ˆæ—¶  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p; <span class="comment">// p å¯å˜ï¼Œp æŒ‡å‘çš„å¯¹è±¡ä¸å¯å˜</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> *p; <span class="comment">// p å¯å˜ï¼Œp æŒ‡å‘çš„å¯¹è±¡ä¸å¯å˜</span></span><br><span class="line"><span class="keyword">int</span> *<span class="keyword">const</span> p; <span class="comment">// p ä¸å¯å˜ï¼Œp æŒ‡å‘çš„å¯¹è±¡å¯å˜</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *<span class="keyword">const</span> p; <span class="comment">// æŒ‡é’ˆ p å’Œ p æŒ‡å‘çš„å¯¹è±¡éƒ½ä¸å¯å˜</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> a;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *a;</span><br><span class="line"><span class="keyword">int</span> * <span class="keyword">const</span> a;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> * a <span class="keyword">const</span>;</span><br><span class="line"><span class="comment">//å‰ä¸¤ä¸ªçš„ä½œç”¨æ˜¯ä¸€æ ·ï¼Œaæ˜¯ä¸€ä¸ªå¸¸æ•´å‹æ•°ã€‚ç¬¬ä¸‰ä¸ªæ„å‘³ç€aæ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸æ•´å‹æ•°çš„æŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ•´å‹æ•°æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œä½†æŒ‡é’ˆå¯ä»¥ï¼‰ã€‚ç¬¬å››ä¸ªæ„æ€aæ˜¯ä¸€ä¸ªæŒ‡å‘æ•´å‹æ•°çš„å¸¸æŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•´å‹æ•°æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æŒ‡é’ˆæ˜¯ä¸å¯ä¿®æ”¹çš„ï¼‰ã€‚æœ€åä¸€ä¸ªæ„å‘³ç€aæ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸æ•´å‹æ•°çš„å¸¸æŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•´å‹æ•°æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼ŒåŒæ—¶æŒ‡é’ˆä¹Ÿæ˜¯ä¸å¯ä¿®æ”¹çš„ï¼‰ã€‚</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>constä¿®é¥°å‡½æ•°è¿”å›å€¼ï¼ˆè¿”å›æŒ‡é’ˆï¼‰<br>å¦‚æœç»™ä»¥â€œæŒ‡é’ˆä¼ é€’â€æ–¹å¼çš„å‡½æ•°è¿”å›å€¼åŠ  const ä¿®é¥°ï¼Œé‚£ä¹ˆå‡½æ•°è¿”å›å€¼ï¼ˆå³æŒ‡é’ˆï¼‰çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼Œè¯¥è¿”å›å€¼åªèƒ½è¢«èµ‹ç»™åŠ constä¿®é¥°çš„åŒç±»å‹æŒ‡é’ˆã€‚<br>ä¾‹å¦‚å‡½æ•°ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span> * <span class="title">GetString</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></tbody></table></figure>
å¦‚ä¸‹è¯­å¥å°†å‡ºç°ç¼–è¯‘é”™è¯¯ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> *str = GetString();</span><br></pre></td></tr></tbody></table></figure>
æ­£ç¡®çš„ç”¨æ³•æ˜¯ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *str = GetString();</span><br></pre></td></tr></tbody></table></figure></li>
<li>constä¿®é¥°çš„åªè¯»å˜é‡ä¸èƒ½ç”¨æ¥ä½œä¸ºå®šä¹‰æ•°ç»„çš„ç»´æ•°ï¼Œä¹Ÿä¸èƒ½æ”¾åœ¨caseå…³é”®å­—åé¢ã€‚  </li>
<li>å¸¸é‡æŒ‡é’ˆä¸æŒ‡é’ˆå¸¸é‡çš„åŒºåˆ«  </li>
</ul>
<p><em>ï¼ˆæŒ‡é’ˆï¼‰å’Œconstï¼ˆå¸¸é‡ï¼‰è°åœ¨å‰å…ˆè¯»è°ï¼›</em> è±¡å¾ç€åœ°å€ï¼Œconst è±¡å¾ç€å†…å®¹ï¼›è°åœ¨å‰é¢è°å°±ä¸å…è®¸æ”¹å˜ã€‚  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> c = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> *p1 = &amp;b; <span class="comment">// const åœ¨å‰ï¼Œå®šä¹‰ä¸ºå¸¸é‡æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">int</span> *<span class="keyword">const</span> p2 = &amp;c; <span class="comment">// * åœ¨å‰ï¼Œå®šä¹‰ä¸ºæŒ‡é’ˆå¸¸é‡</span></span><br><span class="line"><span class="comment">//å¸¸é‡æŒ‡é’ˆp1: æŒ‡å‘çš„åœ°å€å¯ä»¥å˜ï¼Œä½†å†…å®¹ä¸å¯ä»¥é‡æ–°èµ‹å€¼ï¼Œå†…å®¹çš„æ”¹å˜åªèƒ½é€šè¿‡ä¿®æ”¹åœ°å€æŒ‡å‘åå˜æ¢ã€‚</span></span><br><span class="line"><span class="comment">//æŒ‡é’ˆå¸¸é‡p2: æŒ‡å‘çš„åœ°å€ä¸å¯ä»¥é‡æ–°èµ‹å€¼ï¼Œä½†å†…å®¹å¯ä»¥æ”¹å˜ï¼Œå¿…é¡»åˆå§‹åŒ–ï¼Œåœ°å€è·Ÿéšä¸€ç”Ÿã€‚</span></span><br></pre></td></tr></tbody></table></figure>
<p>é—®ï¼šCè¯­è¨€å‡½æ•°è¿”å›å€¼ä¸º const å‹ æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ<br>ç­”ï¼šå½“ä¸ºæŒ‡é’ˆæ—¶ï¼Œæœ‰æ„ä¹‰ï¼Œä¸€èˆ¬æ•°å€¼æ²¡æœ‰æ„ä¹‰ å½“è¿”å›ä¸ºconstæŒ‡é’ˆæ—¶ï¼Œè¡¨ç¤ºå¯¹è¿”å›æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®å†…å®¹ä¸è¦è¿›è¡Œä¿®æ”¹ã€‚æœ‰ä¿®æ”¹åˆ™ç¨‹åºä¼šæŠ¥é”™ã€‚  </p>
<ul>
<li>Cè¯­è¨€å¯ä»¥é€šè¿‡æŒ‡é’ˆä¿®æ”¹constä¿®é¥°çš„åªè¯»å˜é‡  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> *p = (<span class="keyword">int</span> *) &amp;a;</span><br><span class="line">*p = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, *p, a);</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h1 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h1><ol>
<li><p>ç©ºç»“æ„ä½“å ä¸€ä¸ªå­—èŠ‚</p>
</li>
<li><p>æŸ”æ€§æ•°ç»„</p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">test</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">double</span> b;</span><br><span class="line">	<span class="keyword">char</span> c[<span class="number">0</span>];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p> æŸ”æ€§æ•°ç»„å…è®¸åœ¨å®šä¹‰ç»“æ„ä½“çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œè€Œè¿™ä¸ªæ•°ç»„çš„å¤§å°å¯ä»¥åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­æ ¹æ®ä½ çš„éœ€æ±‚è¿›è¡Œæ›´æ”¹<br> è¿™ä¸ªç©ºæ•°ç»„å¿…é¡»å£°æ˜ä¸ºç»“æ„ä½“çš„æœ€åä¸€ä¸ªæˆå‘˜ï¼Œå¹¶ä¸”è¿˜è¦æ±‚è¿™æ ·çš„ç»“æ„ä½“è‡³å°‘åŒ…å«ä¸€ä¸ªå…¶ä»–ç±»å‹çš„æˆå‘˜<br> æŸ”æ€§æ•°ç»„ä¸å ç”¨å†…å­˜<br> ç»™ç»“æ„ä½“åˆ†é…å†…å­˜ï¼š  </p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">test *stpTest = (test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test)+<span class="number">100</span>*<span class="keyword">sizeof</span>(<span class="keyword">char</span>)); <span class="comment">//åˆ†é…100</span></span><br><span class="line">test *stpTest = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(*test) + <span class="keyword">sizeof</span>(<span class="keyword">char</span>) * <span class="built_in">strlen</span>(paddress) + <span class="number">1</span>); <span class="comment">//åŠ¨æ€åˆ†é…</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨ C++é‡Œ struct å…³é”®å­—ä¸ class å…³é”®å­—ä¸€èˆ¬å¯ä»¥é€šç”¨ï¼Œåªæœ‰ä¸€ä¸ªå¾ˆå°çš„åŒºåˆ«ã€‚struct çš„æˆå‘˜é»˜è®¤æƒ…å†µä¸‹å±æ€§æ˜¯ public çš„ï¼Œè€Œ class æˆå‘˜å´æ˜¯ private çš„ã€‚  </p>
</li>
<li><p>unionç»´æŠ¤è¶³å¤Ÿçš„ç©ºé—´æ¥ç½®æ”¾å¤šä¸ªæ•°æ®æˆå‘˜ä¸­çš„â€œä¸€ç§â€ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸€ä¸ªæ•°æ®æˆå‘˜é…ç½®ç©ºé—´ï¼Œåœ¨unionä¸­æ‰€æœ‰çš„æ•°æ®æˆå‘˜å…±ç”¨ä¸€ä¸ªç©ºé—´ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å‚¨å­˜å…¶ä¸­ä¸€ä¸ªæ•°æ®æˆå‘˜ï¼Œæ‰€æœ‰çš„æ•°æ®æˆå‘˜å…·æœ‰ç›¸åŒçš„èµ·å§‹åœ°å€ã€‚  </p>
</li>
<li><p>å¤§ç«¯æ¨¡å¼ï¼ˆ Big_endianï¼‰ï¼šå­—æ•°æ®çš„é«˜å­—èŠ‚å­˜å‚¨åœ¨ä½åœ°å€ä¸­ï¼Œè€Œå­—æ•°æ®çš„ä½å­—èŠ‚åˆ™å­˜æ”¾ åœ¨é«˜åœ°å€ä¸­ã€‚ å°ç«¯æ¨¡å¼ï¼ˆ Little_endianï¼‰ï¼šå­—æ•°æ®çš„é«˜å­—èŠ‚å­˜å‚¨åœ¨é«˜åœ°å€ä¸­ï¼Œè€Œå­—æ•°æ®çš„ä½å­—èŠ‚åˆ™å­˜æ”¾ åœ¨ä½åœ°å€ä¸­ã€‚<br> åˆ¤æ–­ç³»ç»Ÿå¤§å°ç«¯çš„æ–¹æ³• â€“ å¯ä»¥åˆ©ç”¨unionç±»å‹æ•°æ®çš„ç‰¹ç‚¹ï¼šæ‰€æœ‰æˆå‘˜çš„èµ·å§‹åœ°å€ä¸€è‡´  </p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">checkSystem</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="class"><span class="keyword">union</span> <span class="title">check</span></span></span><br><span class="line"><span class="class">	{</span></span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">char</span> ch;</span><br><span class="line">	}c;</span><br><span class="line">	c.i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> (c.ch == <span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	checkSystem() == <span class="number">1</span> ? <span class="built_in">printf</span>(<span class="string">"Little-endian/n"</span>) : <span class="built_in">printf</span>(<span class="string">"Big-endian/n"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> åœ¨ x86 ç³»ç»Ÿä¸‹ï¼Œè¾“å‡ºçš„å€¼ä¸ºå¤šå°‘ï¼Ÿ // x86 - å°ç«¯</p>
 <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">5</span>] = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>};</span><br><span class="line">	<span class="keyword">int</span> *prt1 = (<span class="keyword">int</span> *)(&amp;a + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> *ptr2 = (<span class="keyword">int</span> *)((<span class="keyword">int</span>)a + <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d, %x\n"</span>, ptr1[<span class="number">-1</span>], *ptr2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ç­”æ¡ˆï¼š 5ï¼Œ2000000</span></span><br><span class="line"><span class="comment">// è§£é‡Šï¼š</span></span><br><span class="line"><span class="comment">// a æ˜¯æ•°ç»„é¦–å…ƒç´ çš„é¦–åœ°å€ï¼Œè€Œ &amp;a æ˜¯æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ï¼Œa+1 æ˜¯åç§» int ä¸ªå­—èŠ‚ï¼Œ è€Œ &amp;a+1 æ˜¯åç§»æ•´ä¸ªæ•°ç»„çš„å¤§å°</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ï¼Œæ­¤é¢˜ &amp;a+1 åç§» 20 ä¸ªå­—èŠ‚ï¼Œptr1[-1] = 5</span></span><br><span class="line"><span class="comment">// æ•°ç»„ a çš„åˆ†å¸ƒæ˜¯ï¼š{01 00 00 00ï¼Œ 02 00 00 00ï¼Œ 03 00 00 00ï¼Œ 04 00 00 00ï¼Œ 05 00 00 00}ï¼Œåœ°å€ä»å·¦åˆ°å³é€’å¢</span></span><br><span class="line"><span class="comment">// (int)a + 1 æ˜¯å‘åç§»åŠ¨äº† 1 ä¸ªå­—èŠ‚ï¼Œå³ 00 00 00 02ï¼Œç”±äºæ˜¯å°ç«¯ï¼Œæ‰€ä»¥ 02 00 00 00</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h1 id="defineç”¨æ³•"><a href="#defineç”¨æ³•" class="headerlink" title="#defineç”¨æ³•"></a>#defineç”¨æ³•</h1><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PCHAR char*</span></span><br><span class="line">PCHAR p3,p4; <span class="comment">// ç­‰æ•ˆäº char * p3,p4;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PCHAR (char*)</span></span><br><span class="line">PCHAR p3,p4; <span class="comment">// ç­‰æ•ˆäº (char *) p3,p4;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> X 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Y X*2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">undef</span> X</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> X 2</span></span><br><span class="line"><span class="keyword">int</span> z = Y;</span><br><span class="line"><span class="comment">// z çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ 4</span></span><br></pre></td></tr></tbody></table></figure>


<h1 id="é™¤æ³•ä¸å–ä½™è¿ç®—"><a href="#é™¤æ³•ä¸å–ä½™è¿ç®—" class="headerlink" title="é™¤æ³•ä¸å–ä½™è¿ç®—"></a>é™¤æ³•ä¸å–ä½™è¿ç®—</h1><p>å‚ä¸è¿ç®—çš„é‡å‡ä¸ºæ•´å½¢æ—¶ï¼Œç»“æœä¸ºæ•´å½¢ï¼Œèˆå»å°æ•°ã€‚å¦‚æœè¿ç®—é‡ä¸­æœ‰ä¸€ä¸ªä¸ºå®å‹ï¼Œç»“æœä¸ºåŒç²¾åº¦å®å‹ã€‚<br>ä¾‹å¦‚ï¼š5/2=2, 1/2=0, 5/2.0=2.5<br>å‚ä¸è¿ç®—çš„é‡å‡ä¸ºæ•´å½¢ï¼Œæ±‚ä½™è¿ç®—çš„ç»“æœç­‰äºä¸¤ä¸ªæ•°ç›¸é™¤åçš„ä½™æ•°ã€‚<br>ä¾‹å¦‚ï¼š5%2=1, 1%2=1</p>
<p>5%2.0å’Œ5.0%2çš„ç»“æœæ˜¯è¯­æ³•é”™è¯¯  </p>
<p>é™¤å·çš„æ­£è´Ÿå–èˆå’Œä¸€èˆ¬çš„ç®—æ•°ä¸€æ ·ï¼Œç¬¦å·ç›¸åŒä¸ºæ­£ï¼Œç›¸å¼‚ä¸ºè´Ÿ,æ±‚ä½™ç¬¦å·çš„æ­£è´Ÿå–èˆå’Œè¢«é™¤æ•°ç¬¦å·ç›¸åŒã€‚<br>-3/16=0, 16/-3=-5, -3%16=-3, 16%-3=1  </p>
<p>printf(â€œ%d\nâ€,10/2.5);<br>æ•´å½¢æ•°æ®é»˜è®¤ä¸ºintï¼Œå®å‹æ•°æ®é»˜è®¤ä¸ºdoubleã€‚<br>æ•´å½¢åªèƒ½ä½¿ç”¨æ•´å½¢è¯´æ˜ç¬¦ %d ç­‰ã€‚<br>å®å‹åªèƒ½ä½¿ç”¨å®å‹è¯´æ˜ç¬¦ã€‚  </p>
<h1 id="pragmaé¢„å¤„ç†"><a href="#pragmaé¢„å¤„ç†" class="headerlink" title="#pragmaé¢„å¤„ç†"></a>#pragmaé¢„å¤„ç†</h1><ul>
<li>#pragma message(â€œæ¶ˆæ¯æ–‡æœ¬â€)<br>  å½“ç¼–è¯‘å™¨é‡åˆ°è¿™æ¡æŒ‡ä»¤æ—¶å°±åœ¨ç¼–è¯‘è¾“å‡ºçª—å£ä¸­å°†æ¶ˆæ¯æ–‡æœ¬æ‰“å°å‡ºæ¥ã€‚<br>  å‡è®¾æˆ‘ä»¬å¸Œæœ›åˆ¤æ–­è‡ªå·±æœ‰æ²¡æœ‰åœ¨æºä»£ç çš„ä»€ä¹ˆåœ°æ–¹å®šä¹‰äº†_X86 è¿™ä¸ªå®å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•    <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _X86</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> message(â€œ_X86 macro activated!â€)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h1 id="å†…å­˜å¯¹é½"><a href="#å†…å­˜å¯¹é½" class="headerlink" title="å†…å­˜å¯¹é½"></a>å†…å­˜å¯¹é½</h1><p>æ€§èƒ½åŸå› ï¼šæ•°æ®ç»“æ„(å°¤å…¶æ˜¯æ ˆ)åº”è¯¥å°½å¯èƒ½åœ°åœ¨è‡ªç„¶è¾¹ç•Œä¸Šå¯¹é½ã€‚åŸå› åœ¨äºï¼Œä¸ºäº†è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå¤„ç†å™¨éœ€è¦ä½œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼›è€Œå¯¹é½çš„å†…å­˜è®¿é—®ä»…éœ€è¦ä¸€æ¬¡è®¿é—®ã€‚<br><img src="https://i.loli.net/2020/01/07/zawc7EXiB19HSU4.png" alt="32ä½CPUä¸å†…å­˜æ¨¡å‹.png">  </p>
<p>ä¸¾ä¾‹ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">char</span> x1;</span><br><span class="line">    <span class="keyword">short</span> x2;</span><br><span class="line">    <span class="keyword">float</span> x3;</span><br><span class="line">    <span class="keyword">char</span> x4;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç”±äºç¼–è¯‘å™¨é»˜è®¤æƒ…å†µä¸‹ä¼šå¯¹è¿™ä¸ªstructä½œè‡ªç„¶è¾¹ç•Œå¯¹é½ï¼Œç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜x1ï¼Œå…¶åç§»åœ°å€ä¸º0ï¼Œå æ®äº†ç¬¬1ä¸ªå­—èŠ‚ã€‚ç¬¬äºŒä¸ªæˆå‘˜x2ä¸ºshortç±»å‹ï¼Œå…¶èµ·å§‹åœ°å€å¿…é¡»2å­—èŠ‚å¯¹ç•Œï¼Œå› æ­¤ï¼Œç¼–è¯‘å™¨åœ¨x2å’Œx1ä¹‹é—´å¡«å……äº†ä¸€ä¸ªç©ºå­—èŠ‚ã€‚ç»“æ„çš„ç¬¬ä¸‰ä¸ªæˆå‘˜x3å’Œç¬¬å››ä¸ªæˆå‘˜x4æ°å¥½è½åœ¨å…¶è‡ªç„¶è¾¹ç•Œåœ°å€ä¸Šï¼Œåœ¨å®ƒä»¬å‰é¢ä¸éœ€è¦é¢å¤–çš„å¡«å……å­—èŠ‚ã€‚åœ¨testç»“æ„ä¸­ï¼Œæˆå‘˜x3è¦æ±‚4å­—èŠ‚å¯¹ç•Œï¼Œæ˜¯è¯¥ç»“æ„æ‰€æœ‰æˆå‘˜ä¸­è¦æ±‚çš„æœ€å¤§è¾¹ç•Œå•å…ƒï¼Œå› è€Œtestç»“æ„çš„è‡ªç„¶å¯¹ç•Œæ¡ä»¶ä¸º4å­—èŠ‚ï¼Œç¼–è¯‘å™¨åœ¨æˆå‘˜x4åé¢å¡«å……äº†3ä¸ªç©ºå­—èŠ‚ã€‚æ•´ä¸ªç»“æ„æ‰€å æ®ç©ºé—´ä¸º12å­—èŠ‚ã€‚  </p>
<p>ä½¿ç”¨æŒ‡ä»¤#pragma pack (n)ï¼Œç¼–è¯‘å™¨å°†æŒ‰ç…§ n ä¸ªå­—èŠ‚å¯¹é½ã€‚<br>ä½¿ç”¨æŒ‡ä»¤#pragma pack ()ï¼Œç¼–è¯‘å™¨å°†å–æ¶ˆè‡ªå®šä¹‰å­—èŠ‚å¯¹é½æ–¹å¼ã€‚<br>åœ¨#pragma pack (n)å’Œ#pragma pack ()ä¹‹é—´çš„ä»£ç æŒ‰ n ä¸ªå­—èŠ‚å¯¹é½ã€‚  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> pack(8)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TestStruct4</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">long</span> b;</span><br><span class="line">};</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TestStruct5</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    TestStruct4 d;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> e;</span><br><span class="line">};</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> pack ()</span></span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜ï¼š</p>
<ol>
<li>sizeof(TestStruct5)ç­‰äºå¤šå°‘ï¼Ÿ  </li>
<li>TestStruct5 çš„ c åé¢ç©ºäº†å‡ ä¸ªå­—èŠ‚æ¥ç€æ˜¯ dï¼Ÿ  </li>
</ol>
<p>TestStruct5 ä¸­,c å’Œ TestStruct4 ä¸­çš„ a ä¸€æ ·,æŒ‰ 1 å­—èŠ‚å¯¹é½,è€Œ d æ˜¯ä¸ªç»“æ„,å®ƒæ˜¯ 8 ä¸ªå­—èŠ‚,å®ƒæŒ‰ä»€ä¹ˆå¯¹é½å‘¢ï¼Ÿ<br>å¯¹äºç»“æ„æ¥è¯´ï¼Œå®ƒçš„é»˜è®¤å¯¹é½æ–¹å¼å°±æ˜¯å®ƒçš„æ‰€æœ‰æˆå‘˜ä½¿ç”¨çš„å¯¹é½å‚æ•°ä¸­æœ€å¤§çš„ä¸€ä¸ª, TestStruct4 çš„å°±æ˜¯ 4 ã€‚<br>(å¤æ‚ç±»å‹(å¦‚ç»“æ„)çš„é»˜è®¤å¯¹é½æ–¹å¼æ˜¯å®ƒæœ€é•¿çš„æˆå‘˜çš„å¯¹é½æ–¹å¼,è¿™æ ·åœ¨æˆå‘˜æ˜¯å¤æ‚ç±»å‹æ—¶,å¯ä»¥æœ€å°åŒ–é•¿åº¦)  </p>
<p>TestStruct4çš„å†…å­˜å¸ƒå±€ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">a</th>
<th align="left">b</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1***</td>
<td align="left">1111</td>
</tr>
</tbody></table>
<p>TestStruct5çš„å†…å­˜å¸ƒå±€ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">c</th>
<th align="left">a</th>
<th align="left">b</th>
<th align="left">e</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1***</td>
<td align="left">1***</td>
<td align="left">1111****</td>
<td align="left">11111111</td>
</tr>
</tbody></table>
<p>ç­”æ¡ˆï¼š</p>
<ol>
<li>24  </li>
<li>3  </li>
</ol>
<p>æ³¨æ„ï¼š<br>å¯¹äºæ•°ç»„,æ¯”å¦‚:char a[3];å®ƒçš„å¯¹é½æ–¹å¼å’Œåˆ†åˆ«å†™ 3 ä¸ª char æ˜¯ä¸€æ ·çš„.ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè¿˜æ˜¯æŒ‰ 1 ä¸ªå­—èŠ‚å¯¹é½.å¦‚æœå†™: typedef char Array3[3];Array3 è¿™ç§ç±»å‹çš„å¯¹é½æ–¹å¼è¿˜æ˜¯æŒ‰ 1 ä¸ªå­—èŠ‚å¯¹é½,è€Œä¸æ˜¯æŒ‰å®ƒçš„é•¿åº¦ã€‚  </p>
<p>è¡¥å……ï¼šè”åˆä½“å†…å­˜å¯¹é½çš„é—®é¢˜  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ä¾‹1ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">U</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">9</span>];</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">double</span> d;</span><br><span class="line">}u;</span><br><span class="line"><span class="comment">//sizeof(u) = 16</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ä¾‹2ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">double</span> a1;</span><br><span class="line">    <span class="keyword">char</span> sex;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">float</span> height;</span><br><span class="line">}stu;</span><br><span class="line"><span class="comment">//sizeof(stu) = 24</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ä¾‹3ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="class"><span class="keyword">union</span></span></span><br><span class="line"><span class="class">    {</span></span><br><span class="line">        <span class="keyword">long</span> a;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">        {</span></span><br><span class="line">            <span class="keyword">char</span> a1;</span><br><span class="line">            <span class="keyword">short</span> a2;</span><br><span class="line">            <span class="keyword">char</span> a3;</span><br><span class="line">        }st_a;</span><br><span class="line">    }un_a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d, %d\n"</span>, (<span class="keyword">int</span>)(<span class="keyword">sizeof</span>(un_a.st_a)), (<span class="keyword">int</span>)(<span class="keyword">sizeof</span>(un_a)));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//sizeof(un_a.st_a) = 6</span></span><br><span class="line"><span class="comment">//sizeof(un_a) = 8</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºè”åˆä½“æ‰€å çš„ç©ºé—´ä¸ä»…å–å†³äºæœ€å®½æˆå‘˜ï¼Œè¿˜è·Ÿæ‰€æœ‰æˆå‘˜æœ‰å…³ç³»ï¼Œå³å…¶å¤§å°å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š  </p>
<ol>
<li>å¤§å°è¶³å¤Ÿå®¹çº³æœ€å®½çš„æˆå‘˜  </li>
<li>å¤§å°èƒ½è¢«å…¶åŒ…å«çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°æ‰€æ•´é™¤</li>
</ol>
<h1 id="a-i"><a href="#a-i" class="headerlink" title="a[i]"></a>a[i]</h1><p>å¯¹äºæ•°ç»„a[i]<br>æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼šaã€&amp;a[0]<br>æ•°ç»„çš„åœ°å€ï¼š&amp;a  </p>
<h1 id="æŒ‡é’ˆå’Œæ•°ç»„çš„å®šä¹‰ä¸å£°æ˜"><a href="#æŒ‡é’ˆå’Œæ•°ç»„çš„å®šä¹‰ä¸å£°æ˜" class="headerlink" title="æŒ‡é’ˆå’Œæ•°ç»„çš„å®šä¹‰ä¸å£°æ˜"></a>æŒ‡é’ˆå’Œæ•°ç»„çš„å®šä¹‰ä¸å£°æ˜</h1><ol>
<li><p>ç¼–è¯‘å™¨ä¼šæŠŠå­˜åœ¨æŒ‡é’ˆå˜é‡ä¸­çš„ä»»ä½•æ•°æ®å½“åšåœ°å€æ¥å¤„ç†  </p>
</li>
<li><p>å®šä¹‰ä¸ºæ•°ç»„ï¼Œå£°æ˜ä¸ºæŒ‡é’ˆ<br> æ–‡ä»¶1ï¼šchar a[100]; //å®šä¹‰äº†æ•°ç»„a<br> æ–‡ä»¶2ï¼šextern char *a; //å£°æ˜å®ƒä¸ºæŒ‡é’ˆ //è¿™æ ·åšæ˜¯é”™çš„  </p>
<p> è§£æï¼šextern char a[] ä¸ extern char a[100] ç­‰ä»·çš„åŸå› ï¼Œå› ä¸ºè¿™æ˜¯å£°æ˜ï¼Œä¸åˆ†é…ç©ºé—´ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æ— éœ€çŸ¥é“è¿™ä¸ªæ•°ç»„æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚è¿™ä¸¤ä¸ªå£°æ˜éƒ½å‘Šè¯‰ç¼–è¯‘å™¨ a æ˜¯åœ¨åˆ«çš„æ–‡ä»¶ä¸­è¢«å®šä¹‰çš„ä¸€ä¸ªæ•°ç»„ï¼Œ a åŒæ—¶ä»£è¡¨æ•°ç»„ a çš„é¦–å…ƒç´ çš„é¦–åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¿™å—å†…å­˜çš„èµ·å§‹åœ°å€ã€‚æ•°ç»„å†…ä»»ä½•å…ƒç´ çš„åœ°å€éƒ½åªéœ€è¦çŸ¥é“è¿™ä¸ªåœ°å€å°±å¯ä»¥è®¡ç®—å‡ºæ¥ã€‚ä½†æ˜¯ï¼Œå½“ä½ å£°æ˜ä¸º extern char *a æ—¶ï¼Œç¼–è¯‘å™¨ç†æ‰€å½“ç„¶çš„è®¤ä¸º a æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œåœ¨ 32 ä½ç³»ç»Ÿä¸‹ï¼Œå  4 ä¸ª byteã€‚è¿™ 4 ä¸ª byte é‡Œä¿å­˜äº†ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸Šå­˜çš„æ˜¯å­—ç¬¦ç±»å‹æ•°æ®ã€‚è™½ç„¶åœ¨æ–‡ä»¶ 1 ä¸­ï¼Œç¼–è¯‘å™¨çŸ¥é“ a æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯åœ¨æ–‡ä»¶ 2 ä¸­ï¼Œç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“è¿™ç‚¹ã€‚å¤§å¤šæ•°ç¼–è¯‘å™¨æ˜¯æŒ‰æ–‡ä»¶åˆ†åˆ«ç¼–è¯‘çš„ï¼Œç¼–è¯‘å™¨åªæŒ‰ç…§æœ¬æ–‡ä»¶ä¸­å£°æ˜çš„ç±»å‹æ¥å¤„ç†ã€‚æ‰€ä»¥ï¼Œè™½ç„¶ a å®é™…å¤§å°ä¸º 100 ä¸ª byteï¼Œä½†æ˜¯åœ¨æ–‡ä»¶ 2 ä¸­ï¼Œç¼–è¯‘å™¨è®¤ä¸º a åªå  4 ä¸ª byteã€‚  </p>
</li>
<li><p>å®šä¹‰ä¸ºæŒ‡é’ˆï¼Œå£°æ˜ä¸ºæ•°ç»„<br> æ–‡ä»¶1ï¼šchar *p = â€œabcdefgâ€;<br> æ–‡ä»¶2ï¼šextern char p[]; //è¿™æ ·çš„åšæ³•ä¹Ÿæ˜¯é”™è¯¯çš„</p>
<p> è§£æï¼šåœ¨æ–‡ä»¶ 1 ä¸­ï¼Œ ç¼–è¯‘å™¨åˆ†é… 4 ä¸ª byte ç©ºé—´ï¼Œ å¹¶å‘½åä¸º pã€‚ åŒæ—¶ p é‡Œä¿å­˜äº†å­—ç¬¦ä¸²å¸¸é‡ â€œ abcdefgâ€ çš„é¦–å­—ç¬¦çš„é¦–åœ°å€ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡æœ¬èº«ä¿å­˜åœ¨å†…å­˜çš„é™æ€åŒºï¼Œå…¶å†…å®¹ä¸å¯æ›´æ”¹ã€‚åœ¨æ–‡ä»¶ 2 ä¸­ï¼Œç¼–è¯‘å™¨è®¤ä¸º p æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å¤§å°ä¸º 4 ä¸ª byteï¼Œæ•°ç»„å†…ä¿å­˜çš„æ˜¯ char ç±»å‹çš„æ•°æ®ã€‚  </p>
</li>
</ol>
<h1 id="åœ°å€çš„å¼ºåˆ¶è½¬æ¢"><a href="#åœ°å€çš„å¼ºåˆ¶è½¬æ¢" class="headerlink" title="åœ°å€çš„å¼ºåˆ¶è½¬æ¢"></a>åœ°å€çš„å¼ºåˆ¶è½¬æ¢</h1><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="keyword">int</span> Num;</span><br><span class="line">    <span class="keyword">char</span> *pcName;</span><br><span class="line">    <span class="keyword">short</span> sDate;</span><br><span class="line">    <span class="keyword">char</span> cha[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">short</span> sBa[<span class="number">4</span>];</span><br><span class="line">}*p;</span><br></pre></td></tr></tbody></table></figure>
<p>å‡è®¾ p çš„å€¼ä¸º 0x100000ï¼Œå¦‚ä¸‹è¡¨è¾¾å¼çš„å€¼åˆ†åˆ«ä¸ºå¤šå°‘ï¼Ÿ  </p>
<ol>
<li>p + 0x1 = 0x____ ?  </li>
<li>(unsigned long) p + 0x1 = 0x____ ?  </li>
<li>(unsigned int *) p + 0x1 = 0x____ ?  </li>
</ol>
<p>æŒ‡é’ˆå˜é‡ä¸ä¸€ä¸ªæ•´æ•°ç›¸åŠ å‡å¹¶ä¸æ˜¯ç”¨æŒ‡é’ˆå˜é‡é‡Œçš„åœ°å€ç›´æ¥åŠ å‡è¿™ä¸ªæ•´æ•°ã€‚  </p>
<ol>
<li>p + 0x1 çš„å€¼ä¸º 0x100000 + sizofï¼ˆ Testï¼‰ * 0x1 ï¼Œæ­¤ç»“æ„ä½“çš„å¤§å°ä¸º 20byteï¼Œæ‰€ä»¥ p + 0x1 çš„å€¼ä¸ºï¼š 0x100014  </li>
<li>å°†æŒ‡é’ˆå˜é‡ p ä¿å­˜çš„å€¼å¼ºåˆ¶è½¬æ¢æˆæ— ç¬¦å·çš„é•¿æ•´å‹æ•°ã€‚ä»»ä½•æ•°å€¼ä¸€æ—¦è¢«å¼ºåˆ¶è½¬æ¢ï¼Œå…¶ç±»å‹å°±æ”¹å˜äº†ã€‚æ‰€ä»¥è¿™ä¸ªè¡¨è¾¾å¼å…¶å®å°±æ˜¯ä¸€ä¸ªæ— ç¬¦å·çš„é•¿æ•´å‹æ•°åŠ ä¸Šå¦ä¸€ä¸ªæ•´æ•°ã€‚æ‰€ä»¥å…¶å€¼ä¸ºï¼š 0x100001  </li>
<li>p è¢«å¼ºåˆ¶è½¬æ¢æˆä¸€ä¸ªæŒ‡å‘æ— ç¬¦å·æ•´å‹çš„æŒ‡é’ˆã€‚æ‰€ä»¥å…¶å€¼ä¸ºï¼š 0x100000 + sizeofï¼ˆ unsigned intï¼‰ * 0x1ï¼Œç­‰äº 0x100004  </li>
</ol>
<h1 id="äºŒç»´æ•°ç»„"><a href="#äºŒç»´æ•°ç»„" class="headerlink" title="äºŒç»´æ•°ç»„"></a>äºŒç»´æ•°ç»„</h1><p>ä¾‹å­ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">5</span>][<span class="number">5</span>];</span><br><span class="line"><span class="keyword">int</span> (*p)[<span class="number">4</span>];</span><br><span class="line">p = a;</span><br><span class="line"><span class="comment">//é—®&amp;p[4][2] - &amp;a[4][2]çš„å€¼ä¸ºå¤šå°‘ï¼Ÿ</span></span><br></pre></td></tr></tbody></table></figure>
<ol>
<li>å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå½“æ•°ç»„å a ä½œä¸ºå³å€¼æ—¶ï¼Œä»£è¡¨çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„é¦–åœ°å€ã€‚è¿™é‡Œçš„ a ä¸ºäºŒç»´æ•°ç»„ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„ a çœ‹ä½œæ˜¯åŒ…å« 5 ä¸ª int ç±»å‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„,é‡Œé¢å†å­˜å‚¨äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚å¦‚æ­¤ï¼Œåˆ™ a åœ¨è¿™é‡Œä»£è¡¨çš„æ˜¯ a[0]çš„é¦–åœ°å€ã€‚ a+1 è¡¨ç¤ºçš„æ˜¯ä¸€ç»´æ•°ç»„ a çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚ a[4]è¡¨ç¤ºçš„æ˜¯ä¸€ç»´æ•°ç»„ a çš„ç¬¬ 5 ä¸ªå…ƒç´ ï¼Œè€Œè¿™ä¸ªå…ƒç´ é‡Œåˆå­˜äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚æ‰€ä»¥&amp;a[4][2]è¡¨ç¤ºçš„æ˜¯&amp;a[0][0]+4*5*sizeof(int) + 2*sizeof(int)ã€‚  </li>
<li>æ ¹æ®å®šä¹‰ï¼Œ p æ˜¯æŒ‡å‘ä¸€ä¸ªåŒ…å« 4 ä¸ªå…ƒç´ çš„æ•°ç»„çš„æŒ‡é’ˆã€‚ä¹Ÿå°±æ˜¯è¯´ p+1 è¡¨ç¤ºçš„æ˜¯æŒ‡é’ˆ p å‘åç§»åŠ¨äº†ä¸€ä¸ªâ€œåŒ…å« 4 ä¸ª int ç±»å‹å…ƒç´ çš„æ•°ç»„â€ã€‚è¿™é‡Œ 1 çš„å•ä½æ˜¯ p æ‰€æŒ‡å‘çš„ç©ºé—´ï¼Œå³4*sizeof(int)ã€‚æ‰€ä»¥ï¼Œ p[4]ç›¸å¯¹äº p[0]æ¥è¯´æ˜¯å‘åç§»åŠ¨äº† 4 ä¸ªâ€œåŒ…å« 4 ä¸ª int ç±»å‹å…ƒç´ çš„æ•°ç»„â€ï¼Œå³&amp;p[4]è¡¨ç¤ºçš„æ˜¯&amp;p[0]+4*4*sizeof(int)ã€‚ç”±äº p è¢«åˆå§‹åŒ–ä¸º&amp;a[0]ï¼Œé‚£ä¹ˆ&amp;p[4][2]è¡¨ç¤ºçš„æ˜¯&amp;a[0][0]+4*4*sizeof(int)+2* sizeof(int)ã€‚  </li>
<li>å…¶å®æˆ‘ä»¬æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ç”»å†…å­˜å¸ƒå±€å›¾  </li>
</ol>
<h1 id="äºŒçº§æŒ‡é’ˆ"><a href="#äºŒçº§æŒ‡é’ˆ" class="headerlink" title="äºŒçº§æŒ‡é’ˆ"></a>äºŒçº§æŒ‡é’ˆ</h1><h1 id="ä¸€ç»´æ•°ç»„å‚æ•°"><a href="#ä¸€ç»´æ•°ç»„å‚æ•°" class="headerlink" title="ä¸€ç»´æ•°ç»„å‚æ•°"></a>ä¸€ç»´æ•°ç»„å‚æ•°</h1><p>Cè¯­è¨€ä¸­ï¼Œå½“ä¸€ç»´æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ€»æ˜¯æŠŠå®ƒè§£ææˆä¸€ä¸ªæŒ‡å‘å…¶é¦–å…ƒç´ é¦–åœ°å€çš„æŒ‡é’ˆã€‚<br>åŒæ ·çš„ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¹Ÿä¸èƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œåªèƒ½æ˜¯æŒ‡é’ˆã€‚  </p>
<h1 id="ä¸€çº§æŒ‡é’ˆå‚æ•°"><a href="#ä¸€çº§æŒ‡é’ˆå‚æ•°" class="headerlink" title="ä¸€çº§æŒ‡é’ˆå‚æ•°"></a>ä¸€çº§æŒ‡é’ˆå‚æ•°</h1><p>é—®ï¼š èƒ½å¦æŠŠæŒ‡é’ˆå˜é‡æœ¬èº«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Ÿ<br>ä¾‹å­ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">char</span> *p)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> c = p[<span class="number">3</span>]; <span class="comment">//æˆ–è€…æ˜¯ char c = *(p+3)</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> *p2 = <span class="string">"abcdefg"</span>;</span><br><span class="line">    fun(p2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç­”ï¼š æ— æ³•æŠŠæŒ‡é’ˆå˜é‡æœ¬èº«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚<br>funcå‡½æ•°å®é™…è¿è¡Œæ—¶ï¼Œå¯¹ p2 åšä¸€ä»½æ‹·è´ï¼Œå‡è®¾å…¶æ‹·è´åä¸º_p2ã€‚é‚£ä¼ é€’åˆ°funcå‡½æ•°å†…éƒ¨çš„å°±æ˜¯_p2 è€Œå¹¶é p2 æœ¬èº«ã€‚  </p>
<p>å†çœ‹å¦‚ä¸‹ä¾‹å­ï¼š  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetMemory</span> <span class="params">(<span class="keyword">char</span> * p, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    p = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(num*<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> *str = <span class="literal">NULL</span>;</span><br><span class="line">    GetMemory(str,<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(str,<span class="string">"hello"</span>);</span><br><span class="line">    <span class="built_in">free</span>(str); <span class="comment">//free å¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼Œå†…å­˜æ³„æ¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>åœ¨è¿è¡Œ strcpy(str,â€helloâ€)è¯­å¥çš„æ—¶å€™å‘ç”Ÿé”™è¯¯ã€‚è¿™æ—¶å€™è§‚å¯Ÿ str çš„å€¼ï¼Œ å‘ç°ä»ç„¶ä¸º NULLã€‚ä¹Ÿå°±æ˜¯è¯´ str æœ¬èº«å¹¶æ²¡æœ‰æ”¹å˜ï¼Œæˆ‘ä»¬ malloc çš„å†…å­˜çš„åœ°å€å¹¶æ²¡æœ‰èµ‹ç»™strï¼Œè€Œæ˜¯èµ‹ç»™äº†_strã€‚è€Œè¿™ä¸ª_str æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…å’Œå›æ”¶çš„ï¼Œæˆ‘ä»¬æ ¹æœ¬å°±æ— æ³•ä½¿ç”¨ã€‚  </p>
<p>è§£å†³æ–¹æ³•ï¼š  </p>
<ol>
<li>ç”¨return  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">GetMemory</span> <span class="params">(<span class="keyword">char</span> * p, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    p = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(num*<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> *str = <span class="literal">NULL</span>;</span><br><span class="line">    str = GetMemory(str,<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(str,<span class="string">"hello"</span>);</span><br><span class="line">    <span class="built_in">free</span>(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>ç”¨äºŒçº§æŒ‡é’ˆ  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetMemory</span> <span class="params">(<span class="keyword">char</span> ** p, <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    *p = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(num*<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> *str = <span class="literal">NULL</span>;</span><br><span class="line">    GetMemory(&amp;str,<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">strcpy</span>(str,<span class="string">"hello"</span>);</span><br><span class="line">    <span class="built_in">free</span>(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œçš„å‚æ•°æ˜¯&amp;str è€Œé strã€‚è¿™æ ·çš„è¯ä¼ é€’è¿‡å»çš„æ˜¯ str çš„åœ°å€ï¼Œæ˜¯ä¸€ä¸ªå€¼ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œç”¨é’¥åŒ™("*")æ¥å¼€é”ï¼š *(&amp;str)ï¼Œå…¶å€¼å°±æ˜¯ strã€‚æ‰€ä»¥ malloc åˆ†é…çš„å†…å­˜åœ°å€æ˜¯çœŸæ­£èµ‹å€¼ç»™äº† str æœ¬èº«ã€‚</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h1 id="äºŒç»´æ•°ç»„å‚æ•°ä¸äºŒç»´æŒ‡é’ˆå‚æ•°"><a href="#äºŒç»´æ•°ç»„å‚æ•°ä¸äºŒç»´æŒ‡é’ˆå‚æ•°" class="headerlink" title="äºŒç»´æ•°ç»„å‚æ•°ä¸äºŒç»´æŒ‡é’ˆå‚æ•°"></a>äºŒç»´æ•°ç»„å‚æ•°ä¸äºŒç»´æŒ‡é’ˆå‚æ•°</h1><p>Page 100</p>
<h1 id="å‡½æ•°æŒ‡é’ˆä½¿ç”¨"><a href="#å‡½æ•°æŒ‡é’ˆä½¿ç”¨" class="headerlink" title="å‡½æ•°æŒ‡é’ˆä½¿ç”¨"></a>å‡½æ•°æŒ‡é’ˆä½¿ç”¨</h1><h1 id="å‡½æ•°æŒ‡é’ˆæ•°ç»„"><a href="#å‡½æ•°æŒ‡é’ˆæ•°ç»„" class="headerlink" title="å‡½æ•°æŒ‡é’ˆæ•°ç»„"></a>å‡½æ•°æŒ‡é’ˆæ•°ç»„</h1><h1 id="å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ"><a href="#å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ" class="headerlink" title="å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ"></a>å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ</h1><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><ol>
<li>å¦‚æœå‚æ•°æ˜¯æŒ‡é’ˆï¼Œä¸”ä»…ä½œä¸ºè¾“å…¥å‚æ•°ç”¨ï¼Œåˆ™åº”åœ¨ç±»å‹å‰åŠ constï¼Œä»¥é˜²æ­¢è¯¥æŒ‡é’ˆåœ¨å‡½æ•°ä½“å†…è¢«æ„å¤–ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">str_copy</span> <span class="params">(<span class="keyword">char</span> *strDestinationï¼Œ <span class="keyword">const</span> <span class="keyword">char</span> *strSource)</span></span>;</span><br></pre></td></tr></tbody></table></figure></li>
<li>returnè¯­å¥ä¸å¯è¿”å›æŒ‡å‘â€œæ ˆå†…å­˜â€çš„â€œæŒ‡é’ˆâ€ï¼Œå› ä¸ºè¯¥å†…å­˜åœ¨å‡½æ•°ä½“ç»“æŸæ—¶è¢«è‡ªåŠ¨é”€æ¯ã€‚ä¾‹å¦‚ï¼š  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">Func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">30</span>];</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>åœ¨å‡½æ•°ä½“çš„â€œå…¥å£å¤„â€ï¼Œå¯¹å‚æ•°çš„æœ‰æ•ˆæ€§è¿›è¡Œæ£€æŸ¥ã€‚å°¤å…¶æ˜¯æŒ‡é’ˆå‚æ•°ï¼Œå°½é‡ä½¿ç”¨assertå®åšå…¥å£æ ¡éªŒï¼Œè€Œä¸ä½¿ç”¨ifè¯­å¥æ ¡éªŒã€‚  </li>
</ol>
<h1 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h1><p>é˜²æ­¢å¤´æ–‡ä»¶è¢«é‡å¤åŒ…å«  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __FN_FILENAME_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __FN_FILENAME_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>
<p>å…¶ä¸­â€œFN_FILENAMEâ€ä¸€èˆ¬ä¸ºæœ¬å¤´æ–‡ä»¶åå¤§å†™ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆé¿å…é‡å¤ï¼Œå› ä¸ºåŒä¸€ä¸ªå·¥ç¨‹ä¸­ä¸å¯èƒ½å­˜åœ¨ä¸¤ä¸ªåŒåçš„å¤´æ–‡ä»¶ã€‚  </p>
<h1 id="å¸¸è§çš„å†…å­˜é”™è¯¯åŠå¯¹ç­–"><a href="#å¸¸è§çš„å†…å­˜é”™è¯¯åŠå¯¹ç­–" class="headerlink" title="å¸¸è§çš„å†…å­˜é”™è¯¯åŠå¯¹ç­–"></a>å¸¸è§çš„å†…å­˜é”™è¯¯åŠå¯¹ç­–</h1><ol>
<li><p>æŒ‡é’ˆæ²¡æœ‰æŒ‡å‘ä¸€å—åˆæ³•çš„å†…å­˜  </p>
<ol>
<li>ç»“æ„ä½“æˆå‘˜æŒ‡é’ˆæœªåˆå§‹åŒ–ï¼ˆè§£å†³æ–¹æ³•æ˜¯mallocä¸€å—ç©ºé—´ï¼‰  </li>
<li>æ²¡æœ‰ä¸ºç»“æ„ä½“æŒ‡é’ˆåˆ†é…è¶³å¤Ÿçš„å†…å­˜  </li>
<li>å‡½æ•°çš„å…¥å£æ ¡éªŒ  <ul>
<li>ä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨æŒ‡é’ˆä¹‹å‰ä¸€å®šè¦ç¡®ä¿æŒ‡é’ˆæ˜¯æœ‰æ•ˆçš„  </li>
<li>ä¸€èˆ¬åœ¨å‡½æ•°å…¥å£å¤„ä½¿ç”¨ assert(NULL != p)å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒã€‚åœ¨éå‚æ•°çš„åœ°æ–¹ä½¿ç”¨ if(NULL != p)æ¥æ ¡éªŒã€‚ä½†è¿™éƒ½æœ‰ä¸€ä¸ªè¦æ±‚ï¼Œå³ p åœ¨å®šä¹‰çš„åŒæ—¶è¢«åˆå§‹åŒ–ä¸º NULL äº†  </li>
<li>assert æ˜¯ä¸€ä¸ªå®ï¼Œè€Œä¸æ˜¯å‡½æ•°ï¼ŒåŒ…å«åœ¨ assert.h å¤´æ–‡ä»¶ä¸­ã€‚å¦‚æœå…¶åé¢æ‹¬å·é‡Œçš„å€¼ä¸ºå‡ï¼Œåˆ™ç¨‹åºç»ˆæ­¢è¿è¡Œï¼Œå¹¶æç¤ºå‡ºé”™ï¼›å¦‚æœåé¢æ‹¬å·é‡Œçš„å€¼ä¸ºçœŸï¼Œåˆ™ç»§ç»­è¿è¡Œåé¢çš„ä»£ç   </li>
</ul>
</li>
</ol>
</li>
<li><p>ä¸ºæŒ‡é’ˆåˆ†é…çš„å†…å­˜å¤ªå°  </p>
</li>
<li><p>å†…å­˜åˆ†é…æˆåŠŸï¼Œä½†å¹¶æœªåˆå§‹åŒ–  </p>
</li>
<li><p>å†…å­˜è¶Šç•Œ  </p>
</li>
<li><p>å†…å­˜æ³„æ¼<br> ä¼šäº§ç”Ÿæ³„æ¼çš„å†…å­˜å°±æ˜¯å †ä¸Šçš„å†…å­˜ï¼ˆè¿™é‡Œä¸è®¨è®ºèµ„æºæˆ–å¥æŸ„ç­‰æ³„æ¼æƒ…å†µï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ç”± malloc ç³»åˆ—å‡½æ•°æˆ– new æ“ä½œç¬¦åˆ†é…çš„å†…å­˜ã€‚å¦‚æœç”¨å®Œä¹‹åæ²¡æœ‰åŠæ—¶ free æˆ– deleteï¼Œè¿™å—å†…å­˜å°±æ— æ³•é‡Šæ”¾ï¼Œç›´åˆ°æ•´ä¸ªç¨‹åºç»ˆæ­¢  </p>
<ul>
<li><p>malloc å‡½æ•°çš„åŸå‹ï¼š(void *)malloc(int size)<br>  ä½¿ç”¨ malloc å‡½æ•°åŒæ ·è¦æ³¨æ„è¿™ç‚¹ï¼šå¦‚æœæ‰€ç”³è¯·çš„å†…å­˜å—å¤§äºç›®å‰å †ä¸Šå‰©ä½™å†…å­˜å—ï¼ˆæ•´å—ï¼‰ï¼Œåˆ™å†…å­˜åˆ†é…ä¼šå¤±è´¥ï¼Œå‡½æ•°è¿”å› NULL<br>  æ—¢ç„¶ malloc å‡½æ•°ç”³è¯·å†…å­˜æœ‰ä¸æˆåŠŸçš„å¯èƒ½ï¼Œé‚£æˆ‘ä»¬åœ¨ä½¿ç”¨æŒ‡å‘è¿™å—å†…å­˜çš„æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»ç”¨ if(NULL != p)è¯­å¥æ¥éªŒè¯å†…å­˜ç¡®å®åˆ†é…æˆåŠŸäº†  </p>
</li>
<li><p>å†…å­˜é‡Šæ”¾ freeå‡½æ•°ï¼šfree(p)<br>  æŒ‡é’ˆå˜é‡ p æœ¬èº«ä¿å­˜çš„åœ°å€å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å®ƒå¯¹è¿™ä¸ªåœ°å€å¤„çš„é‚£å—å†…å­˜å´å·²ç»æ²¡æœ‰æ‰€æœ‰æƒäº†ã€‚é‚£å—è¢«é‡Šæ”¾çš„å†…å­˜é‡Œé¢ä¿å­˜çš„å€¼ä¹Ÿæ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯å†ä¹Ÿæ²¡æœ‰åŠæ³•ä½¿ç”¨äº†<br>  å¦‚æœå¯¹ p è¿ç»­ä¸¤æ¬¡ä»¥ä¸Šä½¿ç”¨ free å‡½æ•°ï¼Œè‚¯å®šä¼šå‘ç”Ÿé”™è¯¯ã€‚å› ä¸ºç¬¬ä¸€ä½¿ç”¨ free å‡½æ•°æ—¶ï¼Œ p æ‰€å±çš„å†…å­˜å·²ç»è¢«é‡Šæ”¾ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨æ—¶å·²ç»æ— å†…å­˜å¯é‡Šæ”¾äº†<br>  æ—¢ç„¶ä½¿ç”¨ free å‡½æ•°ä¹‹åæŒ‡é’ˆå˜é‡ p æœ¬èº«ä¿å­˜çš„åœ°å€å¹¶æ²¡æœ‰æ”¹å˜ï¼Œ é‚£æˆ‘ä»¬å°±éœ€è¦é‡æ–°æŠŠ pçš„å€¼å˜ä¸º NULLï¼šp = NULL<br>  é‡Šæ”¾å®Œå—å†…å­˜ä¹‹åï¼Œæ²¡æœ‰æŠŠæŒ‡é’ˆç½® NULLï¼Œè¿™ä¸ªæŒ‡é’ˆå°±æˆä¸ºäº†â€œé‡æŒ‡é’ˆâ€ï¼Œè¿™æ˜¯å¾ˆå±é™©çš„ï¼Œè€Œä¸”ä¹Ÿæ˜¯ç»å¸¸å‡ºé”™çš„åœ°æ–¹ã€‚æ‰€ä»¥ä¸€å®šè¦è®°ä½ä¸€æ¡ï¼šfree å®Œä¹‹åï¼Œä¸€å®šè¦ç»™æŒ‡é’ˆç½® NULL  </p>
</li>
</ul>
</li>
</ol>
<h1 id="å…¶ä»–å…¸å‹é¢˜ç›®"><a href="#å…¶ä»–å…¸å‹é¢˜ç›®" class="headerlink" title="å…¶ä»–å…¸å‹é¢˜ç›®"></a>å…¶ä»–å…¸å‹é¢˜ç›®</h1><ul>
<li><p>å½“unsignedç±»å‹ä¸signedç±»å‹è¿ç®—æ—¶ï¼Œé»˜è®¤è½¬æ¢æˆunsignedç±»å‹  </p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">-6</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> b = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">if</span>(a+b &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a+b&gt;0\n"</span>);<span class="comment">//è¿™å¥è¯è¢«æ‰“å°</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"a+b&lt;0\n"</span>);</span><br><span class="line">    <span class="keyword">int</span> z = a+b;</span><br><span class="line">    <span class="keyword">if</span>(z &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"z&gt;0"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"z&lt;0"</span>);<span class="comment">//è¿™å¥è¯è¢«æ‰“å°</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å½“intå’Œunsigned intç›¸åŠ æ—¶ï¼Œè¦å°†intè½¬åŒ–ä¸ºunsigned intï¼Œè€Œintå°äº0ï¼Œæ‰€ä»¥å®ƒçš„æœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œä¸º1ï¼Œæ‰€ä»¥è½¬åŒ–çš„ç»“æœæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ­£æ•°ï¼Œåœ¨ç¬¬ä¸€ä¸ªifè¯­å¥ä¸­ï¼Œæ˜¯ä¸¤ä¸ªâ€œæ­£æ•°â€ç›¸åŠ ï¼Œç»“æœè‡ªç„¶å°±å¤§äº0äº†ã€‚è€Œåœ¨z = a+bè¿™ä¸€å¥æ—¶ï¼Œå®ƒæŠŠa+bçš„ç»“æœçœ‹åšä¸€ä¸ªintç±»å‹ï¼Œè€Œa+bæœ€é«˜ä½ä¸º1ï¼Œæ‰€ä»¥zæ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œæ‰€ä»¥æ‰“å°çš„æ˜¯ç¬¬äºŒä¸ªè¯­å¥ã€‚  </p>
</li>
<li><p>åœ¨ä»¥ä¸‹æ•°ç»„å®šä¹‰ä¸­ï¼Œæ­£ç¡®çš„æœ‰ï¼ˆADï¼‰<br>A) int a[â€˜aâ€™];<br>B) int a[3.4];<br>C) int a[][4];<br>D) int *a[10];<br>int a[][4]; ä¸æ˜ç¡®çš„è¯ï¼Œå°±ä¸çŸ¥é“åˆ†é…å¤šå°‘å†…å­˜ã€‚  </p>
<p>  åœ¨å®šä¹‰äºŒç»´æ•°ç»„çš„æ—¶å€™å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥çœç•¥ç¬¬ä¸€ç»´ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ä½ çš„åˆå§‹åŒ–è¯­å¥è‡ªåŠ¨å†³å®šç¬¬ä¸€ç»´åº¦ã€‚ï¼ˆæœ‰åˆå§‹åŒ–çš„æ—¶å€™ï¼Œç¬¬äºŒç»´çš„æ•°å­—ä»£è¡¨åˆ†é…å†…å­˜çš„é•¿åº¦ï¼Œç¬¬ä¸€ç»´çš„æ•°å­—ä»£è¡¨åˆ†é…å†…å­˜å€æ•°ï¼Œå€æ•°å¯ä»¥è®©æœºå™¨å»æ•°ï¼Œä½†é•¿åº¦æ²¡æœ‰çš„è¯å°±ä¸å¥½å¼€è¾Ÿç©ºé—´äº†ï¼‰  </p>
<p>  å¤šç»´æ•°ç»„å£°æ˜æ—¶ï¼Œå¯ä»¥çœç•¥ç¬¬ä¸€ç»´ï¼Œä½†æ˜¯ä¸èƒ½çœç•¥ç¬¬äºŒç»´æˆ–è€…æ›´é«˜ç»´çš„å¤§å°ã€‚è¿™æ˜¯ç”±ç¼–è¯‘å™¨åŸç†é™åˆ¶çš„ã€‚<br>  è®¾æœ‰æ•°ç»„int a[m][n]ï¼Œå¦‚æœè¦è®¿é—®a[i][j]çš„å€¼ï¼Œç¼–è¯‘å™¨çš„å¯»å€æ–¹å¼ä¸ºï¼š  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">&amp;a[i][j]=&amp;a[<span class="number">0</span>][<span class="number">0</span>]+i*<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*n+j*<span class="keyword">sizeof</span>(<span class="keyword">int</span>); <span class="comment">//æ³¨æ„nä¸ºç¬¬äºŒç»´çš„ç»´æ•°</span></span><br></pre></td></tr></tbody></table></figure>
<p>  å› æ­¤ï¼Œå¯ä»¥çœç•¥ç¬¬ä¸€ç»´çš„ç»´æ•°ï¼Œä¸èƒ½çœç•¥å…¶ä»–ç»´çš„ç»´æ•°ã€‚  </p>
</li>
<li><p>printfå‹æ ˆ<br>  ä¾‹1ï¼š  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> n = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>,++n,++n,n++,++n); <span class="comment">// 9 9 6 9</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"n = %d\n"</span>,n); <span class="comment">// 9</span></span><br></pre></td></tr></tbody></table></figure>

<p>  ä¾‹2ï¼š  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>, i, --i, i, i--);</span><br></pre></td></tr></tbody></table></figure>

<p>  â€œå¯¹äºa++çš„ç»“æœï¼Œæ˜¯æœ‰ebpå¯»å€å‡½æ•°æ ˆç©ºé—´æ¥è®°å½•ä¸­é—´ç»“æœçš„ï¼Œåœ¨æœ€åç»™printfå‹æ ˆçš„æ—¶å€™ï¼Œå†ä»æ ˆä¸­æŠŠä¸­é—´ç»“æœå–å‡ºæ¥ï¼›è€Œå¯¹äº++açš„ç»“æœï¼Œåˆ™ç›´æ¥å‹å¯„å­˜å™¨å˜é‡ï¼Œå¯„å­˜å™¨ç»è¿‡äº†æ‰€æœ‰çš„è‡ªå¢æ“ä½œã€‚â€  </p>
</li>
<li><p>æ•°ç»„å’ŒæŒ‡é’ˆ  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> str1[] = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">char</span> str2[] = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> str3[] = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> str4[] = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *str5 = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *str6 = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> *str7 = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">char</span> *str8 = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ( str1 == str2 ) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ( str3 == str4 ) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ( str5 == str6 ) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ( str7 == str8 ) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>  ç»“æœæ˜¯ï¼š0 0 1 1<br>  è§£ç­”ï¼šstr1,str2,str3,str4æ˜¯æ•°ç»„å˜é‡ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„å†…å­˜ç©ºé—´ã€‚è€Œstr5,str6,str7,str8æ˜¯æŒ‡é’ˆï¼Œå®ƒä»¬æŒ‡å‘ç›¸åŒçš„å¸¸é‡åŒºåŸŸã€‚  </p>
</li>
<li><p>å­—ç¬¦ä¸²å¸¸é‡</p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">char</span>* s=<span class="string">"AAA"</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line">s[<span class="number">0</span>]=<span class="string">'B'</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%s"</span>,s);</span><br></pre></td></tr></tbody></table></figure>
<p>  æœ‰ä»€ä¹ˆé”™ï¼Ÿ<br>  â€œAAAâ€æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚sæ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥å£°æ˜sçš„æ—¶å€™å°±æœ‰é—®é¢˜ã€‚<br>  cosnt char* s=â€AAAâ€;<br>  ç„¶ååˆå› ä¸ºæ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å¯¹æ˜¯s[0]çš„èµ‹å€¼æ“ä½œæ˜¯ä¸åˆæ³•çš„ã€‚  </p>
</li>
<li><p>ä¼˜å…ˆçº§<br>  () &gt; [] &gt; *  </p>
<p>  æŒ‡é’ˆæ•°ç»„ï¼šint *(ap[])<br>  æ•°ç»„æŒ‡é’ˆï¼šint (*ap) []<br>  æ‰€ä»¥ int * ap[]æ˜¯æŒ‡é’ˆæ•°ç»„ï¼Œå› ä¸º [] çš„ä¼˜å…ˆçº§é«˜äº *  </p>
<p>  æŒ‡é’ˆå‡½æ•°ï¼šint * ( fp() )  // () ä¼˜å…ˆçº§é«˜ï¼Œå…ˆä¸ fp ç»“åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œå†ç”± int * è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ•´å½¢çš„æŒ‡é’ˆå‡½æ•°<br>  å‡½æ•°æŒ‡é’ˆï¼šint (*fp) ()  // () è¿ç®—ç¬¦ï¼Œè‡ªå·¦è‡³å³ï¼Œé¦–å…ˆè¯´æ˜ fp æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªè¿”å›å€¼æ˜¯æ•´å½¢çš„å‡½æ•°<br>  æ‰€ä»¥ int *fp() æ˜¯æŒ‡é’ˆå‡½æ•°ï¼Œå› ä¸º () çš„ä¼˜å…ˆçº§é«˜äº *  </p>
</li>
<li><p>å®šä¹‰  </p>
</li>
</ul>
<ol>
<li>å˜é‡çš„å®šä¹‰ä¸­ï¼Œé™¤äº† å˜é‡å ä»¥å¤–çš„å†…å®¹å°±æ˜¯è¯¥å˜é‡çš„ç±»å‹<br> int a; a å˜é‡å, int ç±»å‹<br> int b[10];   b å˜é‡å  ï¼Œint [10] æ•°ç»„çš„ç±»å‹<br> int * p   p  å˜é‡å   int * æŒ‡é’ˆçš„ç±»å‹  </li>
<li>æ•°ç»„çš„å®šä¹‰ä¸­ï¼Œé™¤äº† æ•°ç»„å[å…ƒç´ æ•°ç›®] ä»¥å¤–çš„å†…å®¹å°±æ˜¯è¯¥æ•°ç»„çš„å…ƒç´ ç±»å‹<br> int a[10]  int å…ƒç´ ç±»å‹   æ•´å½¢æ•°ç»„<br> int a [3][5] int[5] æ•°ç»„ç±»å‹   äºŒç»´æ•°ç»„<br> int * p[5]   int *  æŒ‡é’ˆç±»å‹  æŒ‡é’ˆæ•°ç»„  </li>
<li>æŒ‡é’ˆçš„å®šä¹‰ä¸­ï¼Œé™¤äº† * æŒ‡é’ˆå˜é‡åï¼Œä»¥å¤–çš„å†…å®¹å°±æ˜¯è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„ç±»å‹<br> int *p;   int æ•´å½¢    æ•´å½¢æŒ‡é’ˆ<br> int (*p)[5];  int[5]  æ•°ç»„    æ•°ç»„æŒ‡é’ˆ<br> int (*p) ();      int () è¿”å›å€¼ä¸ºintç±»å‹çš„å‡½æ•°    å‡½æ•°æŒ‡é’ˆ   </li>
</ol>
<ul>
<li><p>å‡½æ•°æŒ‡é’ˆå’ŒæŒ‡é’ˆå‡½æ•°<br>å‡½æ•°æŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡çš„å†…å®¹æŒ‡å‘ä¸€ä¸ªå‡½æ•°ã€‚<br>æŒ‡é’ˆå‡½æ•°çš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹çš„å˜é‡ã€‚  </p>
</li>
<li><p>åœ°å€<br>  è¦å¯¹ç»å¯¹åœ°å€0x100000èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">(<span class="keyword">unsigned</span> <span class="keyword">int</span>*)<span class="number">0x100000</span> = <span class="number">1234</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>  é‚£ä¹ˆè¦æ˜¯æƒ³è®©ç¨‹åºè·³è½¬åˆ°ç»å¯¹åœ°å€æ˜¯0x100000å»æ‰§è¡Œï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">*((<span class="keyword">void</span> (*)( ))<span class="number">0x100000</span> ) ( );</span><br></pre></td></tr></tbody></table></figure>

<p>  é¦–å…ˆè¦å°†0x100000å¼ºåˆ¶è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ,å³:  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">(<span class="keyword">void</span> (*)())<span class="number">0x100000</span></span><br></pre></td></tr></tbody></table></figure>
<p>  ç„¶åå†è°ƒç”¨å®ƒ:  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">*((<span class="keyword">void</span> (*)())<span class="number">0x100000</span>)();</span><br></pre></td></tr></tbody></table></figure>
<p>  ç”¨typedefå¯ä»¥çœ‹å¾—æ›´ç›´è§‚äº›:  </p>
  <figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*)</span><span class="params">()</span> voidFuncPtr</span>;</span><br><span class="line">*((voidFuncPtr)<span class="number">0x100000</span>)();</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä¸ºä»€ä¹ˆæœ‰åƒåœ¾å€¼ï¼Ÿ<br>  å› ä¸ºæ“ä½œç³»ç»Ÿé‡Šæ”¾å†…å­˜åªæ˜¯é‡Šæ”¾å¯¹è¿™ä¸ªå†…å­˜åœ°å€çš„ä½¿ç”¨æƒé™ï¼ˆå›æ”¶å†…å­˜ç©ºé—´ï¼‰ï¼Œä¸‹ä¸€ä¸ªå˜é‡ä½¿ç”¨è¿™ä¸ªå†…å­˜åœ°å€çš„æ—¶å€™ï¼Œå†…å­˜åœ°å€ä¸Šä¿å­˜çš„å€¼è¿˜æ˜¯ä¸Šä¸€æ¬¡é—ç•™ä¸‹æ¥çš„å€¼ï¼Œè¿™å°±æ˜¯åƒåœ¾å€¼ï¼Œå› æ­¤å˜é‡éœ€è¦åˆå§‹åŒ–ã€‚  </p>
</li>
<li><p>å¦‚æœä¸¤æŒ‡é’ˆå±äºåŒä¸€æ•°ç»„ï¼Œåˆ™å¯ä»¥ç›¸å‡  </p>
</li>
<li><p>ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªåœ°å€ã€‚æ‰€æœ‰çš„æŒ‡é’ˆå˜é‡åªå 4ä¸ªå­—èŠ‚ï¼Œç”¨ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€è¡¨ç¤ºæ•´ä¸ªå˜é‡çš„åœ°å€ã€‚  </p>
</li>
</ul>
]]></content>
      <categories>
        <category>Coding</category>
      </categories>
      <tags>
        <tag>c</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Shell</title>
    <url>/2021/02/24/linux-shell/</url>
    <content><![CDATA[<p><span class="github-emoji"><span>ğŸ’²</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4b2.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>  </p>
<span id="more"></span>


<h2 id="å¯åŠ¨ç¯å¢ƒ"><a href="#å¯åŠ¨ç¯å¢ƒ" class="headerlink" title="å¯åŠ¨ç¯å¢ƒ"></a>å¯åŠ¨ç¯å¢ƒ</h2><ul>
<li><p>session  </p>
<p>  å½“æˆ‘ä»¬ç™»å½•ç³»ç»Ÿåï¼Œbashç¨‹åºå¯åŠ¨ï¼Œå¹¶ä¸”ä¼šè¯»å–ä¸€ç³»åˆ—ç§°ä¸ºå¯åŠ¨æ–‡ä»¶çš„é…ç½®è„šæœ¬ï¼Œè¿™äº›æ–‡ä»¶å®šä¹‰äº†é»˜è®¤çš„å¯ä¾›æ‰€æœ‰ç”¨æˆ·å…±äº«çš„shellç¯å¢ƒã€‚ç„¶åæ˜¯è¯»å–æ›´å¤šä½äºæˆ‘ä»¬è‡ªå·±å®¶ç›®å½•ä¸­çš„å¯åŠ¨æ–‡ä»¶ï¼Œè¿™äº›å¯åŠ¨æ–‡ä»¶å®šä¹‰äº†ç”¨æˆ·ä¸ªäººçš„shellç¯å¢ƒã€‚ç¡®åˆ‡çš„å¯åŠ¨é¡ºåºä¾èµ–äºè¦è¿è¡Œçš„shellä¼šè¯ç±»å‹ã€‚æœ‰ä¸¤ç§shellä¼šè¯ç±»å‹ï¼šä¸€ä¸ªæ˜¯ç™»å½•shellä¼šè¯ï¼Œå¦ä¸€ä¸ªæ˜¯éç™»å½•shellä¼šè¯ã€‚    </p>
<p>  ç™»å½•shellä¼šè¯çš„å¯åŠ¨æ–‡ä»¶ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">æ–‡ä»¶</th>
<th align="left">å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/etc/profile</td>
<td align="left">åº”ç”¨äºæ‰€æœ‰ç”¨æˆ·çš„å…¨å±€é…ç½®è„šæœ¬</td>
</tr>
<tr>
<td align="left">~/.bash_profile</td>
<td align="left">ç”¨æˆ·ä¸ªäººçš„å¯åŠ¨æ–‡ä»¶ã€‚å¯ä»¥ç”¨æ¥æ‰©å±•æˆ–é‡å†™å…¨å±€é…ç½®è„šæœ¬ä¸­çš„è®¾ç½®</td>
</tr>
<tr>
<td align="left">~/.bash_login</td>
<td align="left">å¦‚æœæ–‡ä»¶ ~/.bash_profile æ²¡æœ‰æ‰¾åˆ°ï¼Œbashä¼šå°è¯•è¯»å–è¿™ä¸ªè„šæœ¬</td>
</tr>
<tr>
<td align="left">~/.profile</td>
<td align="left">å¦‚æœæ–‡ä»¶ ~/.bash_profile æˆ–æ–‡ä»¶ ~/.bash_login éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œbashä¼šè¯•å›¾è¯»å–è¿™ä¸ªæ–‡ä»¶ã€‚è¿™æ˜¯åŸºäºDebianå‘è¡Œç‰ˆçš„é»˜è®¤é…ç½®ï¼Œæ¯”æ–¹è¯´Ubuntu</td>
</tr>
</tbody></table>
<p>  éç™»å½•shellä¼šè¯çš„å¯åŠ¨æ–‡ä»¶ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">æ–‡ä»¶</th>
<th align="left">å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/etc/bash.bashrc</td>
<td align="left">åº”ç”¨äºæ‰€æœ‰ç”¨æˆ·çš„å…¨å±€é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td align="left">~/.bashrc</td>
<td align="left">ç”¨æˆ·ä¸ªäººçš„å¯åŠ¨æ–‡ä»¶ã€‚å¯ä»¥ç”¨æ¥æ‰©å±•æˆ–é‡å†™å…¨å±€é…ç½®è„šæœ¬ä¸­çš„è®¾ç½®</td>
</tr>
</tbody></table>
<p>  åœ¨æ™®é€šç”¨æˆ·çœ‹æ¥ï¼Œæ–‡ä»¶ ~/.bashrc å¯èƒ½æ˜¯æœ€é‡è¦çš„å¯åŠ¨æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå‡ ä¹æ€»æ˜¯è¢«è¯»å–ã€‚éç™»å½• shell é»˜è®¤ ä¼šè¯»å–å®ƒï¼Œå¹¶ä¸”å¤§å¤šæ•°ç™»å½• shell çš„å¯åŠ¨æ–‡ä»¶ä¼šä»¥èƒ½è¯»å– ~/.bashrc æ–‡ä»¶çš„æ–¹å¼æ¥ä¹¦å†™ã€‚  </p>
</li>
<li><p>å¯åŠ¨é€‰é¡¹  </p>
<p>  ä¸ºäº†æ–¹ä¾¿debugï¼Œæœ‰æ—¶åœ¨å¯åŠ¨Bashçš„æ—¶å€™ï¼Œå¯ä»¥åŠ ä¸Šå¯åŠ¨å‚æ•°ã€‚<br>  <code>-n</code> - ä¸è¿è¡Œè„šæœ¬ï¼Œåªæ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯<br>  <code>-v</code> - è¾“å‡ºæ¯ä¸€è¡Œè¯­å¥è¿è¡Œç»“æœå‰ï¼Œä¼šå…ˆè¾“å‡ºè¯¥è¡Œè¯­å¥<br>  <code>-x</code> - æ¯ä¸€ä¸ªå‘½ä»¤å¤„ç†ä¹‹å‰ï¼Œå…ˆè¾“å‡ºè¯¥å‘½ä»¤ï¼Œå†æ‰§è¡Œè¯¥å‘½ä»¤  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ bash -n scriptname  </span><br><span class="line">$ bash -v scriptname  </span><br><span class="line">$ bash -x scriptname  </span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><ul>
<li><p>å˜é‡åˆ†ç±»  </p>
<p>  ç¯å¢ƒå˜é‡ï¼š<code>env</code>æˆ–<code>printenv</code>å‘½ä»¤ï¼Œå¯ä»¥æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼›<code>set</code>å‘½ä»¤å¯æ˜¾ç¤ºæ‰€æœ‰å˜é‡ï¼ˆåŒ…æ‹¬ç¯å¢ƒå˜é‡å’Œè‡ªå®šä¹‰å˜é‡ï¼‰ï¼Œä»¥åŠæ‰€æœ‰çš„Bashå‡½æ•°ã€‚<br>  è‡ªå®šä¹‰å˜é‡ï¼šå±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ã€‚<br>  å˜é‡å‘½åè§„åˆ™ï¼š  </p>
<ul>
<li>å˜é‡åå¯ç”±å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆå­—æ¯å’Œæ•°å­—ï¼‰å’Œä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆ  </li>
<li>å˜é‡åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ä¸€ä¸ªå­—æ¯æˆ–ä¸€ä¸ªä¸‹åˆ’çº¿  </li>
<li>å˜é‡åä¸­ä¸å…è®¸å‡ºç°ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·  </li>
</ul>
</li>
<li><p>è¯»å–å˜é‡  </p>
<p>  è¯»å–å˜é‡çš„æ—¶å€™ï¼Œç›´æ¥åœ¨å˜é‡åå‰åŠ ä¸Š<code>$</code>å°±å¯ä»¥äº†ã€‚è¯»å–å˜é‡çš„æ—¶å€™ï¼Œå˜é‡åä¹Ÿå¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·<code>{}</code>åŒ…å›´ï¼Œæ¯”å¦‚ $a ä¹Ÿå¯ä»¥å†™æˆ ${a} ã€‚è¿™ç§å†™æ³•å¯ä»¥ç”¨äºå˜é‡åä¸å…¶ä»–å­—ç¬¦è¿ç”¨çš„æƒ…å†µã€‚<br>  å¦‚æœå˜é‡å€¼åŒ…å«è¿ç»­ç©ºæ ¼ï¼ˆæˆ–åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ï¼‰ï¼Œæœ€å¥½æ”¾åœ¨åŒå¼•å·é‡Œé¢è¯»å–ã€‚  </p>
</li>
<li><p>åˆ é™¤å˜é‡  </p>
<p>  <code>unset</code>å‘½ä»¤ç”¨æ¥åˆ é™¤ä¸€ä¸ªå˜é‡ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">unset</span> NAME  </span><br></pre></td></tr></tbody></table></figure>
<p>  è¿™ä¸ªå‘½ä»¤ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚å› ä¸ºä¸å­˜åœ¨çš„Bashå˜é‡ä¸€å¾‹ç­‰äºç©ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å³ä½¿<code>unset</code>å‘½ä»¤åˆ é™¤äº†å˜é‡ï¼Œè¿˜æ˜¯å¯ä»¥è¯»å–è¿™ä¸ªå˜é‡ï¼Œå€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚<br>  æ‰€ä»¥ï¼Œåˆ é™¤ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ªå˜é‡è®¾æˆç©ºå­—ç¬¦ä¸²:  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=<span class="string">''</span>  </span><br><span class="line">$ foo=  </span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œéƒ½æ˜¯åˆ é™¤äº†å˜é‡fooã€‚  </p>
</li>
<li><p>è¾“å‡ºå˜é‡ï¼š<code>export</code>å‘½ä»¤  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> NAME=value</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œå½“å‰shellåŠéšåæ–°å»ºçš„å­shellï¼Œéƒ½å¯ä»¥è¯»å–å˜é‡<code>$NAME</code>ã€‚å­shellå¦‚æœä¿®æ”¹ç»§æ‰¿çš„å˜é‡ï¼Œä¸ä¼šå½±å“çˆ¶shellã€‚  </p>
</li>
<li><p>ç‰¹æ®Šå˜é‡ï¼ˆåŒ…å«ä½ç½®å‚æ•°ï¼‰  </p>
<ul>
<li><code>$?</code> - ä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºç ï¼Œç”¨æ¥åˆ¤æ–­ä¸Šä¸€ä¸ªå‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚è¿”å›å€¼æ˜¯0ï¼Œè¡¨ç¤ºä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼›å¦‚æœæ˜¯éé›¶ï¼Œä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥  </li>
<li><code>$$</code> - å½“å‰shellçš„è¿›ç¨‹ID  </li>
<li><code>$_</code> - ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°  </li>
<li><code>$!</code> - æœ€è¿‘ä¸€ä¸ªåå°æ‰§è¡Œçš„å¼‚æ­¥å‘½ä»¤çš„è¿›ç¨‹ID  </li>
<li><code>$0</code> - å½“å‰shellçš„åç§°ï¼Œè„šæœ¬æ–‡ä»¶å  </li>
<li><code>$1</code>åˆ°<code>$9</code> - å¯¹åº”è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°åˆ°ç¬¬ä¹ä¸ªå‚æ•°ã€‚é€šè¿‡å‚æ•°å±•å¼€æ–¹å¼å¯ä»¥è®¿é—®çš„å‚æ•°ä¸ªæ•°å¤šäº9ä¸ªã€‚åªè¦æŒ‡å®šä¸€ä¸ªå¤§äº9çš„æ•°å­—ï¼Œç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥å°±å¯ä»¥ï¼Œä¾‹å¦‚ ${10}ã€${55}ã€${211} ç­‰  </li>
<li><code>$-</code> - å½“å‰shellçš„å¯åŠ¨å‚æ•°  </li>
<li><code>$#</code> - å‚æ•°çš„æ€»å’Œ  </li>
<li><code>$@</code> - å…¨éƒ¨çš„å‚æ•°ã€‚å½“å®ƒè¢«ç”¨åŒå¼•å·å¼•èµ·æ¥çš„æ—¶å€™ï¼Œ å®ƒæŠŠæ¯ä¸€ä¸ªä½ç½®å‚æ•°å±•å¼€æˆä¸€ä¸ªç”±åŒå¼•å·å¼•èµ·æ¥çš„åˆ†å¼€çš„å­—ç¬¦ä¸²  </li>
<li><code>$*</code> - å…¨éƒ¨çš„å‚æ•°ã€‚å½“å®ƒè¢«ç”¨åŒå¼•å·å¼•èµ·æ¥çš„æ—¶å€™ï¼Œå±•å¼€æˆä¸€ä¸ªç”±åŒå¼•å·å¼•èµ·æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ä½ç½®å‚æ•°ï¼Œæ¯ä¸ªä½ç½®å‚æ•°ç”±shellå˜é‡<code>$IFS</code>å€¼çš„ç¬¬ä¸€ä¸ªå­—ç¬¦åˆ†éš”å¼€ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œä½†æ˜¯å¯ä»¥è‡ªå®šä¹‰  </li>
</ul>
</li>
</ul>
<ul>
<li><p>å˜é‡çš„é»˜è®¤å€¼  </p>
<ul>
<li><code>${varname:-word}</code>ï¼šå¦‚æœå˜é‡varnameå­˜åœ¨ä¸”ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›å®ƒçš„å€¼ï¼Œå¦åˆ™è¿”å›wordã€‚å®ƒçš„ç›®çš„æ˜¯è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ¯”å¦‚${count:-0}è¡¨ç¤ºå˜é‡countä¸å­˜åœ¨æ—¶è¿”å›0ã€‚  </li>
<li><code>${varname:=word}</code>ï¼šä¸Šé¢è¯­æ³•çš„å«ä¹‰æ˜¯ï¼Œå¦‚æœå˜é‡varnameå­˜åœ¨ä¸”ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›å®ƒçš„å€¼ï¼Œå¦åˆ™å°†å®ƒè®¾ä¸ºwordï¼Œå¹¶ä¸”è¿”å›wordã€‚å®ƒçš„ç›®çš„æ˜¯è®¾ç½®å˜é‡çš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚${count:=0}è¡¨ç¤ºå˜é‡countä¸å­˜åœ¨æ—¶è¿”å›0ï¼Œä¸”å°†countè®¾ä¸º0ã€‚  </li>
<li> <code>${varname:+word}</code>ï¼šä¸Šé¢è¯­æ³•çš„å«ä¹‰æ˜¯ï¼Œå¦‚æœå˜é‡åå­˜åœ¨ä¸”ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›wordï¼Œå¦åˆ™è¿”å›ç©ºå€¼ã€‚å®ƒçš„ç›®çš„æ˜¯æµ‹è¯•å˜é‡æ˜¯å¦å­˜åœ¨ï¼Œæ¯”å¦‚${count:+1}è¡¨ç¤ºå˜é‡countå­˜åœ¨æ—¶è¿”å›1ï¼ˆè¡¨ç¤ºtrueï¼‰ï¼Œå¦åˆ™è¿”å›ç©ºå€¼ã€‚  </li>
<li> <code>${varname:?message}</code>ï¼šä¸Šé¢è¯­æ³•çš„å«ä¹‰æ˜¯ï¼Œå¦‚æœå˜é‡varnameå­˜åœ¨ä¸”ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›å®ƒçš„å€¼ï¼Œå¦åˆ™æ‰“å°å‡ºvarname: messageï¼Œå¹¶ä¸­æ–­è„šæœ¬çš„æ‰§è¡Œã€‚å¦‚æœçœç•¥äº†messageï¼Œåˆ™è¾“å‡ºé»˜è®¤çš„ä¿¡æ¯â€œparameter null or not set.â€ã€‚å®ƒçš„ç›®çš„æ˜¯é˜²æ­¢å˜é‡æœªå®šä¹‰ï¼Œæ¯”å¦‚${count:?â€undefined!â€}è¡¨ç¤ºå˜é‡countæœªå®šä¹‰æ—¶å°±ä¸­æ–­æ‰§è¡Œï¼ŒæŠ›å‡ºé”™è¯¯ï¼Œè¿”å›ç»™å®šçš„æŠ¥é”™ä¿¡æ¯undefined!ã€‚  </li>
</ul>
<p>  ä¸Šé¢å››ç§è¯­æ³•å¦‚æœç”¨åœ¨è„šæœ¬ä¸­ï¼Œå˜é‡åçš„éƒ¨åˆ†å¯ä»¥ç”¨æ•°å­—1åˆ°9ï¼Œè¡¨ç¤ºè„šæœ¬çš„å‚æ•°ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">filename=<span class="variable">${1:?"filename missing."}</span></span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä»£ç å‡ºç°åœ¨è„šæœ¬ä¸­ï¼Œ1è¡¨ç¤ºè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœè¯¥å‚æ•°ä¸å­˜åœ¨ï¼Œå°±é€€å‡ºè„šæœ¬å¹¶æŠ¥é”™ã€‚  </p>
</li>
<li><p>å…¶ä»–  </p>
<ul>
<li><code>declare</code> - å£°æ˜ä¸€äº›ç‰¹æ®Šç±»å‹çš„å˜é‡ï¼Œä¸ºå˜é‡è®¾ç½®ä¸€äº›é™åˆ¶ã€‚  </li>
<li><code>readonly</code> - ç­‰åŒäº<code>declare -r</code>ï¼Œç”¨æ¥å£°æ˜åªè¯»å˜é‡ï¼Œä¸èƒ½æ”¹å˜å˜é‡å€¼ï¼Œä¹Ÿä¸èƒ½<code>unset</code>å˜é‡ã€‚  </li>
<li><code>let</code> - å£°æ˜å˜é‡æ—¶ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œç®—æœ¯è¡¨è¾¾å¼ï¼š    <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">let</span> foo=1+2</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$foo</span></span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul>
<li>Bash å‡½æ•°å®šä¹‰çš„è¯­æ³•æœ‰ä¸¤ç§ã€‚    <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="function"><span class="title">fn</span></span>() {</span><br><span class="line"><span class="comment"># codes</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">fn</span></span>() {</span><br><span class="line"><span class="comment"># codes</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>å¦‚æœå‡½æ•°ä¸è„šæœ¬ã€åˆ«ååŒåï¼Œä¼˜å…ˆçº§ï¼šåˆ«å&gt;å‡½æ•°&gt;è„šæœ¬ã€‚  </li>
<li>å‚æ•°å˜é‡ï¼šä¸è„šæœ¬çš„å‚æ•°å˜é‡æ˜¯ä¸€è‡´çš„ã€‚  </li>
<li>è°ƒç”¨æ—¶ï¼Œå°±ç›´æ¥å†™å‡½æ•°åï¼Œå‚æ•°è·Ÿåœ¨å‡½æ•°ååé¢ã€‚  </li>
<li>Bash å‡½æ•°ä½“å†…ç›´æ¥å£°æ˜çš„å˜é‡ï¼Œå±äºå…¨å±€å˜é‡ï¼Œæ•´ä¸ªè„šæœ¬éƒ½å¯ä»¥è¯»å–ã€‚  </li>
<li>å‡½æ•°é‡Œé¢å¯ä»¥ç”¨<code>local</code>å‘½ä»¤å£°æ˜å±€éƒ¨å˜é‡ã€‚  </li>
</ul>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><ul>
<li><p>åˆ›å»ºæ•°ç»„  </p>
<p>  é€ä¸ªèµ‹å€¼ï¼šARRAY[INDEX]=value<br>  ä¸€æ¬¡æ€§èµ‹å€¼ï¼šARRAY=(value1 value2 â€¦ valueN)  </p>
<p>  å®šä¹‰æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mp3s=( *.mp3 )</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¾‹å­ä¸­ï¼Œå°†å½“å‰ç›®å½•çš„æ‰€æœ‰MP3æ–‡ä»¶ï¼Œæ”¾è¿›ä¸€ä¸ªæ•°ç»„ã€‚  </p>
<p>  è¿˜å¯ä»¥é€šè¿‡æŒ‡å®šä¸‹æ ‡ï¼ŒæŠŠå€¼èµ‹ç»™æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ days=([0]=Sun [1]=Mon [2]=Tue [3]=Wed [4]=Thu [5]=Fri [6]=Sat)  </span><br></pre></td></tr></tbody></table></figure>
<p>  å…ˆç”¨<code>declare -a</code>å‘½ä»¤å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">declare</span> -a ARRAYNAME</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>read -a</code>å‘½ä»¤åˆ™æ˜¯å°†ç”¨æˆ·çš„å‘½ä»¤è¡Œè¾“å…¥ï¼Œè¯»å…¥ä¸€ä¸ªæ•°ç»„ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">read</span> -a dice</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢å‘½ä»¤å°†ç”¨æˆ·çš„å‘½ä»¤è¡Œè¾“å…¥ï¼Œè¯»å…¥æ•°ç»„diceã€‚  </p>
</li>
<li><p>è¯»å–æ•°ç»„  </p>
<p>  è¯»å–å•ä¸ªå…ƒç´ ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">${array[i]}</span>   <span class="comment"># i æ˜¯ç´¢å¼•</span></span><br></pre></td></tr></tbody></table></figure>
<p>  è¯»å–æ‰€æœ‰æˆå‘˜ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=(a b c d e f)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo[@]}</span></span><br><span class="line">a b c d e f</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>@</code>å’Œ<code>*</code>æ˜¯æ•°ç»„çš„ç‰¹æ®Šç´¢å¼•ï¼Œè¡¨ç¤ºè¿”å›æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ã€‚  </p>
<p>  éå†æ•°ç»„:  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">${names[@]}</span>"</span>; <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>  <code>@</code>å’Œ<code>*</code>æ”¾ä¸æ”¾åœ¨åŒå¼•å·ä¹‹ä¸­ï¼Œæ˜¯æœ‰å·®åˆ«çš„ã€‚  </p>
<p>  æ‹·è´ä¸€ä¸ªæ•°ç»„çš„æœ€æ–¹ä¾¿æ–¹æ³•ï¼Œå°±æ˜¯å†™æˆä¸‹é¢è¿™æ ·ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hobbies=( <span class="string">"<span class="variable">${activities[@]}</span>"</span> )</span><br></pre></td></tr></tbody></table></figure>
<p>  è¿™ç§å†™æ³•ä¹Ÿå¯ä»¥ç”¨æ¥ä¸ºæ–°æ•°ç»„æ·»åŠ æˆå‘˜ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hobbies=( <span class="string">"<span class="variable">${activities[@]" diving )</span></span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>é»˜è®¤ä½ç½®  </p>
<p>  å¦‚æœè¯»å–æ•°ç»„æˆå‘˜æ—¶ï¼Œæ²¡æœ‰è¯»å–æŒ‡å®šå“ªä¸€ä¸ªä½ç½®çš„æˆå‘˜ï¼Œé»˜è®¤ä½¿ç”¨0å·ä½ç½®ã€‚  </p>
</li>
<li><p>æ•°ç»„çš„é•¿åº¦  </p>
<p>  è¦æƒ³çŸ¥é“æ•°ç»„çš„é•¿åº¦ï¼ˆå³ä¸€å…±åŒ…å«å¤šå°‘æˆå‘˜ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§è¯­æ³•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">${#array[*]}</span></span><br><span class="line"><span class="variable">${#array[@]}</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æå–æ•°ç»„åºå·  </p>
<p>  <code>${!array[@]}</code>æˆ–<code>${!array[*]}</code>ï¼Œå¯ä»¥è¿”å›æ•°ç»„çš„æˆå‘˜åºå·ï¼Œå³å“ªäº›ä½ç½®æ˜¯æœ‰å€¼çš„ã€‚  </p>
</li>
<li><p>æå–æ•°ç»„æˆå‘˜  </p>
<p>  <code>${array[@]:position:length}</code>çš„è¯­æ³•å¯ä»¥æå–æ•°ç»„æˆå‘˜ã€‚<br>  å¦‚æœçœç•¥é•¿åº¦å‚æ•°lengthï¼Œåˆ™è¿”å›ä»æŒ‡å®šä½ç½®å¼€å§‹çš„æ‰€æœ‰æˆå‘˜ã€‚  </p>
</li>
<li><p>è¿½åŠ æ•°ç»„æˆå‘˜  </p>
<p>  æ•°ç»„æœ«å°¾è¿½åŠ æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨<code>+=</code>èµ‹å€¼è¿ç®—ç¬¦ã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨åœ°æŠŠå€¼è¿½åŠ åˆ°æ•°ç»„æœ«å°¾ã€‚å¦åˆ™ï¼Œå°±éœ€è¦çŸ¥é“æ•°ç»„çš„æœ€å¤§åºå·ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=(a b c)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo[@]}</span></span><br><span class="line">a b c</span><br><span class="line"></span><br><span class="line">$ foo+=(d e f)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo[@]}</span></span><br><span class="line">a b c d e f</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åˆ é™¤æ•°ç»„  </p>
<p>  åˆ é™¤ä¸€ä¸ªæ•°ç»„æˆå‘˜ï¼Œä½¿ç”¨<code>unset</code>å‘½ä»¤ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=(a b c d e f)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo[@]}</span></span><br><span class="line">a b c d e f</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">unset</span> foo[2]</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo[@]}</span></span><br><span class="line">a b d e f</span><br></pre></td></tr></tbody></table></figure>
<p>  å°†æŸä¸ªæˆå‘˜è®¾ä¸ºç©ºå€¼ï¼Œå¯ä»¥ä»è¿”å›å€¼ä¸­â€œéšè—â€è¿™ä¸ªæˆå‘˜ã€‚<br>  ç›´æ¥å°†æ•°ç»„å˜é‡èµ‹å€¼ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç›¸å½“äºâ€œéšè—â€æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚<br>  <code>unset ArrayName</code>å¯ä»¥æ¸…ç©ºæ•´ä¸ªæ•°ç»„ã€‚  </p>
</li>
<li><p>å…³è”æ•°ç»„  </p>
<p>  å…³è”æ•°ç»„ä½¿ç”¨å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•°ä½œä¸ºæ•°ç»„ç´¢å¼•ã€‚<br>  <code>declare -A</code>å¯ä»¥å£°æ˜å…³è”æ•°ç»„ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">declare</span> -A colors</span><br><span class="line">$ colors[<span class="string">"red"</span>]=<span class="string">"#ff0000"</span></span><br><span class="line">$ colors[<span class="string">"green"</span>]=<span class="string">"#00ff00"</span></span><br><span class="line">$ colors[<span class="string">"blue"</span>]=<span class="string">"#0000ff"</span></span><br></pre></td></tr></tbody></table></figure>
<p>  æ•´æ•°ç´¢å¼•çš„æ•°ç»„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡ååˆ›å»ºæ•°ç»„ï¼Œå…³è”æ•°ç»„åˆ™å¿…é¡»ç”¨å¸¦æœ‰<code>-A</code>é€‰é¡¹çš„<code>declare</code>å‘½ä»¤å£°æ˜åˆ›å»ºã€‚  </p>
</li>
</ul>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><ul>
<li><p>å­—ç¬¦ä¸²çš„é•¿åº¦  </p>
<p>  è·å–å­—ç¬¦ä¸²é•¿åº¦çš„è¯­æ³•å¦‚ä¸‹ï¼š<code>${#varname}</code>ã€‚  </p>
</li>
<li><p>å­å­—ç¬¦ä¸²  </p>
<p>  å­—ç¬¦ä¸²æå–å­ä¸²çš„è¯­æ³•å¦‚ä¸‹ï¼š<code>${varname:offset:length}</code>ã€‚<br>  è¿™ç§è¯­æ³•ä¸èƒ½ç›´æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œåªèƒ½é€šè¿‡å˜é‡æ¥è¯»å–å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜åŸå§‹å­—ç¬¦ä¸²ã€‚å˜é‡å‰é¢çš„ç¾å…ƒç¬¦å·å¯ä»¥çœç•¥ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hello=<span class="string">'abcdefg'</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${hello:2:3}</span></span><br></pre></td></tr></tbody></table></figure>
<p>  å¦‚æœçœç•¥lengthï¼Œåˆ™ä»ä½ç½®offsetå¼€å§‹ï¼Œä¸€ç›´è¿”å›åˆ°å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚<br>  å¦‚æœoffsetä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹ç®—èµ·ã€‚æ³¨æ„ï¼Œè´Ÿæ•°å‰é¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä»¥é˜²æ­¢ä¸<code>${variable:-word}</code>çš„å˜é‡çš„è®¾ç½®é»˜è®¤å€¼è¯­æ³•æ··æ·†ã€‚æ­¤æ—¶è¿˜å¯ä»¥æŒ‡å®šlengthï¼Œlengthå¯ä»¥æ˜¯æ­£å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿå€¼ï¼ˆè´Ÿå€¼ä¸èƒ½è¶…è¿‡offsetçš„é•¿åº¦ï¼‰ã€‚  </p>
</li>
<li><p>åˆ‡å‰²å’Œæ›¿æ¢  </p>
<ul>
<li><p>å­—ç¬¦ä¸²å¤´éƒ¨çš„æ¨¡å¼åŒ¹é…  </p>
<p>  <code>${variable#pattern}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„å¼€å¤´ï¼Œåˆ é™¤æœ€çŸ­åŒ¹é…ï¼ˆéè´ªå©ªåŒ¹é…ï¼‰çš„éƒ¨åˆ†ï¼Œè¿”å›å‰©ä½™éƒ¨åˆ†<br>  <code>${variable##pattern}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„å¼€å¤´ï¼Œåˆ é™¤æœ€é•¿åŒ¹é…ï¼ˆè´ªå©ªåŒ¹é…ï¼‰çš„éƒ¨åˆ†ï¼Œè¿”å›å‰©ä½™éƒ¨åˆ†  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ myPath=/home/cam/book/long.file.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${myPath#/*/}</span></span><br><span class="line">cam/book/long.file.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${myPath##/*/}</span></span><br><span class="line">long.file.name</span><br></pre></td></tr></tbody></table></figure>

<p>  <code>${variable/#pattern/string}</code> - å°†å¤´éƒ¨åŒ¹é…çš„éƒ¨åˆ†ï¼Œæ›¿æ¢æˆå…¶ä»–å†…å®¹  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=JPG.JPG</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo/#JPG/jpg}</span></span><br><span class="line">jpg.JPG</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å­—ç¬¦ä¸²å°¾éƒ¨çš„æ¨¡å¼åŒ¹é…  </p>
<p>  <code>${variable%pattern}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„ç»“å°¾ï¼Œåˆ é™¤æœ€çŸ­åŒ¹é…ï¼ˆéè´ªå©ªåŒ¹é…ï¼‰çš„éƒ¨åˆ†ï¼Œè¿”å›å‰©ä½™éƒ¨åˆ†<br>  <code>${variable%%pattern}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„ç»“å°¾ï¼Œåˆ é™¤æœ€é•¿åŒ¹é…ï¼ˆè´ªå©ªåŒ¹é…ï¼‰çš„éƒ¨åˆ†ï¼Œè¿”å›å‰©ä½™éƒ¨åˆ†  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ path=/home/cam/book/long.file.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${path%.*}</span></span><br><span class="line">/home/cam/book/long.file</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${path%%.*}</span></span><br><span class="line">/home/cam/book/long</span><br></pre></td></tr></tbody></table></figure>

<p>  <code>${variable/%pattern/string}</code> - å°†å°¾éƒ¨åŒ¹é…çš„éƒ¨åˆ†ï¼Œæ›¿æ¢æˆå…¶ä»–å†…å®¹  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=JPG.JPG</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${foo/%JPG/jpg}</span></span><br><span class="line">JPG.jpg</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä»»æ„ä½ç½®çš„æ¨¡å¼åŒ¹é…  </p>
<p>  <code>${variable/pattern/string}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„ä¸€éƒ¨åˆ†ï¼Œæœ€é•¿åŒ¹é…ï¼ˆè´ªå©ªåŒ¹é…ï¼‰çš„é‚£éƒ¨åˆ†è¢« string æ›¿æ¢ï¼Œä½†ä»…æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…<br>  <code>${variable//pattern/string}</code> - å¦‚æœ pattern åŒ¹é…å˜é‡ variable çš„ä¸€éƒ¨åˆ†ï¼Œæœ€é•¿åŒ¹é…ï¼ˆè´ªå©ªåŒ¹é…ï¼‰çš„é‚£éƒ¨åˆ†è¢« string æ›¿æ¢ï¼Œæ‰€æœ‰åŒ¹é…éƒ½æ›¿æ¢  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ path=/home/cam/foo/foo.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${path/foo/bar}</span></span><br><span class="line">/home/cam/bar/foo.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${path//foo/bar}</span></span><br><span class="line">/home/cam/bar/bar.name</span><br></pre></td></tr></tbody></table></figure>

<p>  å¦‚æœçœç•¥äº†stringéƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºåŒ¹é…çš„éƒ¨åˆ†æ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ï¼Œå³åˆ é™¤åŒ¹é…çš„éƒ¨åˆ†ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ path=/home/cam/foo/foo.name</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${path/.*/}</span></span><br><span class="line">/home/cam/foo/foo</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li><p>æ”¹å˜å¤§å°å†™  </p>
<table>
<thead>
<tr>
<th align="left">æ ¼å¼</th>
<th align="left">ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">${parameter,,}</td>
<td align="left">æŠŠ parameter çš„å€¼å…¨éƒ¨å±•å¼€æˆå°å†™å­—æ¯</td>
</tr>
<tr>
<td align="left">${parameter,}</td>
<td align="left">ä»…ä»…æŠŠ parameter çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å±•å¼€æˆå°å†™å­—æ¯</td>
</tr>
<tr>
<td align="left">${parameter^^}</td>
<td align="left">æŠŠ parameter çš„å€¼å…¨éƒ¨è½¬æ¢æˆå¤§å†™å­—æ¯</td>
</tr>
<tr>
<td align="left">${parameter^}</td>
<td align="left">ä»…ä»…æŠŠ parameter çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆå¤§å†™å­—æ¯ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="ç®—æœ¯è¿ç®—"><a href="#ç®—æœ¯è¿ç®—" class="headerlink" title="ç®—æœ¯è¿ç®—"></a>ç®—æœ¯è¿ç®—</h2><ul>
<li><p>ç®—æœ¯è¡¨è¾¾å¼  </p>
<p>  <code>((...))</code>è¯­æ³•å¯ä»¥è¿›è¡Œæ•´æ•°çš„ç®—æœ¯è¿ç®—ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ((foo = 5 + 5))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$foo</span></span><br><span class="line">10</span><br></pre></td></tr></tbody></table></figure>
<p>  å¦‚æœè¦è¯»å–ç®—æœ¯è¿ç®—çš„ç»“æœï¼Œéœ€è¦åœ¨<code>((...))</code>å‰é¢åŠ ä¸Šç¾å…ƒç¬¦å·<code>$((...))</code>ï¼Œä½¿å…¶å˜æˆç®—æœ¯è¡¨è¾¾å¼ï¼Œè¿”å›ç®—æœ¯è¿ç®—çš„å€¼ã€‚<br>  <code>$((...))</code>çš„åœ†æ‹¬å·ä¸­ï¼Œä¸éœ€è¦åœ¨å˜é‡åä¹‹å‰åŠ ä¸Š<code>$</code>ï¼Œä¸è¿‡åŠ ä¸Šä¹Ÿä¸æŠ¥é”™ã€‚<br>  å¦‚æœåœ¨<code>$((...))</code>é‡Œé¢ä½¿ç”¨å­—ç¬¦ä¸²ï¼ŒBash ä¼šè®¤ä¸ºé‚£æ˜¯ä¸€ä¸ªå˜é‡åï¼Œå¦‚æœä¸å­˜åœ¨åŒåå˜é‡ï¼ŒBash å°±ä¼šå°†å…¶ä½œä¸ºç©ºå€¼ï¼Œè€Œ<code>$((...))</code>ä¼šå°†ç©ºå€¼å½“åš0ã€‚  </p>
<p>  é€—å·<code>ï¼Œ</code>åœ¨<code>$((...))</code>å†…éƒ¨æ˜¯æ±‚å€¼è¿ç®—ç¬¦ï¼Œæ‰§è¡Œå‰åä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶è¿”å›åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((foo = <span class="number">1</span> + <span class="number">2</span>, <span class="number">3</span> * <span class="number">4</span>))</span><br><span class="line">12</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$foo</span></span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ•°å€¼çš„è¿›åˆ¶  </p>
<p>  æŒ‡å®šä¸åŒçš„æ•°åŸº  </p>
<table>
<thead>
<tr>
<th align="left">è¡¨ç¤ºæ³•</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">number</td>
<td align="left">é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ä»»ä½•è¡¨ç¤ºæ³•çš„æ•°å­—è¢«çœ‹åšæ˜¯åè¿›åˆ¶æ•°ï¼ˆä»¥10ä¸ºåº•ï¼‰</td>
</tr>
<tr>
<td align="left">0number</td>
<td align="left">åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­ï¼Œä»¥é›¶å¼€å¤´çš„æ•°å­—è¢«è®¤ä¸ºæ˜¯å…«è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td align="left">0xnumber</td>
<td align="left">åå…­è¿›åˆ¶è¡¨ç¤ºæ³•</td>
</tr>
<tr>
<td align="left">base#number</td>
<td align="left">baseè¿›åˆ¶çš„æ•°</td>
</tr>
</tbody></table>
<p>  å…¶ä»–è¿›åˆ¶è½¬æ¢ä¸º10è¿›åˆ¶ï¼š</p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((<span class="number">0</span>xff))  </span><br><span class="line">255  </span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">2#11111111</span>))  </span><br><span class="line">255</span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">8#11</span>))</span><br><span class="line">9</span><br><span class="line">$ <span class="built_in">printf</span> %d 0xFF</span><br><span class="line">$ ((num=8<span class="comment">#123))</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">${num}</span></span><br><span class="line">83</span><br></pre></td></tr></tbody></table></figure>
<p>  10è¿›åˆ¶è½¬æ¢ä¸ºå…¶ä»–è¿›åˆ¶ï¼š</p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"obase=16;65536"</span> | bc <span class="comment"># åˆ©ç”¨bcè®¡ç®—å™¨ã€‚echo "obase=è¿›åˆ¶;å€¼" | bc</span></span><br><span class="line">10000</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"obase=8;65536"</span> | bc</span><br><span class="line">200000</span><br><span class="line">$ <span class="built_in">printf</span> %x 15</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<ul>
<li><p>ä½è¿ç®—  </p>
</li>
<li><p>é€»è¾‘è¿ç®—  </p>
</li>
<li><p>èµ‹å€¼è¿ç®—  </p>
</li>
<li><p>æ±‚å€¼è¿ç®—  </p>
</li>
<li><p><code>expr</code>å‘½ä»¤  </p>
<p>  <code>expr</code>å‘½ä»¤æ”¯æŒç®—æœ¯è¿ç®—ï¼Œå¯ä»¥ä¸ä½¿ç”¨<code>((...))</code>è¯­æ³•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ expr 3 + 2</span><br><span class="line">5</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>expr</code>å‘½ä»¤æ”¯æŒå˜é‡æ›¿æ¢ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ foo=3</span><br><span class="line">$ expr <span class="variable">$foo</span> + 2</span><br><span class="line">5</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>expr</code>å‘½ä»¤ä¹Ÿä¸æ”¯æŒéæ•´æ•°å‚æ•°ã€‚  </p>
</li>
<li><p><code>let</code>å‘½ä»¤  </p>
<p>  <code>let</code>å‘½ä»¤ç”¨äºå°†ç®—æœ¯è¿ç®—çš„ç»“æœï¼Œèµ‹äºˆä¸€ä¸ªå˜é‡ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">let</span> x=2+3</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$x</span></span><br><span class="line">5</span><br></pre></td></tr></tbody></table></figure>
<p>  æ³¨æ„ï¼Œx=2+3è¿™ä¸ªå¼å­é‡Œé¢ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦‚æœåŒ…å«ç©ºæ ¼ï¼Œéœ€è¦ä½¿ç”¨å¼•å·ã€‚  </p>
<p>  <code>let</code>å¯ä»¥åŒæ—¶å¯¹å¤šä¸ªå˜é‡èµ‹å€¼ï¼Œèµ‹å€¼è¡¨è¾¾å¼ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">let</span> <span class="string">"v1 = 1"</span> <span class="string">"v2 = v1++"</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$v1</span>,<span class="variable">$v2</span></span><br><span class="line">2,1</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h2><ul>
<li><p><code>if</code>ç»“æ„  </p>
<ul>
<li><p>è¯­æ³•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> commands; <span class="keyword">then</span></span><br><span class="line">	commands</span><br><span class="line">[<span class="keyword">elif</span> commands; <span class="keyword">then</span></span><br><span class="line">	commands...]</span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line">	commands]</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>test</code>å‘½ä»¤  </p>
<p>  <code>if</code>ç»“æ„çš„åˆ¤æ–­æ¡ä»¶ï¼Œä¸€èˆ¬ä½¿ç”¨<code>test</code>å‘½ä»¤ï¼Œæœ‰ä¸‰ç§å½¢å¼ï¼š  </p>
<ol>
<li><code>test expression</code>  </li>
<li><code>[ expression ]</code>  </li>
<li><code>[[ expression ]]</code>  </li>
</ol>
<p>  ä¸Šé¢ä¸‰ç§å½¢å¼æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯ç¬¬ä¸‰ç§å½¢å¼è¿˜æ”¯æŒæ­£åˆ™åˆ¤æ–­ï¼Œå‰ä¸¤ç§ä¸æ”¯æŒã€‚  </p>
</li>
<li><p>åˆ¤æ–­è¡¨è¾¾å¼  </p>
<ol>
<li><p>æ–‡ä»¶åˆ¤æ–­</p>
<p>æ–‡ä»¶ç³»ç»Ÿç›¸å…³æµ‹è¯•ï¼š</p>
<table>
<thead>
<tr>
<th align="left">è¡¨è¾¾å¼</th>
<th align="left">å¦‚æœä¸‹åˆ—æ¡ä»¶ä¸ºçœŸåˆ™è¿”å›TRUE</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-f $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«æ­£å¸¸çš„æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶å</td>
</tr>
<tr>
<td align="left">-x $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯æ‰§è¡Œ</td>
</tr>
<tr>
<td align="left">-d $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ç›®å½•</td>
</tr>
<tr>
<td align="left">-e $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å­˜åœ¨</td>
</tr>
<tr>
<td align="left">-c $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶çš„è·¯å¾„</td>
</tr>
<tr>
<td align="left">-b $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªå—è®¾å¤‡æ–‡ä»¶çš„è·¯å¾„</td>
</tr>
<tr>
<td align="left">-w $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯å†™</td>
</tr>
<tr>
<td align="left">-r $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯è¯»</td>
</tr>
<tr>
<td align="left">-L $var</td>
<td align="left">ç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥</td>
</tr>
</tbody></table>
</li>
<li><p>å­—ç¬¦ä¸²åˆ¤æ–­</p>
<p>å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼š</p>
<table>
<thead>
<tr>
<th align="left">è¡¨è¾¾å¼</th>
<th align="left">å¦‚æœä¸‹åˆ—æ¡ä»¶ä¸ºçœŸåˆ™è¿”å›True</th>
</tr>
</thead>
<tbody><tr>
<td align="left">string</td>
<td align="left">stringä¸ä¸ºnull</td>
</tr>
<tr>
<td align="left">-n string</td>
<td align="left">å­—ç¬¦ä¸²stringçš„é•¿åº¦å¤§äºé›¶</td>
</tr>
<tr>
<td align="left">-z string</td>
<td align="left">å­—ç¬¦ä¸²stringçš„é•¿åº¦ä¸ºé›¶</td>
</tr>
<tr>
<td align="left">string1 = string2</td>
<td align="left">string1å’Œstring2ç›¸åŒã€‚å•æˆ–åŒç­‰å·éƒ½å¯ä»¥ï¼Œä¸è¿‡åŒç­‰å·æ›´å—æ¬¢è¿</td>
</tr>
<tr>
<td align="left">string1 == string2</td>
<td align="left">string1å’Œstring2ç›¸åŒã€‚å•æˆ–åŒç­‰å·éƒ½å¯ä»¥ï¼Œä¸è¿‡åŒç­‰å·æ›´å—æ¬¢è¿</td>
</tr>
<tr>
<td align="left">string1 != string2</td>
<td align="left">string1å’Œstring2ä¸ç›¸åŒ</td>
</tr>
<tr>
<td align="left">string1 &gt; string2</td>
<td align="left">string1æ’åˆ—åœ¨string2ä¹‹å</td>
</tr>
<tr>
<td align="left">string1 &lt; string2</td>
<td align="left">string1æ’åˆ—åœ¨string2ä¹‹å‰</td>
</tr>
</tbody></table>
</li>
<li><p>æ•´æ•°åˆ¤æ–­</p>
<p>æ•´å½¢è¡¨è¾¾å¼ï¼š</p>
<table>
<thead>
<tr>
<th align="left">è¡¨è¾¾å¼</th>
<th align="left">å¦‚æœä¸ºçœŸâ€¦</th>
</tr>
</thead>
<tbody><tr>
<td align="left">integer1 -eq integer2</td>
<td align="left">integer1ç­‰äºinteger2</td>
</tr>
<tr>
<td align="left">integer1 -ne integer2</td>
<td align="left">integer1ä¸ç­‰äºinteger2</td>
</tr>
<tr>
<td align="left">integer1 -le integer2</td>
<td align="left">integer1å°äºæˆ–ç­‰äºinteger2</td>
</tr>
<tr>
<td align="left">integer1 -lt integer2</td>
<td align="left">integer1å°äºinteger2</td>
</tr>
<tr>
<td align="left">integer1 -ge integer2</td>
<td align="left">integer1å¤§äºæˆ–ç­‰äºinteger2</td>
</tr>
<tr>
<td align="left">integer1 -gt integer2</td>
<td align="left">integer1å¤§äºinteger2</td>
</tr>
</tbody></table>
</li>
<li><p>ç»¼åˆè¡¨è¾¾å¼</p>
<p>é€»è¾‘æ“ä½œç¬¦ï¼š</p>
<table>
<thead>
<tr>
<th align="left">æ“ä½œç¬¦</th>
<th align="left">æµ‹è¯•</th>
<th align="left">[[]] and (())</th>
</tr>
</thead>
<tbody><tr>
<td align="left">AND</td>
<td align="left">-a</td>
<td align="left">&amp;&amp;</td>
</tr>
<tr>
<td align="left">OR</td>
<td align="left">-o</td>
<td align="left">||</td>
</tr>
<tr>
<td align="left">NOT</td>
<td align="left">!</td>
<td align="left">!</td>
</tr>
</tbody></table>
</li>
<li><p>æ­£åˆ™åˆ¤æ–­</p>
<p><code>[[ string =~ regex ]]</code>  </p>
<p>ä¸Šé¢çš„è¯­æ³•ä¸­ï¼Œ<code>regex</code>æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>=~</code>æ˜¯æ­£åˆ™æ¯”è¾ƒè¿ç®—ç¬¦ã€‚  </p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">INT=-5</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$INT</span>"</span> =~ ^-?[0-9]+$ ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"INT is an integer."</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"INT is not an integer."</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç®—æœ¯åˆ¤æ–­</p>
<p>Bashè¿˜æä¾›äº†<code>((...))</code>ä½œä¸ºç®—æœ¯æ¡ä»¶ï¼Œè¿›è¡Œç®—æœ¯è¿ç®—çš„åˆ¤æ–­ã€‚</p>
<p>æ³¨æ„ï¼Œç®—æœ¯åˆ¤æ–­ä¸éœ€è¦ä½¿ç”¨<code>test</code>å‘½ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨<code>((...))</code>ç»“æ„ã€‚è¿™ä¸ªç»“æ„çš„è¿”å›å€¼ï¼Œå†³å®šäº†åˆ¤æ–­çš„çœŸä¼ªã€‚</p>
<p>ç®—æœ¯æ¡ä»¶<code>((...))</code>ä¹Ÿå¯ä»¥ç”¨äºå˜é‡èµ‹å€¼ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="keyword">if</span> (( foo = 5 ));<span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">"foo is <span class="variable">$foo</span>"</span>; <span class="keyword">fi</span></span><br><span class="line">foo is 5</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ(( foo = 5 ))å®Œæˆäº†ä¸¤ä»¶äº‹æƒ…ã€‚é¦–å…ˆæŠŠ5èµ‹å€¼ç»™å˜é‡fooï¼Œç„¶åæ ¹æ®è¿”å›å€¼5ï¼Œåˆ¤æ–­æ¡ä»¶ä¸ºçœŸã€‚</p>
<p>æ³¨æ„ï¼Œèµ‹å€¼è¯­å¥è¿”å›ç­‰å·å³è¾¹çš„å€¼ï¼Œå¦‚æœè¿”å›çš„æ˜¯0ï¼Œåˆ™åˆ¤æ–­ä¸ºå‡ã€‚</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>case</code>ç»“æ„  </p>
<p>  è¯­æ³•å¦‚ä¸‹ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> expression <span class="keyword">in</span></span><br><span class="line">  pattern )</span><br><span class="line">	commands ;;</span><br><span class="line">  pattern )</span><br><span class="line">	commands ;;</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></tbody></table></figure>

<p>  <code>case</code>çš„åŒ¹é…æ¨¡å¼å¯ä»¥ä½¿ç”¨å„ç§é€šé…ç¬¦ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">æ¨¡å¼</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a)</td>
<td align="left">è‹¥å•è¯ä¸ºâ€aâ€ï¼Œåˆ™åŒ¹é…</td>
</tr>
<tr>
<td align="left">a|b)</td>
<td align="left">è‹¥å•è¯ä¸ºâ€aâ€æˆ–â€bâ€ï¼Œåˆ™åŒ¹é…</td>
</tr>
<tr>
<td align="left">[[:alpha:]])</td>
<td align="left">è‹¥å•è¯æ˜¯ä¸€ä¸ªå­—æ¯å­—ç¬¦ï¼Œåˆ™åŒ¹é…</td>
</tr>
<tr>
<td align="left">???)</td>
<td align="left">è‹¥å•è¯åªæœ‰3ä¸ªå­—ç¬¦ï¼Œåˆ™åŒ¹é…</td>
</tr>
<tr>
<td align="left">*.txt)</td>
<td align="left">è‹¥å•è¯ä»¥â€.txtâ€å­—ç¬¦ç»“å°¾ï¼Œåˆ™åŒ¹é…</td>
</tr>
<tr>
<td align="left">*)</td>
<td align="left">åŒ¹é…ä»»æ„å•è¯ã€‚æŠŠè¿™ä¸ªæ¨¡å¼ä½œä¸ºcaseå‘½ä»¤çš„æœ€åä¸€ä¸ªæ¨¡å¼ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œå¯ä»¥æ•è·åˆ°ä»»æ„ä¸€ä¸ªä¸å…ˆå‰æ¨¡å¼ä¸åŒ¹é…çš„æ•°å€¼ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•è·åˆ°ä»»ä½•å¯èƒ½çš„æ— æ•ˆå€¼</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">æ‰§è¡Œå¤šä¸ªåŠ¨ä½œï¼š</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Bash 4.0ä¹‹åå…è®¸åŒ¹é…å¤šä¸ªæ¡ä»¶ï¼Œè¿™æ—¶å¯ä»¥ç”¨<code>;;&amp;</code>ç»ˆæ­¢æ¯ä¸ªæ¡ä»¶å—ã€‚</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">æ¡ä»¶è¯­å¥ç»“å°¾æ·»åŠ äº†<code>;;&amp;</code>ä»¥åï¼Œåœ¨åŒ¹é…ä¸€ä¸ªæ¡ä»¶ä¹‹åï¼Œå¹¶æ²¡æœ‰é€€å‡º<code>case</code>ç»“æ„ï¼Œè€Œæ˜¯ç»§ç»­åˆ¤æ–­ä¸‹ä¸€ä¸ªæ¡ä»¶ã€‚</td>
<td align="left"></td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><ul>
<li><p><code>while</code>å¾ªç¯  </p>
<p>  <code>while</code>å¾ªç¯æœ‰ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œåªè¦ç¬¦åˆæ¡ä»¶ï¼Œå°±ä¸æ–­å¾ªç¯æ‰§è¡ŒæŒ‡å®šçš„è¯­å¥ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> condition; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>until</code>å¾ªç¯  </p>
<p>  <code>until</code>å¾ªç¯ä¸<code>while</code>å¾ªç¯æ°å¥½ç›¸åï¼Œåªè¦ä¸ç¬¦åˆåˆ¤æ–­æ¡ä»¶ï¼ˆåˆ¤æ–­æ¡ä»¶å¤±è´¥ï¼‰ï¼Œå°±ä¸æ–­å¾ªç¯æ‰§è¡ŒæŒ‡å®šçš„è¯­å¥ã€‚ä¸€æ—¦ç¬¦åˆåˆ¤æ–­æ¡ä»¶ï¼Œå°±é€€å‡ºå¾ªç¯ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">until condition; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸€èˆ¬æ¥è¯´ï¼Œ<code>until</code>ç”¨å¾—æ¯”è¾ƒå°‘ï¼Œå®Œå…¨å¯ä»¥ç»Ÿä¸€éƒ½æ˜¯ç”¨<code>while</code>ã€‚  </p>
</li>
<li><p><code>for...in</code>å¾ªç¯  </p>
<p>  <code>for...in</code>å¾ªç¯ç”¨äºéå†åˆ—è¡¨çš„æ¯ä¸€é¡¹ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> variable <span class="keyword">in</span> list; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>for</code>å¾ªç¯  </p>
<p>  <code>for</code>å¾ªç¯è¿˜æ”¯æŒ C è¯­è¨€çš„å¾ªç¯è¯­æ³•ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (( expression1; expression2; expression3 )); <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>  æ³¨æ„ï¼Œå¾ªç¯æ¡ä»¶æ”¾åœ¨åŒé‡åœ†æ‹¬å·ä¹‹ä¸­ã€‚å¦å¤–ï¼Œåœ†æ‹¬å·ä¹‹ä¸­ä½¿ç”¨å˜é‡ï¼Œä¸å¿…åŠ ä¸Šç¾å…ƒç¬¦å·<code>$</code>ã€‚  </p>
</li>
<li><p><code>break</code>, <code>continue</code>  </p>
</li>
<li><p><code>select</code>ç»“æ„  </p>
<p>  <code>select</code>ç»“æ„ä¸»è¦ç”¨æ¥ç”Ÿæˆç®€å•çš„èœå•ã€‚å®ƒçš„è¯­æ³•ä¸<code>for...in</code>å¾ªç¯åŸºæœ¬ä¸€è‡´ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">select name</span><br><span class="line">[<span class="keyword">in</span> list]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ç»ˆç«¯æ‰“å°"><a href="#ç»ˆç«¯æ‰“å°" class="headerlink" title="ç»ˆç«¯æ‰“å°"></a>ç»ˆç«¯æ‰“å°</h2><p><code>echo</code>æ˜¯ç”¨äºç»ˆç«¯æ‰“å°çš„åŸºæœ¬å‘½ä»¤ã€‚  </p>
<p>å¦ä¸€ä¸ªå¯ç”¨äºç»ˆç«¯æ‰“å°çš„å‘½ä»¤æ˜¯<code>printf</code>:  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">"%-5s %-10s %-4.2f\n"</span> 2 James 90.9989</span><br></pre></td></tr></tbody></table></figure>

<p>å½©è‰²è¾“å‡ºï¼š<br><img src="https://i.loli.net/2020/06/08/DEpRWVLrby8qOxI.png" alt="shellé¢œè‰²è¯­æ³•.png"><br><img src="https://i.loli.net/2020/06/08/Yu5AzgHGvN7VdpS.png" alt="shellæ¶‰åŠçš„é¢œè‰².png"><br>æ¯ç§é¢œè‰²éƒ½æœ‰å¯¹åº”çš„é¢œè‰²ç ã€‚æ¯”å¦‚ï¼šé‡ç½®=0ï¼Œé»‘è‰²=30ï¼Œçº¢è‰²=31ï¼Œç»¿è‰²=32ï¼Œé»„è‰²=33ï¼Œè“è‰²=34ï¼Œæ´‹çº¢=35ï¼Œé’è‰²=36ï¼Œç™½è‰²=37ã€‚<br>è¦æ‰“å°å½©è‰²æ–‡æœ¬ï¼Œå¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">"\e[1;31m This is red text \e[0m"</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>\e[1;31m</code>å°†é¢œè‰²è®¾ä¸ºçº¢è‰²ï¼Œ<code>\e[0m</code>å°†é¢œè‰²é‡æ–°ç½®å›ã€‚  </p>
<p>è¦è®¾ç½®å½©è‰²èƒŒæ™¯ï¼Œç»å¸¸ä½¿ç”¨çš„é¢œè‰²ç æ˜¯ï¼šé‡ç½®=0ï¼Œé»‘è‰²=40ï¼Œçº¢è‰²=41ï¼Œç»¿è‰²=42ï¼Œé»„è‰²=43ï¼Œè“è‰²=44ï¼Œæ´‹çº¢=45ï¼Œé’è‰²=46ï¼Œç™½è‰²=47ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">"\e[1;42m Green Background \e[0m"</span></span><br></pre></td></tr></tbody></table></figure>


<h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h2><ul>
<li><p>é‡å®šå‘  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls -l /bin/usr 2&gt; ls-error.txt <span class="comment">#é‡å®šå‘æ ‡å‡†é”™è¯¯</span></span><br><span class="line">$ ls -l /bin/usr &amp;&gt; ls-output.txt <span class="comment">#é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯åˆ°åŒä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">$ ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1 <span class="comment">#é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯åˆ°åŒä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"hello world"</span> &gt; temp.txt <span class="comment">#æŠŠechoå‘½ä»¤çš„è¾“å‡ºå†™å…¥æ–‡ä»¶å‰ï¼Œtemp.txtä¸­çš„å†…å®¹é¦–å…ˆä¼šè¢«æ¸…ç©º</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"hello world"</span> &gt;&gt; temp.txt <span class="comment">#è¿™ç§æ–¹æ³•ä¼šå°†æ–‡æœ¬è¿½åŠ åˆ°ç›®æ ‡æ–‡ä»¶ä¸­</span></span><br><span class="line">$ &gt; ls-output.txt <span class="comment">#å¦‚æœæˆ‘ä»¬éœ€è¦æ¸…ç©ºä¸€ä¸ªæ–‡ä»¶å†…å®¹ï¼ˆæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æŠ€å·§</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>cat</code> </p>
<p>  <code>cat</code>å‘½ä»¤è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶å®ƒä»¬åˆ°æ ‡å‡†è¾“å‡ºã€‚<br>  å¦‚æœ<code>cat</code>æ²¡æœ‰ç»™å‡ºä»»ä½•å‚æ•°ï¼Œå®ƒä¼šä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ï¼Œåˆå› ä¸ºæ ‡å‡†è¾“å…¥é»˜è®¤æƒ…å†µä¸‹è¿æ¥åˆ°é”®ç›˜ï¼Œå®ƒæ­£åœ¨ç­‰å¾…æˆ‘ä»¬è¾“å…¥æ•°æ®ã€‚ä¸‹ä¸€æ­¥ï¼Œè¾“å…¥<code>Ctrl-d</code>æ¥å‘Šè¯‰<code>cat</code>ï¼Œåœ¨æ ‡å‡†è¾“å…¥ä¸­ï¼Œå®ƒå·²ç»åˆ°è¾¾æ–‡ä»¶æœ«å°¾<code>EOF</code>ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat movie.mpeg.0* &gt; movie.mpeg</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç®¡é“çº¿  </p>
<p>  ä½¿ç”¨ç®¡é“æ“ä½œç¬¦<code>|</code>ï¼Œä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå¯ä»¥é€šè¿‡ç®¡é“é€è‡³å¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ã€‚  </p>
</li>
</ul>
<ul>
<li><p>è¿‡æ»¤å™¨  </p>
<p>  ç®¡é“çº¿ç»å¸¸ç”¨æ¥å¯¹æ•°æ®å®Œæˆå¤æ‚çš„æ“ä½œã€‚æœ‰å¯èƒ½ä¼šæŠŠå‡ ä¸ªå‘½ä»¤æ”¾åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ªç®¡é“çº¿ã€‚é€šå¸¸ï¼Œä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„å‘½ä»¤è¢«ç§°ä¸ºè¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ¥å—è¾“å…¥ï¼Œä»¥æŸç§æ–¹å¼æ”¹å˜å®ƒï¼Œç„¶åè¾“å‡ºå®ƒã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls /bin /usr/bin | sort | uniq | less</span><br><span class="line">$ ls /bin /usr/bin | sort | uniq | wc -l</span><br><span class="line">$ ls /bin /usr/bin | sort | uniq | grep zip</span><br><span class="line">$ <span class="built_in">echo</span> `who | awk <span class="string">'{print $1}'</span> | sort | uniq` | sed <span class="string">'s/ /, /g'</span> &gt; file.txt</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>head</code>/<code>tail</code> - æ‰“å°æ–‡ä»¶å¼€å¤´éƒ¨åˆ†/ç»“å°¾éƒ¨åˆ†  </p>
<p>  é»˜è®¤æ‰“å°10è¡Œï¼Œé€šè¿‡<code>-n</code>å‚æ•°æŒ‡å®šæ‰“å°çš„è¡Œæ•°ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls /usr/bin | tail -n 5</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>tail</code>æœ‰ä¸€ä¸ªé€‰é¡¹å…è®¸ä½ å®æ—¶åœ°æµè§ˆæ–‡ä»¶ã€‚å½“è§‚å¯Ÿæ—¥å¿—æ–‡ä»¶çš„è¿›å±•æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬åŒæ—¶è¢«å†™å…¥ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tail -f /var/<span class="built_in">log</span>/messages</span><br></pre></td></tr></tbody></table></figure>
<p>  é€šè¿‡<code>-f</code>å‚æ•°ï¼Œ<code>tail</code>å‘½ä»¤ç»§ç»­ç›‘æµ‹è¿™ä¸ªæ–‡ä»¶ï¼Œå½“æ–°çš„å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶åï¼Œå®ƒä»¬ä¼šç«‹å³å‡ºç°åœ¨å±å¹•ä¸Šã€‚è¿™ä¼šä¸€ç›´ç»§ç»­ä¸‹å»ç›´åˆ°ä½ è¾“å…¥<code>Ctrl+c</code>ã€‚  </p>
</li>
<li><p><code>tee</code> - ä»<code>stdin</code>è¯»å–æ•°æ®ï¼Œå¹¶åŒæ—¶è¾“å‡ºåˆ°<code>stdout</code>å’Œæ–‡ä»¶<br>  ä¸ºäº†å’Œæˆ‘ä»¬çš„ç®¡é“éšå–»ä¿æŒä¸€è‡´ï¼ŒLinuxæä¾›äº†ä¸€ä¸ªå«åš<code>tee</code>çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤åˆ¶é€ äº†ä¸€ä¸ªâ€teeâ€ï¼Œå®‰è£…åˆ°æˆ‘ä»¬çš„ç®¡é“ä¸Šï¼Œ<code>tee</code>ç¨‹åºä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ï¼Œå¹¶ä¸”åŒæ—¶å¤åˆ¶æ•°æ®åˆ°æ ‡å‡†è¾“å‡ºï¼ˆå…è®¸æ•°æ®ç»§ç»­éšç€ç®¡é“çº¿æµåŠ¨ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚å½“åœ¨æŸä¸ªä¸­é—´å¤„ç†é˜¶æ®µæ¥æ•æ‰ä¸€ä¸ªç®¡é“çº¿çš„å†…å®¹æ—¶ï¼Œè¿™å¾ˆæœ‰å¸®åŠ©ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é‡å¤æ‰§è¡Œä¸€ä¸ªå…ˆå‰çš„ä¾‹å­ï¼Œè¿™æ¬¡åŒ…å«<code>tee</code>å‘½ä»¤ï¼Œåœ¨<code>grep</code>è¿‡æ»¤ç®¡é“çº¿çš„å†…å®¹ä¹‹å‰ï¼Œæ¥æ•æ‰æ•´ä¸ªç›®å½•åˆ—è¡¨åˆ°æ–‡ä»¶ls.txtã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls /usr/bin | tee ls.txt | grep zip</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="å¼•å·å’Œè½¬ä¹‰"><a href="#å¼•å·å’Œè½¬ä¹‰" class="headerlink" title="å¼•å·å’Œè½¬ä¹‰"></a>å¼•å·å’Œè½¬ä¹‰</h2><ul>
<li><p>å¼•å·  </p>
<ul>
<li><p><strong>å•å¼•å·</strong>ï¼š  </p>
<p>æ— è§†æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦ï¼ŒåŸæ ·è¾“å‡ºï¼Œæ‰€æœ‰å­—ç¬¦åœ¨å®ƒçœ¼é‡Œéƒ½æ˜¯æ™®é€šå­—ç¬¦ï¼Œæ¯”å¦‚æ˜Ÿå·<code>*</code>ã€ç¾å…ƒç¬¦å·<code>$</code>ã€åæ–œæ <code>\</code>ç­‰ï¼›å•å¼•å·å­—ä¸²ä¸­ä¸èƒ½å‡ºç°å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰ã€‚</p>
</li>
<li><p><strong>åŒå¼•å·</strong>: </p>
<p>æ— è§†æ–‡ä»¶é€šé…ç¬¦ï¼Œä½†<code>$</code>ã€<code>\</code>å’Œ<code>`</code>ä¼šèµ·ä½œç”¨ã€‚</p>
<p>åŒå¼•å·æ¯”å•å¼•å·å®½æ¾ï¼Œå¤§éƒ¨åˆ†ç‰¹æ®Šå­—ç¬¦åœ¨åŒå¼•å·é‡Œé¢ï¼Œéƒ½ä¼šå¤±å»ç‰¹æ®Šå«ä¹‰ï¼Œå˜æˆæ™®é€šç¬¦å·ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"*"</span></span><br><span class="line">*</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œé€šé…ç¬¦<code>*</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œæ”¾åœ¨åŒå¼•å·ä¹‹ä¸­ï¼Œå°±å˜æˆäº†æ™®é€šå­—ç¬¦ï¼Œä¼šåŸæ ·è¾“å‡ºã€‚è¿™ä¸€ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼Œè¿™æ„å‘³ç€ï¼ŒåŒå¼•å·é‡Œé¢ä¸ä¼šè¿›è¡Œæ–‡ä»¶åæ‰©å±•ã€‚</p>
<p>ä½†æ˜¯ä¸‰ä¸ªç‰¹æ®Šå­—ç¬¦é™¤å¤–ï¼šç¾å…ƒç¬¦å·<code>$</code>ã€åå¼•å·<code>`</code>å’Œåæ–œæ <code>\</code>ã€‚è¿™ä¸‰ä¸ªå­—ç¬¦åœ¨åŒå¼•å·ä¹‹ä¸­ï¼Œä¾ç„¶æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¼šè¢«Bashè‡ªåŠ¨æ‰©å±•ã€‚</p>
<p>åŒå¼•å·è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯ä¿å­˜åŸå§‹å‘½ä»¤çš„è¾“å‡ºæ ¼å¼ï¼š</p>
<p>å•è¡Œè¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(cal)</span><br><span class="line">äºŒæœˆ 2021 æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28</span><br></pre></td></tr></tbody></table></figure>

<p>åŸå§‹æ ¼å¼è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"<span class="subst">$(cal)</span>"</span></span><br><span class="line">	äºŒæœˆ 2021         </span><br><span class="line">æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­  </span><br><span class="line">	1  2  3  4  5  6  </span><br><span class="line">7  8  9 10 11 12 13  </span><br><span class="line">14 15 16 17 18 19 20  </span><br><span class="line">21 22 23 24 25 26 27  </span><br><span class="line">28                    </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p>è½¬ä¹‰  </p>
<p>  æŸäº›å­—ç¬¦åœ¨Bashé‡Œé¢æœ‰ç‰¹æ®Šå«ä¹‰ï¼ˆæ¯”å¦‚<code>$</code>ã€<code>&amp;</code>ã€<code>*</code>ï¼‰ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$data</span></span><br><span class="line"></span><br><span class="line">$</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¾‹å­ä¸­ï¼Œè¾“å‡º$dateä¸ä¼šæœ‰ä»»ä½•ç»“æœï¼Œå› ä¸º<code>$</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ã€‚<br>  å¦‚æœæƒ³è¦åŸæ ·è¾“å‡ºè¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå°±å¿…é¡»åœ¨å®ƒä»¬å‰é¢åŠ ä¸Šåæ–œæ ï¼Œä½¿å…¶å˜æˆæ™®é€šå­—ç¬¦ã€‚è¿™å°±å«åšâ€è½¬ä¹‰â€(escape)ã€‚  </p>
<p>  åæ–œæ é™¤äº†ç”¨äºè½¬ä¹‰ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºä¸€äº›ä¸å¯æ‰“å°çš„å­—ç¬¦ï¼š<br>  <code>\a</code> - å“é“ƒ<br>  <code>\b</code> - é€€æ ¼<br>  <code>\n</code> - æ¢è¡Œ<br>  <code>\r</code> - å›è½¦<br>  <code>\t</code> - åˆ¶è¡¨ç¬¦<br>  å¦‚æœæƒ³è¦åœ¨å‘½ä»¤è¡Œä½¿ç”¨è¿™äº›ä¸å¯æ‰“å°çš„å­—ç¬¦ï¼Œå¯ä»¥æŠŠå®ƒä»¬æ”¾åœ¨å¼•å·é‡Œé¢ï¼Œç„¶åä½¿ç”¨<code>echo</code>å‘½ä»¤çš„<code>-e</code>å‚æ•°ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> a\tb</span><br><span class="line">atb</span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">"a\tb"</span></span><br><span class="line">a	b</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¾‹å­ä¸­ï¼Œå‘½ä»¤è¡Œç›´æ¥è¾“å‡ºä¸å¯æ‰“å°å­—ç¬¦<code>\t</code>ï¼ŒBashä¸èƒ½æ­£ç¡®è§£æã€‚å¿…é¡»æŠŠå®ƒä»¬æ”¾åœ¨å¼•å·ä¹‹ä¸­ï¼Œç„¶åä½¿ç”¨<code>echo</code>å‘½ä»¤çš„<code>-e</code>å‚æ•°ã€‚  </p>
<p>  æ¢è¡Œç¬¦æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œè¡¨ç¤ºå‘½ä»¤çš„ç»“æŸï¼ŒBashæ”¶åˆ°è¿™ä¸ªå­—ç¬¦ä»¥åï¼Œå°±ä¼šå¯¹è¾“å…¥çš„å‘½ä»¤è¿›è¡Œè§£é‡Šæ‰§è¡Œã€‚æ¢è¡Œç¬¦å‰é¢åŠ ä¸Šåæ–œæ è½¬ä¹‰ï¼Œå°±ä½¿å¾—æ¢è¡Œç¬¦å˜æˆä¸€ä¸ªæ™®é€šå­—ç¬¦ï¼ŒBashä¼šå°†å…¶å½“åšç©ºæ ¼å¤„ç†ï¼Œä»è€Œå¯ä»¥å°†ä¸€è¡Œå‘½ä»¤å†™æˆå¤šè¡Œã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mv \</span><br><span class="line">/path/to/foo \</span><br><span class="line">/path/to/bar</span><br></pre></td></tr></tbody></table></figure>
<p>  ç­‰åŒäº  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mv /path/to/foo /path/to/bar</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="æ¨¡å¼æ‰©å±•"><a href="#æ¨¡å¼æ‰©å±•" class="headerlink" title="æ¨¡å¼æ‰©å±•"></a>æ¨¡å¼æ‰©å±•</h2><p>Bashçš„æ¨¡å¼æ‰©å±•ï¼š<br>    shellæ¥æ”¶åˆ°ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ä»¥åï¼Œä¼šæ ¹æ®ç©ºæ ¼å°†ç”¨æˆ·çš„è¾“å…¥ï¼Œæ‹†åˆ†æˆä¸€ä¸ªä¸ªè¯å…ƒï¼Œç„¶åï¼Œshellä¼šæ‰©å±•è¯å…ƒé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰©å±•å®Œåæ‰ä¼šè°ƒç”¨ç›¸åº”çš„å‘½ä»¤ã€‚  </p>
<ul>
<li><p>æ³¢æµªçº¿æ‰©å±•  </p>
<p>  è‡ªåŠ¨æ‰©å±•æˆå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚  </p>
</li>
<li><p><code>?</code>å­—ç¬¦æ‰©å±•  </p>
<p>  ä»£è¡¨æ–‡ä»¶è·¯å¾„é‡Œé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¸åŒ…æ‹¬ç©ºå­—ç¬¦ã€‚  </p>
</li>
<li><p><code>*</code>å­—ç¬¦æ‰©å±•  </p>
<p>  ä»£è¡¨æ–‡ä»¶è·¯å¾„é‡Œé¢çš„ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬é›¶ä¸ªå­—ç¬¦ã€‚  </p>
</li>
<li><p>æ–¹æ‹¬å·æ‰©å±•  </p>
<p>  1ã€åŒ¹é…æ‹¬å·ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœéœ€è¦åŒ¹é…è¿å­—å·<code>-</code>ï¼Œåªèƒ½æ”¾åœ¨æ–¹æ‹¬å·å†…éƒ¨çš„å¼€å¤´æˆ–ç»“å°¾ï¼Œæ¯”å¦‚[-aeiou]æˆ–[aeiou-]ã€‚<br>  2ã€æ–¹æ‹¬å·æ‰©å±•æœ‰ä¸€ä¸ªç®€å†™å½¢å¼<code>[start-end]</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªè¿ç»­çš„èŒƒå›´ã€‚æ¯”å¦‚[a-c]ç­‰åŒäº[abc]ï¼Œ[0-9]åŒ¹é…[0123456789]ã€‚  </p>
<p>  ä¸¾ä¾‹ï¼š  </p>
<pre><code>  [a-z]ï¼šæ‰€æœ‰å°å†™å­—æ¯ï¼›  
  [a-zA-Z]ï¼šæ‰€æœ‰å°å†™å­—æ¯ä¸å¤§å†™å­—æ¯ï¼›  
  [a-zA-Z0-9]ï¼šæ‰€æœ‰å°å†™å­—æ¯ã€å¤§å†™å­—æ¯ä¸æ•°å­—ï¼›  
  [abc]*ï¼šæ‰€æœ‰ä»¥aã€bã€cå­—ç¬¦ä¹‹ä¸€å¼€å¤´çš„æ–‡ä»¶åï¼›  
  program.[co]ï¼šæ–‡ä»¶program.cä¸æ–‡ä»¶program.oï¼›  
  BACKUP.[0-9][0-9][0-9]ï¼šæ‰€æœ‰ä»¥BACKUP.å¼€å¤´ï¼Œåé¢æ˜¯ä¸‰ä¸ªæ•°å­—çš„æ–‡ä»¶åã€‚  
</code></pre>
<p>  è¿™ç§ç®€å†™å½¢å¼æœ‰ä¸€ä¸ªå¦å®šå½¢å¼<code>[!start-end]</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä¸å±äºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ã€‚æ¯”å¦‚[!a-zA-Z]è¡¨ç¤ºåŒ¹é…éè‹±æ–‡å­—æ¯çš„å­—ç¬¦ï¼Œ[!1-3]è¡¨ç¤ºæ’é™¤1ã€2å’Œ3ã€‚  </p>
</li>
<li><p>å¤§æ‹¬å·æ‰©å±•  </p>
<p>  è¡¨ç¤ºåˆ†åˆ«æ‰©å±•æˆå¤§æ‹¬å·<code>{...}</code>é‡Œé¢çš„æ‰€æœ‰å€¼ï¼Œå„ä¸ªå€¼ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚æ¯”å¦‚{1,2,3}æ‰©å±•æˆ1 2 3ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> d{a,e,i,o,u}g</span><br><span class="line">dag deg dig dog dug</span><br></pre></td></tr></tbody></table></figure>
<p>  1ã€å¤§æ‹¬å·å†…éƒ¨çš„é€—å·å‰åä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ï¼Œå¤§æ‹¬å·æ‰©å±•ä¼šå¤±æ•ˆã€‚  </p>
<p>  2ã€é€—å·å‰é¢å¯ä»¥æ²¡æœ‰å€¼ï¼Œè¡¨ç¤ºæ‰©å±•çš„ç¬¬ä¸€é¡¹ä¸ºç©ºã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cp a.log{,.bak}</span><br></pre></td></tr></tbody></table></figure>
<p>  ç­‰åŒäº  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cp a.log a.log.bak</span><br></pre></td></tr></tbody></table></figure>
<p>  3ã€å¤§æ‹¬å·å¯ä»¥åµŒå¥—ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {j{p,pe}g,png}</span><br><span class="line">jpg jpeg png</span><br></pre></td></tr></tbody></table></figure>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> a{A{1,2},B{3,4}}b</span><br><span class="line">aA1b aA2b aB3b aB4b</span><br></pre></td></tr></tbody></table></figure>
<p>  4ã€å¤§æ‹¬å·ä¹Ÿå¯ä»¥ä¸å…¶ä»–æ¨¡å¼è”ç”¨ï¼Œå¹¶ä¸”æ€»æ˜¯å…ˆäºå…¶ä»–æ¨¡å¼è¿›è¡Œæ‰©å±•ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> /bin/{cat,b*}</span><br><span class="line">/bin/cat /bin/b2sum /bin/base32 /bin/base64 ... ...</span><br></pre></td></tr></tbody></table></figure>
<p>  åŸºæœ¬ç­‰åŒäº  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> /bin/cat;<span class="built_in">echo</span> /bin/b*</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¾‹å­ä¸­ï¼Œä¼šå…ˆè¿›è¡Œå¤§æ‹¬å·æ‰©å±•ï¼Œç„¶åè¿›è¡Œ<code>*</code>æ‰©å±•ï¼Œç­‰åŒäºæ‰§è¡Œä¸¤æ¡<code>echo</code>å‘½ä»¤ã€‚  </p>
<p>  ç”±äºå¤§æ‹¬å·æ‰©å±•<code>{...}</code>ä¸æ˜¯æ–‡ä»¶åæ‰©å±•ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯ä¼šæ‰©å±•çš„ã€‚è¿™ä¸æ–¹æ‹¬å·æ‰©å±•<code>[...]</code>å®Œå…¨ä¸åŒï¼Œå¦‚æœåŒ¹é…çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ–¹æ‹¬å·å°±ä¸ä¼šæ‰©å±•ã€‚è¿™ä¸€ç‚¹è¦æ³¨æ„åŒºåˆ†ã€‚  </p>
<p>  ä¸å­˜åœ¨ a.txt å’Œ b.txt æ—¶ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> [ab].txt</span><br><span class="line">[ab].txt</span><br><span class="line">$ <span class="built_in">echo</span> {a,b}.txt</span><br><span class="line">a.txt b.txt</span><br></pre></td></tr></tbody></table></figure>

<p>  5ã€å¤§æ‹¬å·æ‰©å±•æœ‰ä¸€ä¸ªç®€å†™å½¢å¼<code>{start..end}</code>ï¼Œè¡¨ç¤ºæ‰©å±•æˆä¸€ä¸ªè¿ç»­åºåˆ—ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {a..c}</span><br><span class="line">a b c</span><br></pre></td></tr></tbody></table></figure>
<p>  è¿™ç§ç®€å†™å½¢å¼æ”¯æŒé€†åºï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {c..a}</span><br><span class="line">c b a</span><br></pre></td></tr></tbody></table></figure>
<p>  è¿™ç§ç®€å†™å½¢å¼å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå½¢æˆå¤æ‚çš„æ‰©å±•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> .{mp{3,4},m4{a,b,p,v}}</span><br><span class="line">.mp3 .mp4 .m4a .m4b .m4p .m4v</span><br></pre></td></tr></tbody></table></figure>

<p>  6ã€å¤§æ‹¬å·æ‰©å±•çš„å¸¸è§ç”¨é€”ï¼š<br>  æ–°å»ºä¸€ç³»åˆ—ç›®å½•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mkdir {2007..2009}-{01..12}</span><br></pre></td></tr></tbody></table></figure>
<p>  ç”¨äºforå¾ªç¯ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> {1..4}</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>  å¦‚æœæ•´æ•°å‰é¢æœ‰å‰å¯¼0ï¼Œæ‰©å±•è¾“å‡ºçš„æ¯ä¸€é¡¹éƒ½æœ‰å‰å¯¼0ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {01..5}</span><br><span class="line">01 02 03 04 05</span><br><span class="line">$ <span class="built_in">echo</span> {001..5}</span><br><span class="line">001 002 003 004 005</span><br></pre></td></tr></tbody></table></figure>

<p>  7ã€è¿™ç§ç®€å†™å½¢å¼è¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªåŒç‚¹å·<code>(start..end..step)</code>ï¼Œç”¨æ¥æŒ‡å®šæ‰©å±•çš„æ­¥é•¿ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {0..8..2}</span><br><span class="line">0 2 4 6 8</span><br></pre></td></tr></tbody></table></figure>
<p>  å¤šä¸ªç®€å†™å½¢å¼è¿ç”¨ï¼Œä¼šæœ‰å¾ªç¯å¤„ç†çš„æ•ˆæœï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> {a..c}{1..3}</span><br><span class="line">a1 a2 a3 b1 b2 b3 c1 c2 c3</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å˜é‡æ‰©å±•  </p>
<p>  Bashå°†ç¾å…ƒç¬¦å·<code>$</code>å¼€å¤´çš„è¯å…ƒè§†ä¸ºå˜é‡ï¼Œå°†å…¶æ‰©å±•æˆå˜é‡å€¼ã€‚å˜é‡åé™¤äº†æ”¾åœ¨ç¾å…ƒç¬¦å·åé¢ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨<code>${}</code>é‡Œé¢ã€‚<br>  <code>${!string*}</code>æˆ–<code>${!string@}</code>è¿”å›æ‰€æœ‰åŒ¹é…ç»™å®šå­—ç¬¦ä¸²stringçš„å˜é‡åã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">${!S*}</span></span><br><span class="line">SECONDS SHELL SHELLOPTS SHLVL SSH_AGENT_PID SSH_AUTH_SOCK</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢ä¾‹å­ä¸­ï¼Œ${!S*}æ‰©å±•æˆæ‰€æœ‰ä»¥Så¼€å¤´çš„å˜é‡åã€‚  </p>
</li>
<li><p>å­å‘½ä»¤æ‰©å±•  </p>
<p>  <code>$(...)</code>å¯ä»¥æ‰©å±•æˆå¦ä¸€ä¸ªå‘½ä»¤çš„è¿è¡Œç»“æœï¼Œè¯¥å‘½ä»¤çš„æ‰€æœ‰è¾“å‡ºéƒ½ä¼šä½œä¸ºè¿”å›å€¼ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(date)</span><br><span class="line">Tue Jan 12 10:56:55 CST 2021</span><br><span class="line">$ file $(ls /usr/bin/* | grep zip)</span><br></pre></td></tr></tbody></table></figure>
<p>  è¿˜æœ‰å¦ä¸€ç§è¾ƒè€çš„è¯­æ³•ï¼Œå­å‘½ä»¤æ”¾åœ¨åå¼•å·ä¹‹ä¸­ï¼Œä¹Ÿå¯ä»¥æ‰©å±•æˆå‘½ä»¤çš„è¿è¡Œç»“æœã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> `date`</span><br><span class="line">Tue Jan 12 10:58:51 CST 2021</span><br></pre></td></tr></tbody></table></figure>
<p>  <code>$(...)</code>å¯ä»¥åµŒå¥—ï¼Œæ¯”å¦‚ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$(ls $(<span class="built_in">pwd</span>))</span><br></pre></td></tr></tbody></table></figure>
<p>  åˆ©ç”¨å­shellç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼š<br>  å­shellæœ¬èº«å°±æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ã€‚å¯ä»¥ä½¿ç”¨<code>()</code>æ“ä½œç¬¦æ¥å®šä¹‰ä¸€ä¸ªå­shellï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">pwd</span>;</span><br><span class="line">(<span class="built_in">cd</span> /bin; ls);</span><br><span class="line"><span class="built_in">pwd</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>  å½“å‘½ä»¤åœ¨å­shellä¸­æ‰§è¡Œæ—¶ï¼Œä¸ä¼šå¯¹å½“å‰shellæœ‰ä»»ä½•å½±å“ï¼›æ‰€æœ‰çš„æ”¹å˜ä»…é™äºå­shellå†…ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨cdå‘½ä»¤æ”¹å˜å­shellçš„å½“å‰ç›®å½•æ—¶ï¼Œè¿™ç§å˜åŒ–ä¸ä¼šåæ˜ åˆ°ä¸»shellç¯å¢ƒä¸­ã€‚  </p>
</li>
<li><p>ç®—æœ¯æ‰©å±•  </p>
<p>  <code>$((...))</code>å¯ä»¥æ‰©å±•æˆæ•´æ•°è¿ç®—çš„ç»“æœã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((<span class="number">2</span> + <span class="number">2</span>))</span><br><span class="line">4</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å­—ç¬¦ç±»  </p>
<p>  æ¯”å¦‚ï¼š<code>[[:digit:]]</code>åŒ¹é…ä»»æ„æ•°å­— 0-9ã€‚  </p>
<p>  ä½¿ç”¨æ³¨æ„ç‚¹ï¼š<br>  1ã€é€šé…ç¬¦æ˜¯å…ˆè§£é‡Šï¼Œå†æ‰§è¡Œã€‚<br>  2ã€æ–‡ä»¶åæ‰©å±•åœ¨ä¸åŒ¹é…æ—¶ï¼Œä¼šåŸæ ·è¾“å‡ºã€‚<br>  3ã€åªé€‚ç”¨äºå•å±‚è·¯å¾„ã€‚æ‰€æœ‰æ–‡ä»¶åæ‰©å±•åªåŒ¹é…å•å±‚è·¯å¾„ï¼Œä¸èƒ½è·¨ç›®å½•åŒ¹é…ï¼Œå³æ— æ³•åŒ¹é…å­ç›®å½•é‡Œé¢çš„æ–‡ä»¶ã€‚æˆ–è€…è¯´ï¼Œ<code>?</code>æˆ–<code>*</code>è¿™æ ·çš„é€šé…ç¬¦ï¼Œä¸èƒ½åŒ¹é…è·¯å¾„åˆ†éš”ç¬¦<code>/</code>ã€‚  </p>
<pre><code>  å¦‚æœè¦åŒ¹é…å­ç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š  
</code></pre>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls */*.txt</span><br></pre></td></tr></tbody></table></figure>
<p>  4ã€æ–‡ä»¶åå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚è¿™æ—¶å¼•ç”¨æ–‡ä»¶åï¼Œéœ€è¦æŠŠæ–‡ä»¶åæ”¾åœ¨å•å¼•å·é‡Œé¢ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ touch <span class="string">'fo*'</span></span><br><span class="line">$ ls</span><br><span class="line">fo*</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é‡è¯è¯­æ³•  </p>
<p>  é‡è¯è¯­æ³•ç”¨æ¥æ§åˆ¶æ¨¡å¼åŒ¹é…çš„æ¬¡æ•°ã€‚å®ƒåªæœ‰åœ¨Bashçš„<code>extglob</code>å‚æ•°æ‰“å¼€çš„æƒ…å†µä¸‹æ‰èƒ½ä½¿ç”¨ï¼Œä¸è¿‡ä¸€èˆ¬æ˜¯é»˜è®¤æ‰“å¼€çš„ã€‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥è¯¢ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> extglob</span><br><span class="line">extglob on</span><br></pre></td></tr></tbody></table></figure>
<p>  é‡è¯è¯­æ³•æœ‰ä¸‹é¢å‡ ä¸ªï¼š<br>  <code>?(pattern-list)</code> - åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ªæ¨¡å¼<br>  <code>*(pattern-list)</code> - åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªæ¨¡å¼<br>  <code>+(pattern-list)</code> - åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å¼<br>  <code>@(pattern-list)</code> - åªåŒ¹é…ä¸€ä¸ªæ¨¡å¼<br>  <code>!(pattern-list)</code> - åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„æ¨¡å¼ï¼Œä½†ä¸åŒ¹é…å•ç‹¬ä¸€ä¸ªçš„æ¨¡å¼  </p>
<p>  <code>shopt</code>å‘½ä»¤å¯ä»¥è°ƒæ•´Bashçš„è¡Œä¸ºã€‚å®ƒæœ‰å¥½å‡ ä¸ªå‚æ•°è·Ÿé€šé…ç¬¦æ‰©å±•æœ‰å…³ã€‚<br>  <code>shopt</code>å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s [optionname] <span class="comment">#æ‰“å¼€æŸä¸ªå‚æ•°</span></span><br><span class="line">$ <span class="built_in">shopt</span> -u [optionname] <span class="comment">#å…³é—­æŸä¸ªå‚æ•°</span></span><br><span class="line">$ <span class="built_in">shopt</span> [optionname] <span class="comment">#æŸ¥è¯¢æŸä¸ªå‚æ•°å…³é—­è¿˜æ˜¯æ‰“å¼€</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><p>shellæœ¬èº«ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ˜¯shellå‘½ä»¤å’Œå·¥å…·ã€‚<br>æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä¸Šæ˜¯ä¸€ç§â€œè¡¨è¾¾å¼â€ï¼Œ åªè¦å·¥å…·ç¨‹åºæ”¯æŒè¿™ç§è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¯¥å·¥å…·ç¨‹åºå°±å¯ä»¥ç”¨æ¥ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ä¸²å¤„ç†ä¹‹ç”¨ã€‚ ä¾‹å¦‚ <code>vi</code>, <code>egrep</code>, <code>awk</code> , <code>sed</code>, <code>perl</code>, <code>less</code> ç­‰ç­‰å·¥å…·ï¼Œå› ä¸ºå¥¹ä»¬æœ‰æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œ æ‰€ä»¥ï¼Œè¿™äº›å·¥å…·å°±å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šå­—ç¬¦æ¥è¿›è¡Œå­—ä¸²çš„å¤„ç†ã€‚ä½†ä¾‹å¦‚ <code>find</code>, <code>cp</code>, <code>ls</code>, <code>rm</code> ç­‰ç³»ç»Ÿå‘½ä»¤ä¸€èˆ¬å¹¶æœªæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œ æ‰€ä»¥å°±åªèƒ½ä½¿ç”¨ Bash è‡ªå·±æœ¬èº«çš„é€šé…ç¬¦è€Œå·²ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦ç”±ä»¥ä¸‹å­—ç¬¦ç»„æˆï¼š<br><code>^</code> <code>$</code> <code>.</code> <code>[ ]</code> <code>{ }</code> <code>-</code> <code>?</code> <code>*</code> <code>+</code> <code>( )</code> <code>|</code> <code>\</code>  </p>
<p>å…¶ä»–æ‰€æœ‰å­—ç¬¦éƒ½è¢«è®¤ä¸ºæ˜¯åŸä¹‰å­—ç¬¦ã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œåæ–œæ ä¼šè¢«ç”¨æ¥åˆ›å»ºå…ƒåºåˆ—ï¼Œå…ƒå­—ç¬¦ä¹Ÿå¯ä»¥è¢«è½¬ä¹‰ä¸ºåŸä¹‰å­—ç¬¦ï¼Œè€Œä¸æ˜¯è§£é‡Šä¸ºå…ƒå­—ç¬¦ã€‚<br>æ³¨æ„ï¼šæ­£å¦‚æˆ‘ä»¬æ‰€è§åˆ°çš„ï¼Œå½“ shell æ‰§è¡Œå±•å¼€çš„æ—¶å€™ï¼Œè®¸å¤šæ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦ï¼Œä¹Ÿæ˜¯å¯¹ shell æœ‰ç‰¹æ®Š å«ä¹‰çš„å­—ç¬¦ã€‚å½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’åŒ…å«å…ƒå­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™ï¼ŒæŠŠå…ƒå­—ç¬¦ç”¨å¼•å·å¼•èµ·æ¥è‡³å…³é‡è¦ï¼Œè¿™æ ·å¯ä»¥é˜»æ­¢ shell è¯•å›¾å±•å¼€å®ƒä»¬ã€‚  </p>
<ol>
<li><p>ä»»ä½•å­—ç¬¦  </p>
<p> åœ†ç‚¹å­—ç¬¦ï¼Œç”¨æ¥åŒ¹é…ä»»æ„å­—ç¬¦ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…å«å®ƒï¼Œå®ƒå°†ä¼šåŒ¹é…åœ¨æ­¤ä½ç½®çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¸¾ä¸ªä¾‹å­ï¼š  </p>
 <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ grep -h <span class="string">'.zip'</span> dirlist*.txt  </span><br><span class="line">bunzip2  </span><br><span class="line">bzip2  </span><br><span class="line">bzip2recover  </span><br><span class="line">gunzip  </span><br><span class="line">gzip  </span><br><span class="line">funzip  </span><br><span class="line">gpg-zip  </span><br><span class="line">preunzip  </span><br><span class="line">prezip  </span><br><span class="line">prezip-bin  </span><br><span class="line">unzip  </span><br><span class="line">unzipsfx</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é”šç‚¹  </p>
<p> åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæ’å…¥ç¬¦å·å’Œç¾å…ƒç¬¦å·è¢«çœ‹ä½œæ˜¯é”šç‚¹ã€‚è¿™æ„å‘³ç€æ­£åˆ™è¡¨è¾¾å¼åªæœ‰åœ¨æ–‡æœ¬è¡Œçš„å¼€å¤´æˆ–æœ«å°¾è¢«æ‰¾åˆ°æ—¶ï¼Œæ‰ç®—å‘ç”Ÿä¸€æ¬¡åŒ¹é…ã€‚ä¸¾ä¸ªä¾‹å­ï¼š  </p>
 <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ grep -h <span class="string">'^zip'</span> dirlist*.txt  </span><br><span class="line">zip  </span><br><span class="line">zipcloak  </span><br><span class="line">zipgrep  </span><br><span class="line">zipinfo  </span><br><span class="line">zipnote  </span><br><span class="line">zipspli  </span><br><span class="line">$ grep -h <span class="string">'zip$'</span> dirlist*.txt  </span><br><span class="line">gunzip  </span><br><span class="line">gzip  </span><br><span class="line">funzip  </span><br><span class="line">gpg-zip  </span><br><span class="line">preunzip  </span><br><span class="line">prezip  </span><br><span class="line">unzip  </span><br><span class="line">zip  </span><br><span class="line">$ grep -h <span class="string">'^zip$'</span> dirlist*.txt  </span><br><span class="line">zip  </span><br></pre></td></tr></tbody></table></figure>

<p> æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼<code>'Ë†$'</code>ï¼ˆè¡Œé¦–å’Œè¡Œå°¾ä¹‹é—´æ²¡æœ‰å­—ç¬¦ï¼‰ä¼šåŒ¹é…ç©ºè¡Œã€‚  </p>
</li>
<li><p>ä¸­æ‹¬å·è¡¨è¾¾å¼å’Œå­—ç¬¦ç±»  </p>
<p> é€šè¿‡ä½¿ç”¨ä¸­æ‹¬å·è¡¨è¾¾å¼ï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦é›†åˆï¼ˆåŒ…å«åœ¨ä¸åŠ ä¸­æ‹¬å·çš„æƒ…å†µä¸‹ä¼šè¢«è§£é‡Šä¸ºå…ƒå­—ç¬¦çš„å­—ç¬¦ï¼‰ä¸­åŒ¹é…å•ä¸ªå­—ç¬¦ã€‚ä¸¾ä¸ªä¾‹å­ï¼š  </p>
 <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ grep -h <span class="string">'[bg]zip'</span> dirlist*.txt  </span><br><span class="line">bzip2  </span><br><span class="line">bzip2recover  </span><br><span class="line">gzip  </span><br></pre></td></tr></tbody></table></figure>

<p> ä¸€ä¸ªå­—ç¬¦é›†åˆå¯èƒ½åŒ…å«ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”å…ƒå­—ç¬¦è¢«æ”¾ç½®åˆ°ä¸­æ‹¬å·é‡Œé¢åä¼šå¤±å»äº†å®ƒä»¬çš„ç‰¹æ®Šå«ä¹‰ã€‚ ç„¶è€Œï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œä¼šåœ¨ä¸­æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨å…ƒå­—ç¬¦ï¼Œå¹¶ä¸”æœ‰ç€ä¸åŒçš„å«ä¹‰ã€‚ç¬¬ä¸€ä¸ªå…ƒå­—ç¬¦ æ˜¯æ’å…¥å­—ç¬¦<code>^</code>ï¼Œå…¶è¢«ç”¨æ¥è¡¨ç¤ºå¦å®šï¼›ç¬¬äºŒä¸ªæ˜¯è¿å­—ç¬¦å­—ç¬¦<code>-</code>ï¼Œå…¶è¢«ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ã€‚  </p>
</li>
<li><p>å¦å®š  </p>
<p> å¦‚æœåœ¨ä¸­æ‹¬å·è¡¨ç¤ºå¼ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ’å…¥å­—ç¬¦<code>^</code>ï¼Œåˆ™å‰©ä½™çš„å­—ç¬¦è¢«çœ‹ä½œæ˜¯ä¸ä¼šåœ¨ç»™å®šçš„å­—ç¬¦ä½ç½®å‡ºç°çš„å­—ç¬¦é›†åˆã€‚ä¸¾ä¸ªä¾‹å­ï¼š  </p>
 <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ grep -h <span class="string">'[^bg]zip'</span> dirlist*.txt  </span><br><span class="line">bunzip2  </span><br><span class="line">gunzip  </span><br><span class="line">funzip  </span><br><span class="line">gpg-zip  </span><br><span class="line">preunzip  </span><br><span class="line">prezip  </span><br><span class="line">prezip-bin  </span><br><span class="line">unzip  </span><br><span class="line">unzipsfx  </span><br></pre></td></tr></tbody></table></figure>

<p> ä¸€ä¸ªå¦å®šçš„å­—ç¬¦é›†ä»ç„¶åœ¨ç»™å®šä½ç½®è¦æ±‚ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦å¿…é¡»ä¸æ˜¯å¦å®šå­—ç¬¦é›†çš„æˆå‘˜ã€‚<br> æ’å…¥å­—ç¬¦å¦‚æœæ˜¯ä¸­æ‹¬å·è¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œæ‰ä¼šå”¤é†’å¦å®šåŠŸèƒ½ï¼›å¦åˆ™ï¼Œå®ƒä¼šå¤±å»å®ƒçš„ç‰¹æ®Šå«ä¹‰ï¼Œå˜æˆå­—ç¬¦é›†ä¸­çš„ä¸€ä¸ªæ™®é€šå­—ç¬¦ã€‚  </p>
</li>
<li><p>ä¼ ç»Ÿçš„å­—ç¬¦åŒºåŸŸ  </p>
</li>
<li><p>POSIXå­—ç¬¦é›†  </p>
<p> POSIX æŠŠæ­£åˆ™è¡¨è¾¾å¼çš„å®ç°åˆ†æˆäº†ä¸¤ç±»ï¼š åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBREï¼‰å’Œæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆEREï¼‰ã€‚  </p>
<p> BRE å’Œ ERE ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¿™æ˜¯å…³äºå…ƒå­—ç¬¦çš„é—®é¢˜ã€‚BRE å¯ä»¥è¾¨åˆ«ä»¥ä¸‹å…ƒå­—ç¬¦ï¼š  </p>
<p> <code>^</code> <code>$</code> <code>.</code> <code>[ ]</code> <code>*</code>  </p>
<p> å…¶å®ƒçš„æ‰€æœ‰å­—ç¬¦è¢«è®¤ä¸ºæ˜¯æ–‡æœ¬å­—ç¬¦ã€‚ERE æ·»åŠ äº†ä»¥ä¸‹å…ƒå­—ç¬¦ï¼ˆä»¥åŠä¸å…¶ç›¸å…³çš„åŠŸèƒ½ï¼‰:  </p>
<p> <code>( )</code> <code>{ }</code> <code>?</code> <code>+</code> <code>|</code>  </p>
 <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ grep -Eh <span class="string">'^(bz|gz|zip)'</span> dirlist*.txt  </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é™å®šç¬¦  </p>
<p> æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒå‡ ç§æ–¹æ³•ï¼Œæ¥æŒ‡å®šä¸€ä¸ªå…ƒç´ è¢«åŒ¹é…çš„æ¬¡æ•°ã€‚  </p>
<ul>
<li><code>?</code> - åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ªå…ƒç´   </li>
<li><code>*</code> - åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´   </li>
<li><code>+</code> - åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´   </li>
<li><code>{}</code> - åŒ¹é…ç‰¹å®šä¸ªæ•°çš„å…ƒç´   </li>
</ul>
<p> <code>{}</code>å…ƒå­—ç¬¦éƒ½è¢«ç”¨æ¥è¡¨è¾¾è¦æ±‚åŒ¹é…çš„æœ€å°å’Œæœ€å¤§æ•°ç›®ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡å››ç§æ–¹æ³•æ¥æŒ‡å®šï¼š  </p>
<table>
<thead>
<tr>
<th align="left">é™å®šç¬¦</th>
<th align="left">æ„æ€</th>
</tr>
</thead>
<tbody><tr>
<td align="left">n</td>
<td align="left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒç¡®åˆ‡åœ°å‡ºç°äº† n æ¬¡</td>
</tr>
<tr>
<td align="left">n,m</td>
<td align="left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒè‡³å°‘å‡ºç°äº†næ¬¡ï¼Œä½†æ˜¯ä¸å¤šäºmæ¬¡</td>
</tr>
<tr>
<td align="left">n,</td>
<td align="left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒå‡ºç°äº†næ¬¡æˆ–å¤šäºnæ¬¡</td>
</tr>
<tr>
<td align="left">,m</td>
<td align="left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒå‡ºç°çš„æ¬¡æ•°ä¸å¤šäºmæ¬¡</td>
</tr>
</tbody></table>
</li>
</ol>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">æ­£åˆ™è¡¨è¾¾å¼</th>
<th align="left">æè¿°</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">^</td>
<td align="left">è¡Œèµ·å§‹æ ‡è®°</td>
<td align="left">^tuxåŒ¹é…ä»¥tuxèµ·å§‹çš„è¡Œ</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">è¡Œå°¾æ ‡è®°</td>
<td align="left">tux$åŒ¹é…ä»¥tuxç»“å°¾çš„è¡Œ</td>
</tr>
<tr>
<td align="left">.</td>
<td align="left">åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
<td align="left">Hack.åŒ¹é…Hacklå’ŒHackiï¼Œä½†æ˜¯ä¸åŒ¹é…Hackl2å’ŒHackilï¼Œå®ƒåªèƒ½åŒ¹é…å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td align="left">[]</td>
<td align="left">åŒ¹é…åŒ…å«åœ¨[å­—ç¬¦]ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
<td align="left">coo[kl]åŒ¹é…cookæˆ–cool</td>
</tr>
<tr>
<td align="left">[^]</td>
<td align="left">åŒ¹é…é™¤[^å­—ç¬¦]ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
<td align="left">9[^01]åŒ¹é…92ã€93ï¼Œä½†æ˜¯ä¸åŒ¹é…91æˆ–90</td>
</tr>
<tr>
<td align="left">[-]</td>
<td align="left">åŒ¹é…[]ä¸­æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
<td align="left">[1-5]åŒ¹é…ä»1~5çš„ä»»æ„ä¸€ä¸ªæ•°å­—</td>
</tr>
<tr>
<td align="left">?</td>
<td align="left">åŒ¹é…ä¹‹å‰çš„é¡¹1æ¬¡æˆ–0æ¬¡</td>
<td align="left">colou?råŒ¹é…coloræˆ–colourï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…colouur</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">åŒ¹é…ä¹‹å‰çš„é¡¹1æ¬¡æˆ–å¤šæ¬¡</td>
<td align="left">Rollno-9+åŒ¹é…Rollno-99ã€Rollno-9ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…Rollno-</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">åŒ¹é…ä¹‹å‰çš„é¡¹0æ¬¡æˆ–å¤šæ¬¡</td>
<td align="left">co*låŒ¹é…clã€colã€cooolç­‰</td>
</tr>
<tr>
<td align="left">()</td>
<td align="left">åˆ›å»ºä¸€ä¸ªç”¨äºåŒ¹é…çš„å­ä¸²</td>
<td align="left">ma(tri)?xåŒ¹é…maxæˆ–matrix</td>
</tr>
<tr>
<td align="left">{n}</td>
<td align="left">åŒ¹é…ä¹‹å‰çš„é¡¹næ¬¡</td>
<td align="left">[0-9]{3}åŒ¹é…ä»»æ„ä¸€ä¸ªä¸‰ä½æ•°ï¼Œ[0-9]{3}å¯ä»¥æ‰©å±•ä¸º[0-9][0-9][0-9]</td>
</tr>
<tr>
<td align="left">{n,}</td>
<td align="left">ä¹‹å‰çš„é¡¹è‡³å°‘éœ€è¦åŒ¹é…næ¬¡</td>
<td align="left">[0-9]{2,}åŒ¹é…ä»»æ„ä¸€ä¸ªä¸¤ä½æˆ–æ›´å¤šä½çš„æ•°å­—</td>
</tr>
<tr>
<td align="left">{n,m}</td>
<td align="left">æŒ‡å®šä¹‹å‰çš„é¡¹æ‰€å¿…é¡»åŒ¹é…çš„æœ€å°æ¬¡æ•°å’Œæœ€å¤§æ¬¡æ•°</td>
<td align="left">[0-9]{2,5}åŒ¹é…ä»ä¸¤ä½æ•°åˆ°äº”ä½æ•°ä¹‹å‰çš„ä»»æ„ä¸€ä¸ªæ•°å­—</td>
</tr>
<tr>
<td align="left">|</td>
<td align="left">äº¤æ›¿ä¸€ä¸€åŒ¹é…|ä¸¤è¾¹çš„ä»»æ„ä¸€é¡¹</td>
<td align="left">Oct(1st|2nd)åŒ¹é…Oct 1stæˆ–Oct 2nd</td>
</tr>
</tbody></table>
<h2 id="sedå…¥é—¨"><a href="#sedå…¥é—¨" class="headerlink" title="sedå…¥é—¨"></a>sedå…¥é—¨</h2><p>åå­— <code>sed</code> æ˜¯ stream editorï¼ˆæµç¼–è¾‘å™¨ï¼‰çš„ç®€ç§°ã€‚  </p>
<p><code>sed</code>åœ°å€è¡¨ç¤ºæ³•ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">åœ°å€</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">n</td>
<td align="left">è¡Œå·ï¼Œnæ˜¯ä¸€ä¸ªæ­£æ•´æ•°</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">æœ€åä¸€è¡Œ</td>
</tr>
<tr>
<td align="left">/regexp/</td>
<td align="left">æ‰€æœ‰åŒ¹é…ä¸€ä¸ªPOSIXåŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬è¡Œã€‚æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼é€šè¿‡æ–œæ å­—ç¬¦ç•Œå®šã€‚é€‰æ‹©æ€§åœ°ï¼Œè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯èƒ½ç”±ä¸€ä¸ªå¤‡ç”¨å­—ç¬¦ç•Œå®šï¼Œé€šè¿‡\cregexpcæ¥æŒ‡å®šè¡¨è¾¾å¼ï¼Œè¿™é‡Œcå°±æ˜¯ä¸€ä¸ªå¤‡ç”¨å­—ç¬¦</td>
</tr>
<tr>
<td align="left">addr1,addr2</td>
<td align="left">ä»addr1åˆ°addr2èŒƒå›´å†…çš„æ–‡æœ¬è¡Œï¼ŒåŒ…å«åœ°å€addr2åœ¨å†…ã€‚åœ°å€å¯èƒ½æ˜¯ä¸Šè¿°ä»»æ„å•ç‹¬çš„åœ°å€å½¢å¼</td>
</tr>
<tr>
<td align="left">first~step</td>
<td align="left">åŒ¹é…ç”±æ•°å­—firstä»£è¡¨çš„æ–‡æœ¬è¡Œï¼Œç„¶åéšåçš„æ¯ä¸ªåœ¨stepé—´éš”å¤„çš„æ–‡æœ¬è¡Œã€‚ä¾‹å¦‚1<del>2æ˜¯æŒ‡æ¯ä¸ªä½äºå¶æ•°è¡Œå·çš„æ–‡æœ¬è¡Œï¼Œ5</del>5åˆ™æŒ‡ç¬¬äº”è¡Œå’Œä¹‹åæ¯äº”è¡Œä½ç½®çš„æ–‡æœ¬è¡Œ</td>
</tr>
<tr>
<td align="left">addr1,+n</td>
<td align="left">åŒ¹é…åœ°å€addr1å’Œéšåçš„nä¸ªæ–‡æœ¬è¡Œ</td>
</tr>
<tr>
<td align="left">addr!</td>
<td align="left">åŒ¹é…æ‰€æœ‰çš„æ–‡æœ¬è¡Œï¼Œé™¤äº†addrä¹‹å¤–ï¼Œaddrå¯èƒ½æ˜¯ä¸Šè¿°ä»»æ„çš„åœ°å€å½¢å¼</td>
</tr>
</tbody></table>
<p><code>sed</code>åŸºæœ¬ç¼–è¾‘å‘½ä»¤ï¼š  </p>
<table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">=</td>
<td align="left">è¾“å‡ºå½“å‰çš„è¡Œå·ã€‚</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">åœ¨å½“å‰è¡Œä¹‹åè¿½åŠ æ–‡æœ¬ã€‚</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">åˆ é™¤å½“å‰è¡Œã€‚</td>
</tr>
<tr>
<td align="left">i</td>
<td align="left">åœ¨å½“å‰è¡Œä¹‹å‰æ’å…¥æ–‡æœ¬ã€‚</td>
</tr>
<tr>
<td align="left">p</td>
<td align="left">æ‰“å°å½“å‰è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œsedç¨‹åºæ‰“å°æ¯ä¸€è¡Œï¼Œå¹¶ä¸”åªæ˜¯ç¼–è¾‘æ–‡ä»¶ä¸­åŒ¹é…æŒ‡å®šåœ°å€çš„æ–‡æœ¬è¡Œã€‚é€šè¿‡æŒ‡å®š-né€‰é¡¹ï¼Œè¿™ä¸ªé»˜è®¤çš„è¡Œä¸ºèƒ½å¤Ÿè¢«å¿½ç•¥ã€‚</td>
</tr>
<tr>
<td align="left">q</td>
<td align="left">é€€å‡ºsedï¼Œä¸å†å¤„ç†æ›´å¤šçš„æ–‡æœ¬è¡Œã€‚å¦‚æœä¸æŒ‡å®š-né€‰é¡¹ï¼Œè¾“å‡ºå½“å‰è¡Œã€‚</td>
</tr>
<tr>
<td align="left">Q</td>
<td align="left">é€€å‡ºsedï¼Œä¸å†å¤„ç†æ›´å¤šçš„æ–‡æœ¬è¡Œã€‚</td>
</tr>
<tr>
<td align="left">s/regexp/replacement/</td>
<td align="left">åªè¦æ‰¾åˆ°ä¸€ä¸ªregexpåŒ¹é…é¡¹ï¼Œå°±æ›¿æ¢replacementçš„å†…å®¹ã€‚replacementå¯èƒ½åŒ…æ‹¬ç‰¹æ®Šå­—ç¬¦&amp;ï¼Œå…¶ç­‰ä»·äºç”±regexpåŒ¹é…çš„æ–‡æœ¬ã€‚å¦å¤–ï¼Œreplacementå¯èƒ½åŒ…æ‹¬åºåˆ—\1åˆ°\9ï¼Œå…¶æ˜¯regexpä¸­ç›¸å¯¹åº”çš„å­è¡¨è¾¾å¼çš„å†…å®¹ã€‚åœ¨replacementæœ«å°¾çš„æ–œæ ä¹‹åï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªå¯é€‰çš„æ ‡å¿—ï¼Œæ¥ä¿®æ”¹så‘½ä»¤çš„è¡Œä¸ºã€‚</td>
</tr>
<tr>
<td align="left">y/set1/set2</td>
<td align="left">æ‰§è¡Œå­—ç¬¦è½¬å†™æ“ä½œï¼Œé€šè¿‡æŠŠset1ä¸­çš„å­—ç¬¦è½¬å˜ä¸ºç›¸å¯¹åº”çš„set2ä¸­çš„å­—ç¬¦ã€‚æ³¨æ„ä¸åŒäºtrç¨‹åºï¼Œsedè¦æ±‚ä¸¤ä¸ªå­—ç¬¦é›†åˆå…·æœ‰ç›¸åŒçš„é•¿åº¦ã€‚ï¼ˆyå‘½ä»¤ä¸æ”¯æŒå­—ç¬¦åŒºåŸŸï¼ˆä¾‹å¦‚ï¼Œ[a-z]ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒPOSIXå­—ç¬¦é›†ã€‚ï¼‰</td>
</tr>
</tbody></table>
<p><strong>é€†å‚ç…§</strong>ï¼šå¦‚æœåºåˆ—<code>\n</code>å‡ºç°åœ¨<code>replacement</code>ä¸­ï¼Œè¿™é‡Œ<code>n</code>æ˜¯æŒ‡ä»1åˆ°9çš„æ•°å­—ï¼Œåˆ™è¿™ä¸ªåºåˆ—æŒ‡çš„æ˜¯åœ¨å‰é¢æ­£åˆ™è¡¨è¾¾å¼ä¸­ç›¸å¯¹åº”çš„å­è¡¨è¾¾å¼ã€‚ä¸ºäº†åˆ›å»ºè¿™ä¸ªå­è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬ç®€å•åœ°æŠŠå®ƒä»¬ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥ã€‚  </p>
<p><code>s</code>å‘½ä»¤çš„å¦ä¸€ä¸ªåŠŸèƒ½æ˜¯ä½¿ç”¨<strong>å¯é€‰æ ‡å¿—</strong>ï¼Œå…¶è·Ÿéšæ›¿ä»£å­—ç¬¦ä¸²ã€‚ä¸€ä¸ªæœ€é‡è¦çš„å¯é€‰æ ‡å¿—æ˜¯<code>g</code>æ ‡å¿—ï¼Œå…¶æŒ‡ç¤ºsedå¯¹æŸä¸ªæ–‡æœ¬è¡Œå…¨èŒƒå›´åœ°æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œï¼Œä¸ä»…ä»…æ˜¯å¯¹ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Œè¿™æ˜¯é»˜è®¤è¡Œä¸ºã€‚è¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼š  </p>
<p>ä¾‹å­ï¼š  </p>
<ul>
<li><p>æ›¿æ¢  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sed -i <span class="string">'s/text/replace/g'</span> file</span><br></pre></td></tr></tbody></table></figure>
<p><code>-i</code>å¯ä»¥å°†æ›¿æ¢ç»“æœåº”ç”¨äºåŸæ–‡ä»¶ã€‚<br><code>/g</code>æ„å‘³ç€<code>sed</code>ä¼šæ›¿æ¢æ¯ä¸€å¤„åŒ¹é…ã€‚  </p>
</li>
<li><p>ç§»é™¤ç©ºç™½è¡Œ  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sed <span class="string">'/^$/d'</span> file</span><br></pre></td></tr></tbody></table></figure>
<p>ç©ºç™½è¡Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼<code>^$</code>è¿›è¡ŒåŒ¹é…ã€‚<br><code>/pattern/d</code>ä¼šç§»é™¤åŒ¹é…æ ·å¼çš„è¡Œã€‚  </p>
</li>
<li><p>å·²åŒ¹é…å­—ç¬¦ä¸²æ ‡è®°&amp;<br>åœ¨<code>sed</code>ä¸­ï¼Œç”¨<code>&amp;</code>æ ‡è®°åŒ¹é…æ ·å¼çš„å­—ç¬¦ä¸²ï¼Œå°±èƒ½å¤Ÿåœ¨æ›¿æ¢å­—ç¬¦ä¸²æ—¶ä½¿ç”¨å·²åŒ¹é…çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> this is an example | sed <span class="string">'s/\w\+/[&amp;]/g'</span>  </span><br><span class="line">[this] [is] [an] [example]  </span><br></pre></td></tr></tbody></table></figure>
<p>æ­£åˆ™è¡¨è¾¾å¼<code>\w\+</code>åŒ¹é…æ¯ä¸€ä¸ªå•è¯ï¼Œç„¶åæˆ‘ä»¬ç”¨<code>[&amp;]</code>æ›¿æ¢å®ƒã€‚<code>&amp;</code>å¯¹åº”äºä¹‹å‰æ‰€åŒ¹é…åˆ°çš„å•è¯ã€‚  </p>
</li>
<li><p>å­ä¸²åŒ¹é…æ ‡è®°\1<br><code>&amp;</code>ä»£è¡¨åŒ¹é…ç»™å®šæ ·å¼çš„å­—ç¬¦ä¸²ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥åŒ¹é…ç»™å®šæ ·å¼çš„å…¶ä¸­ä¸€éƒ¨åˆ†ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> this is digit 7 <span class="keyword">in</span> a number | sed <span class="string">'s/digit \([0-9]\)/\1'</span>  </span><br><span class="line">this is 7 <span class="keyword">in</span> a number  </span><br></pre></td></tr></tbody></table></figure>
<p>è¿™æ¡å‘½ä»¤å°†digit 7æ›¿æ¢ä¸º7ã€‚æ ·å¼ä¸­åŒ¹é…åˆ°çš„å­ä¸²æ˜¯7ã€‚<code>\(pattern\)</code>ç”¨äºåŒ¹é…å­ä¸²ã€‚æ¨¡å¼è¢«åŒ…æ‹¬åœ¨ä½¿ç”¨æ–œçº¿è½¬ä¹‰è¿‡çš„<code>()</code>ä¸­ã€‚å¯¹äºåŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­ä¸²ï¼Œå…¶å¯¹åº”çš„æ ‡è®°æ˜¯<code>\1</code>ï¼ŒåŒ¹é…åˆ°çš„ç¬¬äºŒä¸ªå­ä¸²æ˜¯<code>\2</code>ï¼Œå¾€åä¾æ¬¡ç±»æ¨ã€‚<br>ä¸‹é¢çš„ç¤ºä¾‹ä¸­åŒ…å«äº†å¤šä¸ªåŒ¹é…ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> seven EIGHT | sed <span class="string">'s/\([a-z]\+\) \([A-Z]\+\)/\2 \1'</span></span><br><span class="line">EIGHT seven</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ç»„åˆå¤šä¸ªè¡¨è¾¾å¼<br>åˆ©ç”¨ç®¡é“ç»„åˆå¤šä¸ª<code>sed</code>å‘½ä»¤å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ä»£æ›¿ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sed <span class="string">'expression; expression'</span> <span class="comment"># sed 'expression' | sed 'expression'</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼•ç”¨<br><code>sed</code>è¡¨è¾¾å¼é€šå¸¸ç”¨å•å¼•å·æ¥å¼•ç”¨ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·ã€‚åŒå¼•å·ä¼šé€šè¿‡å¯¹è¡¨è¾¾å¼æ±‚å€¼æ¥å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚å½“æˆ‘ä»¬æƒ³åœ¨sedè¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸€äº›å˜é‡å­—ç¬¦ä¸²æ—¶ï¼ŒåŒå¼•å·å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ text=hello</span><br><span class="line">$ <span class="built_in">echo</span> hello world | sed <span class="string">"s/<span class="variable">$text</span>/HELLO/"</span></span><br><span class="line">HELLO world</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å…¶ä»–ä¾‹å­ï¼šæ›¿æ¢æ–‡æœ¬æˆ–æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²<br>ç”¨å¦ä¸€ä¸ªæŒ‡å®šçš„æ•°å­—æ›¿æ¢æ–‡ä»¶ä¸­æ‰€æœ‰çš„3ä½æ•°å­—ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat sed_data.txt</span><br><span class="line">11 abc 111 this 9 file contains 111 11 88 numbers 0000</span><br><span class="line">$</span><br><span class="line">$ cat sed_data.txt | sed <span class="string">'s/\b[0-9]\{3\}\b/NUMBER/g'</span></span><br><span class="line">11 abc NUMBER this 9 file contains NUMBER 11 88 numbers 0000</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢çš„å•è¡Œå‘½ä»¤åªæ›¿æ¢3ä½æ•°å­—ã€‚\b[0-9]{3}\bæ˜¯ä¸€ä¸ªç”¨äºåŒ¹é…3ä½æ•°å­—çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚[0-9]è¡¨ç¤ºä»0åˆ°9çš„æ•°å­—èŒƒå›´ã€‚{3}ç”¨æ¥åŒ¹é…3æ¬¡ä¹‹å‰çš„æ•°å­—ã€‚{3}ä¸­çš„<code>\</code>ç”¨äºèµ‹äºˆ<code>{</code>å’Œ<code>}</code>ç‰¹æ®Šçš„å«ä¹‰ã€‚<code>\b</code>æ˜¯å•è¯è¾¹ç•Œæ ‡è®°ã€‚  </p>
</li>
</ul>
<h2 id="awkå…¥é—¨"><a href="#awkå…¥é—¨" class="headerlink" title="awkå…¥é—¨"></a>awkå…¥é—¨</h2><p><code>awk</code>è„šæœ¬çš„ç»“æ„åŸºæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN{ commands } pattern{ commands } END{ commands }'</span> file  </span><br></pre></td></tr></tbody></table></figure>
<p>ä¸€ä¸ª<code>awk</code>è„šæœ¬é€šå¸¸ç”±3éƒ¨åˆ†ç»„æˆï¼š<code>BEGIN</code>è¯­å¥å—ã€<code>END</code>è¯­å¥å—å’Œèƒ½å¤Ÿä½¿ç”¨æ¨¡å¼åŒ¹é…çš„é€šç”¨è¯­å¥å—ã€‚è¿™3ä¸ªéƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œå®ƒä»¬ä¸­ä»»ä½•ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ä¸å‡ºç°åœ¨è„šæœ¬ä¸­ã€‚è„šæœ¬é€šå¸¸ä¼šè¢«åŒ…å«åœ¨å•å¼•å·æˆ–åŒå¼•å·ä¸­ã€‚  </p>
<p><code>awk</code>å‘½ä»¤çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š<br>æ‰§è¡Œ<code>BEGIN{ commands }</code>è¯­å¥å—ä¸­çš„è¯­å¥ã€‚<br>ä»æ–‡ä»¶æˆ–<code>stdin</code>ä¸­è¯»å–ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œ<code>pattern{ commands }</code>ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–å®Œæ¯•ã€‚<br>å½“è¯»è‡³è¾“å…¥æµ(input steam)æœ«å°¾æ—¶ï¼Œæ‰§è¡Œ<code>END{ commands }</code>è¯­å¥å—ã€‚  </p>
<p><code>BEGIN</code>è¯­å¥å—åœ¨<code>awk</code>å¼€å§‹ä»è¾“å…¥æµä¸­è¯»å–è¡Œä¹‹å‰è¢«æ‰§è¡Œã€‚è¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„è¯­å¥å—ï¼Œè¯¸å¦‚å˜é‡çš„åˆå§‹åŒ–ã€æ‰“å°è¾“å‡ºè¡¨æ ¼çš„è¡¨å¤´ç­‰è¯­å¥é€šå¸¸éƒ½å¯ä»¥å†™å…¥<code>BEGIN</code>è¯­å¥å—ä¸­ã€‚<br><code>END</code>è¯­å¥å—å’Œ<code>BEGIN</code>è¯­å¥å—ç±»ä¼¼ã€‚<code>END</code>è¯­å¥å—åœ¨<code>awk</code>ä»è¾“å…¥æµä¸­è¯»å–å®Œæ‰€æœ‰çš„è¡Œä¹‹åå³è¢«æ‰§è¡Œã€‚åƒæ‰“å°æ‰€æœ‰è¡Œçš„åˆ†æç»“æœè¿™ç±»æ±‡æ€»ä¿¡æ¯ï¼Œéƒ½æ˜¯åœ¨<code>END</code>è¯­å¥å—ä¸­å®ç°çš„å¸¸è§ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œåœ¨æ¯”è¾ƒè¿‡æ‰€æœ‰çš„è¡Œä¹‹åï¼Œæ‰“å°å‡ºæœ€å¤§æ•°ï¼‰ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰çš„è¯­å¥å—ã€‚<br>æœ€éœ€è¦çš„éƒ¨åˆ†å°±æ˜¯<code>pattern</code>è¯­å¥å—ä¸­çš„é€šç”¨å‘½ä»¤ã€‚è¿™ä¸ªè¯­å¥å—åŒæ ·æ˜¯å¯é€‰çš„ã€‚å¦‚æœä¸æä¾›è¯¥è¯­å¥å—ï¼Œåˆ™é»˜è®¤æ‰§è¡Œ<code>{ print }</code>ï¼Œå³æ‰“å°æ¯ä¸€ä¸ªè¯»å–åˆ°çš„è¡Œã€‚<code>awk</code>å¯¹äºè¯»å–çš„æ¯ä¸€è¡Œï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªè¯­å¥å—ã€‚  </p>
<p>è¿™å°±åƒä¸€ä¸ªç”¨æ¥è¯»å–è¡Œçš„<code>while</code>å¾ªç¯ï¼Œåœ¨å¾ªç¯ä½“ä¸­æä¾›äº†ç›¸åº”çš„è¯­å¥ã€‚<br>æ¯è¯»å–ä¸€è¡Œæ—¶ï¼Œå®ƒå°±ä¼šæ£€æŸ¥è¯¥è¡Œå’Œæä¾›çš„æ ·å¼æ˜¯å¦åŒ¹é…ã€‚æ ·å¼æœ¬èº«å¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€æ¡ä»¶ä»¥åŠè¡ŒåŒ¹é…èŒƒå›´ç­‰ã€‚å¦‚æœå½“å‰è¡ŒåŒ¹é…è¯¥æ ·å¼ï¼Œåˆ™æ‰§è¡Œ<code>{}</code>ä¸­çš„è¯­å¥ã€‚<br>æ ·å¼æ˜¯å¯é€‰çš„ã€‚å¦‚æœæ²¡æœ‰æä¾›æ ·å¼ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šé»˜è®¤æ‰€æœ‰çš„è¡Œéƒ½æ˜¯åŒ¹é…çš„ï¼Œå¹¶æ‰§è¡Œ<code>{}</code>ä¸­çš„è¯­å¥ã€‚  </p>
<p>å…³äº<code>print</code>ï¼š<br>å½“<code>print</code>çš„å‚æ•°æ˜¯ä»¥é€—å·è¿›è¡Œåˆ†å‰²æ—¶ï¼Œå‚æ•°æ‰“å°æ—¶åˆ™ä»¥ç©ºæ ¼ä½œä¸ºå®šç•Œç¬¦ï¼›<br>åœ¨<code>awk</code>çš„<code>print</code>è¯­å¥ä¸­ï¼ŒåŒå¼•å·æ˜¯è¢«å½“ä½œæ‹¼æ¥æ“ä½œç¬¦ä½¿ç”¨çš„ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> | awk <span class="string">'{ var1="v1"; var2="v2"; var3="v3"; \</span></span><br><span class="line"><span class="string">print var1"-"var2"-"var3; }'</span>  </span><br><span class="line">v1-v2-v3  </span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>ç‰¹æ®Šå˜é‡<br>ä»¥ä¸‹æ˜¯å¯ç”¨äº<code>awk</code>çš„ä¸€äº›ç‰¹æ®Šå˜é‡ï¼š  </p>
<ul>
<li><code>NR</code> - è¡¨ç¤ºè®°å½•æ•°é‡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”äºå½“å‰è¡Œå·  </li>
<li><code>NF</code> - è¡¨ç¤ºå­—æ®µæ•°é‡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”äºå½“å‰è¡Œçš„å­—æ®µæ•°  </li>
<li><code>$0</code> - è¿™ä¸ªå˜é‡åŒ…å«æ‰§è¡Œè¿‡ç¨‹ä¸­å½“å‰è¡Œçš„æ–‡æœ¬å†…å®¹  </li>
<li><code>$1</code> - è¿™ä¸ªå˜é‡åŒ…å«ç¬¬ä¸€ä¸ªå­—æ®µçš„æ–‡æœ¬å†…å®¹  </li>
<li><code>$2</code> - è¿™ä¸ªå˜é‡åŒ…å«ç¬¬äºŒä¸ªå­—æ®µçš„æ–‡æœ¬å†…å®¹<br>ä¾‹å¦‚ï¼š  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">"line1 f2 f3\nline2 f4 f5\nline3 f6 f7"</span> | \</span><br><span class="line">awk <span class="string">'{print "Line no:"NR", No of fields:"NF", $0="$0", $1="$1", $2="$2", $3="$3""}'</span></span><br><span class="line">Line no:1, No of fields:3, <span class="variable">$0</span>=line1 f2 f3, <span class="variable">$1</span>=line1, <span class="variable">$2</span>=f2, <span class="variable">$3</span>=f3</span><br><span class="line">Line no:2, No of fields:3, <span class="variable">$0</span>=line2 f4 f5, <span class="variable">$1</span>=line2, <span class="variable">$2</span>=f4, <span class="variable">$3</span>=f5</span><br><span class="line">Line no:3, No of fields:3, <span class="variable">$0</span>=line3 f6 f7, <span class="variable">$1</span>=line3, <span class="variable">$2</span>=f6, <span class="variable">$3</span>=f7</span><br></pre></td></tr></tbody></table></figure>
å¯ä»¥ç”¨<code>print $NF</code>æ‰“å°ä¸€è¡Œä¸­æœ€åä¸€ä¸ªå­—æ®µï¼Œç”¨<code>$(NF-1)</code>æ‰“å°å€’æ•°ç¬¬äºŒä¸ªå­—æ®µï¼Œå…¶ä»–å­—æ®µä¾æ¬¡ç±»æ¨å³å¯ã€‚<br><code>awk</code>çš„<code>printf()</code>å‡½æ•°çš„è¯­æ³•å’ŒCè¯­è¨€ä¸­çš„åŒåå‡½æ•°ä¸€æ ·ã€‚å¯ä»¥ç”¨è¿™ä¸ªå‡½æ•°æ¥ä»£æ›¿<code>print</code>ã€‚  </li>
</ul>
</li>
<li><p>å°†å¤–éƒ¨å˜é‡å€¼ä¼ é€’ç»™<code>awk</code><br>å€ŸåŠ©é€‰é¡¹<code>-v</code>ï¼Œå¯ä»¥å°†å¤–éƒ¨å€¼ï¼ˆå¹¶éæ¥è‡ª<code>stdin</code>ï¼‰ä¼ é€’ç»™<code>awk</code>ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ VAR=10000</span><br><span class="line">$ <span class="built_in">echo</span> | awk -v VARIABLE=<span class="variable">$VAR</span> <span class="string">'{ print VARIABLE }'</span></span><br><span class="line">10000</span><br></pre></td></tr></tbody></table></figure>
<p>è¿˜æœ‰å¦ä¸€ç§çµæ´»çš„æ–¹æ³•å¯ä»¥å°†å¤šä¸ªå¤–éƒ¨å˜é‡ä¼ é€’ç»™<code>awk</code>ï¼Œä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ var1=<span class="string">"Variable1"</span>; var2=<span class="string">"Variable2"</span></span><br><span class="line">$ <span class="built_in">echo</span> | awk <span class="string">'{ print v1,v2 }'</span> v1=<span class="variable">$var1</span> v2=<span class="variable">$var2</span></span><br><span class="line">Variable1 Variable2</span><br></pre></td></tr></tbody></table></figure>
<p>å½“è¾“å…¥æ¥è‡ªäºæ–‡ä»¶è€Œéæ ‡å‡†è¾“å…¥æ—¶ï¼Œä½¿ç”¨ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk <span class="string">'{ print v1 v2 }'</span> v1=<span class="variable">$var1</span> v2=<span class="variable">$var2</span> filename</span><br></pre></td></tr></tbody></table></figure>
<p>åœ¨ä¸Šé¢çš„æ–¹æ³•ä¸­ï¼Œå˜é‡ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä»¥é”®-å€¼å¯¹çš„å½¢å¼ï¼ˆv1=$var1 v2=$var2ï¼‰ä½œä¸º<code>awk</code>çš„å‘½ä»¤è¡Œå‚æ•°ç´§éšåœ¨<code>BEGIN</code>ã€<code>{}</code>å’Œ<code>END</code>è¯­å¥å—ä¹‹åã€‚  </p>
</li>
<li><p>ç”¨<code>getline</code>è¯»å–è¡Œ  </p>
</li>
<li><p>ç”¨æ ·å¼å¯¹<code>awk</code>å¤„ç†çš„è¡Œè¿›è¡Œè¿‡æ»¤<br>å¯ä»¥ä¸ºéœ€è¦å¤„ç†çš„è¡ŒæŒ‡å®šä¸€äº›æ¡ä»¶ï¼Œä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk <span class="string">'NR &lt; 5'</span>      <span class="comment"># è¡Œå·å°äº5çš„è¡Œ</span></span><br><span class="line">$ awk <span class="string">'NR==1,NR==4'</span> <span class="comment"># è¡Œå·åœ¨1åˆ°4ä¹‹é—´çš„è¡Œ</span></span><br><span class="line">$ awk <span class="string">'/linux/'</span>     <span class="comment"># åŒ…å«æ ·å¼linuxçš„è¡Œï¼ˆå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æŒ‡å®šæ ·å¼ï¼‰</span></span><br><span class="line">$ awk <span class="string">'!/linux/'</span>    <span class="comment"># ä¸åŒ…å«æ ·å¼linuxçš„è¡Œ</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¦æ‰“å°å¤„äºstart_patternä¸end_patternä¹‹é—´çš„æ–‡æœ¬ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk <span class="string">'/start_pattern/, /end_pattern/'</span> filename</span><br></pre></td></tr></tbody></table></figure>
<p>ä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat section.txt</span><br><span class="line">line with pattern1</span><br><span class="line">line with pattern2</span><br><span class="line">line with pattern3</span><br><span class="line">line end with pattern4</span><br><span class="line">line with pattern5</span><br><span class="line">$</span><br><span class="line">$ awk <span class="string">'/pa.*3/, /end/'</span> section.txt</span><br><span class="line">line with pattern3</span><br><span class="line">line end with pattern4</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è®¾å®šå­—æ®µå®šç•Œç¬¦<br>é»˜è®¤çš„å­—æ®µå®šç•Œç¬¦æ˜¯ç©ºæ ¼ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ <code>-F "delimiter"</code> æ˜ç¡®æŒ‡å®šä¸€ä¸ªå®šç•Œç¬¦ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk -F: <span class="string">'{ print $1,$2,$3,$NF }'</span> /etc/passwd</span><br></pre></td></tr></tbody></table></figure>
<p>æˆ–è€…  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN { FS=":" } { print $1,$2,$3,$NF }'</span> /etc/passwd</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä»<code>awk</code>ä¸­è¯»å–å‘½ä»¤è¾“å‡º<br>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ<code>echo</code>ä¼šç”Ÿæˆä¸€ä¸ªç©ºç™½è¡Œã€‚å˜é‡cmdoutåŒ…å«å‘½ä»¤grep root /etc/passwdçš„è¾“å‡ºï¼Œç„¶åæ‰“å°åŒ…å«rootçš„è¡Œï¼›<br>å°†commandçš„è¾“å‡ºè¯»å…¥å˜é‡outputçš„è¯­æ³•å¦‚ä¸‹ï¼š<br>â€œcommandâ€ | getline output ;<br>ä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> | awk <span class="string">'{ "grep root /etc/passwd" | getline cmdout ; print cmdout }'</span>  </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></tbody></table></figure>
<p>é€šè¿‡ä½¿ç”¨<code>getline</code>ï¼Œèƒ½å¤Ÿå°†å¤–éƒ¨shellå‘½ä»¤çš„è¾“å‡ºè¯»å…¥å˜é‡cmdoutã€‚</p>
</li>
</ul>
<p>é‡åˆ°çš„é—®é¢˜ï¼š</p>
<ol>
<li><a href="https://blog.csdn.net/rj042/article/details/72860177"><code>awk</code>ä¸­ä¸èƒ½ä½¿ç”¨<code>shell</code>å®šä¹‰çš„å˜é‡ï¼Œä½¿ç”¨<code>-v</code>é€‰é¡¹</a></li>
<li><a href="https://stackoverflow.com/questions/34236675/kill-command-doesnt-work-in-awk"><code>kill</code>åœ¨<code>awk</code>ä¸­æ— æ‰€æœ‰</a></li>
</ol>
<h2 id="è¡Œæ“ä½œ"><a href="#è¡Œæ“ä½œ" class="headerlink" title="è¡Œæ“ä½œ"></a>è¡Œæ“ä½œ</h2><p><code>!n</code> - æ‰§è¡Œå†å²æ–‡ä»¶é‡Œé¢è¡Œå·ä¸ºnçš„å‘½ä»¤<br><code>!string</code> - æ‰§è¡Œæœ€è¿‘ä¸€ä¸ªä»¥æŒ‡å®šå­—ç¬¦ä¸²stringå¼€å¤´çš„å‘½ä»¤<br><code>!?string</code> - æ‰§è¡Œæœ€è¿‘ä¸€æ¡åŒ…å«å­—ç¬¦ä¸²stringçš„å‘½ä»¤<br><code>Alt + .</code> - æ’å…¥ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªè¯<br><code>Ctrl + k</code> - å‰ªåˆ‡å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„æ–‡æœ¬<br><code>Ctrl + u</code> - å‰ªåˆ‡å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„æ–‡æœ¬<br><code>Ctrl + y</code> - åœ¨å…‰æ ‡ä½ç½®ç²˜è´´æ–‡æœ¬<br><code>Ctrl + r</code> - åå‘å¢é‡æœç´¢ã€‚ä»å½“å‰å‘½ä»¤è¡Œå¼€å§‹ï¼Œå‘ä¸Šå¢é‡æœç´¢ã€‚æ„æ€æ˜¯åœ¨å­—ç¬¦è¾“å…¥çš„åŒæ—¶ï¼Œbashä¼šå»æœç´¢å†å²åˆ—è¡¨ï¼ˆç›´æ¥å‡ºç»“æœï¼Œå¹¶é«˜äº®åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ï¼‰ï¼Œæ¯å¤šè¾“å…¥ä¸€ä¸ªå­—ç¬¦éƒ½ä¼šä½¿æœç´¢ç»“æœæ›´æ¥è¿‘ç›®æ ‡ã€‚è¾“å…¥<code>Ctrl-r</code>æ¥å¯åŠ¨å¢é‡æœç´¢ï¼Œæ¥ç€è¾“å…¥ä½ è¦å¯»æ‰¾çš„å­—ã€‚å½“ä½ æ‰¾åˆ°å®ƒä»¥åï¼Œä½ å¯ä»¥æ•²å…¥<code>Enter</code>æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–è€…è¾“å…¥<code>Ctrl-j</code>ï¼Œä»å†å²åˆ—è¡¨ä¸­å¤åˆ¶è¿™ä¸€è¡Œåˆ°å½“å‰å‘½ä»¤è¡Œã€‚å†æ¬¡è¾“å…¥<code>Ctrl-r</code>ï¼Œæ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ï¼ˆå†å²åˆ—è¡¨ä¸­å‘ä¸Šç§»åŠ¨ï¼‰ã€‚è¾“å…¥<code>Ctrl-g</code>æˆ–è€…<code>Ctrl-c</code>ï¼Œé€€å‡ºæœç´¢ã€‚  </p>
<h2 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h2><ul>
<li><p>ç§»åŠ¨å…‰æ ‡  </p>
<p>  <code>0</code> - (é›¶æŒ‰é”®) ç§»åŠ¨åˆ°å½“å‰è¡Œçš„è¡Œé¦–<br>  <code>^</code> - ç§»åŠ¨åˆ°å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦<br>  <code>$</code> - ç§»åŠ¨åˆ°å½“å‰è¡Œçš„æœ«å°¾  </p>
</li>
<li><p>åŸºæœ¬ç¼–è¾‘  </p>
<p>  <code>u</code> - æ’¤é”€<br>  <code>Ctrl + r</code> - åæ’¤é”€  </p>
</li>
<li><p>æ‰“å¼€ä¸€è¡Œ  </p>
<p>  <code>o</code> - å½“å‰è¡Œçš„ä¸‹æ–¹æ‰“å¼€ä¸€è¡Œ<br>  <code>O</code> - å½“å‰è¡Œçš„ä¸Šæ–¹æ‰“å¼€ä¸€è¡Œ  </p>
</li>
<li><p>åˆ é™¤æ–‡æœ¬  </p>
<p>  <code>d$</code> - ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œå°¾<br>  <code>d0</code> - ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œé¦–<br>  <code>d^</code> - ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°æ–‡æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦<br>  <code>dG</code> - ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„æœ«å°¾  </p>
</li>
<li><p>å¤åˆ¶æ–‡æœ¬  </p>
<p>  <code>y$</code> - ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°å½“å‰è¡Œçš„æœ«å°¾<br>  <code>y0</code> - ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–<br>  <code>y^</code> - ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°æ–‡æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦<br>  <code>yG</code> - ä»å½“å‰è¡Œåˆ°æ–‡ä»¶æœ«å°¾  </p>
</li>
<li><p>è¿æ¥è¡Œ  </p>
<p>  <code>J</code>  </p>
</li>
</ul>
<ul>
<li><p>ç¼–è¾‘å¤šä¸ªæ–‡ä»¶  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ vim file1 file2 file3 ...</span><br></pre></td></tr></tbody></table></figure>
<p>  æ–‡ä»¶ä¹‹é—´çš„åˆ‡æ¢ï¼š  </p>
<pre><code>  ä»è¿™ä¸ªæ–‡ä»¶åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶`:n`ï¼›  
  å›åˆ°å…ˆå‰çš„æ–‡ä»¶`:N`ã€‚  
  
</code></pre>
<p>  æŸ¥çœ‹æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨<code>:buffers</code>å‘½ä»¤ã€‚  </p>
<p>  è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç¼“å†²åŒºï¼ˆæ–‡ä»¶ï¼‰ï¼Œè¾“å…¥<code>:buffer</code>, ç´§è·Ÿç€ä½ æƒ³è¦ç¼–è¾‘çš„ç¼“å†²å™¨ç¼–å·ã€‚  </p>
<p>  è·¨æ–‡ä»¶å¤åˆ¶ç²˜è´´ï¼šæ­£å¸¸å¤åˆ¶ç²˜è´´ã€‚  </p>
</li>
</ul>
<h2 id="è°ƒè¯•è„šæœ¬"><a href="#è°ƒè¯•è„šæœ¬" class="headerlink" title="è°ƒè¯•è„šæœ¬"></a>è°ƒè¯•è„šæœ¬</h2><ul>
<li><p>å†…å»ºåŠŸèƒ½  </p>
<p>  <code>set -x</code> - åœ¨æ‰§è¡Œæ—¶æ˜¾ç¤ºå‚æ•°å’Œå‘½ä»¤<br>  <code>set +x</code> - ç¦æ­¢è°ƒè¯•<br>  <code>set -v</code> - å½“å‘½ä»¤è¿›è¡Œè¯»å–æ—¶æ˜¾ç¤ºè¾“å…¥<br>  <code>set +v</code> - ç¦æ­¢æ‰“å°è¾“å…¥  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#æ–‡ä»¶åï¼šdebug.sh</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> {1..6}</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">set</span> x</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="built_in">set</span> +x</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Script executed"</span></span><br></pre></td></tr></tbody></table></figure>
<p>  åœ¨ä¸Šé¢çš„è„šæœ¬ä¸­ï¼Œä»…åœ¨<code>-x</code>å’Œ<code>+x</code>æ‰€é™åˆ¶çš„åŒºåŸŸï¼Œecho $içš„è°ƒè¯•ä¿¡æ¯æ‰ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚  </p>
<p>  æœ‰ä¸€äº›ç¯å¢ƒå˜é‡å¸¸ç”¨äºè°ƒè¯•ï¼š<br>  <code>LINENO</code> - è¿”å›å®ƒåœ¨è„šæœ¬é‡Œé¢çš„è¡Œå·<br>  <code>FUNCNAME</code> - è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå†…å®¹æ˜¯å½“å‰çš„å‡½æ•°è°ƒç”¨å †æ ˆã€‚è¯¥æ•°ç»„çš„0å·æˆå‘˜æ˜¯å½“å‰è°ƒç”¨çš„å‡½æ•°ï¼Œ1å·æˆå‘˜æ˜¯è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ï¼Œä»¥æ­¤ç±»æ¨<br>  <code>BASH_SOURCE</code> - è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå†…å®¹æ˜¯å½“å‰çš„è„šæœ¬è°ƒç”¨å †æ ˆã€‚è¯¥æ•°ç»„çš„0å·æˆå‘˜æ˜¯å½“å‰æ‰§è¡Œçš„è„šæœ¬ï¼Œ1å·æˆå‘˜æ˜¯è°ƒç”¨å½“å‰è„šæœ¬çš„è„šæœ¬ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè·Ÿå˜é‡<code>FUNCNAME</code>æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»<br>  <code>BASH_LINENO</code> - è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå†…å®¹æ˜¯æ¯ä¸€è½®è°ƒç”¨å¯¹åº”çš„è¡Œå·  </p>
<p>  <code>${BASH_LINENO[$i]}</code>è·Ÿ<code>${FUNCNAME[$i]}</code>æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œè¡¨ç¤º<code>${FUNCNAME[$i]}</code>åœ¨è°ƒç”¨å®ƒçš„è„šæœ¬æ–‡ä»¶<code>${BASH_SOURCE[$i+1]}</code>é‡Œé¢çš„è¡Œå·</p>
</li>
<li><p>è‡ªå®šä¹‰æ ¼å¼  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">DEBUG</span></span>()</span><br><span class="line">{</span><br><span class="line">[ <span class="string">"<span class="variable">$_DEBUG</span>"</span> == <span class="string">"on"</span> ] &amp;&amp; <span class="variable">$@</span> || :</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> {1..10}</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">DEBUG <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>  å¯ä»¥å°†è°ƒè¯•åŠŸèƒ½ç½®ä¸ºâ€onâ€æ¥è¿è¡Œä¸Šé¢çš„è„šæœ¬ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ _DEBUG=on ./script.sh  </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>shebang  </p>
<p>  æŠŠ<code>shebang</code>ä»<code>#!/bin/bash</code>æ”¹æˆ<code>#!/bin/bash -xv</code>ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸ç”¨ä»»ä½•å…¶ä»–é€‰é¡¹å°±å¯ä»¥å¯ç”¨è°ƒè¯•åŠŸèƒ½äº†ã€‚ </p>
</li>
</ul>
<ul>
<li><p>æ³¨é‡Š  </p>
<p>  å•è¡Œæ³¨é‡Šï¼š<code>#</code><br>  å¤šè¡Œæ³¨é‡Šï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;&lt;<span class="string">'!'</span></span><br><span class="line">commands</span><br><span class="line">...</span><br><span class="line">!</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><h3 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ps -ef</span><br><span class="line">ps -aux</span><br></pre></td></tr></tbody></table></figure>

<p>ç”¨ <code>top</code> å‘½ä»¤åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ã€‚  </p>
<p>ä¸­æ–­ä¸€ä¸ªè¿›ç¨‹<code>Ctrl+c</code>ã€‚  </p>
<p>æŠŠä¸€ä¸ªè¿›ç¨‹æ”¾ç½®åˆ°åå° (æ‰§è¡Œ)ï¼šåœ¨ç¨‹åºå‘½ä»¤ä¹‹åï¼ŒåŠ ä¸Š<code>&amp;</code>å­—ç¬¦ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">xlogo &amp;</span><br></pre></td></tr></tbody></table></figure>

<p>shell çš„ä»»åŠ¡æ§åˆ¶åŠŸèƒ½ç»™å‡ºäº†ä¸€ç§åˆ—å‡ºä»æˆ‘ä»¬ç»ˆç«¯ä¸­å¯åŠ¨äº†çš„ä»»åŠ¡çš„æ–¹æ³•ã€‚æ‰§è¡Œ <code>jobs</code> å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºåˆ—è¡¨ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">jobs</span></span><br><span class="line">[1]+ Running xlogo &amp;</span><br></pre></td></tr></tbody></table></figure>

<p>è¿›ç¨‹è¿”å›åˆ°å‰å°ï¼š<br>ä¸€ä¸ªåœ¨åå°è¿è¡Œçš„è¿›ç¨‹å¯¹ä¸€åˆ‡æ¥è‡ªé”®ç›˜çš„è¾“å…¥éƒ½å…ç–«ï¼Œä¹Ÿä¸èƒ½ç”¨ <code>Ctrl-c</code> æ¥ä¸­æ–­å®ƒã€‚ä¸ºäº†è®©ä¸€ä¸ªè¿›ç¨‹è¿”å›å‰å° (foreground)ï¼Œè¿™æ ·ä½¿ç”¨ <code>fg</code> å‘½ä»¤ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">jobs</span></span><br><span class="line">[1]+ Running xlogo &amp;</span><br><span class="line">$ <span class="built_in">fg</span> %1</span><br><span class="line">xlogo</span><br></pre></td></tr></tbody></table></figure>
<p>ä½¿ç”¨ <code>fg</code> å‘½ä»¤ï¼Œå¯ä»¥æ¢å¤ç¨‹åºåˆ°å‰å°è¿è¡Œï¼Œæˆ–è€…ç”¨ <code>bg</code> å‘½ä»¤æŠŠç¨‹åºç§»åˆ°åå°ã€‚  </p>
<p>åœæ­¢ä¸€ä¸ªè¿›ç¨‹<code>Ctrl+z</code>ï¼šè¾“å…¥ <code>Ctrl-z</code>ï¼Œå¯ä»¥åœæ­¢ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚  </p>
<p>é€šè¿‡ <code>kill</code> å‘½ä»¤ç»™è¿›ç¨‹å‘é€ä¿¡å·ã€‚<br>é€šè¿‡ <code>killall</code> å‘½ä»¤ç»™å¤šä¸ªè¿›ç¨‹å‘é€ä¿¡å·ã€‚  </p>
<h3 id="ç›®å½•å †æ ˆ"><a href="#ç›®å½•å †æ ˆ" class="headerlink" title="ç›®å½•å †æ ˆ"></a>ç›®å½•å †æ ˆ</h3><ul>
<li><p><code>cd -</code>  </p>
</li>
<li><p><code>pushd</code>, <code>popd</code>  </p>
<p>  å¸Œæœ›è®°å¿†å¤šé‡ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨<code>pushd</code>å‘½ä»¤å’Œ<code>popd</code>å‘½ä»¤ã€‚å®ƒä»¬ç”¨æ¥æ“ä½œç›®å½•å †æ ˆã€‚<br>  <code>pushd</code>å‘½ä»¤çš„ç”¨æ³•ç±»ä¼¼<code>cd</code>å‘½ä»¤ï¼Œå¯ä»¥è¿›å…¥æŒ‡å®šçš„ç›®å½•ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">pushd</span> dirname</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢å‘½ä»¤ä¼šè¿›å…¥ç›®å½•dirnameï¼Œå¹¶å°†è¯¥ç›®å½•æ”¾å…¥å †æ ˆã€‚<br>  <code>popd</code>å‘½ä»¤ä¸å¸¦æœ‰å‚æ•°æ—¶ï¼Œä¼šç§»é™¤å †æ ˆçš„é¡¶éƒ¨è®°å½•ï¼Œå¹¶è¿›å…¥æ–°çš„å †æ ˆé¡¶éƒ¨ç›®å½•ï¼ˆå³åŸæ¥çš„ç¬¬äºŒæ¡ç›®å½•ï¼‰ã€‚  </p>
<ul>
<li><p><code>-n</code><br>  è¡¨ç¤ºä»…æ“ä½œå †æ ˆï¼Œä¸æ”¹å˜ç›®å½•ã€‚  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">popd</span> -n</span><br></pre></td></tr></tbody></table></figure>
<p>  ä¸Šé¢çš„å‘½ä»¤ä»…åˆ é™¤å †æ ˆé¡¶éƒ¨çš„è®°å½•ï¼Œä¸æ”¹å˜ç›®å½•ï¼Œæ‰§è¡Œå®Œæˆåè¿˜åœç•™åœ¨å½“å‰ç›®å½•ã€‚  </p>
</li>
<li><p>æ•´æ•°å‚æ•°  </p>
</li>
<li><p>ç›®å½•å‚æ•°  </p>
</li>
</ul>
</li>
<li><p><code>dirs</code>  </p>
<p>  <code>dirs</code>å‘½ä»¤å¯ä»¥æ˜¾ç¤ºç›®å½•å †æ ˆçš„å†…å®¹ï¼Œä¸€èˆ¬ç”¨æ¥æŸ¥çœ‹<code>pushd</code>å’Œ<code>popd</code>æ“ä½œåçš„ç»“æœã€‚  </p>
<p>  å‚æ•°ï¼š  </p>
<pre><code>  `-c`ï¼šæ¸…ç©ºç›®å½•æ ˆã€‚  
  `-l`ï¼šç”¨æˆ·ä¸»ç›®å½•ä¸æ˜¾ç¤ºæ³¢æµªå·å‰ç¼€ï¼Œè€Œæ‰“å°å®Œæ•´çš„ç›®å½•ã€‚  
  `-p`ï¼šæ¯è¡Œä¸€ä¸ªæ¡ç›®æ‰“å°ç›®å½•æ ˆï¼Œé»˜è®¤æ˜¯æ‰“å°åœ¨ä¸€è¡Œã€‚  
  `-v`ï¼šæ¯è¡Œä¸€ä¸ªæ¡ç›®ï¼Œæ¯ä¸ªæ¡ç›®ä¹‹å‰æ˜¾ç¤ºä½ç½®ç¼–å·ï¼ˆä»0å¼€å§‹ï¼‰ã€‚  
</code></pre>
</li>
</ul>
<h3 id="æ ¡éªŒå’Œæ ¸å®"><a href="#æ ¡éªŒå’Œæ ¸å®" class="headerlink" title="æ ¡éªŒå’Œæ ¸å®"></a>æ ¡éªŒå’Œæ ¸å®</h3><ul>
<li><p><code>md5sum</code>  </p>
<p>  å°†è¾“å‡ºçš„æ ¡éªŒå’Œé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨è¿™ä¸ªMD5æ–‡ä»¶æ ¸å®æ•°æ®çš„å®Œæ•´æ€§ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ md5sum filename &gt; file_num.md5</span><br></pre></td></tr></tbody></table></figure>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ md5sum -c file_sum.md5</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><code>sha1sum</code>  </p>
<p>  ç”¨æ³•ä¸md5sumç±»ä¼¼ï¼š  </p>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sha1sum filename &gt; file_num.sha1</span><br></pre></td></tr></tbody></table></figure>
  <figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sha1sum -c file_sum.sha1</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="readå‘½ä»¤"><a href="#readå‘½ä»¤" class="headerlink" title="readå‘½ä»¤"></a>readå‘½ä»¤</h3><p><code>-t</code>å‚æ•° - è®¾ç½®è¶…æ—¶ç§’æ•°<br><code>-p</code>å‚æ•° - æŒ‡å®šç”¨æˆ·è¾“å…¥çš„æç¤ºä¿¡æ¯<br><code>-a</code>å‚æ•° - æŠŠç”¨æˆ·çš„è¾“å…¥èµ‹å€¼ç»™ä¸€ä¸ªæ•°ç»„ï¼Œä»é›¶å·ä½ç½®å¼€å§‹<br><code>-n</code>å‚æ•° - æŒ‡å®šåªè¯»å–è‹¥å¹²ä¸ªå­—ç¬¦ä½œä¸ºå˜é‡å€¼ï¼Œè€Œä¸æ˜¯æ•´è¡Œè¯»å–<br><code>-e</code>å‚æ•° - å…è®¸ç”¨æˆ·è¾“å…¥çš„æ—¶å€™ï¼Œä½¿ç”¨ReadLineåº“æä¾›çš„å¿«æ·é”®ï¼Œæ¯”å¦‚è‡ªåŠ¨è¡¥å…¨<br>å…¶ä»–å‚æ•° - å…¶ä»–å‚æ•°åŠŸèƒ½  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">read</span> -p <span class="string">"Enter one or more values &gt; "</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"REPLY = '<span class="variable">$REPLY</span>'"</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">read</span> -p <span class="string">"What do you want? </span></span><br><span class="line"><span class="string">    1) AAA</span></span><br><span class="line"><span class="string">    2) BBB</span></span><br><span class="line"><span class="string">    3) CCC</span></span><br><span class="line"><span class="string">    Type your choice: "</span> MyChoice</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$MyChoice</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç”Ÿæˆä»»æ„å¤§å°çš„æ–‡ä»¶"><a href="#ç”Ÿæˆä»»æ„å¤§å°çš„æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆä»»æ„å¤§å°çš„æ–‡ä»¶"></a>ç”Ÿæˆä»»æ„å¤§å°çš„æ–‡ä»¶</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ dd <span class="keyword">if</span>=/dev/zero of=junk.data bs=1M count=1</span><br></pre></td></tr></tbody></table></figure>
<p>è¯¥å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ª1MBå¤§å°çš„æ–‡ä»¶junk.dataã€‚<br><code>if</code>ä»£è¡¨è¾“å…¥æ–‡ä»¶(Input File)ï¼Œ<code>of</code>ä»£è¡¨è¾“å‡ºæ–‡ä»¶(Output File)ï¼Œ<code>bs</code>ä»£è¡¨ä»¥å­—èŠ‚ä¸ºå•ä½çš„å—å¤§å°(Block Size)ï¼Œ<code>count</code>ä»£è¡¨éœ€è¦è¢«å¤åˆ¶çš„å—æ•°ã€‚  </p>
<h3 id="å‹ç¼©å½’æ¡£æ–‡ä»¶"><a href="#å‹ç¼©å½’æ¡£æ–‡ä»¶" class="headerlink" title="å‹ç¼©å½’æ¡£æ–‡ä»¶"></a>å‹ç¼©å½’æ¡£æ–‡ä»¶</h3><p>é€‰é¡¹<code>-a</code>æŒ‡å®šä»æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨åˆ¤æ–­å‹ç¼©æ ¼å¼ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tar -cavf archive.tar.gz [FILES]</span><br><span class="line">$ tar -cavf archive.tar.bz2 [FILES]</span><br><span class="line">$ tar -cavf archive.tar.lzma [FILES]</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tar -xvf archive.tar.gz</span><br><span class="line">$ tar -xvf archive.tar.bz2</span><br><span class="line">$ tar -xvf archive.tar.lzma</span><br></pre></td></tr></tbody></table></figure>

<h3 id="mktempå‘½ä»¤"><a href="#mktempå‘½ä»¤" class="headerlink" title="mktempå‘½ä»¤"></a>mktempå‘½ä»¤</h3><p><code>mktemp</code>å‘½ä»¤å°±æ˜¯ä¸ºå®‰å…¨åˆ›å»ºä¸´æ—¶æ–‡ä»¶è€Œå­˜åœ¨çš„ã€‚è™½ç„¶åœ¨åˆ›å»ºä¸´æ—¶æ–‡ä»¶ä¹‹å‰ï¼Œå®ƒä¸ä¼šæ£€æŸ¥ä¸´æ—¶æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯å®ƒæ”¯æŒå”¯ä¸€æ–‡ä»¶åå’Œæ¸…é™¤æœºåˆ¶ï¼Œå› æ­¤å¯ä»¥å‡è½»å®‰å…¨æ”»å‡»çš„é£é™©ã€‚  </p>
<p>Bashè„šæœ¬ä½¿ç”¨<code>mktemp</code>å‘½ä»¤çš„ç”¨æ³•å¦‚ä¸‹ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">TMPFILE=$(mktemp)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Our temp file is <span class="variable">$TMPFILE</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºäº†ç¡®ä¿ä¸´æ—¶æ–‡ä»¶åˆ›å»ºæˆåŠŸï¼Œ<code>mktemp</code>å‘½ä»¤åé¢æœ€å¥½ä½¿ç”¨ORè¿ç®—ç¬¦<code>||</code>ï¼Œä¿è¯åˆ›å»ºå¤±è´¥æ—¶é€€å‡ºè„šæœ¬ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">TMPFILE=$(mktemp) || <span class="built_in">exit</span> 1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Our temp file is <span class="variable">$TMPFILE</span>"</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä¸ºäº†ä¿è¯è„šæœ¬é€€å‡ºæ—¶ä¸´æ—¶æ–‡ä»¶è¢«åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨<code>trap</code>å‘½ä»¤æŒ‡å®šé€€å‡ºæ—¶çš„æ¸…é™¤æ“ä½œã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">trap</span> <span class="string">'rm -f "$TMPFILE"'</span> EXIT</span><br><span class="line"></span><br><span class="line">TMPFILE=$(mktemp) || <span class="built_in">exit</span> 1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Our temp file is <span class="variable">$TMPFILE</span>"</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>mktemp</code>å‘½ä»¤çš„å‚æ•°ï¼š<br><code>-d</code>å‚æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚<br><code>-p</code>å‚æ•°å¯ä»¥æŒ‡å®šä¸´æ—¶æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚é»˜è®¤æ˜¯ä½¿ç”¨$TMPDIRç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•ï¼Œå¦‚æœè¿™ä¸ªå˜é‡æ²¡è®¾ç½®ï¼Œé‚£ä¹ˆä½¿ç”¨/tmpç›®å½•ã€‚<br><code>-t</code>å‚æ•°å¯ä»¥æŒ‡å®šä¸´æ—¶æ–‡ä»¶çš„æ–‡ä»¶åæ¨¡æ¿ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mktemp -t mytemp.XXXXXXX -p <span class="built_in">test</span>/</span><br></pre></td></tr></tbody></table></figure>


<h3 id="trapå‘½ä»¤"><a href="#trapå‘½ä»¤" class="headerlink" title="trapå‘½ä»¤"></a>trapå‘½ä»¤</h3><p><code>trap</code>å‘½ä»¤ç”¨æ¥åœ¨Bashè„šæœ¬ä¸­å“åº”ç³»ç»Ÿä¿¡å·ã€‚<br><code>trap</code>çš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">trap</span> [åŠ¨ä½œ] [ä¿¡å·1] [ä¿¡å·2] ...</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œâ€åŠ¨ä½œâ€æ˜¯ä¸€ä¸ªBashå‘½ä»¤ï¼Œâ€ä¿¡å·â€å¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ä¸ªã€‚<br>HUPï¼šç¼–å·1ï¼Œè„šæœ¬ä¸æ‰€åœ¨çš„ç»ˆç«¯è„±ç¦»è”ç³»ã€‚<br>INTï¼šç¼–å·2ï¼Œç”¨æˆ·æŒ‰ä¸‹ Ctrl + Cï¼Œæ„å›¾è®©è„šæœ¬ç»ˆæ­¢è¿è¡Œã€‚<br>QUITï¼šç¼–å·3ï¼Œç”¨æˆ·æŒ‰ä¸‹ Ctrl + æ–œæ ï¼Œæ„å›¾é€€å‡ºè„šæœ¬ã€‚<br>KILLï¼šç¼–å·9ï¼Œè¯¥ä¿¡å·ç”¨äºæ€æ­»è¿›ç¨‹ã€‚<br>TERMï¼šç¼–å·15ï¼Œè¿™æ˜¯killå‘½ä»¤å‘å‡ºçš„é»˜è®¤ä¿¡å·ã€‚<br>EXITï¼šç¼–å·0ï¼Œè¿™ä¸æ˜¯ç³»ç»Ÿä¿¡å·ï¼Œè€Œæ˜¯ Bash è„šæœ¬ç‰¹æœ‰çš„ä¿¡å·ï¼Œä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œåªè¦é€€å‡ºè„šæœ¬å°±ä¼šäº§ç”Ÿã€‚  </p>
<p><code>trap</code>å‘½ä»¤å“åº”EXITä¿¡å·çš„å†™æ³•å¦‚ä¸‹ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">trap</span> <span class="string">'rm -f "$TMPFILE"'</span> EXIT</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œè„šæœ¬é‡åˆ°EXITä¿¡å·æ—¶ï¼Œå°±ä¼šæ‰§è¡Œrm -f â€œ$TMPFILEâ€ã€‚  </p>
<p>trapå‘½ä»¤çš„å¸¸è§ä½¿ç”¨åœºæ™¯ï¼Œå°±æ˜¯åœ¨Bashè„šæœ¬ä¸­æŒ‡å®šé€€å‡ºæ—¶æ‰§è¡Œçš„æ¸…ç†å‘½ä»¤ã€‚<br>æ³¨æ„ï¼Œtrapå‘½ä»¤å¿…é¡»æ”¾åœ¨è„šæœ¬çš„å¼€å¤´ã€‚å¦åˆ™ï¼Œå®ƒä¸Šæ–¹çš„ä»»ä½•å‘½ä»¤å¯¼è‡´è„šæœ¬é€€å‡ºï¼Œéƒ½ä¸ä¼šè¢«å®ƒæ•è·ã€‚  </p>
<p>å¦‚æœtrapéœ€è¦è§¦å‘å¤šæ¡å‘½ä»¤ï¼Œå¯ä»¥å°è£…ä¸€ä¸ªBashå‡½æ•°ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> egress {</span><br><span class="line">	command1</span><br><span class="line">	command2</span><br><span class="line">	command3</span><br><span class="line">}</span><br><span class="line"><span class="built_in">trap</span> egress EXIT</span><br></pre></td></tr></tbody></table></figure>


<h3 id="setå‘½ä»¤-shoptå‘½ä»¤"><a href="#setå‘½ä»¤-shoptå‘½ä»¤" class="headerlink" title="setå‘½ä»¤,shoptå‘½ä»¤"></a>setå‘½ä»¤,shoptå‘½ä»¤</h3><p><strong>set -u</strong> - é‡åˆ°ä¸å­˜åœ¨çš„å˜é‡å°±ä¼šæŠ¥é”™ï¼Œå¹¶åœæ­¢æ‰§è¡Œ<br><strong>set -x</strong> - åœ¨è¿è¡Œç»“æœä¹‹å‰ï¼Œå…ˆè¾“å‡ºæ‰§è¡Œçš„é‚£ä¸€è¡Œå‘½ä»¤<br>è„šæœ¬å½“ä¸­å¦‚æœè¦å…³é—­å‘½ä»¤è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨<code>set +x</code>ã€‚  </p>
<p>Bashçš„é”™è¯¯å¤„ç†<br>å¦‚æœè„šæœ¬é‡Œé¢æœ‰è¿è¡Œå¤±è´¥çš„å‘½ä»¤ï¼ˆè¿”å›å€¼é0ï¼‰ï¼ŒBash é»˜è®¤ä¼šç»§ç»­æ‰§è¡Œåé¢çš„å‘½ä»¤ã€‚è¿™ç§è¡Œä¸ºå¾ˆä¸åˆ©äºè„šæœ¬å®‰å…¨å’Œé™¤é”™ã€‚<br>å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœæŸä¸ªå‘½ä»¤å¤±è´¥ï¼Œå¾€å¾€éœ€è¦è„šæœ¬åœæ­¢æ‰§è¡Œï¼Œé˜²æ­¢é”™è¯¯ç´¯ç§¯ã€‚è¿™æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> || <span class="built_in">exit</span> 1</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœåœæ­¢æ‰§è¡Œä¹‹å‰éœ€è¦å®Œæˆå¤šä¸ªæ“ä½œï¼Œå°±è¦é‡‡ç”¨ä¸‹é¢ä¸‰ç§å†™æ³•ã€‚<br>å†™æ³•ä¸€ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> || { <span class="built_in">echo</span> <span class="string">"command failed"</span>; <span class="built_in">exit</span> 1; }</span><br></pre></td></tr></tbody></table></figure>
<p>å†™æ³•äºŒï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ! <span class="built_in">command</span>; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">"command failed"</span>; <span class="built_in">exit</span> 1; <span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<p>å†™æ³•ä¸‰ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">command</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$?"</span> -ne 0 ]; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">"command failed"</span>; <span class="built_in">exit</span> 1; <span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¦å¤–ï¼Œé™¤äº†åœæ­¢æ‰§è¡Œï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µã€‚å¦‚æœä¸¤ä¸ªå‘½ä»¤æœ‰ç»§æ‰¿å…³ç³»ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå‘½ä»¤æˆåŠŸäº†ï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œç¬¬äºŒä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆå°±è¦é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">command1 &amp;&amp; command2</span><br></pre></td></tr></tbody></table></figure>

<p><strong>set -e</strong><br>ä¸Šé¢è¿™äº›å†™æ³•å¤šå°‘æœ‰äº›éº»çƒ¦ï¼Œå®¹æ˜“ç–å¿½ã€‚<code>set -e</code>ä»æ ¹æœ¬ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒä½¿å¾—è„šæœ¬åªè¦å‘ç”Ÿé”™è¯¯ï¼Œå°±ç»ˆæ­¢æ‰§è¡Œã€‚<br><code>set -e</code>æ ¹æ®è¿”å›å€¼æ¥åˆ¤æ–­ï¼Œä¸€ä¸ªå‘½ä»¤æ˜¯å¦è¿è¡Œå¤±è´¥ã€‚ä½†æ˜¯ï¼ŒæŸäº›å‘½ä»¤çš„éé›¶è¿”å›å€¼å¯èƒ½ä¸è¡¨ç¤ºå¤±è´¥ï¼Œæˆ–è€…å¼€å‘è€…å¸Œæœ›åœ¨å‘½ä»¤å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œè„šæœ¬ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚è¿™æ—¶å¯ä»¥æš‚æ—¶å…³é—­<code>set -e</code>ï¼Œè¯¥å‘½ä»¤æ‰§è¡Œç»“æŸåï¼Œå†é‡æ–°æ‰“å¼€<code>set -e</code>ã€‚  </p>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨command || trueï¼Œä½¿å¾—è¯¥å‘½ä»¤å³ä½¿æ‰§è¡Œå¤±è´¥ï¼Œè„šæœ¬ä¹Ÿä¸ä¼šç»ˆæ­¢æ‰§è¡Œ  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line">foo || <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span> bar</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œtrueä½¿å¾—è¿™ä¸€è¡Œè¯­å¥æ€»æ˜¯ä¼šæ‰§è¡ŒæˆåŠŸï¼Œåé¢çš„echo barä¼šæ‰§è¡Œã€‚  </p>
<p><strong>set -o pipefail</strong><br><code>set -e</code>æœ‰ä¸€ä¸ªä¾‹å¤–æƒ…å†µï¼Œå°±æ˜¯ä¸é€‚ç”¨äºç®¡é“å‘½ä»¤ã€‚<br>æ‰€è°“ç®¡é“å‘½ä»¤ï¼Œå°±æ˜¯å¤šä¸ªå­å‘½ä»¤é€šè¿‡ç®¡é“è¿ç®—ç¬¦<code>|</code>ç»„åˆæˆä¸ºä¸€ä¸ªå¤§çš„å‘½ä»¤ã€‚Bash ä¼šæŠŠæœ€åä¸€ä¸ªå­å‘½ä»¤çš„è¿”å›å€¼ï¼Œä½œä¸ºæ•´ä¸ªå‘½ä»¤çš„è¿”å›å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æœ€åä¸€ä¸ªå­å‘½ä»¤ä¸å¤±è´¥ï¼Œç®¡é“å‘½ä»¤æ€»æ˜¯ä¼šæ‰§è¡ŒæˆåŠŸï¼Œå› æ­¤å®ƒåé¢å‘½ä»¤ä¾ç„¶ä¼šæ‰§è¡Œï¼Œ<code>set -e</code>å°±å¤±æ•ˆäº†ã€‚<br><code>set -o pipefail</code>ç”¨æ¥è§£å†³è¿™ç§æƒ…å†µï¼Œåªè¦ä¸€ä¸ªå­å‘½ä»¤å¤±è´¥ï¼Œæ•´ä¸ªç®¡é“å‘½ä»¤å°±å¤±è´¥ï¼Œè„šæœ¬å°±ä¼šç»ˆæ­¢æ‰§è¡Œã€‚  </p>
<p><strong>set -E</strong><br>ä¸€æ—¦è®¾ç½®äº†<code>-e</code>å‚æ•°ï¼Œä¼šå¯¼è‡´å‡½æ•°å†…çš„é”™è¯¯ä¸ä¼šè¢«<code>trap</code>å‘½ä»¤æ•è·ã€‚<br><code>-E</code>å‚æ•°å¯ä»¥çº æ­£è¿™ä¸ªè¡Œä¸ºï¼Œä½¿å¾—å‡½æ•°ä¹Ÿèƒ½ç»§æ‰¿<code>trap</code>å‘½ä»¤ã€‚  </p>
<p><strong>å…¶ä»–å‚æ•°</strong>  </p>
<p><code>set</code>å‘½ä»¤æ€»ç»“ï¼š<br>ä¸Šé¢é‡ç‚¹ä»‹ç»çš„<code>set</code>å‘½ä»¤çš„å‡ ä¸ªå‚æ•°ï¼Œä¸€èˆ¬éƒ½æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -Eeuxo pipefail</span><br></pre></td></tr></tbody></table></figure>
<p>å»ºè®®æ”¾åœ¨æ‰€æœ‰Bashè„šæœ¬çš„å¤´éƒ¨ã€‚  </p>
<p><code>shopt</code>å‘½ä»¤<br><code>shopt</code>å‘½ä»¤ç”¨æ¥è°ƒæ•´ Shell çš„å‚æ•°ï¼Œè·Ÿ<code>set</code>å‘½ä»¤çš„ä½œç”¨å¾ˆç±»ä¼¼ã€‚<br><code>shopt</code>å‘½ä»¤åé¢è·Ÿç€å‚æ•°åï¼Œå¯ä»¥æŸ¥è¯¢è¯¥å‚æ•°æ˜¯å¦æ‰“å¼€ã€‚<br><code>shopt</code>å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">shopt</span> -s [optionname] <span class="comment">#æ‰“å¼€æŸä¸ªå‚æ•°</span></span><br><span class="line">$ <span class="built_in">shopt</span> -u [optionname] <span class="comment">#å…³é—­æŸä¸ªå‚æ•°</span></span><br><span class="line">$ <span class="built_in">shopt</span> [optionname] <span class="comment">#æŸ¥è¯¢æŸä¸ªå‚æ•°å…³é—­è¿˜æ˜¯æ‰“å¼€</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨ç®¡é“å°†ä¸€ä¸ªå‘½ä»¤çš„<code>stdout</code>(æ ‡å‡†è¾“å‡º)é‡å®šå‘åˆ°å¦ä¸€ä¸ªå‘½ä»¤çš„<code>stdin</code>(æ ‡å‡†è¾“å…¥)ã€‚ä¾‹å¦‚ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">cat foo.txt | grep <span class="string">"test"</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä½†æ˜¯ï¼Œæœ‰äº›å‘½ä»¤åªèƒ½ä»¥å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œè€Œæ— æ³•é€šè¿‡<code>stdin</code>æ¥å—æ•°æ®æµã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æ³•ç”¨ç®¡é“æ¥æä¾›é‚£äº›åªæœ‰é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ‰èƒ½æä¾›çš„æ•°æ®ã€‚  </p>
<p><code>xargs</code>èƒ½å¤Ÿå¤„ç†<code>stdin</code>å¹¶å°†å…¶è½¬æ¢ä¸ºç‰¹å®šå‘½ä»¤çš„å‘½ä»¤è¡Œå‚æ•°ï¼›<code>xargs</code>ä¹Ÿå¯ä»¥å°†å•è¡Œæˆ–å¤šè¡Œæ–‡æœ¬è¾“å…¥è½¬æ¢æˆå…¶ä»–æ ¼å¼ï¼Œä¾‹å¦‚å•è¡Œå˜å¤šè¡Œæˆ–æ˜¯å¤šè¡Œå˜å•è¡Œã€‚  </p>
<p><code>-d</code>: ä¸ºè¾“å…¥æŒ‡å®šä¸€ä¸ªå®šåˆ¶çš„å®šç•Œç¬¦ã€‚<br><code>-n</code>: æŒ‡å®šæ¯è¡Œæœ€å¤§çš„å‚æ•°æ•°é‡ã€‚<br><code>-I</code>: æŒ‡å®šä¸€ä¸ªæ›¿æ¢å­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸€ä¸ªå‚æ•°ï¼Œå‘½ä»¤éƒ½ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚  </p>
<p>ä¾‹å­1ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"splitXsplitXsplitXsplit"</span> | xargs -d X  </span><br><span class="line">split split split split  </span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"splitXsplitXsplitXsplit"</span> | xargs -d X -n 2  </span><br><span class="line">split split  </span><br><span class="line">split split  </span><br><span class="line">$</span><br></pre></td></tr></tbody></table></figure>

<p>ä¾‹å­2ï¼š<br>æœ‰ä¸€ä¸ªcecho.shè„šæœ¬ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#æ–‡ä»¶åï¼šcecho.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> $*<span class="string">'#'</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ‰ä¸€ä¸ªargs.txtæ–‡ä»¶ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat args.txt  </span><br><span class="line">arg1  </span><br><span class="line">arg2  </span><br><span class="line">arg3  </span><br></pre></td></tr></tbody></table></figure>

<p>è¯•è¯•å¦‚ä¸‹ç”¨æ³•ï¼š  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat args.txt | xargs -I {} ./cecho.sh -p {} -l  </span><br><span class="line">-p arg1 -l <span class="comment">#  </span></span><br><span class="line">-p arg2 -l <span class="comment">#  </span></span><br><span class="line">-p arg3 -l <span class="comment">#  </span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><p><code>less</code> - æµè§ˆæ–‡ä»¶å†…å®¹<br><code>which</code> - æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„<br><code>whereis</code> - æŸ¥æ‰¾å‘½ä»¤ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€manæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶<br><code>wc</code> - æ‰“å°è¡Œæ•°ã€å­—æ•°å’Œå­—èŠ‚æ•°<br><code>diff/patch</code>    </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ diff -Naur old_file new_file &gt; diff_file  </span><br><span class="line">$ patch &lt; diff_file  </span><br></pre></td></tr></tbody></table></figure>

<p><code>history</code> - æ˜¾ç¤ºå†å²åˆ—è¡¨å†…å®¹<br><code>df</code> - æ˜¾ç¤ºç£ç›˜åˆ†åŒºä¸Šå¯ä»¥ä½¿ç”¨çš„ç£ç›˜ç©ºé—´<br><code>du</code> - æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶å’Œç›®å½•çš„ç£ç›˜ä½¿ç”¨ç©ºé—´<br><code>free</code> - æ˜¾ç¤ºå†…å­˜<br><code>file</code> - è¯†åˆ«æ–‡ä»¶ç±»å‹<br><code>sort</code> - æ’åºæ–‡æœ¬è¡Œ<br><code>uniq</code> - æŠ¥é“æˆ–çœç•¥é‡å¤è¡Œ<br><code>cut</code> - ä»æ¯è¡Œä¸­åˆ é™¤æ–‡æœ¬åŒºåŸŸ<br><code>paste</code> - åˆå¹¶æ–‡ä»¶æ–‡æœ¬è¡Œ<br><code>join</code> - åŸºäºæŸä¸ªå…±äº«å­—æ®µæ¥è”åˆä¸¤ä¸ªæ–‡ä»¶çš„æ–‡æœ¬è¡Œ<br><code>comm</code> - é€è¡Œæ¯”è¾ƒä¸¤ä¸ªæœ‰åºçš„æ–‡ä»¶<br><code>tr</code> - ç¿»è¯‘æˆ–åˆ é™¤å­—ç¬¦<br><code>grep</code> - æ‰“å°åŒ¹é…è¡Œ<br><code>ln file link</code> - åˆ›å»ºç¡¬é“¾æ¥<br><code>ln -s item link</code> - åˆ›å»ºé“¾æ¥ç¬¦å·ï¼Œitemå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–æ˜¯ä¸€ä¸ªç›®å½•<br>    å½“ä½ åˆ é™¤ä¸€ä¸ªç¬¦å·é“¾æ¥æ—¶ï¼Œåªæœ‰è¿™ä¸ªé“¾æ¥è¢«åˆ é™¤ï¼Œè€Œä¸æ˜¯æ–‡ä»¶è‡ªèº«ã€‚å¦‚æœå…ˆäºç¬¦å·é“¾æ¥åˆ é™¤æ–‡ä»¶ï¼Œè¿™ä¸ªé“¾æ¥ä»ç„¶å­˜åœ¨ï¼Œä½†æ˜¯ä¸æŒ‡å‘ä»»ä½•ä¸œè¥¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé“¾æ¥è¢«ç§°ä¸ºåé“¾æ¥ã€‚åœ¨è®¸å¤šå®ç°ä¸­ï¼Œ <code>ls</code>å‘½ä»¤ä¼šä»¥ä¸åŒçš„é¢œè‰²å±•ç¤ºåé“¾æ¥ï¼Œæ¯”å¦‚è¯´çº¢è‰²ï¼Œæ¥æ˜¾ç¤ºå®ƒä»¬çš„å­˜åœ¨ã€‚<br>    å½“å»ºç«‹ç¬¦å·é“¾æ¥æ—¶ï¼Œä½ æ—¢å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„åï¼Œä¹Ÿå¯ç”¨ç›¸å¯¹è·¯å¾„åã€‚<br>    ä¸åŒç›®å½•ï¼Œåˆ›å»ºé“¾æ¥ç¬¦å·éœ€è¦ç»å¯¹åœ°å€ï¼Œå¦åˆ™ä¹Ÿæ˜¯åé“¾æ¥ï¼Œä¼šæç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶ã€‚<br><code>rsync</code> - å¤‡ä»½/åŒæ­¥<br><code>time</code> - è®¡ç®—å‘½ä»¤æ‰§è¡Œæ—¶é—´<br><code>find</code> - åœ¨ä¸€ä¸ªç›®å½•å±‚æ¬¡ç»“æ„ä¸­æœç´¢æ–‡ä»¶<br><code>touch</code> - æ›´æ”¹æ–‡ä»¶æ—¶é—´<br><code>stat</code> - æ˜¾ç¤ºæ–‡ä»¶æˆ–æ–‡ä»¶ç³»ç»ŸçŠ¶æ€<br><code>alias</code> - åˆ«å  </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> install=<span class="string">'sudo apt-get install'</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>date</code> - è·å–ã€è®¾ç½®æ—¥æœŸ<br><code>sleep</code> - å»¶æ—¶  </p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ol>
<li><a href="https://bbs.csdn.net/topics/394186543">[Linuxèµ„è®¯] Cshell æ€æ ·å®ç°å˜é‡ååŒ…å«å˜é‡åï¼Ÿ</a></li>
</ol>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><a href="https://man.linuxde.net/">Linuxå‘½ä»¤å¤§å…¨</a>  </li>
<li><a href="https://www.linuxcool.com/pronunciation">ä¸­å›½ç¨‹åºå‘˜æœ€å®¹æ˜“è¯»é”™çš„å•è¯æ±‡æ€»ï¼ˆå¸¦æ­£ç¡®å‘éŸ³ç¤ºèŒƒï¼‰</a>  </li>
<li><a href="https://blog.csdn.net/ljlfather/article/details/105106875">Bash Shell ä¸­çš„ ç®—æœ¯è¿ç®—ç¬¦ã€é€»è¾‘ä¸æˆ–é(&amp; | ï¼)è¿ç®—ç¬¦ã€æ•´æ•°å…³ç³»è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²å…³ç³»è¿ç®—ç¬¦ã€æ–‡ä»¶æˆ–ç›®å½•æµ‹è¯•è¿ç®—ç¬¦</a></li>
</ol>
]]></content>
      <categories>
        <category>Coding</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>script</tag>
        <tag>bash</tag>
      </tags>
  </entry>
</search>
